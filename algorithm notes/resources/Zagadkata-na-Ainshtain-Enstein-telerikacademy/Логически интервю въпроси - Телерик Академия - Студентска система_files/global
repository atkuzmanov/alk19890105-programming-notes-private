function htmlEditorShow(n){kendoEditorShow(n)}function kendoEditorShow(n){$("#"+n).css("height","400px").kendoEditor({tools:["bold","italic","underline","strikethrough","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","indent","outdent","createLink","unlink","insertImage","insertFile","subscript","superscript","createTable","addRowAbove","addRowBelow","addColumnLeft","addColumnRight","deleteRow","deleteColumn","viewHtml","formatting","cleanFormatting","fontName","fontSize","foreColor","backColor"]})}function showDatePicker(n,t,i){var r=$("#"+n).val();$("#"+n).kendoDatePicker({format:"dd/MM/yyyy",start:"century",depth:"month",min:new Date(t,0,1),max:new Date(i,0,1),value:new Date(t,0,1)});r=="01/01/1900"&&(r="");r=="01/01/0001"&&(r="");$("#"+n).val(r);$("#"+n).click(function(){$(this).data("kendoDatePicker").open()})}function showDateTimePicker(n){for(var t=$("#"+n).val(),i=[new Date(2013,02,11,8)],u=8,r=9;r<=40;r++)r%2==0?i[r-8]=new Date(0,0,0,u,0,0,0):(i[r-8]=new Date(0,0,0,u,30,0),u++);i[32]=new Date(0,0,0,23,59,59);i[33]=new Date(0,0,0,0,0,0);$("#"+n).kendoDateTimePicker({parseFormats:["MMMM yyyy","HH:mm"],format:"dd/MM/yyyy HH:mm:ss",timeFormat:"HH:mm:ss",start:"month",depth:"month",width:"1000px",dates:i});t=="01/01/1900"&&(t="");t=="01/01/0001"&&(t="");$("#"+n).val(t);$("#"+n).on("click",function(){$(this).data("kendoDateTimePicker").open()})}function showTimePicker(n){$("#"+n).kendoTimePicker({format:"HH:mm:ss"});$("#"+n).click(function(){$(this).data("kendoTimePicker").open()})}function showDropDownList(n){$("#"+n).kendoDropDownList({dataTextField:"text",dataValueField:"value"})}function displayAllValidationMessagesForGrid(n){return function(t){var u,f,i,e,o,r,s;if(t.errors){u=$("#"+n).data("kendoGrid");f=t.errors;for(i in f)if(i=="alert"||i==""){for(e="Грешки:",o=f[i].errors,r=0,s=o.length;r<s;r++)e+="\n"+o[r];alert(e);this.cancelChanges()}u.one("dataBinding",function(n){n.preventDefault();$.each(t.errors,function(n){showValidationMessageTemplateForPopUpEditing(u.editable.element,n,this.errors)})})}}}function showValidationMessageTemplateForPopUpEditing(n,t,i){var r=kendo.template($("#validationMessageTemplateForPopUpEditing").html());n.find("[data-valmsg-for="+t+"],[data-val-msg-for="+t+"]").replaceWith(r({field:t,message:i[0]}))}function countMaxConsecutiveCharacters(n){for(var i=0,t=0,r=0;r<n.length;r++)n[r]!==" "?(t++,t>i&&(i=t)):t=0;return i}(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):n(jQuery)})(function(n){function u(){var t=f(this);return isNaN(t.datetime)||n(this).text(i(t.datetime)),this}function f(i){if(i=n(i),!i.data("timeago")){i.data("timeago",{datetime:t.datetime(i)});var r=n.trim(i.text());r.length>0&&!(t.isTime(i)&&i.attr("title"))&&i.attr("title",r)}return i.data("timeago")}function i(n){return t.inWords(e(n))}function e(n){return(new Date).getTime()-n.getTime()}var t,r;n.timeago=function(t){return t instanceof Date?i(t):typeof t=="string"?i(n.timeago.parse(t)):typeof t=="number"?i(new Date(t)):i(n.timeago.datetime(t))};t=n.timeago;n.extend(n.timeago,{settings:{refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(t){function r(r,u){var f=n.isFunction(r)?r(u,t):r,e=i.numbers&&i.numbers[u]||u;return f.replace(/%d/i,e)}var i=this.settings.strings,h=i.prefixAgo,c=i.suffixAgo,a,s;this.settings.allowFuture&&t<0&&(h=i.prefixFromNow,c=i.suffixFromNow);var f=Math.abs(t)/1e3,e=f/60,o=e/60,u=o/24,l=u/365;return a=f<45&&r(i.seconds,Math.round(f))||f<90&&r(i.minute,1)||e<45&&r(i.minutes,Math.round(e))||e<90&&r(i.hour,1)||o<24&&r(i.hours,Math.round(o))||o<42&&r(i.day,1)||u<30&&r(i.days,Math.round(u))||u<45&&r(i.month,1)||u<365&&r(i.months,Math.round(u/30))||l<1.5&&r(i.year,1)||r(i.years,Math.round(l)),s=i.wordSeparator||"",i.wordSeparator===undefined&&(s=" "),n.trim([h,a,c].join(s))},parse:function(t){var i=n.trim(t);return i=i.replace(/\.\d+/,""),i=i.replace(/-/,"/").replace(/-/,"/"),i=i.replace(/T/," ").replace(/Z/," UTC"),i=i.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(i)},datetime:function(i){var r=t.isTime(i)?n(i).attr("datetime"):n(i).attr("title");return t.parse(r)},isTime:function(t){return n(t).get(0).tagName.toLowerCase()==="time"}});r={init:function(){var r=n.proxy(u,this),i;r();i=t.settings;i.refreshMillis>0&&setInterval(r,i.refreshMillis)},update:function(i){n(this).data("timeago",{datetime:t.parse(i)});u.apply(this)}};n.fn.timeago=function(n,t){var i=n?r[n]:r.init;if(!i)throw new Error("Unknown function name '"+n+"' for timeago");return this.each(function(){i.call(this,t)}),this};document.createElement("abbr");document.createElement("time")});jQuery.timeago.settings.strings={prefixAgo:"преди",prefixFromNow:"след",suffixAgo:null,suffixFromNow:null,seconds:"по-малко от минута",minute:"една минута",minutes:"%d минути",hour:"един час",hours:"%d часа",day:"един ден",days:"%d дни",month:"един месец",months:"%d месеца",year:"една година",years:"%d години"};!function(n,t){function it(t){var i=f(),tt=i.querySelector("h2"),g=i.querySelector("p"),a=i.querySelector("button.cancel"),v=i.querySelector("button.confirm"),w,o,u,e,b,k,s,l,nt;if(tt.innerHTML=h(t.title).split("\n").join("<br>"),g.innerHTML=h(t.text||"").split("\n").join("<br>"),t.text&&c(g),d(i.querySelectorAll(".icon")),t.type){for(w=!1,o=0;o<p.length;o++)if(t.type===p[o]){w=!0;break}if(!w)return n.console.error("Unknown alert type: "+t.type),!1;u=i.querySelector(".icon."+t.type);switch(c(u),t.type){case"success":r(u,"animate");r(u.querySelector(".tip"),"animateSuccessTip");r(u.querySelector(".long"),"animateSuccessLong");break;case"error":r(u,"animateErrorIcon");r(u.querySelector(".x-mark"),"animateXMark");break;case"warning":r(u,"pulseWarning");r(u.querySelector(".body"),"pulseWarningIns");r(u.querySelector(".dot"),"pulseWarningIns")}}t.imageUrl&&(e=i.querySelector(".icon.custom"),e.style.backgroundImage="url("+t.imageUrl+")",c(e),b=80,k=80,t.imageSize&&(s=t.imageSize.split("x")[0],l=t.imageSize.split("x")[1],s&&l?(b=s,k=l,e.css({width:s+"px",height:l+"px"})):n.console.error("Parameter imageSize expects value with format WIDTHxHEIGHT, got "+t.imageSize)),e.setAttribute("style",e.getAttribute("style")+"width:"+b+"px; height:"+k+"px"));i.setAttribute("data-has-cancel-button",t.showCancelButton);t.showCancelButton?a.style.display="inline-block":d(a);t.cancelButtonText&&(a.innerHTML=h(t.cancelButtonText));t.confirmButtonText&&(v.innerHTML=h(t.confirmButtonText));v.style.backgroundColor=t.confirmButtonColor;y(v,t.confirmButtonColor);i.setAttribute("data-allow-ouside-click",t.allowOutsideClick);nt=t.doneFunction?!0:!1;i.setAttribute("data-has-done-function",nt);i.setAttribute("data-timer",t.timer)}function l(n,t){n=String(n).replace(/[^0-9a-f]/gi,"");n.length<6&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]);t=t||0;for(var u="#",i,r=0;3>r;r++)i=parseInt(n.substr(2*r,2),16),i=Math.round(Math.min(Math.max(0,i+i*t),255)).toString(16),u+=("00"+i).substr(i.length);return u}function v(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}function rt(n){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return t?parseInt(t[1],16)+", "+parseInt(t[2],16)+", "+parseInt(t[3],16):null}function y(n,t){var i=rt(t);n.style.boxShadow="0 0 2px rgba("+i+", 0.8), inset 0 0 0 1px rgba(0, 0, 0, 0.05)"}function ut(){var n=f(),o,i;ct(w(),10);c(n);r(n,"showSweetAlert");u(n,"hideSweetAlert");a=t.activeElement;o=n.querySelector("button.confirm");o.focus();setTimeout(function(){r(n,"visible")},500);i=n.getAttribute("data-timer");"null"!==i&&""!==i&&(n.timeout=setTimeout(function(){e()},i))}function e(){var i=f(),e,h,o;g(w(),5);g(i,5);u(i,"showSweetAlert");r(i,"hideSweetAlert");u(i,"visible");e=i.querySelector(".icon.success");u(e,"animate");u(e.querySelector(".tip"),"animateSuccessTip");u(e.querySelector(".long"),"animateSuccessLong");h=i.querySelector(".icon.error");u(h,"animateErrorIcon");u(h.querySelector(".x-mark"),"animateXMark");o=i.querySelector(".icon.warning");u(o,"pulseWarning");u(o.querySelector(".body"),"pulseWarningIns");u(o.querySelector(".dot"),"pulseWarningIns");n.onkeydown=tt;t.onclick=nt;a&&a.focus();s=void 0;clearTimeout(i.timeout)}function ft(){var n=f();n.style.marginTop=ht(f())}var et=".sweet-alert",ot=".sweet-overlay",p=["error","warning","info","success"],i={title:"",text:"",type:null,allowOutsideClick:!1,showCancelButton:!1,closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",confirmButtonColor:"#AEDEF4",cancelButtonText:"Cancel",imageUrl:null,imageSize:null,timer:null},f=function(){return t.querySelector(et)},w=function(){return t.querySelector(ot)},o=function(n,t){return new RegExp(" "+t+" ").test(" "+n.className+" ")},r=function(n,t){o(n,t)||(n.className+=" "+t)},u=function(n,t){var i=" "+n.className.replace(/[\t\r\n]/g," ")+" ";if(o(n,t)){for(;i.indexOf(" "+t+" ")>=0;)i=i.replace(" "+t+" "," ");n.className=i.replace(/^\s+|\s+$/g,"")}},h=function(n){var i=t.createElement("div");return i.appendChild(t.createTextNode(n)),i.innerHTML},b=function(n){n.style.opacity="";n.style.display="block"},c=function(n){if(n&&!n.length)return b(n);for(var t=0;t<n.length;++t)b(n[t])},k=function(n){n.style.opacity="";n.style.display="none"},d=function(n){if(n&&!n.length)return k(n);for(var t=0;t<n.length;++t)k(n[t])},st=function(n,t){for(var i=t.parentNode;null!==i;){if(i===n)return!0;i=i.parentNode}return!1},ht=function(n){n.style.left="-9999px";n.style.display="block";var i=n.clientHeight,t;return t="undefined"!=typeof getComputedStyle?parseInt(getComputedStyle(n).getPropertyValue("padding"),10):parseInt(n.currentStyle.padding),n.style.left="",n.style.display="none","-"+parseInt(i/2+t)+"px"},ct=function(n,t){if(+n.style.opacity<1){t=t||16;n.style.opacity=0;n.style.display="block";var i=+new Date,r=function(){n.style.opacity=+n.style.opacity+(new Date-i)/100;i=+new Date;+n.style.opacity<1&&setTimeout(r,t)};r()}n.style.display="block"},g=function(n,t){t=t||16;n.style.opacity=1;var i=+new Date,r=function(){n.style.opacity=+n.style.opacity-(new Date-i)/100;i=+new Date;+n.style.opacity>0?setTimeout(r,t):n.style.display="none"};r()},lt=function(i){var u,r;MouseEvent?(u=new MouseEvent("click",{view:n,bubbles:!1,cancelable:!0}),i.dispatchEvent(u)):t.createEvent?(r=t.createEvent("MouseEvents"),r.initEvent("click",!1,!1),i.dispatchEvent(r)):t.createEventObject?i.fireEvent("onclick"):"function"==typeof i.onclick&&i.onclick()},at=function(t){"function"==typeof t.stopPropagation?(t.stopPropagation(),t.preventDefault()):n.event&&n.event.hasOwnProperty("cancelBubble")&&(n.event.cancelBubble=!0)},a,nt,tt,s;n.sweetAlertInitialize=function(){var n=t.createElement("div");n.innerHTML='<div class="sweet-overlay" tabIndex="-1"><\/div><div class="sweet-alert" tabIndex="-1"><div class="icon error"><span class="x-mark"><span class="line left"><\/span><span class="line right"><\/span><\/span><\/div><div class="icon warning"> <span class="body"><\/span> <span class="dot"><\/span> <\/div> <div class="icon info"><\/div> <div class="icon success"> <span class="line tip"><\/span> <span class="line long"><\/span> <div class="placeholder"><\/div> <div class="fix"><\/div> <\/div> <div class="icon custom"><\/div> <h2>Title<\/h2><p>Text<\/p><button class="cancel" tabIndex="2">Cancel<\/button><button class="confirm" tabIndex="1">OK<\/button><\/div>';t.body.appendChild(n)};n.sweetAlert=n.swal=function(){function d(t){var u=t||n.event,f=u.keyCode||u.which;if(-1!==[9,13,32,27].indexOf(f)){for(var i=u.target||u.srcElement,e=-1,o=0;o<c.length;o++)if(i===c[o]){e=o;break}9===f?(i=-1===e?b:e===c.length-1?c[0]:c[e+1],at(u),i.focus(),y(i,r.confirmButtonColor)):(i=13===f||32===f?-1===e?b:void 0:27!==f||w.hidden||"none"===w.style.display?void 0:w,void 0!==i&&lt(i,u))}}function k(t){var r=t||n.event,e=r.target||r.srcElement,h=r.relatedTarget,l=o(u,"visible"),f,i;if(l)if(f=-1,null!==h){for(i=0;i<c.length;i++)if(h===c[i]){f=i;break}-1===f&&e.focus()}else s=e}var r;if(void 0===arguments[0])return n.console.error("sweetAlert expects at least 1 attribute!"),!1;r=v({},i);switch(typeof arguments[0]){case"string":r.title=arguments[0];r.text=arguments[1]||"";r.type=arguments[2]||"";break;case"object":if(void 0===arguments[0].title)return n.console.error('Missing "title" argument!'),!1;r.title=arguments[0].title;r.text=arguments[0].text||i.text;r.type=arguments[0].type||i.type;r.allowOutsideClick=arguments[0].allowOutsideClick||i.allowOutsideClick;r.showCancelButton=void 0!==arguments[0].showCancelButton?arguments[0].showCancelButton:i.showCancelButton;r.closeOnConfirm=void 0!==arguments[0].closeOnConfirm?arguments[0].closeOnConfirm:i.closeOnConfirm;r.closeOnCancel=void 0!==arguments[0].closeOnCancel?arguments[0].closeOnCancel:i.closeOnCancel;r.timer=arguments[0].timer||i.timer;r.confirmButtonText=i.showCancelButton?"Confirm":i.confirmButtonText;r.confirmButtonText=arguments[0].confirmButtonText||i.confirmButtonText;r.confirmButtonColor=arguments[0].confirmButtonColor||i.confirmButtonColor;r.cancelButtonText=arguments[0].cancelButtonText||i.cancelButtonText;r.imageUrl=arguments[0].imageUrl||i.imageUrl;r.imageSize=arguments[0].imageSize||i.imageSize;r.doneFunction=arguments[1]||null;break;default:return n.console.error('Unexpected type of argument! Expected "string" or "object", got '+typeof arguments[0]),!1}it(r);ft();ut();for(var u=f(),p=function(t){var s=t||n.event,f=s.target||s.srcElement,i="confirm"===f.className,c=o(u,"visible"),a=r.doneFunction&&"true"===u.getAttribute("data-has-done-function"),v,y,h,p;switch(s.type){case"mouseover":i&&(f.style.backgroundColor=l(r.confirmButtonColor,-.04));break;case"mouseout":i&&(f.style.backgroundColor=r.confirmButtonColor);break;case"mousedown":i&&(f.style.backgroundColor=l(r.confirmButtonColor,-.14));break;case"mouseup":i&&(f.style.backgroundColor=l(r.confirmButtonColor,-.04));break;case"focus":v=u.querySelector("button.confirm");y=u.querySelector("button.cancel");i?y.style.boxShadow="none":v.style.boxShadow="none";break;case"click":i&&a&&c?(r.doneFunction(!0),r.closeOnConfirm&&e()):a&&c?(h=String(r.doneFunction).replace(/\s/g,""),p="function("===h.substring(0,9)&&")"!==h.substring(9,10),p&&r.doneFunction(!1),r.closeOnCancel&&e()):e()}},a=u.querySelectorAll("button"),h=0;h<a.length;h++)a[h].onclick=p,a[h].onmouseover=p,a[h].onmouseout=p,a[h].onmousedown=p,a[h].onfocus=p;nt=t.onclick;t.onclick=function(t){var i=t||n.event,r=i.target||i.srcElement,f=u===r,s=st(u,r),h=o(u,"visible"),c="true"===u.getAttribute("data-allow-ouside-click");!f&&!s&&h&&c&&e()};var b=u.querySelector("button.confirm"),w=u.querySelector("button.cancel"),c=u.querySelectorAll("button:not([type=hidden])");tt=n.onkeydown;n.onkeydown=d;b.onblur=k;w.onblur=k;n.onfocus=function(){n.setTimeout(function(){void 0!==s&&(s.focus(),s=void 0)},0)}};n.swal.setDefaults=function(n){if(!n)throw new Error("userParams is required");if("object"!=typeof n)throw new Error("userParams has to be a object");v(i,n)},function(){"complete"===t.readyState||"interactive"===t.readyState&&t.body?n.sweetAlertInitialize():t.addEventListener?t.addEventListener("DOMContentLoaded",function(){t.removeEventListener("DOMContentLoaded",arguments.callee,!1);n.sweetAlertInitialize()},!1):t.attachEvent&&t.attachEvent("onreadystatechange",function(){"complete"===t.readyState&&(t.detachEvent("onreadystatechange",arguments.callee),n.sweetAlertInitialize())})}()}(window,document);$(document).ready(function(){function n(){var n=$(window).width();$("#Menu").kendoMenu().data("kendoMenu").destroy();n<=i?$("#Menu").kendoMenu({openOnClick:!0,closeOnClick:!0}):$("#Menu").kendoMenu();$("#Menu").show()}var i=991,t;kendo.culture("en-GB");n();$(window).resize(function(){n()});$(".noJavascriptMenu").removeClass("noJavascriptMenu");$(".userPanel").on("mouseenter",".menuIcon",function(n){n.preventDefault();var i=$(this);t=setTimeout(function(){i.children(".name").fadeIn()},500)});$(".userPanel").on("mouseleave",".menuIcon",function(n){n.preventDefault();clearTimeout(t);$(this).children(".name").css("display","none")});jQuery("time.timeago").timeago();$("#MainContainer a").each(function(){var n=new RegExp("/"+window.location.host+"/");!n.test(this.href)&&this.href&&this.href!="#"&&$(this).click(function(n){n.preventDefault();n.stopPropagation();window.open(this.href,"_blank")})});$("#MainHeader").on("click",function(){document.location.href="/"})});$(document).ready(function(){function n(){var n=$.trim($("#SearchTerm").val());if(n.length===0){$("div#SearchSuggestions").hide("slow");$("div#SearchSuggestions").html("");return}if(countMaxConsecutiveCharacters(n)<3){$("div#SearchSuggestions").html("");$("div#SearchSuggestions").append("<h6 class='SearchSuggestionNoResultsHeading'>Въведете поне 3 поредни символа<\/h6>");$("div#SearchSuggestions").show("slow");return}$.get("/Search/Results",{search:n},function(t){$("div#SearchSuggestions").html(t);$("div#SearchSuggestions").show("slow");$("#SearchSuggestionSeeAllResultsLink").attr("href","/Search/Results?search="+n)})}function t(){var n=$.trim($("#SearchTermMobile").val());if(n.length===0){$("div#SearchSuggestionsMobile").hide("slow");$("div#SearchSuggestionsMobile").html("");return}if(countMaxConsecutiveCharacters(n)<3){$("div#SearchSuggestionsMobile").html("");$("div#SearchSuggestionsMobile").append("<h6 class='SearchSuggestionNoResultsHeading'>Въведете поне 3 поредни символа<\/h6>");$("div#SearchSuggestionsMobile").show("slow");return}$.get("/Search/Results",{search:n},function(t){$("div#SearchSuggestionsMobile").html(t);$("div#SearchSuggestionsMobile").show("slow");$("#SearchSuggestionSeeAllResultsLink").attr("href","/Search/Results?search="+n)})}$("#SearchTerm").keyup(function(t){clearTimeout($.data(this,"timer"));t.keyCode===13?n():$(this).data("timer",setTimeout(n,500))});$("#Search").on("submit",function(n){var t=$.trim($("#SearchTerm").val()),i=countMaxConsecutiveCharacters(t);i<3&&n.preventDefault()});$("#SearchTerm").on("focusout",function(){$("div#SearchSuggestions").delay(200).hide("slow")});$("#SearchTerm").on("focusin",function(){$("div#SearchSuggestions").html()&&$("div#SearchSuggestions").show("slow")});$("#SearchTermMobile").keyup(function(n){clearTimeout($.data(this,"timer"));n.keyCode===13?t():$(this).data("timer",setTimeout(t,500))});$("#SearchMobile").on("submit",function(n){var t=$.trim($("#SearchTermMobile").val()),i=countMaxConsecutiveCharacters(t);i<3&&n.preventDefault()});$("#SearchTermMobile").on("focusout",function(){$("div#SearchSuggestionsMobile").delay(200).hide("slow")});$("#SearchTermMobile").on("focusin",function(){$("div#SearchSuggestionsMobile").html()&&$("div#SearchSuggestionsMobile").show("slow")})})