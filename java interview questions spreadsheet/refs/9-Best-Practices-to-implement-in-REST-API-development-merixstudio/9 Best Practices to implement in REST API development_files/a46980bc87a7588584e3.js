(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{114:function(t,i,e){"use strict";e.r(i),e.d(i,"RainSection",(function(){return c}));e(62),e(55);var s=e(117);function n(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);i&&(s=s.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,s)}return e}function h(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}const r={gravity:.25,wind:.25,windDirection:-1,rainIntensity:.75,rainLength:2,brightenStep:.01};class o{constructor(t=0,i=0){this.x=t,this.y=i}add(t){return null!=t.x&&null!=t.y?(this.x+=t.x,this.y+=t.y):(this.x+=t,this.y+=t),this}copy(){return new o(this.x,this.y)}}class a{constructor(t,i,e,s,n=0){this.world=e,this.index=n+1;const h=2+6*Math.random(),r=Math.PI+Math.random()*Math.PI;this.pos=new o(t,i),this.vel=new o(Math.cos(r)*h,Math.sin(r)*h),this.opacity=s,this.rgb="255, 78, 0"}_r(t){return Math.floor(Math.random()*t)}_setOpacity(t){return"rgba(".concat(this.rgb,", ").concat(t,")")}update(){this.color=this._setOpacity(this.opacity),this.opacity*=.97,this.vel.y+=this.world.gravity,this.vel.x*=.9,this.vel.y*=.9,this.pos.add(this.vel)}draw(t){t.fillStyle=this.color,t.beginPath(),t.arc(this.pos.x,this.pos.y,1,0,2*Math.PI),t.fill()}}class l{constructor(t,i){const e=Math.random()*(t.width+2*t.height)-t.height;this.pos=new o(e,-50),this.world=i,this.prev=this.pos,this.prevs=[],this.vel=new o,this.depths=[.25,.5,1],this.depth=this.depths[Math.floor(10*Math.random())%this.depths.length],this.stroke="rgba(255, 78, 0, ".concat(this.depth,")"),this.delay=i.rainLength}update(){this.prevs.push(this.pos.copy()),this.prevs.splice(0,Math.max(0,this.prevs.length-this.delay)),this.vel.y+=this.world.gravity*this.depth,this.vel.x+=this.world.wind*this.world.windDirection*this.depth,this.pos.add(this.vel),this.prev=this.prevs[0]}draw(t){t.strokeStyle=this.stroke,t.beginPath(),t.moveTo(this.pos.x,this.pos.y),t.lineTo(this.prev.x,this.prev.y),t.stroke()}}class c{constructor(t){this.element=t,this.blockName=t.getAttribute("rain-section"),this.brightenTrigger=t.querySelector("[brightenTrigger]"),this.colliders=Array.from(t.querySelectorAll("[collider]")),this.elementRect=t.getBoundingClientRect(),this.triggerRect=this.brightenTrigger&&this.brightenTrigger.getBoundingClientRect(),this.controlFPS=!1,this.fpsInterval=1e3/12,this.startTime=null,this.now=null,this.then=null,this.elapsed=null,this.stop=null,this.requestId=null,this.resizeTimeout=null,this.onKeyup=this._onKeyup.bind(this),this.onScroll=this._onScroll.bind(this),this.onResize=this._onResize.bind(this),this.onClick=this._onClick.bind(this),this._onResizeEnd=this._onResizeEnd.bind(this),this._animate=this._animate.bind(this),this._onTriggerEnter=this._onTriggerEnter.bind(this),this._onTriggerLeave=this._onTriggerLeave.bind(this),document.addEventListener("scroll",Object(s.a)(this,200,this.onScroll),!1),window.addEventListener("keyup",this.onKeyup,!1),window.addEventListener("resize",this.onResize,!1),window.addEventListener("click",this.onClick,!1),this._initialize(),this.startRaining()}destroy(){this.canvas.remove(),this.canvas=null,this.brightenTrigger&&this.brightenTrigger.remove(),this._initialize()}startRaining(){this._performanceControl(),this._onScroll(),this.then=Date.now()}_startAnimate(){this.requestId||(this._animate(),this.running=!0)}_stopAnimate(){this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.running=!1)}_toggleRun(t){t?this._startAnimate():this._stopAnimate()}_animate(){if(this.requestId=window.requestAnimationFrame(this._animate),this.running=!0,!this.DEBUG||!this.clicked){if(this.controlFPS){if(this.now=Date.now(),this.elapsed=this.now-this.then,!(this.elapsed>this.fpsInterval))return;this.then=this.now-this.elapsed%this.fpsInterval}this._render()}}_render(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.lineWidth=1,this._renderDrops(),this._controlWeather(),this._controlRaindropsCount()}_renderDrops(){let t=this.rain.length;for(;t--;){const i=this.rain[t];i.update(),this.brightenTrigger&&(i.pos.x>=this.triggerRect.left+16-this.elementRect.left&&i.pos.x<this.triggerRect.right+16-this.elementRect.left&&i.pos.y>=this.triggerRect.top-this.elementRect.top&&i.pos.y<this.triggerRect.top-this.elementRect.top+(this.triggerRect.height-16)||i.pos.y>=this.canvas.height)&&this._dropHit(i,t),i.draw(this.ctx)}let i=this.drops.length;for(;i--;){const t=this.drops[i];t.update(),t.draw(this.ctx),t.pos.y>this.canvas.height&&this.drops.splice(i,1)}}_dropHit(t,i){let e=Math.round(2+4*Math.random());for(;e--;)this.drops.push(new a(t.pos.x,Math.min(t.pos.y,this.canvas.height),this.world,t.depth,e));this.rain.splice(i,1)}_controlWeather(){this.sholudRain?this.world.rainIntensity<r.rainIntensity&&(this.world.rainIntensity+=r.brightenStep/3):this.world.rainIntensity>0&&(this.world.rainIntensity-=r.brightenStep)}_controlRaindropsCount(){Math.random()<this.world.rainIntensity&&this.rain.push(new l(this.canvas,this.world))}get _elementSize(){return{width:this.element.clientWidth,height:this.element.clientHeight}}_isInView(){const t=this.element.getBoundingClientRect();return t.top<window.innerHeight&&t.bottom>=0}_initialize(){this.rain=[],this.drops=[],this.clicked=!1,this.running=this._isInView(),this.sholudRain=!0,this.world=function(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?n(Object(e),!0).forEach((function(i){h(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):n(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}({},r),this._createCanvas(),this.brightenTrigger&&(this.brightenTrigger.addEventListener("mouseenter",this._onTriggerEnter,!1),this.brightenTrigger.addEventListener("mouseleave",this._onTriggerLeave,!1))}_createCanvas(){this.canvas=document.createElement("canvas"),this.canvas.classList.add("".concat(this.blockName,"__canvas")),this.canvas.width=this._elementSize.width,this.canvas.height=this._elementSize.height,this.element.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d")}_onKeyup(t){0}_onScroll(){this._toggleRun(this._isInView())}_onResize(){this.canvas.width=this._elementSize.width,this.canvas.height=this._elementSize.height,this.elementRect=this.element.getBoundingClientRect(),this.triggerRect=this.brightenTrigger&&this.brightenTrigger.getBoundingClientRect(),this._stopAnimate(),null!==this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=null),this.resizeTimeout=setTimeout(this._onResizeEnd,300)}_onResizeEnd(){this._startAnimate()}_onClick(){this.clicked=!this.clicked}_onTriggerEnter(){this.sholudRain=!1}_onTriggerLeave(){this.sholudRain=!0}_performanceControl(){this._onVisibilistyChange=this._onVisibilistyChange.bind(this),"hidden"in document?document.addEventListener("visibilitychange",this._onVisibilistyChange,!1):(document.addEventListener("mozvisibilitychange",this._onVisibilistyChange,!1),document.addEventListener("webkitvisibilitychange",this._onVisibilistyChange,!1),document.addEventListener("msvisibilitychange",this._onVisibilistyChange,!1))}_onVisibilistyChange(t){this._toggleRun("visible"===t.target.visibilityState)}}},117:function(t,i,e){"use strict";i.a=function(t,i,e){var s,n;return i=i||250,function(){clearTimeout(n);var h=t||this,r=new Date,o=arguments,a=function(){s=r.getTime(),e.apply(h,o)};s&&r.getTime()<s+i?n=setTimeout(a,i):a()}}}}]);