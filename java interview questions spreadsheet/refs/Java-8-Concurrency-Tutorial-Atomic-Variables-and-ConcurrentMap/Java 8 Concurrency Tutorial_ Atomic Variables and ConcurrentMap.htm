<!DOCTYPE html>
<!-- saved from url=(0096)https://winterbe.com/posts/2015/05/22/java8-concurrency-tutorial-atomic-concurrent-map-examples/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    

    <meta name="author" content="Benjamin Winterberg">
    <meta name="description" content="Learn multi-threaded programming with Java 8 by example: This tutorial covers atomic variables and concurrent maps.">
    <meta name="keywords" content="java, javascript, html, css, spring, hibernate, framework, computer, mobile, design, software, architecture, programming, development, engineering, code, pattern">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="white">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="white">

    <title>Java 8 Concurrency Tutorial: Atomic Variables and ConcurrentMap</title>

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@winterbe_">
    <meta name="twitter:title" content="Java 8 Concurrency Tutorial: Atomic Variables and ConcurrentMap">
    <meta name="twitter:description" content="Learn multi-threaded programming with Java 8 by example: This tutorial covers atomic variables and concurrent maps.">
    <meta name="twitter:image:src" content="http://winterbe.com/image/twitter_card.jpg">

    <link rel="shortcut icon" href="https://winterbe.com/favicon.ico">
    <link rel="apple-touch-icon" href="https://winterbe.com/apple-touch-icon.png">

    <link rel="publisher" href="https://plus.google.com/105973259367211176218/">
    <link rel="author" href="https://plus.google.com/105973259367211176218/posts">

    <meta itemprop="name" content="Benjamin Winterberg">
    <meta itemprop="description" content="Learn multi-threaded programming with Java 8 by example: This tutorial covers atomic variables and concurrent maps.">

    <link rel="alternate" type="application/rss+xml" title="Benjamin Winterberg" href="http://feeds.feedburner.com/winterbe">
    <link rel="alternate" type="application/atom+xml" title="Benjamin Winterberg" href="http://winterbe.com/atom.xml">

    <link rel="shortcut icon" type="image/x-icon" href="https://winterbe.com/favicon.ico">

    <link rel="apple-touch-icon" href="https://winterbe.com/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="57x57" href="https://winterbe.com/image/apple-touch-icon-57.png">
    <link rel="apple-touch-icon" sizes="72x72" href="https://winterbe.com/image/apple-touch-icon-72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="https://winterbe.com/image/apple-touch-icon-114.png">
    <link rel="apple-touch-icon" sizes="144x144" href="https://winterbe.com/image/apple-touch-icon-144.png">

    <link rel="stylesheet" href="./Java 8 Concurrency Tutorial_ Atomic Variables and ConcurrentMap_files/main.css">
    <link rel="stylesheet" href="./Java 8 Concurrency Tutorial_ Atomic Variables and ConcurrentMap_files/prism.css">

    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script type="text/javascript" async="" src="./Java 8 Concurrency Tutorial_ Atomic Variables and ConcurrentMap_files/analytics.js"></script><script id="twitter-wjs" src="./Java 8 Concurrency Tutorial_ Atomic Variables and ConcurrentMap_files/widgets.js"></script><script async="" src="./Java 8 Concurrency Tutorial_ Atomic Variables and ConcurrentMap_files/js"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
        dataLayer.push(arguments);
    }
    gtag('js', new Date());
    gtag('config', 'UA-48569937-1', {'anonymize_ip': true});
</script>

    <script type="text/javascript" id="cookiebanner" src="./Java 8 Concurrency Tutorial_ Atomic Variables and ConcurrentMap_files/cookiebanner.min.js" data-linkmsg="Privacy Policy" data-moreinfo="/privacy/"></script>
<script id="_carbonads_projs" type="text/javascript" src="./Java 8 Concurrency Tutorial_ Atomic Variables and ConcurrentMap_files/CKYI553Y.json"></script><script charset="utf-8" src="./Java 8 Concurrency Tutorial_ Atomic Variables and ConcurrentMap_files/button.a657e8de41cd5e7b38cde1f36c9ab9c2.js"></script></head>
<body>

<div class="container">
    <header>
        <a class="logo" href="https://winterbe.com/" title="winterbe.com">W</a>
<nav>
    <div id="nav-links" class="links">
        <span class="page-links">
            <a href="https://winterbe.com/blog/">Blog</a>
            <a href="https://winterbe.com/projects/">Projects</a>
            <a href="https://winterbe.com/vita/">Vita</a>
            <a href="https://winterbe.com/contact/">Contact</a>
        </span>
        <span class="social-links hide">
            <a href="http://feeds.feedburner.com/winterbe">RSS</a>
            <a href="https://github.com/winterbe">GitHub</a>
            <a href="https://plus.google.com/105973259367211176218/" rel="author">Google+</a>
            <a href="https://twitter.com/winterbe_">Twitter</a>
        </span>
        <a href="https://winterbe.com/posts/2015/05/22/java8-concurrency-tutorial-atomic-concurrent-map-examples/#" class="btn" data-toggle="follow">Follow</a>
    </div>
    <a class="menu-icon">â˜°</a>
</nav>

    </header>

    <div class="content">
        <h1 class="page-title">Java 8 Concurrency Tutorial: Atomic Variables and ConcurrentMap</h1>

<p class="page-subtitle" data-page-url="https://winterbe.com/posts/2015/05/22/java8-concurrency-tutorial-atomic-concurrent-map-examples/">
    <span class="post-date">May 22, 2015</span><br>
    <span class="share-count-total"></span>
</p>

<div id="carbonads-container">
    <script async="" type="text/javascript" src="./Java 8 Concurrency Tutorial_ Atomic Variables and ConcurrentMap_files/carbon.js" id="_carbonads_js"></script><div id="carbonads"><span><span class="carbon-wrap"><a href="https://srv.carbonads.net/ads/click/x/GTND42QYC6YI453YF674YKQMFTYDL27ECTBDVZ3JCWADT5QYF6SI623KC6BIEKQEF6YI6K3EHJNCLSIZ?segment=placement:winterbecom;" class="carbon-img" target="_blank" rel="noopener sponsored"><img src="./Java 8 Concurrency Tutorial_ Atomic Variables and ConcurrentMap_files/1565021871-Red_-_Carbon_260x200.png" alt="ads via Carbon" border="0" style="max-width: 130px;"></a><a href="https://srv.carbonads.net/ads/click/x/GTND42QYC6YI453YF674YKQMFTYDL27ECTBDVZ3JCWADT5QYF6SI623KC6BIEKQEF6YI6K3EHJNCLSIZ?segment=placement:winterbecom;" class="carbon-text" target="_blank" rel="noopener sponsored">Hello, edge cloud. So long, slow delivery. Start testing now for $0.</a></span><a href="http://carbonads.net/?utm_source=winterbecom&amp;utm_medium=ad_via_link&amp;utm_campaign=in_unit&amp;utm_term=carbon" class="carbon-poweredby" target="_blank" rel="noopener sponsored">ads via Carbon</a></span></div>
</div>

<div class="post">
    <p>Welcome to the third part of my tutorial series about multi-threaded programming in Java 8. This tutorial covers two important parts of the Concurrency API: Atomic Variables and Concurrent Maps. Both have been greatly improved with the introduction of lambda expressions and functional programming in the latest Java 8 release. All those new features are described with a bunch of easily understood code samples. Enjoy!</p>

<ul>
<li>Part 1: <a href="https://winterbe.com/posts/2015/04/07/java8-concurrency-tutorial-thread-executor-examples/">Threads and Executors</a></li>
<li>Part 2: <a href="https://winterbe.com/posts/2015/04/30/java8-concurrency-tutorial-synchronized-locks-examples/">Synchronization and Locks</a></li>
<li>Part 3: Atomic Variables and ConcurrentMap</li>
</ul>

<p>For simplicity the code samples of this tutorial make use of the two helper methods <code>sleep(seconds)</code> and <code>stop(executor)</code> as defined <a href="https://github.com/winterbe/java8-tutorial/blob/master/src/com/winterbe/java8/samples/concurrent/ConcurrentUtils.java">here</a>.</p>

<h3 id="atomicinteger">AtomicInteger<a class="hash-link" href="https://winterbe.com/posts/2015/05/22/java8-concurrency-tutorial-atomic-concurrent-map-examples/#atomicinteger" title="Permalink to this section">#</a></h3>

<p>The package <code>java.concurrent.atomic</code> contains many useful classes to perform atomic operations. An operation is atomic when you can safely perform the operation in parallel on multiple threads without using the <code>synchronized</code> keyword or locks as shown in my <a href="https://winterbe.com/posts/2015/04/30/java8-concurrency-tutorial-synchronized-locks-examples/">previous tutorial</a>.</p>

<p>Internally, the atomic classes make heavy use of <a href="http://en.wikipedia.org/wiki/Compare-and-swap">compare-and-swap</a> (CAS), an atomic instruction directly supported by most modern CPUs. Those instructions usually are much faster than synchronizing via locks. So my advice is to prefer atomic classes over locks in case you just have to change a single mutable variable concurrently.</p>

<p>Now let's pick one of the atomic classes for a few examples: <code>AtomicInteger</code></p>
<figure class="highlight"><pre class=" language-java"><code class=" language-java" data-lang="java">AtomicInteger atomicInt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AtomicInteger</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ExecutorService executor <span class="token operator">=</span> Executors<span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

IntStream<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>i <span class="token operator">-</span><span class="token operator">&gt;</span> executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>atomicInt<span class="token operator">:</span><span class="token operator">:</span>incrementAndGet<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">stop</span><span class="token punctuation">(</span>executor<span class="token punctuation">)</span><span class="token punctuation">;</span>

System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>atomicInt<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// =&gt; 1000</span>
</code></pre></figure>
<p>By using <code>AtomicInteger</code> as a replacement for <code>Integer</code> we're able to increment the number concurrently in a thread-safe manor without synchronizing the access to the variable. The method <code>incrementAndGet()</code> is an atomic operation so we can safely call this method from multiple threads.</p>

<p>AtomicInteger supports various kinds of atomic operations. The method <code>updateAndGet()</code> accepts a lambda expression in order to perform arbitrary arithmetic operations upon the integer:</p>
<figure class="highlight"><pre class=" language-java"><code class=" language-java" data-lang="java">AtomicInteger atomicInt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AtomicInteger</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ExecutorService executor <span class="token operator">=</span> Executors<span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

IntStream<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>i <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        Runnable task <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
            atomicInt<span class="token punctuation">.</span><span class="token function">updateAndGet</span><span class="token punctuation">(</span>n <span class="token operator">-</span><span class="token operator">&gt;</span> n <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">stop</span><span class="token punctuation">(</span>executor<span class="token punctuation">)</span><span class="token punctuation">;</span>

System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>atomicInt<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// =&gt; 2000</span>
</code></pre></figure>
<p>The method <code>accumulateAndGet()</code> accepts another kind of lambda expression of type <code>IntBinaryOperator</code>. We use this method to sum up all values from 0 to 1000 concurrently in the next sample:</p>
<figure class="highlight"><pre class=" language-java"><code class=" language-java" data-lang="java">AtomicInteger atomicInt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AtomicInteger</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ExecutorService executor <span class="token operator">=</span> Executors<span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

IntStream<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>i <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        Runnable task <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
            atomicInt<span class="token punctuation">.</span><span class="token function">accumulateAndGet</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token punctuation">(</span>n<span class="token punctuation">,</span> m<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> n <span class="token operator">+</span> m<span class="token punctuation">)</span><span class="token punctuation">;</span>
        executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">stop</span><span class="token punctuation">(</span>executor<span class="token punctuation">)</span><span class="token punctuation">;</span>

System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>atomicInt<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// =&gt; 499500</span>
</code></pre></figure>
<p>Other useful atomic classes are <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicBoolean.html">AtomicBoolean</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicLong.html">AtomicLong</a> and <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicReference.html">AtomicReference</a>.</p>

<h3 id="longadder">LongAdder<a class="hash-link" href="https://winterbe.com/posts/2015/05/22/java8-concurrency-tutorial-atomic-concurrent-map-examples/#longadder" title="Permalink to this section">#</a></h3>

<p>The class <code>LongAdder</code> as an alternative to <code>AtomicLong</code> can be used to consecutively add values to a number.</p>
<figure class="highlight"><pre class=" language-java"><code class=" language-java" data-lang="java">ExecutorService executor <span class="token operator">=</span> Executors<span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

IntStream<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>i <span class="token operator">-</span><span class="token operator">&gt;</span> executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>adder<span class="token operator">:</span><span class="token operator">:</span>increment<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">stop</span><span class="token punctuation">(</span>executor<span class="token punctuation">)</span><span class="token punctuation">;</span>

System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>adder<span class="token punctuation">.</span><span class="token function">sumThenReset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// =&gt; 1000</span>
</code></pre></figure>
<p>LongAdder provides methods <code>add()</code> and <code>increment()</code> just like the atomic number classes and is also thread-safe. But instead of summing up a single result this class maintains a set of variables internally to reduce contention over threads. The actual result can be retrieved by calling <code>sum()</code> or <code>sumThenReset()</code>.</p>

<p>This class is usually preferable over atomic numbers when updates from multiple threads are more common than reads. This is often the case when capturing statistical data, e.g. you want to count the number of requests served on a web server. The drawback of <code>LongAdder</code> is higher memory consumption because a set of variables is held in-memory.</p>

<h3 id="longaccumulator">LongAccumulator<a class="hash-link" href="https://winterbe.com/posts/2015/05/22/java8-concurrency-tutorial-atomic-concurrent-map-examples/#longaccumulator" title="Permalink to this section">#</a></h3>

<p>LongAccumulator is a more generalized version of LongAdder. Instead of performing simple add operations the class <code>LongAccumulator</code> builds around a lambda expression of type <code>LongBinaryOperator</code> as demonstrated in this code sample:</p>
<figure class="highlight"><pre class=" language-java"><code class=" language-java" data-lang="java">LongBinaryOperator op <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">2</span> <span class="token operator">*</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
LongAccumulator accumulator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LongAccumulator</span><span class="token punctuation">(</span>op<span class="token punctuation">,</span> <span class="token number">1</span>L<span class="token punctuation">)</span><span class="token punctuation">;</span>

ExecutorService executor <span class="token operator">=</span> Executors<span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

IntStream<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>i <span class="token operator">-</span><span class="token operator">&gt;</span> executor<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> accumulator<span class="token punctuation">.</span><span class="token function">accumulate</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">stop</span><span class="token punctuation">(</span>executor<span class="token punctuation">)</span><span class="token punctuation">;</span>

System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>accumulator<span class="token punctuation">.</span><span class="token function">getThenReset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// =&gt; 2539</span>
</code></pre></figure>
<p>We create a LongAccumulator with the function <code>2 * x + y</code> and an initial value of one. With every call to <code>accumulate(i)</code> both the current result and the value <code>i</code> are passed as parameters to the lambda expression.</p>

<p>A <code>LongAccumulator</code> just like <code>LongAdder</code> maintains a set of variables internally to reduce contention over threads.</p>

<h3 id="concurrentmap">ConcurrentMap<a class="hash-link" href="https://winterbe.com/posts/2015/05/22/java8-concurrency-tutorial-atomic-concurrent-map-examples/#concurrentmap" title="Permalink to this section">#</a></h3>

<p>The interface <code>ConcurrentMap</code> extends the map interface and defines one of the most useful concurrent collection types. Java 8 introduces functional programming by adding new methods to this interface.</p>

<p>In the next code snippets we use the following sample map to demonstrates those new methods:</p>
<figure class="highlight"><pre class=" language-java"><code class=" language-java" data-lang="java">ConcurrentMap<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> String<span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">,</span> <span class="token string">"bar"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"han"</span><span class="token punctuation">,</span> <span class="token string">"solo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"r2"</span><span class="token punctuation">,</span> <span class="token string">"d2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"c3"</span><span class="token punctuation">,</span> <span class="token string">"p0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></figure>
<p>The method <code>forEach()</code> accepts a lambda expression of type <code>BiConsumer</code> with both the key and value of the map passed as parameters. It can be used as a replacement to for-each loops to iterate over the entries of the concurrent map. The iteration is performed sequentially on the current thread.</p>
<figure class="highlight"><pre class=" language-java"><code class=" language-java" data-lang="java">map<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s = %s\n"</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></figure>
<p>The method <code>putIfAbsent()</code> puts a new value into the map only if no value exists for the given key. At least for the <code>ConcurrentHashMap</code> implementation of this method is thread-safe just like <code>put()</code> so you don't have to synchronize when accessing the map concurrently from different threads:</p>
<figure class="highlight"><pre class=" language-java"><code class=" language-java" data-lang="java">String value <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">putIfAbsent</span><span class="token punctuation">(</span><span class="token string">"c3"</span><span class="token punctuation">,</span> <span class="token string">"p1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// p0</span>
</code></pre></figure>
<p>The method <code>getOrDefault()</code> returns the value for the given key. In case no entry exists for this key the passed default value is returned:</p>
<figure class="highlight"><pre class=" language-java"><code class=" language-java" data-lang="java">String value <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">getOrDefault</span><span class="token punctuation">(</span><span class="token string">"hi"</span><span class="token punctuation">,</span> <span class="token string">"there"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// there</span>
</code></pre></figure>
<p>The method <code>replaceAll()</code> accepts a lambda expression of type <code>BiFunction</code>. BiFunctions take two parameters and return a single value. In this case the function is called with the key and the value of each map entry and returns a new value to be assigned for the current key:</p>
<figure class="highlight"><pre class=" language-java"><code class=" language-java" data-lang="java">map<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token string">"r2"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">"d3"</span> <span class="token operator">:</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"r2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// d3</span>
</code></pre></figure>
<p>Instead of replacing all values of the map <code>compute()</code> let's us transform a single entry. The method accepts both the key to be computed and a bi-function to specify the transformation of the value.</p>
<figure class="highlight"><pre class=" language-java"><code class=" language-java" data-lang="java">map<span class="token punctuation">.</span><span class="token function">compute</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> value <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// barbar</span>
</code></pre></figure>
<p>In addition to <code>compute()</code> two variants exist: <code>computeIfAbsent()</code> and <code>computeIfPresent()</code>. The functional parameters of these methods only get called if the key is absent or present respectively.</p>

<p>Finally, the method <code>merge()</code> can be utilized to unify a new value with an existing value in the map. Merge accepts a key, the new value to be merged into the existing entry and a bi-function to specify the merging behavior of both values:</p>
<figure class="highlight"><pre class=" language-java"><code class=" language-java" data-lang="java">map<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">,</span> <span class="token string">"boo"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>oldVal<span class="token punctuation">,</span> newVal<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> newVal <span class="token operator">+</span> <span class="token string">" was "</span> <span class="token operator">+</span> oldVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// boo was foo</span>
</code></pre></figure>
<h3 id="concurrenthashmap">ConcurrentHashMap<a class="hash-link" href="https://winterbe.com/posts/2015/05/22/java8-concurrency-tutorial-atomic-concurrent-map-examples/#concurrenthashmap" title="Permalink to this section">#</a></h3>

<p>All those methods above are part of the <code>ConcurrentMap</code> interface, thereby available to all implementations of that interface. In addition the most important implementation  <code>ConcurrentHashMap</code> has been further enhanced with a couple of new methods to perform parallel operations upon the map.</p>

<p>Just like parallel streams those methods use a special <code>ForkJoinPool</code> available via <code>ForkJoinPool.commonPool()</code> in Java 8. This pool uses a preset parallelism which depends on the number of available cores. Four CPU cores are available on my machine which results in a parallelism of three:</p>
<figure class="highlight"><pre class=" language-java"><code class=" language-java" data-lang="java">System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ForkJoinPool<span class="token punctuation">.</span><span class="token function">getCommonPoolParallelism</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 3</span>
</code></pre></figure>
<p>This value can be decreased or increased by setting the following JVM parameter:</p>
<figure class="highlight"><pre class=" language-text"><code class=" language-text" data-lang="text">-Djava.util.concurrent.ForkJoinPool.common.parallelism=5
</code></pre></figure>
<p>We use the same example map for demonstrating purposes but this time we work upon the concrete implementation <code>ConcurrentHashMap</code> instead of the interface <code>ConcurrentMap</code>, so we can access all public methods from this class:</p>
<figure class="highlight"><pre class=" language-java"><code class=" language-java" data-lang="java">ConcurrentHashMap<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> String<span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">,</span> <span class="token string">"bar"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"han"</span><span class="token punctuation">,</span> <span class="token string">"solo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"r2"</span><span class="token punctuation">,</span> <span class="token string">"d2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"c3"</span><span class="token punctuation">,</span> <span class="token string">"p0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></figure>
<p>Java 8 introduces three kinds of parallel operations: <code>forEach</code>, <code>search</code> and <code>reduce</code>. Each of those operations are available in four forms accepting functions with keys, values, entries and key-value pair arguments.</p>

<p>All of those methods use a common first argument called <code>parallelismThreshold</code>. This threshold indicates the minimum collection size when the operation should be executed in parallel. E.g. if you pass a threshold of 500 and the actual size of the map is 499 the operation will be performed sequentially on a single thread. In the next examples we use a threshold of one to always force parallel execution for demonstrating purposes.</p>

<h4 id="foreach">ForEach<a class="hash-link" href="https://winterbe.com/posts/2015/05/22/java8-concurrency-tutorial-atomic-concurrent-map-examples/#foreach" title="Permalink to this section">#</a></h4>

<p>The method <code>forEach()</code> is capable of iterating over the key-value pairs of the map in parallel. The lambda expression of type <code>BiConsumer</code> is called with the key and value of the current iteration step. In order to visualize parallel execution we print the current threads name to the console. Keep in mind that in my case the underlying <code>ForkJoinPool</code> uses up to a maximum of three threads.</p>
<figure class="highlight"><pre class=" language-java"><code class=" language-java" data-lang="java">map<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"key: %s; value: %s; thread: %s\n"</span><span class="token punctuation">,</span>
        key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// key: r2; value: d2; thread: main</span>
<span class="token comment">// key: foo; value: bar; thread: ForkJoinPool.commonPool-worker-1</span>
<span class="token comment">// key: han; value: solo; thread: ForkJoinPool.commonPool-worker-2</span>
<span class="token comment">// key: c3; value: p0; thread: main</span>
</code></pre></figure>
<h4 id="search">Search<a class="hash-link" href="https://winterbe.com/posts/2015/05/22/java8-concurrency-tutorial-atomic-concurrent-map-examples/#search" title="Permalink to this section">#</a></h4>

<p>The method <code>search()</code> accepts a <code>BiFunction</code> returning a non-null search result for the current key-value pair or <code>null</code> if the current iteration doesn't match the desired search criteria. As soon as a non-null result is returned further processing is suppressed. Keep in mind that <code>ConcurrentHashMap</code> is unordered. The search function should not depend on the actual processing order of the map. If multiple entries of the map match the given search function the result may be non-deterministic.</p>
<figure class="highlight"><pre class=" language-java"><code class=" language-java" data-lang="java">String result <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> null<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Result: "</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ForkJoinPool.commonPool-worker-2</span>
<span class="token comment">// main</span>
<span class="token comment">// ForkJoinPool.commonPool-worker-3</span>
<span class="token comment">// Result: bar</span>
</code></pre></figure>
<p>Here's another example searching solely on the values of the map:</p>
<figure class="highlight"><pre class=" language-java"><code class=" language-java" data-lang="java">String result <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">searchValues</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> value <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> null<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Result: "</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ForkJoinPool.commonPool-worker-2</span>
<span class="token comment">// main</span>
<span class="token comment">// main</span>
<span class="token comment">// ForkJoinPool.commonPool-worker-1</span>
<span class="token comment">// Result: solo</span>
</code></pre></figure>
<h4 id="reduce">Reduce<a class="hash-link" href="https://winterbe.com/posts/2015/05/22/java8-concurrency-tutorial-atomic-concurrent-map-examples/#reduce" title="Permalink to this section">#</a></h4>

<p>The method <code>reduce()</code> already known from Java 8 Streams accepts two lambda expressions of type <code>BiFunction</code>. The first function transforms each key-value pair into a single value of any type. The second function combines all those transformed values into a single result, ignoring any possible <code>null</code> values.</p>
<figure class="highlight"><pre class=" language-java"><code class=" language-java" data-lang="java">String result <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Transform: "</span> <span class="token operator">+</span> Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> key <span class="token operator">+</span> <span class="token string">"="</span> <span class="token operator">+</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span>s1<span class="token punctuation">,</span> s2<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Reduce: "</span> <span class="token operator">+</span> Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> s1 <span class="token operator">+</span> <span class="token string">", "</span> <span class="token operator">+</span> s2<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Result: "</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Transform: ForkJoinPool.commonPool-worker-2</span>
<span class="token comment">// Transform: main</span>
<span class="token comment">// Transform: ForkJoinPool.commonPool-worker-3</span>
<span class="token comment">// Reduce: ForkJoinPool.commonPool-worker-3</span>
<span class="token comment">// Transform: main</span>
<span class="token comment">// Reduce: main</span>
<span class="token comment">// Reduce: main</span>
<span class="token comment">// Result: r2=d2, c3=p0, han=solo, foo=bar</span>
</code></pre></figure>
<p>I hope you've enjoyed reading the third part of my tutorial series about Java 8 Concurrency. The code samples from this tutorial are <a href="https://github.com/winterbe/java8-tutorial">hosted on GitHub</a> along with many other Java 8 code snippets. You're welcome to fork the repo and try it by your own.</p>

<p>If you want to support my work, please share this tutorial with your friends. You should also <a href="https://twitter.com/winterbe_">follow me on Twitter</a> as I constantly tweet about Java and programming related stuff.</p>

<ul>
<li>Part 1: <a href="https://winterbe.com/posts/2015/04/07/java8-concurrency-tutorial-thread-executor-examples/">Threads and Executors</a></li>
<li>Part 2: <a href="https://winterbe.com/posts/2015/04/30/java8-concurrency-tutorial-synchronized-locks-examples/">Synchronization and Locks</a></li>
<li>Part 3: Atomic Variables and ConcurrentMap</li>
</ul>

</div>

<div class="social-share">
    <span></span>
    <script async="" defer="" id="github-bjs" src="./Java 8 Concurrency Tutorial_ Atomic Variables and ConcurrentMap_files/buttons.js"></script>

    <iframe id="twitter-widget-0" scrolling="no" frameborder="0" allowtransparency="true" allowfullscreen="true" class="twitter-follow-button twitter-follow-button-rendered" style="position: static; visibility: visible; width: 126px; height: 20px;" title="Twitter Follow Button" src="./Java 8 Concurrency Tutorial_ Atomic Variables and ConcurrentMap_files/follow_button.7303c29a8108bca4ac5c9ef008ed8164.en.html" data-screen-name="winterbe_"></iframe>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

    <iframe id="twitter-widget-1" scrolling="no" frameborder="0" allowtransparency="true" allowfullscreen="true" class="twitter-share-button twitter-share-button-rendered twitter-tweet-button" style="position: static; visibility: visible; width: 61px; height: 20px;" title="Twitter Tweet Button" src="./Java 8 Concurrency Tutorial_ Atomic Variables and ConcurrentMap_files/tweet_button.7303c29a8108bca4ac5c9ef008ed8164.en.html"></iframe>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
</div>

<section class="author">
    <div class="avatar"></div>
    Benjamin is Software Engineer, Full Stack Developer at <a href="http://pondus.de/en/homepage/">Pondus</a>, an excited runner and table foosball player.
    Get in touch on <a href="https://twitter.com/winterbe_">Twitter</a> and <a href="https://github.com/winterbe">GitHub</a>.
</section>

<h3 class="center">Read More</h3>

<ul class="tabs center device-large">
    <li class="tab active">
        <a href="https://winterbe.com/posts/2015/05/22/java8-concurrency-tutorial-atomic-concurrent-map-examples/#">Recent</a>
    </li>
    <li class="tab">
        <a href="https://winterbe.com/blog/">All Posts</a>
    </li>
    <li class="tab">
        <a href="https://winterbe.com/java/">Java</a>
    </li>
    <li class="tab">
        <a href="https://winterbe.com/javascript/">JavaScript</a>
    </li>
    <li class="tab">
        <a href="https://winterbe.com/tutorials/">Tutorials</a>
    </li>
</ul>

<ul class="tabs center device-small">
    <li class="tab active">
        <a href="https://winterbe.com/posts/2015/05/22/java8-concurrency-tutorial-atomic-concurrent-map-examples/#">Recent</a>
    </li>
    <li class="tab">
        <a href="https://winterbe.com/blog/">All Posts</a>
    </li>
    <li class="tab">
        <a href="https://winterbe.com/java/">Java</a>
    </li>
    <li class="tab">
        <a href="https://winterbe.com/tutorials/">Tutorials</a>
    </li>
</ul>

<ul class="blog-items read-more">
    
    
    <li class="blog-item center">
        <a href="https://winterbe.com/posts/2018/09/24/java-11-tutorial/">
            <h1>Java 11 Tutorial</h1>
        </a>
    </li>
    
    
    
    <li class="blog-item center">
        <a href="https://winterbe.com/posts/2018/08/29/migrate-maven-projects-to-java-11-jigsaw/">
            <h1>Migrate Maven Projects to Java 11</h1>
        </a>
    </li>
    
    
    
    <li class="blog-item center">
        <a href="https://winterbe.com/posts/2018/07/23/kotlin-sequence-tutorial/">
            <h1>Kotlin Sequence Tutorial</h1>
        </a>
    </li>
    
    
    
    <li class="blog-item center">
        <a href="https://winterbe.com/posts/2015/08/24/integrate-reactjs-into-jquery-webapps/">
            <h1>Integrating React.js into Existing jQuery Web Applications</h1>
        </a>
    </li>
    
    
    
    
</ul>

    </div>

    <footer>
        Â© 2009-2018 Benjamin Winterberg Â· <a href="https://winterbe.com/privacy/">Privacy</a>
    </footer>
</div>

<script src="./Java 8 Concurrency Tutorial_ Atomic Variables and ConcurrentMap_files/jquery.min.js"></script>
<script src="./Java 8 Concurrency Tutorial_ Atomic Variables and ConcurrentMap_files/prism.js"></script>
<script src="./Java 8 Concurrency Tutorial_ Atomic Variables and ConcurrentMap_files/main.js"></script>



<iframe scrolling="no" frameborder="0" allowtransparency="true" src="./Java 8 Concurrency Tutorial_ Atomic Variables and ConcurrentMap_files/widget_iframe.7303c29a8108bca4ac5c9ef008ed8164.html" title="Twitter settings iframe" style="display: none;"></iframe><iframe id="rufous-sandbox" scrolling="no" frameborder="0" allowtransparency="true" allowfullscreen="true" style="position: absolute; visibility: hidden; display: none; width: 0px; height: 0px; padding: 0px; border: none;" title="Twitter analytics iframe" src="./Java 8 Concurrency Tutorial_ Atomic Variables and ConcurrentMap_files/saved_resource.html"></iframe></body></html>