<!DOCTYPE html>
<!-- saved from url=(0094)https://medium.com/quintoandar-tech-blog/hibernate-and-the-n-1-selections-problem-c497710fa3fe -->
<html lang="en" data-rh="lang"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script async="" src="./Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium_files/branch-latest.min.js"></script><script async="" src="./Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium_files/analytics.js"></script><script>!function(c,f){var t,o,i,e=[],r={passive:!0,capture:!0},n=new Date,a="pointerup",u="pointercancel";function p(n,e){t||(t=e,o=n,i=new Date,w(f),s())}function s(){0<=o&&o<i-n&&(e.forEach(function(n){n(o,t)}),e=[])}function l(n){if(n.cancelable){var e=(1e12<n.timeStamp?new Date:performance.now())-n.timeStamp;"pointerdown"==n.type?function(n,e){function t(){p(n,e),i()}function o(){i()}function i(){f(a,t,r),f(u,o,r)}c(a,t,r),c(u,o,r)}(e,n):p(e,n)}}function w(e){["click","mousedown","keydown","touchstart","pointerdown"].forEach(function(n){e(n,l,r)})}w(c),self.perfMetrics=self.perfMetrics||{},self.perfMetrics.onFirstInputDelay=function(n){e.push(n),s()}}(addEventListener,removeEventListener)</script><title>Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium</title><meta data-rh="true" name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"><meta data-rh="true" name="theme-color" content="#000000"><meta data-rh="true" name="twitter:app:name:iphone" content="Medium"><meta data-rh="true" name="twitter:app:id:iphone" content="828256236"><meta data-rh="true" property="al:ios:app_name" content="Medium"><meta data-rh="true" property="al:ios:app_store_id" content="828256236"><meta data-rh="true" property="al:android:package" content="com.medium.reader"><meta data-rh="true" property="fb:app_id" content="542599432471018"><meta data-rh="true" property="og:site_name" content="Medium"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2019-05-27T13:52:01.424Z"><meta data-rh="true" name="title" content="Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium"><meta data-rh="true" property="og:title" content="Hibernate and the n+1 selections problem"><meta data-rh="true" property="twitter:title" content="Hibernate and the n+1 selections problem"><meta data-rh="true" name="twitter:site" content="@quintoandar"><meta data-rh="true" name="twitter:app:url:iphone" content="medium://p/c497710fa3fe"><meta data-rh="true" property="al:android:url" content="medium://p/c497710fa3fe"><meta data-rh="true" property="al:ios:url" content="medium://p/c497710fa3fe"><meta data-rh="true" property="al:android:app_name" content="Medium"><meta data-rh="true" name="description" content="One of the greatest challenges in software design is the difference of paradigm between the object-oriented world (in which many applications rely on) and the relational world of databases…"><meta data-rh="true" property="og:description" content="One of the greatest challenges in software design is the difference of paradigm between the object-oriented world (in which many of our…"><meta data-rh="true" property="twitter:description" content="One of the greatest challenges in software design is the difference of paradigm between the object-oriented world (in which many of our…"><meta data-rh="true" property="og:url" content="https://medium.com/quintoandar-tech-blog/hibernate-and-the-n-1-selections-problem-c497710fa3fe"><meta data-rh="true" property="al:web:url" content="https://medium.com/quintoandar-tech-blog/hibernate-and-the-n-1-selections-problem-c497710fa3fe"><meta data-rh="true" property="og:image" content="https://miro.medium.com/max/1200/1*n4YP5-Bxv2b69Q8coGy0Tw.jpeg"><meta data-rh="true" name="twitter:image:src" content="https://miro.medium.com/max/1200/1*n4YP5-Bxv2b69Q8coGy0Tw.jpeg"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="article:author" content="https://medium.com/@joao.munhoz"><meta data-rh="true" name="author" content="Joao Munhoz"><meta data-rh="true" name="robots" content="index,follow"><meta data-rh="true" name="referrer" content="unsafe-url"><meta data-rh="true" name="twitter:label1" value="Reading time"><meta data-rh="true" name="twitter:data1" value="6 min read"><meta data-rh="true" name="parsely-post-id" content="c497710fa3fe"><link data-rh="true" rel="search" type="application/opensearchdescription+xml" title="Medium" href="https://medium.com/osd.xml"><link data-rh="true" rel="apple-touch-icon" sizes="152x152" href="https://cdn-images-1.medium.com/fit/c/152/152/1*8I-HPL0bfoIzGied-dzOvA.png"><link data-rh="true" rel="apple-touch-icon" sizes="120x120" href="https://cdn-images-1.medium.com/fit/c/120/120/1*8I-HPL0bfoIzGied-dzOvA.png"><link data-rh="true" rel="apple-touch-icon" sizes="76x76" href="https://cdn-images-1.medium.com/fit/c/76/76/1*8I-HPL0bfoIzGied-dzOvA.png"><link data-rh="true" rel="apple-touch-icon" sizes="60x60" href="https://cdn-images-1.medium.com/fit/c/60/60/1*8I-HPL0bfoIzGied-dzOvA.png"><link data-rh="true" rel="mask-icon" href="https://cdn-static-1.medium.com/_/fp/icons/monogram-mask.KPLCSFEZviQN0jQ7veN2RQ.svg" color="#171717"><link data-rh="true" rel="icon" href="https://cdn-static-1.medium.com/_/fp/icons/favicon-rebrand-medium.3Y6xpZ-0FSdWDnPM3hSBIA.ico"><link data-rh="true" id="glyph_link" rel="stylesheet" type="text/css" href="./Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium_files/m2.css"><link data-rh="true" rel="author" href="https://medium.com/@joao.munhoz"><link data-rh="true" rel="canonical" href="https://medium.com/quintoandar-tech-blog/hibernate-and-the-n-1-selections-problem-c497710fa3fe"><link data-rh="true" rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/c497710fa3fe"><script data-rh="true" type="application/ld+json">{"@context":"http:\u002F\u002Fschema.org","@type":"NewsArticle","image":["https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F1200\u002F1*n4YP5-Bxv2b69Q8coGy0Tw.jpeg"],"url":"https:\u002F\u002Fmedium.com\u002Fquintoandar-tech-blog\u002Fhibernate-and-the-n-1-selections-problem-c497710fa3fe","dateCreated":"2019-05-27T13:52:01.424Z","datePublished":"2019-05-27T13:52:01.424Z","dateModified":"2019-05-27T17:13:05.258Z","headline":"Hibernate and the n+1 selections problem","name":"Hibernate and the n+1 selections problem","description":"One of the greatest challenges in software design is the difference of paradigm between the object-oriented world (in which many applications rely on) and the relational world of databases…","identifier":"c497710fa3fe","keywords":["Lite:true","Tag:Software Development","Tag:Orm","Tag:Hibernate","Tag:Query","Topic:Programming","Publication:quintoandar-tech-blog","Elevated:false","LockedPostSource:LOCKED_POST_SOURCE_UGC_UNENROLLED","LayerCake:3"],"author":{"@type":"Person","name":"Joao Munhoz","url":"https:\u002F\u002Fmedium.com\u002F@joao.munhoz"},"creator":["Joao Munhoz"],"publisher":{"@type":"Organization","name":"QuintoAndar Tech Blog","url":"https:\u002F\u002Fmedium.com\u002Fquintoandar-tech-blog","logo":{"@type":"ImageObject","width":308,"height":60,"url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F616\u002F1*OMF3fSqH8t4xBJ9-6oZDZw.png"}},"mainEntityOfPage":"https:\u002F\u002Fmedium.com\u002Fquintoandar-tech-blog\u002Fhibernate-and-the-n-1-selections-problem-c497710fa3fe","isAccessibleForFree":"False","hasPart":{"@type":"WebPageElement","isAccessibleForFree":"False","cssSelector":".meteredContent"}}</script><script data-rh="true">(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-24232453-2', 'auto');
ga('send', 'pageview');</script><link rel="preload" href="./Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium_files/16180790160.js" as="script"><style type="text/css" data-fela-rehydration="399" data-fela-type="STATIC">html{box-sizing:border-box}*, *:before, *:after{box-sizing:inherit}body{margin:0;padding:0;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;color:rgba(0,0,0,0.8);position:relative;min-height:100vh}h1, h2, h3, h4, h5, h6, dl, dd, ol, ul, menu, figure, blockquote, p, pre, form{margin:0}menu, ol, ul{padding:0;list-style:none;list-style-image:none}main{display:block}a{color:inherit;text-decoration:none}a, button, input{-webkit-tap-highlight-color:transparent}img, svg{vertical-align:middle}button{background:transparent;overflow:visible}button, input, optgroup, select, textarea{margin:0}</style><style type="text/css" data-fela-rehydration="399" data-fela-type="KEYFRAME">@-webkit-keyframes k1{0%{transform:scale(1);opacity:1}70%{transform:scale(1.4);opacity:0}100%{opacity:0}}@-moz-keyframes k1{0%{transform:scale(1);opacity:1}70%{transform:scale(1.4);opacity:0}100%{opacity:0}}@keyframes k1{0%{transform:scale(1);opacity:1}70%{transform:scale(1.4);opacity:0}100%{opacity:0}}@-webkit-keyframes k2{0%{transform:translateY(100%)}90%{transform:translateY(-5%)}100%{transform:translateY(0%)}}@-moz-keyframes k2{0%{transform:translateY(100%)}90%{transform:translateY(-5%)}100%{transform:translateY(0%)}}@keyframes k2{0%{transform:translateY(100%)}90%{transform:translateY(-5%)}100%{transform:translateY(0%)}}@-webkit-keyframes k3{0%{transform:translateY(0%);opacity:1}10%{transform:translateY(-5%);opacity:1}100%{transform:translateY(100%);opacity:0}}@-moz-keyframes k3{0%{transform:translateY(0%);opacity:1}10%{transform:translateY(-5%);opacity:1}100%{transform:translateY(100%);opacity:0}}@keyframes k3{0%{transform:translateY(0%);opacity:1}10%{transform:translateY(-5%);opacity:1}100%{transform:translateY(100%);opacity:0}}</style><style type="text/css" data-fela-rehydration="399" data-fela-type="RULE">.a{font-family:medium-content-sans-serif-font, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif}.b{font-weight:400}.c{background-color:rgba(255, 255, 255, 1)}.l{height:100vh}.m{width:100vw}.n{display:flex}.o{align-items:center}.p{justify-content:center}.q{fill:rgba(0, 0, 0, 0.84)}.r{display:block}.s{position:fixed}.t{top:0}.u{left:0}.v{right:0}.w{z-index:500}.x{box-shadow:0 4px 12px 0 rgba(0, 0, 0, 0.05)}.ac{background-color:rgba(80, 99, 240, 1)}.aj{max-width:1192px}.ak{min-width:0}.al{width:100%}.am{height:65px}.ap{flex:1 0 auto}.aq{fill:rgba(233, 241, 255, 1)}.ar{border-left:1px solid rgba(166, 185, 255, 1)}.as{margin-left:15px}.at{margin-right:14px}.au{height:24px}.av{width:1px}.aw{font-family:medium-content-sans-serif-font, "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Geneva, Arial, sans-serif}.ax{font-weight:600}.ay{font-size:28px}.az{line-height:36px}.ba{overflow:hidden}.bb{max-height:36px}.bc{text-overflow:ellipsis}.bd{display:-webkit-box}.be{-webkit-line-clamp:1}.bf{-webkit-box-orient:vertical}.bg{color:rgba(249, 254, 255, 1)}.bh{flex:0 0 auto}.bi{visibility:hidden}.bj{margin-left:16px}.bk{font-style:normal}.bl{line-height:20px}.bm{font-size:15.8px}.bn{letter-spacing:0px}.bo{color:rgba(158, 178, 255, 1)}.bp{fill:rgba(158, 178, 255, 1)}.bq{color:rgba(200, 214, 255, 1)}.br{fill:rgba(200, 214, 255, 1)}.bs{font-size:inherit}.bt{border:inherit}.bu{font-family:inherit}.bv{letter-spacing:inherit}.bw{font-weight:inherit}.bx{padding:0}.by{margin:0}.bz:hover{cursor:pointer}.ca:hover{color:rgba(249, 254, 255, 1)}.cb:hover{fill:rgba(233, 241, 255, 1)}.cc:focus{outline:none}.cd:disabled{cursor:default}.ce:disabled{color:rgba(3, 168, 124, 0.5)}.cf:disabled{fill:rgba(3, 168, 124, 0.5)}.cg{padding:8px 16px}.ch{background:0}.ci{border-color:rgba(200, 214, 255, 1)}.cj:hover{border-color:rgba(233, 241, 255, 1)}.ck{border-radius:4px}.cl{border-width:1px}.cm{border-style:solid}.cn{box-sizing:border-box}.co{display:inline-block}.cp{text-decoration:none}.cq{display:none}.cs{color:rgba(0, 0, 0, 0.54)}.ct{fill:rgba(0, 0, 0, 0.54)}.cu{color:rgba(87, 107, 216, 1)}.cv{fill:rgba(99, 122, 255, 1)}.cw:hover{color:rgba(80, 99, 194, 1)}.cx:hover{fill:rgba(87, 107, 216, 1)}.cy{border-color:rgba(99, 122, 255, 1)}.cz:hover{border-color:rgba(87, 107, 216, 1)}.da{border-top:none}.db{height:54px}.dc{margin-right:40px}.dd{font-size:22px}.de{line-height:28px}.df{max-height:28px}.dg{overflow:auto}.dh{flex:0 1 auto}.di{list-style-type:none}.dj{line-height:40px}.dk{white-space:nowrap}.dl{overflow-x:auto}.dm{align-items:flex-start}.dn{margin-top:20px}.do{padding-top:20px}.dp{height:80px}.dq{margin-bottom:0px}.dt{padding-left:24px}.du{padding-right:24px}.dv{margin-left:auto}.dw{margin-right:auto}.dx{max-width:728px}.dy{flex-direction:column}.dz{position:absolute}.ea{top:calc(100vh + 100px)}.eb{bottom:calc(100vh + 100px)}.ec{width:10px}.ed{pointer-events:none}.ee{word-break:break-word}.ef{word-wrap:break-word}.eg:after{display:block}.eh:after{content:""}.ei:after{clear:both}.ej{max-width:680px}.ek{line-height:1.23}.el{letter-spacing:0}.em{color:rgba(0, 0, 0, 0.84)}.en{font-family:medium-content-title-font, Georgia, Cambria, "Times New Roman", Times, serif}.ey{margin-bottom:-0.27em}.fe{margin-top:32px}.ff{justify-content:space-between}.fj{border-radius:50%}.fk{height:48px}.fl{width:48px}.fm{margin-left:12px}.fn{margin-bottom:2px}.fp{font-weight:300}.fq{font-size:16px}.fr{max-height:20px}.fs{color:inherit}.ft{fill:inherit}.fu:hover{text-decoration:underline}.fv:disabled{color:rgba(0, 0, 0, 0.54)}.fw:disabled{fill:rgba(0, 0, 0, 0.54)}.fx{margin-left:8px}.fy{padding:0px 8px}.fz{border-color:rgba(0, 0, 0, 0.54)}.ga:hover{color:rgba(0, 0, 0, 0.97)}.gb:hover{fill:rgba(0, 0, 0, 0.97)}.gc:hover{border-color:rgba(0, 0, 0, 0.84)}.gd:disabled{fill:rgba(0, 0, 0, 0.76)}.ge:disabled{border-color:rgba(0, 0, 0, 0.2)}.gf:disabled{cursor:inherit}.gg:disabled:hover{color:rgba(0, 0, 0, 0.54)}.gh:disabled:hover{fill:rgba(0, 0, 0, 0.76)}.gi:disabled:hover{border-color:rgba(0, 0, 0, 0.2)}.gj{line-height:18px}.gk{font-size:15px}.gl{align-items:flex-end}.gt{padding-right:8px}.gu:hover{color:rgba(0, 0, 0, 0.9)}.gv:hover{fill:rgba(0, 0, 0, 0.9)}.gw{margin-right:-6px}.gx{max-width:3840px}.hd{clear:both}.he{transition:transform 300ms cubic-bezier(0.2, 0, 0.2, 1)}.hf{cursor:zoom-in}.hg{position:relative}.hh{z-index:auto}.hi{opacity:0}.hj{transition:opacity 100ms 400ms}.hk{height:100%}.hl{will-change:transform}.hm{transform:translateZ(0)}.hn{margin:auto}.ho{background-color:rgba(0, 0, 0, 0.05)}.hp{padding-bottom:56.25%}.hq{filter:blur(20px)}.hr{transform:scale(1.1)}.hs{visibility:visible}.ht{background:rgba(255, 255, 255, 1)}.hu{line-height:1.4}.hv{margin-top:10px}.hw{text-align:center}.hz{background-repeat:repeat-x}.ia{background-image:linear-gradient(to right,rgba(0, 0, 0, 0.84) 100%,rgba(0, 0, 0, 0.84) 0);background-image:url('data:image/svg+xml;utf8,<svg preserveAspectRatio="none" viewBox="0 0 1 1" xmlns="http://www.w3.org/2000/svg"><line x1="0" y1="0" x2="1" y2="1" stroke="rgba(0, 0, 0, 0.84)" /></svg>')}.ib{background-size:1px 1px}.ic{background-position:0 1.05em;background-position:0 calc(1em + 1px)}.id{line-height:1.58}.ie{letter-spacing:-0.004em}.if{font-family:medium-content-serif-font, Georgia, Cambria, "Times New Roman", Times, serif}.iq{margin-bottom:-0.46em}.ir{font-style:italic}.is{padding:20px}.it{background:rgba(0, 0, 0, 0.05)}.iu{line-height:1.18}.iv{letter-spacing:-0.022em}.iw{font-family:Menlo, Monaco, "Courier New", Courier, monospace}.ix{margin-top:-0.09em}.iy{margin-bottom:-0.09em}.iz{white-space:pre-wrap}.ja{font-weight:700}.jg{list-style-type:disc}.jh{margin-left:30px}.ji{padding-left:0px}.jo{will-change:opacity}.jp{width:188px}.jq{left:50%}.jr{transform:translateX(406px)}.js{top:calc(65px + 54px + 14px)}.jv{top:calc(65px + 54px + 40px)}.jx{width:131px}.jy{padding-bottom:28px}.jz{border-bottom:1px solid rgba(0, 0, 0, 0.1)}.ka{font-size:18px}.kb{padding-bottom:20px}.kc{padding-top:2px}.kd{max-height:120px}.ke{-webkit-line-clamp:6}.kf{padding:4px 12px}.kg{padding-top:28px}.kh{margin-bottom:19px}.ki{margin-left:-5px}.kj{margin-right:5px}.kk{outline:0}.kl{border:0}.km{user-select:none}.kn{cursor:pointer}.ko> svg{pointer-events:none}.kp:active{border-style:none}.kq{-webkit-user-select:none}.kr:focus{fill:rgba(87, 107, 216, 1)}.ks{margin-top:5px}.kt button{text-align:left}.ku{margin-top:40px}.kv{flex-wrap:wrap}.kw{margin-top:25px}.kx{margin-right:8px}.ky{margin-bottom:8px}.kz{border-radius:3px}.la{padding:5px 10px}.lb{line-height:22px}.lc{margin-top:15px}.ld{margin-right:16px}.le{border:1px solid rgba(0, 0, 0, 0.1)}.lf{height:60px}.lg{width:60px}.lt:active{border-style:solid}.lu{z-index:2}.lw{padding-top:32px}.lx{border-top:1px solid rgba(0, 0, 0, 0.1)}.ly{margin-bottom:25px}.lz{margin-bottom:32px}.ma{min-height:80px}.mf{width:80px}.mg{padding-left:102px}.mi{text-transform:uppercase}.mj{letter-spacing:0.05em}.mk{margin-bottom:6px}.ml{max-width:555px}.mm{max-width:450px}.mn{line-height:24px}.mp{max-width:550px}.mq{padding-top:25px}.mr{color:rgba(0, 0, 0, 0.76)}.ms{opacity:1}.mt{border:1px solid rgba(99, 122, 255, 1)}.mu{margin-top:64px}.mv{background-color:rgba(0, 0, 0, 0.02)}.mw{padding:60px 0}.mx{background-color:rgba(0, 0, 0, 0.9)}.no{padding-bottom:48px}.np{border-bottom:1px solid rgba(255, 255, 255, 0.54)}.nq{margin:0 -12px}.nr{margin:0 12px}.ns{flex:1 1 0}.nt{padding-bottom:12px}.nu:hover{color:rgba(255, 255, 255, 0.99)}.nv:hover{fill:rgba(255, 255, 255, 0.99)}.nw:disabled{color:rgba(255, 255, 255, 0.7)}.nx:disabled{fill:rgba(255, 255, 255, 0.7)}.ny{color:rgba(255, 255, 255, 0.98)}.nz{fill:rgba(255, 255, 255, 0.98)}.oa{text-align:inherit}.ob{font-size:21.6px}.oc{letter-spacing:-0.32px}.od{color:rgba(255, 255, 255, 0.7)}.oe{fill:rgba(255, 255, 255, 0.7)}.of{text-decoration:underline}.og{padding-bottom:8px}.oh{padding-top:8px}.oi{width:200px}.ok{-webkit-user-select:none}</style><style type="text/css" data-fela-rehydration="399" data-fela-type="RULE" media="all and (min-width: 1080px)">.d{display:none}.ai{margin:0 64px}.ew{font-size:40px}.ex{margin-top:0.78em}.fd{line-height:48px}.gs{margin-left:30px}.hc{margin-top:56px}.io{font-size:21px}.ip{margin-top:2em}.jf{margin-top:1.91em}.jn{margin-top:1.05em}.nl{padding-left:64px}.nm{padding-right:64px}.nn{max-width:1320px}</style><style type="text/css" data-fela-rehydration="399" data-fela-type="RULE" media="all and (max-width: 1079.98px)">.e{display:none}.gr{margin-left:30px}.hx{margin-left:auto}.hy{text-align:center}.ni{padding-left:64px}.nj{padding-right:64px}.nk{max-width:1080px}</style><style type="text/css" data-fela-rehydration="399" data-fela-type="RULE" media="all and (max-width: 903.98px)">.f{display:none}.gq{margin-left:30px}.nf{padding-left:48px}.ng{padding-right:48px}.nh{max-width:904px}</style><style type="text/css" data-fela-rehydration="399" data-fela-type="RULE" media="all and (max-width: 727.98px)">.g{display:none}.an{height:56px}.ao{display:flex}.cr{display:block}.dr{margin-bottom:0px}.ds{height:110px}.fh{margin-top:32px}.fi{flex-direction:column-reverse}.go{margin-bottom:30px}.gp{margin-left:0px}.mb{margin-bottom:24px}.mc{align-items:center}.md{width:102px}.me{position:relative}.mh{padding-left:0}.mo{margin-top:24px}.my{padding:32px 0}.nc{padding-left:24px}.nd{padding-right:24px}.ne{max-width:728px}.oj{width:140px}</style><style type="text/css" data-fela-rehydration="399" data-fela-type="RULE" media="all and (max-width: 551.98px)">.h{display:none}.ae{margin:0 24px}.eo{font-size:30px}.ep{margin-top:0.72em}.ez{line-height:40px}.fg{margin-top:32px}.fo{margin-bottom:0px}.gm{margin-bottom:30px}.gn{margin-left:0px}.gy{margin-top:40px}.ig{font-size:18px}.ih{margin-top:1.56em}.jb{margin-top:1.41em}.jj{margin-top:1.34em}.mz{padding-left:24px}.na{padding-right:24px}.nb{max-width:552px}</style><style type="text/css" data-fela-rehydration="399" data-fela-type="RULE" media="all and (min-width: 904px) and (max-width: 1079.98px)">.i{display:none}.ah{margin:0 64px}.eu{font-size:40px}.ev{margin-top:0.78em}.fc{line-height:48px}.hb{margin-top:56px}.im{font-size:21px}.in{margin-top:2em}.je{margin-top:1.91em}.jm{margin-top:1.05em}</style><style type="text/css" data-fela-rehydration="399" data-fela-type="RULE" media="all and (min-width: 728px) and (max-width: 903.98px)">.j{display:none}.ag{margin:0 48px}.es{font-size:40px}.et{margin-top:0.78em}.fb{line-height:48px}.ha{margin-top:56px}.ik{font-size:21px}.il{margin-top:2em}.jd{margin-top:1.91em}.jl{margin-top:1.05em}</style><style type="text/css" data-fela-rehydration="399" data-fela-type="RULE" media="all and (min-width: 552px) and (max-width: 727.98px)">.k{display:none}.af{margin:0 24px}.eq{font-size:30px}.er{margin-top:0.72em}.fa{line-height:40px}.gz{margin-top:40px}.ii{font-size:18px}.ij{margin-top:1.56em}.jc{margin-top:1.41em}.jk{margin-top:1.34em}</style><style type="text/css" data-fela-rehydration="399" data-fela-type="RULE" media="print">.ab{display:none}</style><style type="text/css" data-fela-rehydration="399" data-fela-type="RULE" media="(prefers-reduced-motion: no-preference)">.y{transition:transform 300ms ease}.z{will-change:transform}.jt{transition:opacity 200ms}.lh{transition:border-color 150ms ease}.li::before{background:
      radial-gradient(circle, rgba(87, 107, 216, 1) 60%, transparent 70%)
    }.lj::before{border-radius:50%}.lk::before{content:""}.ll::before{display:block}.lm::before{z-index:0}.ln::before{left:0}.lo::before{height:100%}.lp::before{position:absolute}.lq::before{top:0}.lr::before{width:100%}.ls:hover::before{animation:k1 2000ms infinite cubic-bezier(.1,.12,.25,1)}.lv{transition:fill 200ms ease}</style><style type="text/css" data-fela-rehydration="399" data-fela-type="RULE" media="all and (max-width: 1230px)">.ju{display:none}</style><style type="text/css" data-fela-rehydration="399" data-fela-type="RULE" media="all and (max-width: 1198px)">.jw{display:none}</style><script charset="utf-8" src="./Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium_files/vendors_tracing.77880ce8.chunk.js"></script><script charset="utf-8" src="./Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium_files/tracing.0034d28f.chunk.js"></script><script type="text/javascript" data-rh="true">(function(b,r,a,n,c,h,_,s,d,k){if(!b[n]||!b[n]._q){for(;s<_.length;)c(h,_[s++]);d=r.createElement(a);d.async=1;d.src="https://cdn.branch.io/branch-latest.min.js";k=r.getElementsByTagName(a)[0];k.parentNode.insertBefore(d,k);b[n]=h}})(window,document,"script","branch",function(b,r){b[r]=function(){b._q.push([r,arguments])}},{_q:[],_v:1},"addListener applyCode autoAppIndex banner closeBanner closeJourney creditHistory credits data deepview deepviewCta first getCode init link logout redeem referrals removeListener sendSMS setBranchViewData setIdentity track validateCode trackCommerceEvent logEvent".split(" "), 0);
branch.init('key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm', {metadata: {}, 'no_journeys': true, 'disable_exit_animation': true, 'disable_entry_animation': true, 'tracking_disabled': null}, function(err, data) {});</script></head><body><div id="root"><div class="a b c"><div class="d e f g h i j k"></div><script>document.domain = document.domain;</script><script>window.PARSELY = window.PARSELY || {autotrack: false}</script><nav class="r s t u v c w x y z ab" style=""><div class="branch-journeys-top"><div class="r g"><div class="r ac"><div class="n p"><div class="ae af ag ah ai aj ak al"><div class="am n o an ao"><div class="n o ap w"><a aria-label="Homepage" rel="noopener" href="https://medium.com/?source=post_page-----c497710fa3fe----------------------"><svg width="35" height="35" viewBox="5 5 35 35" class="aq"><path d="M5 40V5h35v35H5zm8.56-12.63c0 .56-.03.69-.32 1.03L10.8 31.4v.4h6.97v-.4L15.3 28.4c-.29-.34-.34-.5-.34-1.03v-8.95l6.13 13.36h.71l5.26-13.36v10.64c0 .3 0 .35-.19.53l-1.85 1.8v.4h9.2v-.4l-1.83-1.8c-.18-.18-.2-.24-.2-.53V15.94c0-.3.02-.35.2-.53l1.82-1.8v-.4h-6.47l-4.62 11.55-5.2-11.54h-6.8v.4l2.15 2.63c.24.3.29.37.29.77v10.35z"></path></svg></a><div class="ar as at au av r g"></div><div class="r g"><a href="https://medium.com/quintoandar-tech-blog?source=post_page-----c497710fa3fe----------------------" rel="noopener"><span class="aw ax ay az ba bb bc bd be bf bg">QuintoAndar Tech Blog</span></a></div></div><div class="r bh w"><div class="n o"><div class="n g"><div class="hs" id="lo-post-page-navbar-sign-in-link"><div class="bj r"><span class="aw b bk bl bm bn r bo bp"><a href="https://medium.com/m/signin?operation=login&amp;redirect=https%3A%2F%2Fmedium.com%2Fquintoandar-tech-blog%2Fhibernate-and-the-n-1-selections-problem-c497710fa3fe&amp;source=post_page-----c497710fa3fe---------------------nav_reg-" class="bq br bs bt bu bv bw bx by bz ca cb cc cd ce cf" rel="noopener">Sign in</a></span></div></div></div><div class="hs" id="lo-post-page-navbar-get-started-button"><div class="bj r"><button class="cg ch bq br ci ca cb cj bz ck aw b bk bl bm bn cl cm cn co cp cc">Get started</button></div></div></div></div></div></div></div></div></div><div class="cq cr"><div class="r c"><div class="n p"><div class="ae af ag ah ai aj ak al"><div class="am n o an ao"><div class="n o ap w"><a aria-label="Homepage" rel="noopener" href="https://medium.com/?source=post_page-----c497710fa3fe----------------------"><svg width="35" height="35" viewBox="5 5 35 35" class="q"><path d="M5 40V5h35v35H5zm8.56-12.63c0 .56-.03.69-.32 1.03L10.8 31.4v.4h6.97v-.4L15.3 28.4c-.29-.34-.34-.5-.34-1.03v-8.95l6.13 13.36h.71l5.26-13.36v10.64c0 .3 0 .35-.19.53l-1.85 1.8v.4h9.2v-.4l-1.83-1.8c-.18-.18-.2-.24-.2-.53V15.94c0-.3.02-.35.2-.53l1.82-1.8v-.4h-6.47l-4.62 11.55-5.2-11.54h-6.8v.4l2.15 2.63c.24.3.29.37.29.77v10.35z"></path></svg></a></div><div class="r bh w"><div class="n o"><div class="n g"><div class="hs" id="lo-post-page-navbar-sign-in-link"><div class="bj r"><span class="aw b bk bl bm bn r cs ct"><a href="https://medium.com/m/signin?operation=login&amp;redirect=https%3A%2F%2Fmedium.com%2Fquintoandar-tech-blog%2Fhibernate-and-the-n-1-selections-problem-c497710fa3fe&amp;source=post_page-----c497710fa3fe---------------------nav_reg-" class="cu cv bs bt bu bv bw bx by bz cw cx cc cd ce cf" rel="noopener">Sign in</a></span></div></div></div><div class="hs" id="lo-post-page-navbar-get-started-button"><div class="bj r"><button class="cg ch cu cv cy cw cx cz bz ck aw b bk bl bm bn cl cm cn co cp cc">Get started</button></div></div></div></div></div></div></div></div></div><div class="da cq ac cr"><div class="n p"><div class="ae af ag ah ai aj ak al"><div class="db ba n o"><div class="dc r bh"><a href="https://medium.com/quintoandar-tech-blog?source=post_page-----c497710fa3fe----------------------" rel="noopener"><span class="aw ax dd de ba df bc bd be bf bg">QuintoAndar Tech Blog</span></a></div><div class="dg r dh"><ul class="di by dj dk dl n dm g dn do dp"></ul></div></div></div></div></div></div></nav><div class="dq am r dr ds"></div><article class="meteredContent"><section class="dt du dv dw al dx cn n dy"></section><span class="r"></span><div><div class="dz u ea eb ec ed"></div><section class="ee ef eg eh ei"><div class="n p"><div class="ae af ag ah ai ej ak al"><div><div id="6ef7" class="ek el em bk en b eo ep eq er es et eu ev ew ex ey"><h1 class="en b eo ez eq fa es fb eu fc ew fd em">Hibernate and the n+1 selections problem</h1></div><div class="fe"><div class="n ff fg fh fi"><div class="o n"><div><a rel="noopener" href="https://medium.com/@joao.munhoz?source=post_page-----c497710fa3fe----------------------"><img alt="Joao Munhoz" class="r fj fk fl" src="./Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium_files/0_P5ob2tQHTkQC0Vi6.jpg" width="48" height="48"></a></div><div class="fm al r"><div class="n"><div style="flex:1"><span class="aw b bk bl bm bn r em q"><div class="fn n o fo"><span class="aw fp fq bl ba fr bc bd be bf em"><a class="fs ft bs bt bu bv bw bx by bz fu cc cd fv fw" rel="noopener" href="https://medium.com/@joao.munhoz?source=post_page-----c497710fa3fe----------------------">Joao Munhoz</a></span><div class="fx r bh h"><button class="fy em q ch fz ga gb gc bz fv gd ge gf gg gh gi ck aw b bk gj gk bn cl cm cn co cp cc">Follow</button></div></div></span></div></div><span class="aw b bk bl bm bn r cs ct"><span class="aw fp fq bl ba fr bc bd be bf cs"><div><a class="fs ft bs bt bu bv bw bx by bz fu cc cd fv fw" rel="noopener" href="https://medium.com/quintoandar-tech-blog/hibernate-and-the-n-1-selections-problem-c497710fa3fe?source=post_page-----c497710fa3fe----------------------">May 27, 2019</a> <!-- -->·<!-- --> <!-- -->6<!-- --> min read<span style="padding-left:4px"><svg class="star-15px_svg__svgIcon-use" width="15" height="15" viewBox="0 0 15 15" style="margin-top:-2px"><path d="M7.44 2.32c.03-.1.09-.1.12 0l1.2 3.53a.29.29 0 0 0 .26.2h3.88c.11 0 .13.04.04.1L9.8 8.33a.27.27 0 0 0-.1.29l1.2 3.53c.03.1-.01.13-.1.07l-3.14-2.18a.3.3 0 0 0-.32 0L4.2 12.22c-.1.06-.14.03-.1-.07l1.2-3.53a.27.27 0 0 0-.1-.3L2.06 6.16c-.1-.06-.07-.12.03-.12h3.89a.29.29 0 0 0 .26-.19l1.2-3.52z"></path></svg></span></div></span></span></div></div><div class="n gl gm gn go gp gq gr gs ab"><div class="n o"><div class="gt r bh"><a href="https://medium.com/p/c497710fa3fe/share/twitter?source=post_actions_header---------------------------" class="fs ft bs bt bu bv bw bx by bz gu gv cc cd fv fw" target="_blank" rel="noopener nofollow"><svg width="29" height="29" class="q"><path d="M22.05 7.54a4.47 4.47 0 0 0-3.3-1.46 4.53 4.53 0 0 0-4.53 4.53c0 .35.04.7.08 1.05A12.9 12.9 0 0 1 5 6.89a5.1 5.1 0 0 0-.65 2.26c.03 1.6.83 2.99 2.02 3.79a4.3 4.3 0 0 1-2.02-.57v.08a4.55 4.55 0 0 0 3.63 4.44c-.4.08-.8.13-1.21.16l-.81-.08a4.54 4.54 0 0 0 4.2 3.15 9.56 9.56 0 0 1-5.66 1.94l-1.05-.08c2 1.27 4.38 2.02 6.94 2.02 8.3 0 12.86-6.9 12.84-12.85.02-.24 0-.43 0-.65a8.68 8.68 0 0 0 2.26-2.34c-.82.38-1.7.62-2.6.72a4.37 4.37 0 0 0 1.95-2.51c-.84.53-1.81.9-2.83 1.13z"></path></svg></a></div><div class="gt r bh"><a href="https://medium.com/p/c497710fa3fe/share/facebook?source=post_actions_header---------------------------" class="fs ft bs bt bu bv bw bx by bz gu gv cc cd fv fw" target="_blank" rel="noopener nofollow"><svg width="29" height="29" class="q"><path d="M23.2 5H5.8a.8.8 0 0 0-.8.8V23.2c0 .44.35.8.8.8h9.3v-7.13h-2.38V13.9h2.38v-2.38c0-2.45 1.55-3.66 3.74-3.66 1.05 0 1.95.08 2.2.11v2.57h-1.5c-1.2 0-1.48.57-1.48 1.4v1.96h2.97l-.6 2.97h-2.37l.05 7.12h5.1a.8.8 0 0 0 .79-.8V5.8a.8.8 0 0 0-.8-.79"></path></svg></a></div><div class="gw r ap"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fquintoandar-tech-blog%2Fhibernate-and-the-n-1-selections-problem-c497710fa3fe&amp;source=post_actions_header--------------------------bookmark_sidebar-" class="fs ft bs bt bu bv bw bx by bz gu gv cc cd fv fw" rel="noopener"><svg width="25" height="25" viewBox="0 0 25 25"><path d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z" fill-rule="evenodd"></path></svg></a></div></div></div></div></div></div><figure class="gy gz ha hb hc hd dv dw paragraph-image"><div class="he hf hg hh al"><div class="dv dw gx"><div class="hn r hg ho"><div class="hp r"><div class="hi hj dz t u hk al ba hl hm"><img class="dz t u hk al hq hr bi ri" src="./Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium_files/1_n4YP5-Bxv2b69Q8coGy0Tw.jpeg" width="3840" height="2160" role="presentation"></div><img class="ms rh dz t u hk al ht" width="3840" height="2160" role="presentation" src="./Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium_files/1_n4YP5-Bxv2b69Q8coGy0Tw(1).jpeg"><noscript><img class="dz t u hk al" src="https://miro.medium.com/max/7680/1*n4YP5-Bxv2b69Q8coGy0Tw.jpeg" width="3840" height="2160" role="presentation"/></noscript></div></div></div></div><figcaption class="cs fq hu hv hw dx dv dw hx hy aw fp" data-selectable-paragraph="">Photo by <a href="https://unsplash.com/photos/RdGLsSDMJ3E?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" class="fs cp hz ia ib ic" target="_blank" rel="noopener nofollow">Foo Bar</a> on <a href="https://unsplash.com/collections/3632074/datacenter?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" class="fs cp hz ia ib ic" target="_blank" rel="noopener nofollow">Unsplash</a></figcaption></figure><p id="7ea4" class="id ie em bk if b ig ih ii ij ik il im in io ip iq ee" data-selectable-paragraph="">One of the greatest challenges in software design is the difference of paradigm between the object-oriented world (in which many applications rely on) and the relational world of databases.</p><p id="6129" class="id ie em bk if b ig ih ii ij ik il im in io ip iq ee" data-selectable-paragraph="">Converting objects to tables and vice-versa is what we call object-relational mapping (ORM). Building your own ORM solution is no trivial task, requires a great effort and is very error-prone. Therefore, it is not the recommended approach most of the times, especially considering that there are some reliable and well-established alternatives. One of the most important and used in the Java world is Hibernate.</p><p id="074b" class="id ie em bk if b ig ih ii ij ik il im in io ip iq ee" data-selectable-paragraph="">Although Hibernate abstracts most of the persistence logic and attempts to achieve low latency when making read/write operations in the database, it is no silver bullet. In particular, we have to be very careful with the way we write our queries, especially for objects that have collections as an attribute because this can lead to severe performance problems.</p><p id="7cad" class="id ie em bk if b ig ih ii ij ik il im in io ip iq ee" data-selectable-paragraph="">Basically, we can map our collection associations with two different fetching types: the first one is <em class="ir">eager</em>, which means that whenever the top-level object is loaded, the associated collection will be completely loaded as well, regardless if it will be used or not. The other fetch type is <em class="ir">lazy</em>; in this case, the collection is not loaded when we retrieve the top-level object and the application will be responsible for handling it when needed (if needed at all).</p><p id="01b8" class="id ie em bk if b ig ih ii ij ik il im in io ip iq ee" data-selectable-paragraph="">It is common (and recommended) to map most associations for lazy initialization. This way, the entire object tree is not retrieved right away for every query. But not loading the related objects together with the top-level ones can lead to the <em class="ir">n+1</em> selections problem, one of the main performance issues related to persistence. Let’s take a deeper look at this.</p><p id="a0ae" class="id ie em bk if b ig ih ii ij ik il im in io ip iq ee" data-selectable-paragraph="">Suppose we are building an application to control enterprise buildings, in which each building can contain a number of companies. To model this in software, we could have a <em class="ir">Building </em>class that contains a collection of instances of a <em class="ir">Company </em>class.</p><p id="db3d" class="id ie em bk if b ig ih ii ij ik il im in io ip iq ee" data-selectable-paragraph="">Following the guidelines for this kind of association, we would map this relation using lazy initialization, as explained before. But what happens if I need, for example, to calculate the sum of the rent the companies pay for all the buildings to get the total profit?</p><p id="e7f8" class="id ie em bk if b ig ih ii ij ik il im in io ip iq ee" data-selectable-paragraph="">We could do it like that:</p><pre class="gy gz ha hb hc is it dl"><span id="60b8" class="iu iv em bk iw b fq ix iy r iz" data-selectable-paragraph="">@Transactional<br>public int getTotalProfit() {<br>    List&lt;Building&gt; buildings = buildingRepository.findAll();<br><br>    int totalProfit = 0;<br><br>    for (Building building : buildings) {<br>        for (Company company : building.getCompanies()) {<br>            totalProfit+=company.getRent();<br>        }<br>    }<br><br>    return totalProfit;<br>}</span></pre><p id="53b4" class="id ie em bk if b ig ih ii ij ik il im in io ip iq ee" data-selectable-paragraph="">Considering that we mapped our Building-Company association with lazy initialization, the <em class="ir">Company</em> collection for each building will not be loaded when we reach the repository to get all the buildings.</p><p id="bf20" class="id ie em bk if b ig ih ii ij ik il im in io ip iq ee" data-selectable-paragraph="">But it must be loaded when we call <em class="ir">building.getCompanies()</em>, and Hibernate will reach the DB again to fetch this data <strong class="if ja">at each iteration</strong>. So, although we explicitly call the repository to get the entities only one time, we, in fact, are doing a much greater number of reading operations. If we have <em class="ir">n</em> buildings, we will have <em class="ir">n+1 </em>selections (the general and one extra for each building) and that is from where the name of the problem comes.</p><p id="f88f" class="id ie em bk if b ig ih ii ij ik il im in io ip iq ee" data-selectable-paragraph="">You could be thinking now “Ok, but couldn’t we do a better logic than that and simply avoid this in the first place?”. The answer is yes, but this problem may appear in cases that are not as trivial as this one, being hidden in more complex logic.</p><p id="29f3" class="id ie em bk if b ig ih ii ij ik il im in io ip iq ee" data-selectable-paragraph="">Now that we have explained the problem, let us take a look at some approaches to mitigate and even solve it.</p><p id="7e91" class="id ie em bk if b ig ih ii ij ik il im in io ip iq ee" data-selectable-paragraph="">For a simple case like this one, we could just move the operation done in memory to an aggregate function that could be written directly in HQL (<em class="ir">Hibernate Query Language</em>). This would be more performative and is recommended for the cases where our code just applies operations that are available directly in the database.</p><p id="9921" class="id ie em bk if b ig ih ii ij ik il im in io ip iq ee" data-selectable-paragraph="">But what to do in the general case?</p><p id="96bc" class="id ie em bk if b ig ih ii ij ik il im in io ip iq ee" data-selectable-paragraph="">The first way to mitigate this problem is by enabling querying objects in batches. In this approach, Hibernate will load in advance the next <em class="ir">x </em>elements of the collection when the first one is accessed. This would reduce the problem from <em class="ir">n+1</em> to <em class="ir">n/x + 1 </em>selections, being <em class="ir">x </em>the batch size defined by us. The listing below shows how this could be done for our Building-Company example.</p><pre class="gy gz ha hb hc is it dl"><span id="c83e" class="iu iv em bk iw b fq ix iy r iz" data-selectable-paragraph="">@Entity<br>public class Building {<br><br>    @OneToMany(fetch = FetchType.<em class="ir">LAZY)</em><br>    @BatchSize(size = 10)<br>    private List&lt;Company&gt; companies;<br>}</span></pre><p id="8e03" class="id ie em bk if b ig ih ii ij ik il im in io ip iq ee" data-selectable-paragraph="">By adding the <em class="ir">BatchSize </em>annotation to our mapping with size equals to 10, we are telling Hibernate to load 10 <em class="ir">Company</em> instances every time we try to access one that was not loaded yet. Tunning the batch size can solve the latency for your application but has the downside that maybe these objects will be retrieved unnecessarily.</p><p id="c739" class="id ie em bk if b ig ih ii ij ik il im in io ip iq ee" data-selectable-paragraph="">Another solution would be defining the fetch type of the association as eager in the class-level mapping (as in the listing below). This would solve the problem, but there is a huge downside that <strong class="if ja">all</strong> queries that load this object will load the full collection too. This would spend a lot of resources unnecessarily and would increase lock time in the database, impacting directly in the concurrency capacity of the application. Therefore, eager mapping at class level is not advised.</p><pre class="gy gz ha hb hc is it dl"><span id="4f4a" class="iu iv em bk iw b fq ix iy r iz" data-selectable-paragraph="">@Entity<br>public class Building {<br><br>    @OneToMany(fetch = FetchType.<em class="ir">EAGER)</em><br>    private List&lt;Company&gt; companies;<br>}</span></pre><p id="1d57" class="id ie em bk if b ig ih ii ij ik il im in io ip iq ee" data-selectable-paragraph="">The recommended solution is taking advantage of the support that Hibernate gives to instructions at execution time. So, instead of defining the association as eager fetching in the class level, we define it in the query level just when necessary. This can be done by using <em class="ir">setFetchMode</em> in a Criteria query or using a join fetch in HQL.</p><p id="e138" class="id ie em bk if b ig ih ii ij ik il im in io ip iq ee" data-selectable-paragraph="">So, for our Building-Company example, we could create a new method <em class="ir">findAllBuildingsWithCompany</em>, implemented like this:</p><pre class="gy gz ha hb hc is it dl"><span id="03a7" class="iu iv em bk iw b fq ix iy r iz" data-selectable-paragraph="">//Using Criteria interface<br>public List&lt;Building&gt; findAllBuildingsWithCompany() {<br>    Criteria criteria = sessionFactory.getCurrentSession().createCriteria(Building.class);<br><br>    criteria.setFetchMode("Company", FetchMode.<em class="ir">EAGER</em>);<br><br>    return criteria.list();<br>}</span><span id="15ba" class="iu iv em bk iw b fq jb jc jd je jf iy r iz" data-selectable-paragraph="">//Using HQL<br>@Query("SELECT b FROM Building b JOIN FETCH b.companies")<br>List&lt;Building&gt; findAllBuildingsWithCompany();</span></pre><p id="1212" class="id ie em bk if b ig ih ii ij ik il im in io ip iq ee" data-selectable-paragraph="">So, instead of obtaining just the top-level objects in the initial query and then fetching the necessary associations while the application navigates the object tree, we follow this process:</p><ul class=""><li id="cdc1" class="id ie em bk if b ig ih ii ij ik il im in io ip iq jg jh ji" data-selectable-paragraph="">Fetch all necessary objects in the initial query, specifying exactly which associations will be accessed during the transaction</li><li id="602c" class="id ie em bk if b ig jj ii jk ik jl im jm io jn iq jg jh ji" data-selectable-paragraph="">Navigate the object tree, that now consists only of objects that were already retrieved in memory</li></ul><p id="4340" class="id ie em bk if b ig ih ii ij ik il im in io ip iq ee" data-selectable-paragraph="">With this solution, we guarantee that we will have only one read operation in the DB and we don’t force all fetches for this entity to load all the data, which would spend unnecessary resources many times.</p><p id="7a4a" class="id ie em bk if b ig ih ii ij ik il im in io ip iq ee" data-selectable-paragraph="">Finally, there is one extra solution to a particular example of this problem. For collections in which the number of instances is sufficiently small, it is possible to maintain all these instances in Hibernate second-level cache. An example of how to enable cache to a class is shown in the listing below.</p><pre class="gy gz ha hb hc is it dl"><span id="1b75" class="iu iv em bk iw b fq ix iy r iz" data-selectable-paragraph="">@Entity<br>@Cacheable<br>@Cache(usage = READ_WRITE)<br>public class Company {<br><br>    private int rent;<br>}</span></pre><p id="8564" class="id ie em bk if b ig ih ii ij ik il im in io ip iq ee" data-selectable-paragraph="">Using this approach would avoid the need to reach the database to fetch this info every time it is needed. It is a good solution when applicable (which is not the case many times, unfortunately).</p><p id="be47" class="id ie em bk if b ig ih ii ij ik il im in io ip iq ee" data-selectable-paragraph="">So to conclude, although Hibernate does a very good job in abstracting the persistence layer and helps with performance as much as possible, we cannot trust it blindly and our code must be designed to search objects efficiently. Whenever writing queries that use methods as <em class="ir">list(), iterate() </em>or <em class="ir">load()</em>, be aware that accessing collections may lead to the<em class="ir"> n+1 </em>problem and to latency issues that may reduce drastically the performance of the application.</p></div></div></section></div></article><div class="hi ed jo s al jv jt jw" data-test-id="post-sidebar"><div class="n p"><div class="ae af ag ah ai aj ak al"><div class="jx n dy"><div class="ed"><div class="jy jz r"><a href="https://medium.com/quintoandar-tech-blog?source=post_sidebar--------------------------post_sidebar-" class="fs ft bs bt bu bv bw bx by bz gu gv cc cd fv fw" rel="noopener"><h2 class="aw ax ka bl em">QuintoAndar Tech Blog</h2></a><div class="kb kc r"><h4 class="aw fp fq bl ba kd bc bd ke bf cs">A peek into how we get things done</h4></div><div class="co" aria-hidden="true"><button class="kf ch cu cv cy cw cx cz bz ck aw b bk bl bm bn cl cm cn co cp cc">Follow</button></div></div><div class="kg kh ki n"><div class="n o"><div class="kj r hg"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fquintoandar-tech-blog%2Fhibernate-and-the-n-1-selections-problem-c497710fa3fe&amp;source=post_sidebar-----c497710fa3fe---------------------clap_sidebar-" class="fs ft bs bt bu bv bw bx by bz gu gv cc cd fv fw" rel="noopener"><div class="bx kk kl km kn ko kp kq cv kr cx"><svg width="29" height="29"><g fill-rule="evenodd"><path d="M13.74 1l.76 2.97.76-2.97zM16.82 4.78l1.84-2.56-1.43-.47zM10.38 2.22l1.84 2.56-.41-3.03zM22.38 22.62a5.11 5.11 0 0 1-3.16 1.61l.49-.45c2.88-2.89 3.45-5.98 1.69-9.21l-1.1-1.94-.96-2.02c-.31-.67-.23-1.18.25-1.55a.84.84 0 0 1 .66-.16c.34.05.66.28.88.6l2.85 5.02c1.18 1.97 1.38 5.12-1.6 8.1M9.1 22.1l-5.02-5.02a1 1 0 0 1 .7-1.7 1 1 0 0 1 .72.3l2.6 2.6a.44.44 0 0 0 .63-.62L6.1 15.04l-1.75-1.75a1 1 0 1 1 1.41-1.41l4.15 4.15a.44.44 0 0 0 .63 0 .44.44 0 0 0 0-.62L6.4 11.26l-1.18-1.18a1 1 0 0 1 0-1.4 1.02 1.02 0 0 1 1.41 0l1.18 1.16L11.96 14a.44.44 0 0 0 .62 0 .44.44 0 0 0 0-.63L8.43 9.22a.99.99 0 0 1-.3-.7.99.99 0 0 1 .3-.7 1 1 0 0 1 1.41 0l7 6.98a.44.44 0 0 0 .7-.5l-1.35-2.85c-.31-.68-.23-1.19.25-1.56a.85.85 0 0 1 .66-.16c.34.06.66.28.88.6L20.63 15c1.57 2.88 1.07 5.54-1.55 8.16a5.62 5.62 0 0 1-5.06 1.65 9.35 9.35 0 0 1-4.93-2.72zM13 6.98l2.56 2.56c-.5.6-.56 1.41-.15 2.28l.26.56-4.25-4.25a.98.98 0 0 1-.12-.45 1 1 0 0 1 .29-.7 1.02 1.02 0 0 1 1.41 0zm8.89 2.06c-.38-.56-.9-.92-1.49-1.01a1.74 1.74 0 0 0-1.34.33c-.38.29-.61.65-.71 1.06a2.1 2.1 0 0 0-1.1-.56 1.78 1.78 0 0 0-.99.13l-2.64-2.64a1.88 1.88 0 0 0-2.65 0 1.86 1.86 0 0 0-.48.85 1.89 1.89 0 0 0-2.67-.01 1.87 1.87 0 0 0-.5.9c-.76-.75-2-.75-2.7-.04a1.88 1.88 0 0 0 0 2.66c-.3.12-.61.29-.87.55a1.88 1.88 0 0 0 0 2.66l.62.62a1.88 1.88 0 0 0-.9 3.16l5.01 5.02c1.6 1.6 3.52 2.64 5.4 2.96a7.16 7.16 0 0 0 1.18.1c1.03 0 2-.25 2.9-.7A5.9 5.9 0 0 0 23 23.24c3.34-3.34 3.08-6.93 1.74-9.17l-2.87-5.04z"></path></g></svg></div></a></div><div class="ks r"><div class="kt"><h4 class="aw fp fq bl cs"><button class="fs ft bs bt bu bv bw bx by bz gu gv cc cd fv fw">416 </button></h4></div></div></div></div><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fquintoandar-tech-blog%2Fhibernate-and-the-n-1-selections-problem-c497710fa3fe&amp;source=post_sidebar--------------------------bookmark_sidebar-" class="fs ft bs bt bu bv bw bx by bz gu gv cc cd fv fw" rel="noopener"><svg width="25" height="25" viewBox="0 0 25 25"><path d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z" fill-rule="evenodd"></path></svg></a></div></div></div></div></div><div class="hi ed jo s jp jq jr js jt ju"></div><div><div class="ku hd n dy p"><div class="n p"><div class="ae af ag ah ai ej ak al"><div class="n kv"><div class="r"><h4 class="aw fp gk bl cs">Thanks to <!-- -->Adilson Atalla<!-- --> and <!-- -->Guilherme Rodrigues Salerno<!-- -->.&nbsp;</h4></div></div><div class="n o kv"></div><div class="kw r"><ul class="bx by"><li class="co di kx ky"><a href="https://medium.com/tag/software-development" class="kz la cp cs r it lb a b gk">Software Development</a></li><li class="co di kx ky"><a href="https://medium.com/tag/orm" class="kz la cp cs r it lb a b gk">Orm</a></li><li class="co di kx ky"><a href="https://medium.com/tag/hibernate" class="kz la cp cs r it lb a b gk">Hibernate</a></li><li class="co di kx ky"><a href="https://medium.com/tag/query" class="kz la cp cs r it lb a b gk">Query</a></li></ul></div><div class="lc n ff ab"><div class="n o"><div class="ld r hg"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fquintoandar-tech-blog%2Fhibernate-and-the-n-1-selections-problem-c497710fa3fe&amp;source=post_actions_footer-----c497710fa3fe---------------------clap_footer-" class="fs ft bs bt bu bv bw bx by bz gu gv cc cd fv fw" rel="noopener"><div class="c le fj n o lf hg lg lh li lj lk ll lm ln lo lp lq lr ls cz"><div class="bx kk kl km kn ko lt kq o ht fj n p lu u hk dz t al cv kr cx lv"><svg width="33" height="33" viewBox="0 0 33 33"><path d="M28.86 17.34l-3.64-6.4c-.3-.43-.71-.73-1.16-.8a1.12 1.12 0 0 0-.9.21c-.62.5-.73 1.18-.32 2.06l1.22 2.6 1.4 2.45c2.23 4.09 1.51 8-2.15 11.66a9.6 9.6 0 0 1-.8.71 6.53 6.53 0 0 0 4.3-2.1c3.82-3.82 3.57-7.87 2.05-10.39zm-6.25 11.08c3.35-3.35 4-6.78 1.98-10.47L21.2 12c-.3-.43-.71-.72-1.16-.8a1.12 1.12 0 0 0-.9.22c-.62.49-.74 1.18-.32 2.06l1.72 3.63a.5.5 0 0 1-.81.57l-8.91-8.9a1.33 1.33 0 0 0-1.89 1.88l5.3 5.3a.5.5 0 0 1-.71.7l-5.3-5.3-1.49-1.49c-.5-.5-1.38-.5-1.88 0a1.34 1.34 0 0 0 0 1.89l1.49 1.5 5.3 5.28a.5.5 0 0 1-.36.86.5.5 0 0 1-.36-.15l-5.29-5.29a1.34 1.34 0 0 0-1.88 0 1.34 1.34 0 0 0 0 1.89l2.23 2.23L9.3 21.4a.5.5 0 0 1-.36.85.5.5 0 0 1-.35-.14l-3.32-3.33a1.33 1.33 0 0 0-1.89 0 1.32 1.32 0 0 0-.39.95c0 .35.14.69.4.94l6.39 6.4c3.53 3.53 8.86 5.3 12.82 1.35zM12.73 9.26l5.68 5.68-.49-1.04c-.52-1.1-.43-2.13.22-2.89l-3.3-3.3a1.34 1.34 0 0 0-1.88 0 1.33 1.33 0 0 0-.4.94c0 .22.07.42.17.61zm14.79 19.18a7.46 7.46 0 0 1-6.41 2.31 7.92 7.92 0 0 1-3.67.9c-3.05 0-6.12-1.63-8.36-3.88l-6.4-6.4A2.31 2.31 0 0 1 2 19.72a2.33 2.33 0 0 1 1.92-2.3l-.87-.87a2.34 2.34 0 0 1 0-3.3 2.33 2.33 0 0 1 1.24-.64l-.14-.14a2.34 2.34 0 0 1 0-3.3 2.39 2.39 0 0 1 3.3 0l.14.14a2.33 2.33 0 0 1 3.95-1.24l.09.09c.09-.42.29-.83.62-1.16a2.34 2.34 0 0 1 3.3 0l3.38 3.39a2.17 2.17 0 0 1 1.27-.17c.54.08 1.03.35 1.45.76.1-.55.41-1.03.9-1.42a2.12 2.12 0 0 1 1.67-.4 2.8 2.8 0 0 1 1.85 1.25l3.65 6.43c1.7 2.83 2.03 7.37-2.2 11.6zM13.22.48l-1.92.89 2.37 2.83-.45-3.72zm8.48.88L19.78.5l-.44 3.7 2.36-2.84zM16.5 3.3L15.48 0h2.04L16.5 3.3z" fill-rule="evenodd"></path></svg></div></div></a></div><div class="ks r"><div class="kt"><h4 class="aw fp fq bl em"><button class="fs ft bs bt bu bv bw bx by bz gu gv cc cd fv fw">416 claps</button></h4></div></div></div><div class="n o"><div class="gt r bh"><a href="https://medium.com/p/c497710fa3fe/share/twitter?source=post_actions_footer---------------------------" class="fs ft bs bt bu bv bw bx by bz gu gv cc cd fv fw" target="_blank" rel="noopener nofollow"><svg width="29" height="29" class="q"><path d="M22.05 7.54a4.47 4.47 0 0 0-3.3-1.46 4.53 4.53 0 0 0-4.53 4.53c0 .35.04.7.08 1.05A12.9 12.9 0 0 1 5 6.89a5.1 5.1 0 0 0-.65 2.26c.03 1.6.83 2.99 2.02 3.79a4.3 4.3 0 0 1-2.02-.57v.08a4.55 4.55 0 0 0 3.63 4.44c-.4.08-.8.13-1.21.16l-.81-.08a4.54 4.54 0 0 0 4.2 3.15 9.56 9.56 0 0 1-5.66 1.94l-1.05-.08c2 1.27 4.38 2.02 6.94 2.02 8.3 0 12.86-6.9 12.84-12.85.02-.24 0-.43 0-.65a8.68 8.68 0 0 0 2.26-2.34c-.82.38-1.7.62-2.6.72a4.37 4.37 0 0 0 1.95-2.51c-.84.53-1.81.9-2.83 1.13z"></path></svg></a></div><div class="gt r bh"><a href="https://medium.com/p/c497710fa3fe/share/facebook?source=post_actions_footer---------------------------" class="fs ft bs bt bu bv bw bx by bz gu gv cc cd fv fw" target="_blank" rel="noopener nofollow"><svg width="29" height="29" class="q"><path d="M23.2 5H5.8a.8.8 0 0 0-.8.8V23.2c0 .44.35.8.8.8h9.3v-7.13h-2.38V13.9h2.38v-2.38c0-2.45 1.55-3.66 3.74-3.66 1.05 0 1.95.08 2.2.11v2.57h-1.5c-1.2 0-1.48.57-1.48 1.4v1.96h2.97l-.6 2.97h-2.37l.05 7.12h5.1a.8.8 0 0 0 .79-.8V5.8a.8.8 0 0 0-.8-.79"></path></svg></a></div><div class="gt r bh"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fquintoandar-tech-blog%2Fhibernate-and-the-n-1-selections-problem-c497710fa3fe&amp;source=post_actions_footer--------------------------bookmark_sidebar-" class="fs ft bs bt bu bv bw bx by bz gu gv cc cd fv fw" rel="noopener"><svg width="25" height="25" viewBox="0 0 25 25"><path d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z" fill-rule="evenodd"></path></svg></a></div><div class="co" aria-hidden="true"><div class="co" aria-hidden="true"><div class="r bh"><button class="fs ft bs bt bu bv bw bx by bz gu gv cc cd fv fw"><svg width="25" height="25" viewBox="-480.5 272.5 21 21" class="q"><path d="M-463 284.6c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zm-7-.9c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zm-7-.9c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5z"></path></svg></button></div></div></div></div></div><div class="lw lx ly kw r ab"><div class="lz ma r hg"><span class="r mb ao mc"><div class="r dz md me"><a rel="noopener" href="https://medium.com/@joao.munhoz?source=follow_footer--------------------------follow_footer-"><img alt="Joao Munhoz" class="r fj dp mf" src="./Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium_files/0_P5ob2tQHTkQC0Vi6(1).jpg" width="80" height="80"></a></div><span class="r"><div class="mg r mh"><p class="aw fp gk bl cs mi mj">Written by</p></div><div class="mg mk n mh"><div class="al n o ff"><h2 class="aw ax ay az em"><a class="fs ft bs bt bu bv bw bx by bz gu gv cc cd fv fw" rel="noopener" href="https://medium.com/@joao.munhoz?source=follow_footer--------------------------follow_footer-">Joao Munhoz</a></h2><div class="r g"><button class="kf ch cu cv cy cw cx cz bz ck aw b bk bl bm bn cl cm cn co cp cc">Follow</button></div></div></div></span></span><div class="mg ml r mh cr"><div class="mm r"><h4 class="aw fp ka mn cs">Software Engineer</h4></div><div class="cq mo cr"><button class="kf ch cu cv cy cw cx cz bz ck aw b bk bl bm bn cl cm cn co cp cc">Follow</button></div></div></div><div class="lw r"></div><div class="lz ma r hg"><span class="r mb ao mc"><div class="r dz md me"><a href="https://medium.com/quintoandar-tech-blog?source=follow_footer--------------------------follow_footer-" rel="noopener"><img alt="QuintoAndar Tech Blog" class="ck mf dp" src="./Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium_files/1_LjE4Z7lFIM0_ySF6dTABSw.png" width="80" height="80"></a></div><span class="r"><div class="mg mk n mh"><div class="al n o ff"><h2 class="aw ax ay az em"><a href="https://medium.com/quintoandar-tech-blog?source=follow_footer--------------------------follow_footer-" class="fs ft bs bt bu bv bw bx by bz gu gv cc cd fv fw" rel="noopener">QuintoAndar Tech Blog</a></h2><div class="r g"><div class="co" aria-hidden="true"><button class="kf ch cu cv cy cw cx cz bz ck aw b bk bl bm bn cl cm cn co cp cc">Follow</button></div></div></div></div></span></span><div class="mg mp r mh cr"><div class="mm r"><h4 class="aw fp ka mn cs">A peek into how we get things done</h4></div><div class="cq mo cr"><div class="co" aria-hidden="true"><button class="kf ch cu cv cy cw cx cz bz ck aw b bk bl bm bn cl cm cn co cp cc">Follow</button></div></div></div></div></div><div class="mq lx r ab"><a href="https://medium.com/p/c497710fa3fe/responses/show?source=follow_footer--------------------------follow_footer-" class="fs ft bs bt bu bv bw bx by bz gu gv cc cd fv fw" rel="noopener"><span class="mr ms kn"><div class="is mt ck r hw cr"><span class="cu">See responses (2)</span></div></span></a></div></div></div><div class="mu r mv ab"><div class="n p"><div class="ae af ag ah ai aj ak al"><div class="rm r rn"><div class="og jz lz r"><h2 class="aw ax dd de em">More From Medium</h2></div><div class="dm n pg kv ro rp rq rr rs rt ru rv rw rx ry rz sa sb sc"><div class="sd se sf ox sg sh si oz sj sk sl pb sm sn so sp sq sr ss st su"><div class="al hk"><div class="r sv"><div class="sw sx ro rp rq sy sz rr rs rt ta tb ru rv rw tc td rx ry rz te tf sa sb sc n kv"><div class="sd se sf ox sg sh tg th sj sk ti tj sm sn tk pd sq sr tl tm su"><div class="tn r to f"><h4 class="aw fp fq bl cs">More from QuintoAndar Tech Blog</h4></div><div class="tp r tq rn"><a class="fs ft bs bt bu bv bw bx by bz gu gv cc cd fv fw r" rel="noopener" href="https://medium.com/quintoandar-tech-blog/building-an-agile-team-in-a-structured-way-1d5b88befe72?source=post_recirc---------0------------------"><div class="tr hg"><div class="hk dz al"><div class="ts r tt ps hk al tu tv"></div></div></div></a></div></div><div class="sd se sf ox sg sh tg th sj sk ti tj sm sn tk pd sq sr tl tm su"><div class="tp r"><div class="tw cq h tx"><h4 class="aw fp fq bl cs">More from QuintoAndar Tech Blog</h4></div><a rel="noopener" href="https://medium.com/quintoandar-tech-blog/building-an-agile-team-in-a-structured-way-1d5b88befe72?source=post_recirc---------0------------------"><h3 class="em q en ql bk ty tz ua">Building an agile team in a structured way</h3></a></div><div class="n o ff"><div class="ub r dh"><div class="o n"><div><a rel="noopener" href="https://medium.com/@adilsonatalla?source=post_recirc---------0------------------"><img alt="Adilson Atalla" class="r fj uc ud" src="./Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium_files/1_DjqrU9t1yY3QV0nZRf5o3Q.png" width="40" height="40"></a></div><div class="fm al r"><div class="n"><div style="flex: 1 1 0%;"><span class="aw b bk bl bm bn r em q"><div class="dq n o fo"><span class="aw fp fq bl ba fr bc bd be bf em"><a class="fs ft bs bt bu bv bw bx by bz fu cc cd fv fw" rel="noopener" href="https://medium.com/@adilsonatalla?source=post_recirc---------0------------------">Adilson Atalla</a><span> in <a href="https://medium.com/quintoandar-tech-blog?source=post_recirc---------0------------------" class="fs ft bs bt bu bv bw bx by bz fu cc cd fv fw" rel="noopener">QuintoAndar Tech Blog</a></span></span></div></span></div></div><span class="aw b bk bl bm bn r cs ct"><span class="aw fp fq bl ba fr bc bd be bf cs"><div><a class="fs ft bs bt bu bv bw bx by bz fu cc cd fv fw" rel="noopener" href="https://medium.com/quintoandar-tech-blog/building-an-agile-team-in-a-structured-way-1d5b88befe72?source=post_recirc---------0------------------">Sep 19, 2018</a> · 14 min read</div></span></span></div></div></div><div class="n o"><div class="n o"><div class="kj r hg"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fquintoandar-tech-blog%2Fhibernate-and-the-n-1-selections-problem-c497710fa3fe&amp;source=post_recirc-----1d5b88befe72----0-----------------clap_preview-" class="fs ft bs bt bu bv bw bx by bz gu gv cc cd fv fw" rel="noopener"><div class="bx kk kl km kn ko kp ok ue uf ug"><svg width="25" height="25" viewBox="0 0 25 25"><g fill-rule="evenodd"><path d="M11.74 0l.76 2.97.76-2.97zM14.81 3.78l1.84-2.56-1.42-.47zM8.38 1.22l1.84 2.56L9.8.75zM20.38 21.62a5.11 5.11 0 0 1-3.16 1.61l.49-.45c2.88-2.89 3.45-5.98 1.69-9.21l-1.1-1.94-.96-2.02c-.31-.67-.23-1.18.25-1.55a.84.84 0 0 1 .66-.16c.34.05.66.28.88.6l2.85 5.02c1.18 1.97 1.38 5.12-1.6 8.1M7.1 21.1l-5.02-5.02a1 1 0 0 1 .7-1.7 1 1 0 0 1 .72.3l2.6 2.6a.44.44 0 0 0 .63-.62L4.1 14.04l-1.75-1.75a1 1 0 1 1 1.41-1.41l4.15 4.15a.44.44 0 0 0 .63 0 .44.44 0 0 0 0-.62L4.4 10.26 3.22 9.08a1 1 0 0 1 0-1.4 1.02 1.02 0 0 1 1.41 0l1.18 1.16L9.96 13a.44.44 0 0 0 .62 0 .44.44 0 0 0 0-.63L6.43 8.22a.99.99 0 0 1-.3-.7.99.99 0 0 1 .3-.7 1 1 0 0 1 1.41 0l7 6.98a.44.44 0 0 0 .7-.5l-1.35-2.85c-.31-.68-.23-1.19.25-1.56a.85.85 0 0 1 .66-.16c.34.06.66.28.88.6L18.63 14c1.57 2.88 1.07 5.54-1.55 8.16a5.62 5.62 0 0 1-5.06 1.65 9.35 9.35 0 0 1-4.93-2.72zM11 5.98l2.56 2.56c-.5.6-.56 1.41-.15 2.28l.26.56-4.25-4.25a.98.98 0 0 1-.12-.45 1 1 0 0 1 .29-.7 1.02 1.02 0 0 1 1.41 0zm8.89 2.06c-.38-.56-.9-.92-1.49-1.01a1.74 1.74 0 0 0-1.34.33c-.38.29-.61.65-.71 1.06a2.1 2.1 0 0 0-1.1-.56 1.78 1.78 0 0 0-.99.13l-2.64-2.64a1.88 1.88 0 0 0-2.65 0 1.86 1.86 0 0 0-.48.85 1.89 1.89 0 0 0-2.67-.01 1.87 1.87 0 0 0-.5.9c-.76-.75-2-.75-2.7-.04a1.88 1.88 0 0 0 0 2.66c-.3.12-.61.29-.87.55a1.88 1.88 0 0 0 0 2.66l.62.62a1.88 1.88 0 0 0-.9 3.16l5.01 5.02c1.6 1.6 3.52 2.64 5.4 2.96a7.16 7.16 0 0 0 1.18.1c1.03 0 2-.25 2.9-.7A5.9 5.9 0 0 0 21 22.24c3.34-3.34 3.08-6.93 1.74-9.17l-2.87-5.04z"></path></g></svg></div></a></div><div class="ks r"><div class="kt"><h4 class="aw fp fq bl cs">700 </h4></div></div></div><div class="uh fm ub ui av r"></div><div><div class="co" role="tooltip" aria-hidden="true" aria-describedby="1" aria-labelledby="1"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fquintoandar-tech-blog%2Fhibernate-and-the-n-1-selections-problem-c497710fa3fe&amp;source=post_recirc---------0-----------------bookmark_sidebar-" class="fs ft bs bt bu bv bw bx by bz gu gv cc cd fv fw" rel="noopener"><svg width="25" height="25" viewBox="0 0 25 25"><path d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z" fill-rule="evenodd"></path></svg></a></div></div></div></div></div></div></div></div></div><div class="sd se sf ox sg sh si oz sj sk sl pb sm sn so sp sq sr ss st su"><div class="al hk"><div class="r sv"><div class="sw sx ro rp rq sy sz rr rs rt ta tb ru rv rw tc td rx ry rz te tf sa sb sc n kv"><div class="sd se sf ox sg sh tg th sj sk ti tj sm sn tk pd sq sr tl tm su"><div class="tn r to f"><h4 class="aw fp fq bl cs">More from QuintoAndar Tech Blog</h4></div><div class="tp r tq rn"><a class="fs ft bs bt bu bv bw bx by bz gu gv cc cd fv fw r" rel="noopener" href="https://medium.com/quintoandar-tech-blog/building-a-microservice-f6e3ea345ea5?source=post_recirc---------1------------------"><div class="tr hg"><div class="hk dz al"><div class="uj r tt ps hk al tu tv"></div></div></div></a></div></div><div class="sd se sf ox sg sh tg th sj sk ti tj sm sn tk pd sq sr tl tm su"><div class="tp r"><div class="tw cq h tx"><h4 class="aw fp fq bl cs">More from QuintoAndar Tech Blog</h4></div><a rel="noopener" href="https://medium.com/quintoandar-tech-blog/building-a-microservice-f6e3ea345ea5?source=post_recirc---------1------------------"><h3 class="em q en ql bk ty tz ua">How to build an asynchronous, scalable, idempotent and highly testable microservice</h3></a></div><div class="n o ff"><div class="ub r dh"><div class="o n"><div><a rel="noopener" href="https://medium.com/@bdonizetisilva?source=post_recirc---------1------------------"><img alt="Bruno Donizeti da Silva" class="r fj uc ud" src="./Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium_files/1_ZPSkUt6exu-aSISqN26QDg@2x.jpeg" width="40" height="40"></a></div><div class="fm al r"><div class="n"><div style="flex: 1 1 0%;"><span class="aw b bk bl bm bn r em q"><div class="dq n o fo"><span class="aw fp fq bl ba fr bc bd be bf em"><a class="fs ft bs bt bu bv bw bx by bz fu cc cd fv fw" rel="noopener" href="https://medium.com/@bdonizetisilva?source=post_recirc---------1------------------">Bruno Donizeti da Silva</a><span> in <a href="https://medium.com/quintoandar-tech-blog?source=post_recirc---------1------------------" class="fs ft bs bt bu bv bw bx by bz fu cc cd fv fw" rel="noopener">QuintoAndar Tech Blog</a></span></span></div></span></div></div><span class="aw b bk bl bm bn r cs ct"><span class="aw fp fq bl ba fr bc bd be bf cs"><div><a class="fs ft bs bt bu bv bw bx by bz fu cc cd fv fw" rel="noopener" href="https://medium.com/quintoandar-tech-blog/building-a-microservice-f6e3ea345ea5?source=post_recirc---------1------------------">Jun 7, 2019</a> · 8 min read<span style="padding-left: 4px;"><svg class="star-15px_svg__svgIcon-use" width="15" height="15" viewBox="0 0 15 15" style="margin-top: -2px;"><path d="M7.44 2.32c.03-.1.09-.1.12 0l1.2 3.53a.29.29 0 0 0 .26.2h3.88c.11 0 .13.04.04.1L9.8 8.33a.27.27 0 0 0-.1.29l1.2 3.53c.03.1-.01.13-.1.07l-3.14-2.18a.3.3 0 0 0-.32 0L4.2 12.22c-.1.06-.14.03-.1-.07l1.2-3.53a.27.27 0 0 0-.1-.3L2.06 6.16c-.1-.06-.07-.12.03-.12h3.89a.29.29 0 0 0 .26-.19l1.2-3.52z"></path></svg></span></div></span></span></div></div></div><div class="n o"><div class="n o"><div class="kj r hg"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fquintoandar-tech-blog%2Fhibernate-and-the-n-1-selections-problem-c497710fa3fe&amp;source=post_recirc-----f6e3ea345ea5----1-----------------clap_preview-" class="fs ft bs bt bu bv bw bx by bz gu gv cc cd fv fw" rel="noopener"><div class="bx kk kl km kn ko kp ok ue uf ug"><svg width="25" height="25" viewBox="0 0 25 25"><g fill-rule="evenodd"><path d="M11.74 0l.76 2.97.76-2.97zM14.81 3.78l1.84-2.56-1.42-.47zM8.38 1.22l1.84 2.56L9.8.75zM20.38 21.62a5.11 5.11 0 0 1-3.16 1.61l.49-.45c2.88-2.89 3.45-5.98 1.69-9.21l-1.1-1.94-.96-2.02c-.31-.67-.23-1.18.25-1.55a.84.84 0 0 1 .66-.16c.34.05.66.28.88.6l2.85 5.02c1.18 1.97 1.38 5.12-1.6 8.1M7.1 21.1l-5.02-5.02a1 1 0 0 1 .7-1.7 1 1 0 0 1 .72.3l2.6 2.6a.44.44 0 0 0 .63-.62L4.1 14.04l-1.75-1.75a1 1 0 1 1 1.41-1.41l4.15 4.15a.44.44 0 0 0 .63 0 .44.44 0 0 0 0-.62L4.4 10.26 3.22 9.08a1 1 0 0 1 0-1.4 1.02 1.02 0 0 1 1.41 0l1.18 1.16L9.96 13a.44.44 0 0 0 .62 0 .44.44 0 0 0 0-.63L6.43 8.22a.99.99 0 0 1-.3-.7.99.99 0 0 1 .3-.7 1 1 0 0 1 1.41 0l7 6.98a.44.44 0 0 0 .7-.5l-1.35-2.85c-.31-.68-.23-1.19.25-1.56a.85.85 0 0 1 .66-.16c.34.06.66.28.88.6L18.63 14c1.57 2.88 1.07 5.54-1.55 8.16a5.62 5.62 0 0 1-5.06 1.65 9.35 9.35 0 0 1-4.93-2.72zM11 5.98l2.56 2.56c-.5.6-.56 1.41-.15 2.28l.26.56-4.25-4.25a.98.98 0 0 1-.12-.45 1 1 0 0 1 .29-.7 1.02 1.02 0 0 1 1.41 0zm8.89 2.06c-.38-.56-.9-.92-1.49-1.01a1.74 1.74 0 0 0-1.34.33c-.38.29-.61.65-.71 1.06a2.1 2.1 0 0 0-1.1-.56 1.78 1.78 0 0 0-.99.13l-2.64-2.64a1.88 1.88 0 0 0-2.65 0 1.86 1.86 0 0 0-.48.85 1.89 1.89 0 0 0-2.67-.01 1.87 1.87 0 0 0-.5.9c-.76-.75-2-.75-2.7-.04a1.88 1.88 0 0 0 0 2.66c-.3.12-.61.29-.87.55a1.88 1.88 0 0 0 0 2.66l.62.62a1.88 1.88 0 0 0-.9 3.16l5.01 5.02c1.6 1.6 3.52 2.64 5.4 2.96a7.16 7.16 0 0 0 1.18.1c1.03 0 2-.25 2.9-.7A5.9 5.9 0 0 0 21 22.24c3.34-3.34 3.08-6.93 1.74-9.17l-2.87-5.04z"></path></g></svg></div></a></div><div class="ks r"><div class="kt"><h4 class="aw fp fq bl cs">347 </h4></div></div></div><div class="uh fm ub ui av r"></div><div><div class="co" role="tooltip" aria-hidden="true" aria-describedby="2" aria-labelledby="2"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fquintoandar-tech-blog%2Fhibernate-and-the-n-1-selections-problem-c497710fa3fe&amp;source=post_recirc---------1-----------------bookmark_sidebar-" class="fs ft bs bt bu bv bw bx by bz gu gv cc cd fv fw" rel="noopener"><svg width="25" height="25" viewBox="0 0 25 25"><path d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z" fill-rule="evenodd"></path></svg></a></div></div></div></div></div></div></div></div></div><div class="sd se sf ox sg sh si oz sj sk sl pb sm sn so sp sq sr ss st su"><div class="al hk"><div class="r sv"><div class="sw sx ro rp rq sy sz rr rs rt ta tb ru rv rw tc td rx ry rz te tf sa sb sc n kv"><div class="sd se sf ox sg sh tg th sj sk ti tj sm sn tk pd sq sr tl tm su"><div class="tn r to f"><h4 class="aw fp fq bl cs">More from QuintoAndar Tech Blog</h4></div><div class="tp r tq rn"><a class="fs ft bs bt bu bv bw bx by bz gu gv cc cd fv fw r" rel="noopener" href="https://medium.com/quintoandar-tech-blog/creating-google-cloud-pub-sub-publishers-and-subscribers-with-spring-cloud-gcp-part-1-setup-a96c53025fec?source=post_recirc---------2------------------"><div class="tr hg"><div class="hk dz al"><div class="uk r tt ps hk al tu tv"></div></div></div></a></div></div><div class="sd se sf ox sg sh tg th sj sk ti tj sm sn tk pd sq sr tl tm su"><div class="tp r"><div class="tw cq h tx"><h4 class="aw fp fq bl cs">More from QuintoAndar Tech Blog</h4></div><a rel="noopener" href="https://medium.com/quintoandar-tech-blog/creating-google-cloud-pub-sub-publishers-and-subscribers-with-spring-cloud-gcp-part-1-setup-a96c53025fec?source=post_recirc---------2------------------"><h3 class="em q en ql bk ty tz ua">Creating Google Cloud Pub/Sub publishers and subscribers with Spring Cloud GCP — Part 1: Setup</h3></a></div><div class="n o ff"><div class="ub r dh"><div class="o n"><div><a rel="noopener" href="https://medium.com/@fmachado091?source=post_recirc---------2------------------"><img alt="Fernando Machado" class="r fj uc ud" src="./Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium_files/2_2kUCUIfOuNkeaWYgBa3yCg.jpeg" width="40" height="40"></a></div><div class="fm al r"><div class="n"><div style="flex: 1 1 0%;"><span class="aw b bk bl bm bn r em q"><div class="dq n o fo"><span class="aw fp fq bl ba fr bc bd be bf em"><a class="fs ft bs bt bu bv bw bx by bz fu cc cd fv fw" rel="noopener" href="https://medium.com/@fmachado091?source=post_recirc---------2------------------">Fernando Machado</a><span> in <a href="https://medium.com/quintoandar-tech-blog?source=post_recirc---------2------------------" class="fs ft bs bt bu bv bw bx by bz fu cc cd fv fw" rel="noopener">QuintoAndar Tech Blog</a></span></span></div></span></div></div><span class="aw b bk bl bm bn r cs ct"><span class="aw fp fq bl ba fr bc bd be bf cs"><div><a class="fs ft bs bt bu bv bw bx by bz fu cc cd fv fw" rel="noopener" href="https://medium.com/quintoandar-tech-blog/creating-google-cloud-pub-sub-publishers-and-subscribers-with-spring-cloud-gcp-part-1-setup-a96c53025fec?source=post_recirc---------2------------------">Jan 14, 2019</a> · 4 min read</div></span></span></div></div></div><div class="n o"><div class="n o"><div class="kj r hg"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fquintoandar-tech-blog%2Fhibernate-and-the-n-1-selections-problem-c497710fa3fe&amp;source=post_recirc-----a96c53025fec----2-----------------clap_preview-" class="fs ft bs bt bu bv bw bx by bz gu gv cc cd fv fw" rel="noopener"><div class="bx kk kl km kn ko kp ok ue uf ug"><svg width="25" height="25" viewBox="0 0 25 25"><g fill-rule="evenodd"><path d="M11.74 0l.76 2.97.76-2.97zM14.81 3.78l1.84-2.56-1.42-.47zM8.38 1.22l1.84 2.56L9.8.75zM20.38 21.62a5.11 5.11 0 0 1-3.16 1.61l.49-.45c2.88-2.89 3.45-5.98 1.69-9.21l-1.1-1.94-.96-2.02c-.31-.67-.23-1.18.25-1.55a.84.84 0 0 1 .66-.16c.34.05.66.28.88.6l2.85 5.02c1.18 1.97 1.38 5.12-1.6 8.1M7.1 21.1l-5.02-5.02a1 1 0 0 1 .7-1.7 1 1 0 0 1 .72.3l2.6 2.6a.44.44 0 0 0 .63-.62L4.1 14.04l-1.75-1.75a1 1 0 1 1 1.41-1.41l4.15 4.15a.44.44 0 0 0 .63 0 .44.44 0 0 0 0-.62L4.4 10.26 3.22 9.08a1 1 0 0 1 0-1.4 1.02 1.02 0 0 1 1.41 0l1.18 1.16L9.96 13a.44.44 0 0 0 .62 0 .44.44 0 0 0 0-.63L6.43 8.22a.99.99 0 0 1-.3-.7.99.99 0 0 1 .3-.7 1 1 0 0 1 1.41 0l7 6.98a.44.44 0 0 0 .7-.5l-1.35-2.85c-.31-.68-.23-1.19.25-1.56a.85.85 0 0 1 .66-.16c.34.06.66.28.88.6L18.63 14c1.57 2.88 1.07 5.54-1.55 8.16a5.62 5.62 0 0 1-5.06 1.65 9.35 9.35 0 0 1-4.93-2.72zM11 5.98l2.56 2.56c-.5.6-.56 1.41-.15 2.28l.26.56-4.25-4.25a.98.98 0 0 1-.12-.45 1 1 0 0 1 .29-.7 1.02 1.02 0 0 1 1.41 0zm8.89 2.06c-.38-.56-.9-.92-1.49-1.01a1.74 1.74 0 0 0-1.34.33c-.38.29-.61.65-.71 1.06a2.1 2.1 0 0 0-1.1-.56 1.78 1.78 0 0 0-.99.13l-2.64-2.64a1.88 1.88 0 0 0-2.65 0 1.86 1.86 0 0 0-.48.85 1.89 1.89 0 0 0-2.67-.01 1.87 1.87 0 0 0-.5.9c-.76-.75-2-.75-2.7-.04a1.88 1.88 0 0 0 0 2.66c-.3.12-.61.29-.87.55a1.88 1.88 0 0 0 0 2.66l.62.62a1.88 1.88 0 0 0-.9 3.16l5.01 5.02c1.6 1.6 3.52 2.64 5.4 2.96a7.16 7.16 0 0 0 1.18.1c1.03 0 2-.25 2.9-.7A5.9 5.9 0 0 0 21 22.24c3.34-3.34 3.08-6.93 1.74-9.17l-2.87-5.04z"></path></g></svg></div></a></div><div class="ks r"><div class="kt"><h4 class="aw fp fq bl cs">380 </h4></div></div></div><div class="uh fm ub ui av r"></div><div><div class="co" role="tooltip" aria-hidden="true" aria-describedby="3" aria-labelledby="3"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fquintoandar-tech-blog%2Fhibernate-and-the-n-1-selections-problem-c497710fa3fe&amp;source=post_recirc---------2-----------------bookmark_sidebar-" class="fs ft bs bt bu bv bw bx by bz gu gv cc cd fv fw" rel="noopener"><svg width="25" height="25" viewBox="0 0 25 25"><path d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z" fill-rule="evenodd"></path></svg></a></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div class="mw r mx my"><section class="dv dw al cn r mz na nb nc nd ne nf ng nh ni nj nk nl nm nn"><div class="no np lz n ff g"><div class="nq n ff"><div class="nr r ns"><div class="nt r"><a href="https://medium.com/about?autoplay=1&amp;source=post_page-----c497710fa3fe----------------------" class="fs ft bs bt bu bv bw bx by bz nu nv cc cd nw nx" rel="noopener"><h4 class="ny nz oa aw ax bk mn ob oc r">Discover <!-- -->Medium</h4></a></div><span class="aw b bk bl bm bn r od oe">Welcome to a place where words matter. On <!-- -->Medium<!-- -->, smart voices and original ideas take center stage - with no ads in sight.<!-- --> <a href="https://medium.com/about?autoplay=1&amp;source=post_page-----c497710fa3fe----------------------" class="fs ft bs bt bu bv bw bx by bz cc cd nw nx of" rel="noopener">Watch</a></span></div><div class="nr r ns"><div class="og r"><a href="https://medium.com/topics?source=post_page-----c497710fa3fe----------------------" class="fs ft bs bt bu bv bw bx by bz nu nv cc cd nw nx" rel="noopener"><h4 class="ny nz oa aw ax bk mn ob oc r">Make <!-- -->Medium<!-- --> yours</h4></a></div><span class="aw b bk bl bm bn r od oe">Follow all the topics you care about, and we’ll deliver the best stories for you to your homepage and inbox.<!-- --> <a href="https://medium.com/topics?source=post_page-----c497710fa3fe----------------------" class="fs ft bs bt bu bv bw bx by bz cc cd nw nx of" rel="noopener">Explore</a></span></div><div class="nr r ns"><div class="nt r"><a href="https://medium.com/membership?source=post_page-----c497710fa3fe----------------------" class="fs ft bs bt bu bv bw bx by bz nu nv cc cd nw nx" rel="noopener"><h4 class="ny nz oa aw ax bk mn ob oc r">Become a member</h4></a></div><span class="aw b bk bl bm bn r od oe">Get unlimited access to the best stories on <!-- -->Medium<!-- --> — and support writers while you’re at it. Just $5/month.<!-- --> <a href="https://medium.com/membership?source=post_page-----c497710fa3fe----------------------" class="fs ft bs bt bu bv bw bx by bz cc cd nw nx of" rel="noopener">Upgrade</a></span></div></div></div><div class="n o ff"><a class="fs ft bs bt bu bv bw bx by bz nu nv cc cd nw nx" rel="noopener" href="https://medium.com/?source=post_page-----c497710fa3fe----------------------"><svg height="22" width="112" viewBox="0 0 111.5 22" class="nz"><path d="M56.3 19.5c0 .4 0 .5.3.7l1.5 1.4v.1h-6.5V19c-.7 1.8-2.4 3-4.3 3-3.3 0-5.8-2.6-5.8-7.5 0-4.5 2.6-7.6 6.3-7.6 1.6-.1 3.1.8 3.8 2.4V3.2c0-.3-.1-.6-.3-.7l-1.4-1.4V1l6.5-.8v19.3zm-4.8-.8V9.5c-.5-.6-1.2-.9-1.9-.9-1.6 0-3.1 1.4-3.1 5.7 0 4 1.3 5.4 3 5.4.8.1 1.6-.3 2-1zm9.1 3.1V9.4c0-.3-.1-.6-.3-.7l-1.4-1.5v-.1h6.5v12.5c0 .4 0 .5.3.7l1.4 1.4v.1h-6.5zm-.2-19.2C60.4 1.2 61.5 0 63 0c1.4 0 2.6 1.2 2.6 2.6S64.4 5.3 63 5.3a2.6 2.6 0 0 1-2.6-2.7zm22.5 16.9c0 .4 0 .5.3.7l1.5 1.4v.1h-6.5v-3.2c-.6 2-2.4 3.4-4.5 3.4-2.9 0-4.4-2.1-4.4-6.2 0-1.9 0-4.1.1-6.5 0-.3-.1-.5-.3-.7L67.7 7v.1H74v8c0 2.6.4 4.4 2 4.4.9-.1 1.7-.6 2.1-1.3V9.5c0-.3-.1-.6-.3-.7l-1.4-1.5v-.2h6.5v12.4zm22 2.3c0-.5.1-6.5.1-7.9 0-2.6-.4-4.5-2.2-4.5-.9 0-1.8.5-2.3 1.3.2.8.3 1.7.3 2.5 0 1.8-.1 4.2-.1 6.5 0 .3.1.5.3.7l1.5 1.4v.1H96c0-.4.1-6.5.1-7.9 0-2.7-.4-4.5-2.2-4.5-.9 0-1.7.5-2.2 1.3v9c0 .4 0 .5.3.7l1.4 1.4v.1h-6.5V9.5c0-.3-.1-.6-.3-.7l-1.4-1.5v-.2h6.5v3.1a4.6 4.6 0 0 1 4.6-3.4c2.2 0 3.6 1.2 4.2 3.5.7-2.1 2.7-3.6 4.9-3.5 2.9 0 4.5 2.2 4.5 6.2 0 1.9-.1 4.2-.1 6.5-.1.3.1.6.3.7l1.4 1.4v.1h-6.6zm-81.4-2l1.9 1.9v.1h-9.8v-.1l2-1.9c.2-.2.3-.4.3-.7V7.3c0-.5 0-1.2.1-1.8L11.4 22h-.1L4.5 6.8c-.1-.4-.2-.4-.3-.6v10c-.1.7 0 1.3.3 1.9l2.7 3.6v.1H0v-.1L2.7 18c.3-.6.4-1.3.3-1.9v-11c0-.5-.1-1.1-.5-1.5L.7 1.1V1h7l5.8 12.9L18.6 1h6.8v.1l-1.9 2.2c-.2.2-.3.5-.3.7v15.2c0 .2.1.5.3.6zm7.6-5.9c0 3.8 1.9 5.3 4.2 5.3 1.9.1 3.6-1 4.4-2.7h.1c-.8 3.7-3.1 5.5-6.5 5.5-3.7 0-7.2-2.2-7.2-7.4 0-5.5 3.5-7.6 7.3-7.6 3.1 0 6.4 1.5 6.4 6.2v.8h-8.7zm0-.8h4.3v-.8c0-3.9-.8-4.9-2-4.9-1.4.1-2.3 1.6-2.3 5.7z"></path></svg></a><span class="aw b bk bl bm bn r od oe"><div class="oh oi n ff oj ao"><a href="https://medium.com/about?autoplay=1&amp;source=post_page-----c497710fa3fe----------------------" class="fs ft bs bt bu bv bw bx by bz fu cc cd nw nx" rel="noopener">About</a><a href="https://help.medium.com/?source=post_page-----c497710fa3fe----------------------" class="fs ft bs bt bu bv bw bx by bz fu cc cd nw nx" rel="noopener">Help</a><a class="fs ft bs bt bu bv bw bx by bz fu cc cd nw nx" rel="noopener" href="https://medium.com/policy/9db0094a1e0f?source=post_page-----c497710fa3fe----------------------">Legal</a></div></span></div></section></div></div></div><script src="./Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium_files/16180790160.js"></script><iframe src="./Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium_files/a16180790160.html" hidden="" aria-hidden="true" tabindex="-1" title="Optimizely Internal Frame" height="0" width="0" style="display: none;"></iframe><script>window.__BUILD_ID__ = "development"</script><script>window.__GRAPHQL_URI__ = "https://medium.com/_/graphql"</script><script>window.__PRELOADED_STATE__ = {"config":{"nodeEnv":"production","version":"master-20200215-001122-8354a55ad7","productName":"Medium","publicUrl":"https:\u002F\u002Fcdn-client.medium.com\u002Flite","authDomain":"medium.com","authGoogleClientId":"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com","favicon":"production","glyphUrl":"https:\u002F\u002Fglyph.medium.com","branchKey":"key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm","lightStep":{"name":"lite-web","host":"collector-medium.lightstep.com","token":"ce5be895bef60919541332990ac9fef2","appVersion":"master-20200215-001122-8354a55ad7"},"algolia":{"appId":"MQ57UUUQZ2","apiKeySearch":"394474ced050e3911ae2249ecc774921","indexPrefix":"medium_","host":"-dsn.algolia.net"},"recaptchaKey":"6Lfc37IUAAAAAKGGtC6rLS13R1Hrw_BqADfS1LRk","sentry":{"dsn":"https:\u002F\u002F589e367c28ca47b195ce200d1507d18b@sentry.io\u002F1423575","environment":"production"},"isAmp":false,"googleAnalyticsCode":"UA-24232453-2","signInWallCustomDomainCollectionIds":["3a8144eabfe3","336d898217ee","61061eb0c96b","138adf9c44c","819cc2aaeee0"],"mediumOwnedAndOperatedCollectionIds":["544c7006046e","bcc38c8f6edf","444d13b52878","8d6b8a439e32","92d2092dc598","1285ba81cada","cb8577c9149e","8ccfed20cbb2","ae2a65f35510","3f6ecf56618","7b6769f2748b","fc8964313712","ef8e90590e66","191186aaafa0","d944778ce714","bdc4052bbdba","88d9857e584e"],"tierOneDomains":["medium.com","thebolditalic.com","arcdigital.media","towardsdatascience.com","uxdesign.cc","codeburst.io","psiloveyou.xyz","writingcooperative.com","entrepreneurshandbook.co","prototypr.io","betterhumans.coach.me","theascent.pub"],"internalLinksPostIds":["35d26bf7d678","ba103974d8e8","42988b81376e","ca70a379ce08","a987957e885d"],"defaultImages":{"avatar":{"imageId":"1*dmbNkD5D-u45r44go_cf0g.png","height":150,"width":150},"orgLogo":{"imageId":"1*OMF3fSqH8t4xBJ9-6oZDZw.png","height":106,"width":545},"postLogo":{"imageId":"1*3sela1OADrJr7dJk_CXaEQ.png","height":810,"width":1440}},"performanceTags":[]},"debug":{"requestId":"f4db5e38-ce1d-4f0b-99de-49037783a7d0","originalSpanCarrier":{"ot-tracer-spanid":"60f30e887c3a9897","ot-tracer-traceid":"53fd530e4eb02404","ot-tracer-sampled":"true"}},"session":{"user":{"id":"lo_dnt_78TbIM1dH3LE"},"xsrf":""},"stats":{"itemCount":0,"sending":false,"timeout":null,"backup":{}},"navigation":{"branch":{"show":null,"hasRendered":null,"blockedByCTA":true},"hideGoogleOneTap":false,"hasRenderedGoogleOneTap":null,"currentLocation":"https:\u002F\u002Fmedium.com\u002Fquintoandar-tech-blog\u002Fhibernate-and-the-n-1-selections-problem-c497710fa3fe","host":"medium.com","hostname":"medium.com","referrer":"https:\u002F\u002Fwww.google.com\u002F","susiModal":{"step":null,"operation":"register","reportEventInfo":{"eventName":"","data":{}}}},"client":{"isBot":false,"isEu":true,"isLinkedin":false,"isNativeMedium":false,"isCustomDomain":false},"multiVote":{"clapsPerPost":{}},"metadata":{"faviconImageId":null}}</script><script>window.__APOLLO_STATE__ = {"ROOT_QUERY.variantFlags.0":{"name":"add_friction_to_signup","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.0.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.0.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.1":{"name":"allow_access","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.1.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.1.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.2":{"name":"allow_signup","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.2.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.2.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.3":{"name":"allow_test_auth","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.3.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.3.valueType":{"__typename":"VariantFlagString","value":"disallow"},"ROOT_QUERY.variantFlags.4":{"name":"assign_default_topic_to_posts","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.4.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.4.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.5":{"name":"available_annual_plan","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.5.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.5.valueType":{"__typename":"VariantFlagString","value":"2c754bcc2995"},"ROOT_QUERY.variantFlags.6":{"name":"available_monthly_plan","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.6.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.6.valueType":{"__typename":"VariantFlagString","value":"60e220181034"},"ROOT_QUERY.variantFlags.7":{"name":"branch_seo_metadata","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.7.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.7.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.8":{"name":"browsable_stream_config_bucket","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.8.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.8.valueType":{"__typename":"VariantFlagString","value":"curated-topics"},"ROOT_QUERY.variantFlags.9":{"name":"disable_android_subscription_activity_carousel","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.9.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.9.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.10":{"name":"disable_go_social_jubilee","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.10.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.10.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.11":{"name":"disable_gosocial_followers_that_you_follow","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.11.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.11.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.12":{"name":"disable_ios_resume_reading_toast","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.12.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.12.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.13":{"name":"disable_ios_subscription_activity_carousel","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.13.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.13.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.14":{"name":"disable_mobile_featured_chunk","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.14.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.14.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.15":{"name":"disable_post_recommended_from_friends_provider","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.15.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.15.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.16":{"name":"enable_android_local_currency","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.16.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.16.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.17":{"name":"enable_annual_renewal_reminder_email","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.17.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.17.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.18":{"name":"enable_app_flirty_thirty","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.18.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.18.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.19":{"name":"enable_auto_tier","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.19.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.19.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.20":{"name":"enable_automated_mission_control_triggers","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.20.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.20.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.21":{"name":"enable_branch_io","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.21.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.21.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.22":{"name":"enable_branding","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.22.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.22.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.23":{"name":"enable_branding_fonts","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.23.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.23.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.24":{"name":"enable_curation_priority_queue_experiment","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.24.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.24.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.25":{"name":"enable_dedicated_series_tab_api_ios","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.25.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.25.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.26":{"name":"enable_different_grid","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.26.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.26.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.27":{"name":"enable_disregard_trunc_state_for_footer","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.27.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.27.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.28":{"name":"enable_edit_alt_text","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.28.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.28.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.29":{"name":"enable_email_sign_in_captcha","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.29.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.29.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.30":{"name":"enable_embedding_based_diversification","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.30.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.30.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.31":{"name":"enable_expanded_feature_chunk_pool","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.31.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.31.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.32":{"name":"enable_filter_by_resend_rules","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.32.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.32.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.33":{"name":"enable_first_name_on_paywall","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.33.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.33.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.34":{"name":"enable_google_one_tap","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.34.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.34.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.35":{"name":"enable_ios_post_stats","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.35.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.35.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.36":{"name":"enable_janky_spam_rules","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.36.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.36.valueType":{"__typename":"VariantFlagString","value":"users,posts"},"ROOT_QUERY.variantFlags.37":{"name":"enable_json_logs_trained_ranker","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.37.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.37.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.38":{"name":"enable_kafka_events","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.38.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.38.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.39":{"name":"enable_kbfd_rex","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.39.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.39.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.40":{"name":"enable_kbfd_rex_app_highlights","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.40.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.40.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.41":{"name":"enable_kbfd_rex_daily_digest","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.41.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.41.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.42":{"name":"enable_lite_notifications","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.42.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.42.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.43":{"name":"enable_lite_post","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.43.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.43.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.44":{"name":"enable_lite_post_cd","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.44.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.44.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.45":{"name":"enable_lite_post_highlights","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.45.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.45.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.46":{"name":"enable_lite_post_highlights_view_only","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.46.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.46.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.47":{"name":"enable_lite_profile","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.47.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.47.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.48":{"name":"enable_lite_pub_header_menu","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.48.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.48.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.49":{"name":"enable_lite_server_upstream_deadlines","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.49.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.49.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.50":{"name":"enable_lite_stories","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.50.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.50.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.51":{"name":"enable_lite_topics","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.51.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.51.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.52":{"name":"enable_lite_unread_notification_count_mutation","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.52.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.52.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.53":{"name":"enable_lo_homepage","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.53.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.53.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.54":{"name":"enable_lo_meter_swap","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.54.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.54.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.55":{"name":"enable_logged_out_homepage_signup","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.55.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.55.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.56":{"name":"enable_login_code_flow","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.56.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.56.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.57":{"name":"enable_marketing_emails","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.57.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.57.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.58":{"name":"enable_media_resource_try_catch","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.58.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.58.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.59":{"name":"enable_membership_remove_section_a","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.59.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.59.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.60":{"name":"enable_membership_thank_you_email","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.60.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.60.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.61":{"name":"enable_miro_on_kubernetes","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.61.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.61.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.62":{"name":"enable_ml_rank_modules","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.62.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.62.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.63":{"name":"enable_more_branch_data","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.63.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.63.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.64":{"name":"enable_new_collaborative_filtering_data","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.64.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.64.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.65":{"name":"enable_new_pub_modules","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.65.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.65.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.66":{"name":"enable_new_suspended_page","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.66.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.66.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.67":{"name":"enable_new_three_dot_menu","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.67.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.67.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.68":{"name":"enable_optimizely","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.68.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.68.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.69":{"name":"enable_parsely","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.69.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.69.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.70":{"name":"enable_patronus_on_kubernetes","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.70.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.70.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.71":{"name":"enable_popularity_feature","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.71.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.71.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.72":{"name":"enable_post_import","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.72.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.72.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.73":{"name":"enable_post_seo_settings_screen","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.73.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.73.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.74":{"name":"enable_post_settings_screen","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.74.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.74.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.75":{"name":"enable_primary_topic_for_mobile","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.75.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.75.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.76":{"name":"enable_rito_caching","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.76.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.76.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.77":{"name":"enable_rito_upstream_deadlines","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.77.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.77.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.78":{"name":"enable_rtr_channel","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.78.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.78.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.79":{"name":"enable_save_to_medium","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.79.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.79.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.80":{"name":"enable_send_event_for_active_users_only","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.80.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.80.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.81":{"name":"enable_sign_up_with_email","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.81.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.81.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.82":{"name":"enable_suggest_account","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.82.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.82.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.83":{"name":"enable_suggest_account_li","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.83.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.83.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.84":{"name":"enable_tick_landing_page","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.84.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.84.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.85":{"name":"enable_tipalti_onboarding","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.85.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.85.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.86":{"name":"enable_tribute_landing_page","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.86.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.86.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.87":{"name":"enable_trumpland_landing_page","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.87.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.87.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.88":{"name":"filter_low_scoring_users","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.88.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.88.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.89":{"name":"glyph_font_set","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.89.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.89.valueType":{"__typename":"VariantFlagString","value":"m2"},"ROOT_QUERY.variantFlags.90":{"name":"google_sign_in_android","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.90.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.90.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.91":{"name":"iceland_home_page_loadtest","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.91.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.91.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.92":{"name":"is_not_medium_subscriber","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.92.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.92.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.93":{"name":"new_transition_page","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.93.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.93.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.94":{"name":"pardon_the_interruption_4","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.94.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.94.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.95":{"name":"pub_sidebar","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.95.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.95.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.96":{"name":"rank_model","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.96.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.96.valueType":{"__typename":"VariantFlagString","value":"default"},"ROOT_QUERY.variantFlags.97":{"name":"redis_read_write_splitting","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.97.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.97.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.98":{"name":"signin_services","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.98.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.98.valueType":{"__typename":"VariantFlagString","value":"twitter,facebook,google,email,google-fastidv,google-one-tap,apple"},"ROOT_QUERY.variantFlags.99":{"name":"signup_services","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.99.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.99.valueType":{"__typename":"VariantFlagString","value":"twitter,facebook,google,email,google-fastidv,google-one-tap,apple"},"ROOT_QUERY.variantFlags.100":{"name":"use_new_admin_topic_backend","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.100.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.100.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY":{"variantFlags":[{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.0","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.1","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.2","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.3","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.4","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.5","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.6","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.7","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.8","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.9","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.10","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.11","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.12","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.13","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.14","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.15","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.16","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.17","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.18","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.19","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.20","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.21","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.22","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.23","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.24","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.25","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.26","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.27","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.28","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.29","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.30","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.31","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.32","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.33","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.34","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.35","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.36","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.37","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.38","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.39","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.40","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.41","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.42","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.43","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.44","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.45","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.46","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.47","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.48","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.49","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.50","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.51","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.52","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.53","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.54","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.55","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.56","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.57","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.58","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.59","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.60","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.61","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.62","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.63","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.64","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.65","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.66","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.67","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.68","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.69","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.70","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.71","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.72","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.73","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.74","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.75","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.76","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.77","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.78","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.79","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.80","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.81","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.82","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.83","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.84","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.85","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.86","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.87","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.88","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.89","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.90","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.91","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.92","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.93","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.94","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.95","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.96","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.97","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.98","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.99","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.100","typename":"VariantFlag"}],"viewer":null,"meterPost({\"postId\":\"c497710fa3fe\",\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fwww.google.com\u002F\"}})":{"type":"id","generated":false,"id":"MeteringInfo:singleton","typename":"MeteringInfo"},"postResult({\"id\":\"c497710fa3fe\"})":{"type":"id","generated":false,"id":"Post:c497710fa3fe","typename":"Post"}},"MeteringInfo:singleton":{"__typename":"MeteringInfo","postIds":{"type":"json","json":["ed874272702d","c497710fa3fe"]},"maxUnlockCount":3,"unlocksRemaining":1},"Post:c497710fa3fe":{"__typename":"Post","visibility":"LOCKED","latestPublishedVersion":"ed9f3f35513e","collection":{"type":"id","generated":false,"id":"Collection:f21872b461f5","typename":"Collection"},"id":"c497710fa3fe","creator":{"type":"id","generated":false,"id":"User:3978e12c1183","typename":"User"},"isLocked":true,"lockedSource":"LOCKED_POST_SOURCE_UGC_UNENROLLED","sequence":null,"mediumUrl":"https:\u002F\u002Fmedium.com\u002Fquintoandar-tech-blog\u002Fhibernate-and-the-n-1-selections-problem-c497710fa3fe","canonicalUrl":"","content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fwww.google.com\u002F\"}})":{"type":"id","generated":true,"id":"$Post:c497710fa3fe.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fwww.google.com\u002F\"}})","typename":"PostContent"},"firstPublishedAt":1558965121424,"isPublished":true,"layerCake":3,"primaryTopic":{"type":"id","generated":false,"id":"programming","typename":"Topic"},"title":"Hibernate and the n+1 selections problem","isLimitedState":false,"pendingCollection":null,"shareKey":null,"statusForCollection":"APPROVED","readingTime":5.022641509433963,"readingList":"READING_LIST_NONE","license":"ALL_RIGHTS_RESERVED","allowResponses":true,"tags":[{"type":"id","generated":false,"id":"Tag:software-development","typename":"Tag"},{"type":"id","generated":false,"id":"Tag:orm","typename":"Tag"},{"type":"id","generated":false,"id":"Tag:hibernate","typename":"Tag"},{"type":"id","generated":false,"id":"Tag:query","typename":"Tag"}],"viewerClapCount":0,"clapCount":416,"voterCount":68,"recommenders":[],"responsesCount":2,"collaborators":[{"type":"id","generated":false,"id":"Collaborator:c497710fa3fe-88f193f2d74a","typename":"Collaborator"},{"type":"id","generated":false,"id":"Collaborator:c497710fa3fe-5984cb8958d9","typename":"Collaborator"}],"translationSourcePost":null,"newsletterId":"","inResponseToPostResult":null,"inResponseToMediaResource":null,"curationEligibleAt":1558013411524,"isDistributionAlertDismissed":false,"audioVersionUrl":"","seoTitle":"","socialTitle":"","socialDek":"","metaDescription":"","latestPublishedAt":1558965121424,"previewContent":{"type":"id","generated":true,"id":"$Post:c497710fa3fe.previewContent","typename":"PreviewContent"},"previewImage":{"type":"id","generated":false,"id":"ImageMetadata:1*n4YP5-Bxv2b69Q8coGy0Tw.jpeg","typename":"ImageMetadata"},"updatedAt":1558977185258,"topics":[{"type":"id","generated":false,"id":"programming","typename":"Topic"}],"seoDescription":"","responses":{"type":"id","generated":true,"id":"$Post:c497710fa3fe.responses","typename":"StreamConnection"},"isSuspended":false},"Collection:f21872b461f5":{"id":"f21872b461f5","domain":null,"slug":"quintoandar-tech-blog","__typename":"Collection","auroraAlphaEnabled":false,"googleAnalyticsId":null,"colorBehavior":"ACCENT_COLOR_AND_FILL_BACKGROUND","name":"QuintoAndar Tech Blog","logo":{"type":"id","generated":false,"id":"ImageMetadata:","typename":"ImageMetadata"},"avatar":{"type":"id","generated":false,"id":"ImageMetadata:1*LjE4Z7lFIM0_ySF6dTABSw.png","typename":"ImageMetadata"},"isEnrolledInHightower":false,"creator":{"type":"id","generated":false,"id":"User:ac7ca7e3b902","typename":"User"},"viewerIsEditor":false,"navItems":[],"colorPalette":{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette","typename":"ColorPalette"},"viewerCanEditOwnPosts":false,"viewerCanEditPosts":false,"description":"A peek into how we get things done","viewerIsFollowing":false,"viewerIsSubscribedToLetters":false,"isUserSubscribedToCollectionEmails":false,"ampEnabled":false,"twitterUsername":"quintoandar","facebookPageId":null,"favicon":{"type":"id","generated":false,"id":"ImageMetadata:","typename":"ImageMetadata"}},"User:3978e12c1183":{"id":"3978e12c1183","__typename":"User","isSuspended":false,"allowNotes":true,"name":"Joao Munhoz","isFollowing":false,"username":"joao.munhoz","bio":"Software Engineer","imageId":"0*P5ob2tQHTkQC0Vi6.jpg","mediumMemberAt":0,"isBlocking":false,"isPartnerProgramEnrolled":false,"twitterScreenName":""},"ImageMetadata:":{"id":"","originalWidth":0,"originalHeight":0,"__typename":"ImageMetadata"},"ImageMetadata:1*LjE4Z7lFIM0_ySF6dTABSw.png":{"id":"1*LjE4Z7lFIM0_ySF6dTABSw.png","__typename":"ImageMetadata"},"User:ac7ca7e3b902":{"id":"ac7ca7e3b902","__typename":"User"},"$Collection:f21872b461f5.colorPalette.tintBackgroundSpectrum":{"backgroundColor":"#FF5063F0","colorPoints":[{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.tintBackgroundSpectrum.colorPoints.0","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.tintBackgroundSpectrum.colorPoints.1","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.tintBackgroundSpectrum.colorPoints.2","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.tintBackgroundSpectrum.colorPoints.3","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.tintBackgroundSpectrum.colorPoints.4","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.tintBackgroundSpectrum.colorPoints.5","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.tintBackgroundSpectrum.colorPoints.6","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.tintBackgroundSpectrum.colorPoints.7","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.tintBackgroundSpectrum.colorPoints.8","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.tintBackgroundSpectrum.colorPoints.9","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.tintBackgroundSpectrum.colorPoints.10","typename":"ColorPoint"}],"__typename":"ColorSpectrum"},"$Collection:f21872b461f5.colorPalette.tintBackgroundSpectrum.colorPoints.0":{"color":"#FF5063F0","point":0,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.tintBackgroundSpectrum.colorPoints.1":{"color":"#FF6177F4","point":0.1,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.tintBackgroundSpectrum.colorPoints.2":{"color":"#FF7289F8","point":0.2,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.tintBackgroundSpectrum.colorPoints.3":{"color":"#FF849AFC","point":0.3,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.tintBackgroundSpectrum.colorPoints.4":{"color":"#FF95AAFF","point":0.4,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.tintBackgroundSpectrum.colorPoints.5":{"color":"#FFA6B9FF","point":0.5,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.tintBackgroundSpectrum.colorPoints.6":{"color":"#FFB7C8FF","point":0.6,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.tintBackgroundSpectrum.colorPoints.7":{"color":"#FFC8D6FF","point":0.7,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.tintBackgroundSpectrum.colorPoints.8":{"color":"#FFD9E4FF","point":0.8,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.tintBackgroundSpectrum.colorPoints.9":{"color":"#FFE9F1FF","point":0.9,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.tintBackgroundSpectrum.colorPoints.10":{"color":"#FFF9FEFF","point":1,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette":{"tintBackgroundSpectrum":{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.tintBackgroundSpectrum","typename":"ColorSpectrum"},"__typename":"ColorPalette","defaultBackgroundSpectrum":{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.defaultBackgroundSpectrum","typename":"ColorSpectrum"},"highlightSpectrum":{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.highlightSpectrum","typename":"ColorSpectrum"}},"$Collection:f21872b461f5.colorPalette.defaultBackgroundSpectrum":{"backgroundColor":"#FFFFFFFF","colorPoints":[{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.defaultBackgroundSpectrum.colorPoints.0","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.defaultBackgroundSpectrum.colorPoints.1","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.defaultBackgroundSpectrum.colorPoints.2","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.defaultBackgroundSpectrum.colorPoints.3","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.defaultBackgroundSpectrum.colorPoints.4","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.defaultBackgroundSpectrum.colorPoints.5","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.defaultBackgroundSpectrum.colorPoints.6","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.defaultBackgroundSpectrum.colorPoints.7","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.defaultBackgroundSpectrum.colorPoints.8","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.defaultBackgroundSpectrum.colorPoints.9","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.defaultBackgroundSpectrum.colorPoints.10","typename":"ColorPoint"}],"__typename":"ColorSpectrum"},"$Collection:f21872b461f5.colorPalette.defaultBackgroundSpectrum.colorPoints.0":{"color":"#FF637AFF","point":0,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.defaultBackgroundSpectrum.colorPoints.1":{"color":"#FF5D73EF","point":0.1,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.defaultBackgroundSpectrum.colorPoints.2":{"color":"#FF576BD8","point":0.2,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.defaultBackgroundSpectrum.colorPoints.3":{"color":"#FF5063C2","point":0.3,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.defaultBackgroundSpectrum.colorPoints.4":{"color":"#FF495AAC","point":0.4,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.defaultBackgroundSpectrum.colorPoints.5":{"color":"#FF425196","point":0.5,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.defaultBackgroundSpectrum.colorPoints.6":{"color":"#FF3A4780","point":0.6,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.defaultBackgroundSpectrum.colorPoints.7":{"color":"#FF323D6B","point":0.7,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.defaultBackgroundSpectrum.colorPoints.8":{"color":"#FF293256","point":0.8,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.defaultBackgroundSpectrum.colorPoints.9":{"color":"#FF202641","point":0.9,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.defaultBackgroundSpectrum.colorPoints.10":{"color":"#FF15192C","point":1,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.highlightSpectrum":{"backgroundColor":"#FFFFFFFF","colorPoints":[{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.highlightSpectrum.colorPoints.0","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.highlightSpectrum.colorPoints.1","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.highlightSpectrum.colorPoints.2","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.highlightSpectrum.colorPoints.3","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.highlightSpectrum.colorPoints.4","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.highlightSpectrum.colorPoints.5","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.highlightSpectrum.colorPoints.6","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.highlightSpectrum.colorPoints.7","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.highlightSpectrum.colorPoints.8","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.highlightSpectrum.colorPoints.9","typename":"ColorPoint"},{"type":"id","generated":true,"id":"$Collection:f21872b461f5.colorPalette.highlightSpectrum.colorPoints.10","typename":"ColorPoint"}],"__typename":"ColorSpectrum"},"$Collection:f21872b461f5.colorPalette.highlightSpectrum.colorPoints.0":{"color":"#FFEBF2FF","point":0,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.highlightSpectrum.colorPoints.1":{"color":"#FFE7F0FF","point":0.1,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.highlightSpectrum.colorPoints.2":{"color":"#FFE3EEFF","point":0.2,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.highlightSpectrum.colorPoints.3":{"color":"#FFDFECFF","point":0.3,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.highlightSpectrum.colorPoints.4":{"color":"#FFDBEAFF","point":0.4,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.highlightSpectrum.colorPoints.5":{"color":"#FFD7E8FF","point":0.5,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.highlightSpectrum.colorPoints.6":{"color":"#FFD3E6FF","point":0.6,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.highlightSpectrum.colorPoints.7":{"color":"#FFCFE3FF","point":0.7,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.highlightSpectrum.colorPoints.8":{"color":"#FFCBE1FF","point":0.8,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.highlightSpectrum.colorPoints.9":{"color":"#FFC7DFFF","point":0.9,"__typename":"ColorPoint"},"$Collection:f21872b461f5.colorPalette.highlightSpectrum.colorPoints.10":{"color":"#FFC3DCFF","point":1,"__typename":"ColorPoint"},"$Post:c497710fa3fe.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fwww.google.com\u002F\"}})":{"isLockedPreviewOnly":false,"validatedShareKey":"","__typename":"PostContent","bodyModel":{"type":"id","generated":true,"id":"$Post:c497710fa3fe.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fwww.google.com\u002F\"}}).bodyModel","typename":"RichText"}},"programming":{"name":"Programming","slug":"programming","__typename":"Topic","isFollowing":null},"$Post:c497710fa3fe.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fwww.google.com\u002F\"}}).bodyModel.sections.0":{"name":"f478","startIndex":0,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null,"__typename":"Section"},"$Post:c497710fa3fe.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fwww.google.com\u002F\"}}).bodyModel":{"sections":[{"type":"id","generated":true,"id":"$Post:c497710fa3fe.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fwww.google.com\u002F\"}}).bodyModel.sections.0","typename":"Section"}],"paragraphs":[{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_0","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_1","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_2","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_3","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_4","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_5","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_6","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_7","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_8","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_9","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_10","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_11","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_12","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_13","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_14","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_15","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_16","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_17","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_18","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_19","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_20","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_21","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_22","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_23","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_24","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_25","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_26","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_27","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_28","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_29","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_30","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_31","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_32","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:ed9f3f35513e_33","typename":"Paragraph"}],"__typename":"RichText"},"Paragraph:ed9f3f35513e_0":{"id":"ed9f3f35513e_0","name":"6ef7","type":"H3","href":null,"layout":null,"metadata":null,"text":"Hibernate and the n+1 selections problem","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_1":{"id":"ed9f3f35513e_1","name":"0647","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*n4YP5-Bxv2b69Q8coGy0Tw.jpeg","typename":"ImageMetadata"},"text":"Photo by Foo Bar on Unsplash","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_1.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_1.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*n4YP5-Bxv2b69Q8coGy0Tw.jpeg":{"id":"1*n4YP5-Bxv2b69Q8coGy0Tw.jpeg","originalHeight":2160,"originalWidth":3840,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:ed9f3f35513e_1.markups.0":{"type":"A","start":9,"end":16,"href":"https:\u002F\u002Funsplash.com\u002Fphotos\u002FRdGLsSDMJ3E?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_1.markups.1":{"type":"A","start":20,"end":28,"href":"https:\u002F\u002Funsplash.com\u002Fcollections\u002F3632074\u002Fdatacenter?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_2":{"id":"ed9f3f35513e_2","name":"7ea4","type":"P","href":null,"layout":null,"metadata":null,"text":"One of the greatest challenges in software design is the difference of paradigm between the object-oriented world (in which many applications rely on) and the relational world of databases.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_3":{"id":"ed9f3f35513e_3","name":"6129","type":"P","href":null,"layout":null,"metadata":null,"text":"Converting objects to tables and vice-versa is what we call object-relational mapping (ORM). Building your own ORM solution is no trivial task, requires a great effort and is very error-prone. Therefore, it is not the recommended approach most of the times, especially considering that there are some reliable and well-established alternatives. One of the most important and used in the Java world is Hibernate.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_4":{"id":"ed9f3f35513e_4","name":"074b","type":"P","href":null,"layout":null,"metadata":null,"text":"Although Hibernate abstracts most of the persistence logic and attempts to achieve low latency when making read\u002Fwrite operations in the database, it is no silver bullet. In particular, we have to be very careful with the way we write our queries, especially for objects that have collections as an attribute because this can lead to severe performance problems.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_5":{"id":"ed9f3f35513e_5","name":"7cad","type":"P","href":null,"layout":null,"metadata":null,"text":"Basically, we can map our collection associations with two different fetching types: the first one is eager, which means that whenever the top-level object is loaded, the associated collection will be completely loaded as well, regardless if it will be used or not. The other fetch type is lazy; in this case, the collection is not loaded when we retrieve the top-level object and the application will be responsible for handling it when needed (if needed at all).","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_5.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_5.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_5.markups.0":{"type":"EM","start":102,"end":107,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_5.markups.1":{"type":"EM","start":290,"end":294,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_6":{"id":"ed9f3f35513e_6","name":"01b8","type":"P","href":null,"layout":null,"metadata":null,"text":"It is common (and recommended) to map most associations for lazy initialization. This way, the entire object tree is not retrieved right away for every query. But not loading the related objects together with the top-level ones can lead to the n+1 selections problem, one of the main performance issues related to persistence. Let’s take a deeper look at this.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_6.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_6.markups.0":{"type":"EM","start":244,"end":247,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_7":{"id":"ed9f3f35513e_7","name":"a0ae","type":"P","href":null,"layout":null,"metadata":null,"text":"Suppose we are building an application to control enterprise buildings, in which each building can contain a number of companies. To model this in software, we could have a Building class that contains a collection of instances of a Company class.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_7.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_7.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_7.markups.0":{"type":"EM","start":173,"end":182,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_7.markups.1":{"type":"EM","start":233,"end":241,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_8":{"id":"ed9f3f35513e_8","name":"db3d","type":"P","href":null,"layout":null,"metadata":null,"text":"Following the guidelines for this kind of association, we would map this relation using lazy initialization, as explained before. But what happens if I need, for example, to calculate the sum of the rent the companies pay for all the buildings to get the total profit?","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_9":{"id":"ed9f3f35513e_9","name":"e7f8","type":"P","href":null,"layout":null,"metadata":null,"text":"We could do it like that:","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_10":{"id":"ed9f3f35513e_10","name":"60b8","type":"PRE","href":null,"layout":null,"metadata":null,"text":"@Transactional\npublic int getTotalProfit() {\n    List\u003CBuilding\u003E buildings = buildingRepository.findAll();\n\n    int totalProfit = 0;\n\n    for (Building building : buildings) {\n        for (Company company : building.getCompanies()) {\n            totalProfit+=company.getRent();\n        }\n    }\n\n    return totalProfit;\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_11":{"id":"ed9f3f35513e_11","name":"53b4","type":"P","href":null,"layout":null,"metadata":null,"text":"Considering that we mapped our Building-Company association with lazy initialization, the Company collection for each building will not be loaded when we reach the repository to get all the buildings.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_11.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_11.markups.0":{"type":"EM","start":90,"end":97,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_12":{"id":"ed9f3f35513e_12","name":"bf20","type":"P","href":null,"layout":null,"metadata":null,"text":"But it must be loaded when we call building.getCompanies(), and Hibernate will reach the DB again to fetch this data at each iteration. So, although we explicitly call the repository to get the entities only one time, we, in fact, are doing a much greater number of reading operations. If we have n buildings, we will have n+1 selections (the general and one extra for each building) and that is from where the name of the problem comes.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_12.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_12.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_12.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_12.markups.3","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_12.markups.0":{"type":"STRONG","start":117,"end":134,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_12.markups.1":{"type":"EM","start":35,"end":58,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_12.markups.2":{"type":"EM","start":297,"end":298,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_12.markups.3":{"type":"EM","start":323,"end":327,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_13":{"id":"ed9f3f35513e_13","name":"f88f","type":"P","href":null,"layout":null,"metadata":null,"text":"You could be thinking now “Ok, but couldn’t we do a better logic than that and simply avoid this in the first place?”. The answer is yes, but this problem may appear in cases that are not as trivial as this one, being hidden in more complex logic.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_14":{"id":"ed9f3f35513e_14","name":"29f3","type":"P","href":null,"layout":null,"metadata":null,"text":"Now that we have explained the problem, let us take a look at some approaches to mitigate and even solve it.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_15":{"id":"ed9f3f35513e_15","name":"7e91","type":"P","href":null,"layout":null,"metadata":null,"text":"For a simple case like this one, we could just move the operation done in memory to an aggregate function that could be written directly in HQL (Hibernate Query Language). This would be more performative and is recommended for the cases where our code just applies operations that are available directly in the database.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_15.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_15.markups.0":{"type":"EM","start":145,"end":169,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_16":{"id":"ed9f3f35513e_16","name":"9921","type":"P","href":null,"layout":null,"metadata":null,"text":"But what to do in the general case?","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_17":{"id":"ed9f3f35513e_17","name":"96bc","type":"P","href":null,"layout":null,"metadata":null,"text":"The first way to mitigate this problem is by enabling querying objects in batches. In this approach, Hibernate will load in advance the next x elements of the collection when the first one is accessed. This would reduce the problem from n+1 to n\u002Fx + 1 selections, being x the batch size defined by us. The listing below shows how this could be done for our Building-Company example.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_17.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_17.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_17.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_17.markups.3","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_17.markups.0":{"type":"EM","start":141,"end":143,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_17.markups.1":{"type":"EM","start":237,"end":240,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_17.markups.2":{"type":"EM","start":244,"end":252,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_17.markups.3":{"type":"EM","start":270,"end":272,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_18":{"id":"ed9f3f35513e_18","name":"c83e","type":"PRE","href":null,"layout":null,"metadata":null,"text":"@Entity\npublic class Building {\n\n    @OneToMany(fetch = FetchType.LAZY)\n    @BatchSize(size = 10)\n    private List\u003CCompany\u003E companies;\n}","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_18.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_18.markups.0":{"type":"EM","start":66,"end":71,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_19":{"id":"ed9f3f35513e_19","name":"8e03","type":"P","href":null,"layout":null,"metadata":null,"text":"By adding the BatchSize annotation to our mapping with size equals to 10, we are telling Hibernate to load 10 Company instances every time we try to access one that was not loaded yet. Tunning the batch size can solve the latency for your application but has the downside that maybe these objects will be retrieved unnecessarily.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_19.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_19.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_19.markups.0":{"type":"EM","start":14,"end":24,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_19.markups.1":{"type":"EM","start":110,"end":117,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_20":{"id":"ed9f3f35513e_20","name":"c739","type":"P","href":null,"layout":null,"metadata":null,"text":"Another solution would be defining the fetch type of the association as eager in the class-level mapping (as in the listing below). This would solve the problem, but there is a huge downside that all queries that load this object will load the full collection too. This would spend a lot of resources unnecessarily and would increase lock time in the database, impacting directly in the concurrency capacity of the application. Therefore, eager mapping at class level is not advised.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_20.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_20.markups.0":{"type":"STRONG","start":196,"end":199,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_21":{"id":"ed9f3f35513e_21","name":"4f4a","type":"PRE","href":null,"layout":null,"metadata":null,"text":"@Entity\npublic class Building {\n\n    @OneToMany(fetch = FetchType.EAGER)\n    private List\u003CCompany\u003E companies;\n}","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_21.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_21.markups.0":{"type":"EM","start":66,"end":72,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_22":{"id":"ed9f3f35513e_22","name":"1d57","type":"P","href":null,"layout":null,"metadata":null,"text":"The recommended solution is taking advantage of the support that Hibernate gives to instructions at execution time. So, instead of defining the association as eager fetching in the class level, we define it in the query level just when necessary. This can be done by using setFetchMode in a Criteria query or using a join fetch in HQL.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_22.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_22.markups.0":{"type":"EM","start":273,"end":285,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_23":{"id":"ed9f3f35513e_23","name":"e138","type":"P","href":null,"layout":null,"metadata":null,"text":"So, for our Building-Company example, we could create a new method findAllBuildingsWithCompany, implemented like this:","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_23.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_23.markups.0":{"type":"EM","start":67,"end":94,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_24":{"id":"ed9f3f35513e_24","name":"03a7","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002FUsing Criteria interface\npublic List\u003CBuilding\u003E findAllBuildingsWithCompany() {\n    Criteria criteria = sessionFactory.getCurrentSession().createCriteria(Building.class);\n\n    criteria.setFetchMode(\"Company\", FetchMode.EAGER);\n\n    return criteria.list();\n}","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_24.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_24.markups.0":{"type":"EM","start":220,"end":225,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_25":{"id":"ed9f3f35513e_25","name":"15ba","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002FUsing HQL\n@Query(\"SELECT b FROM Building b JOIN FETCH b.companies\")\nList\u003CBuilding\u003E findAllBuildingsWithCompany();","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_26":{"id":"ed9f3f35513e_26","name":"1212","type":"P","href":null,"layout":null,"metadata":null,"text":"So, instead of obtaining just the top-level objects in the initial query and then fetching the necessary associations while the application navigates the object tree, we follow this process:","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_27":{"id":"ed9f3f35513e_27","name":"cdc1","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Fetch all necessary objects in the initial query, specifying exactly which associations will be accessed during the transaction","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_28":{"id":"ed9f3f35513e_28","name":"602c","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Navigate the object tree, that now consists only of objects that were already retrieved in memory","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_29":{"id":"ed9f3f35513e_29","name":"4340","type":"P","href":null,"layout":null,"metadata":null,"text":"With this solution, we guarantee that we will have only one read operation in the DB and we don’t force all fetches for this entity to load all the data, which would spend unnecessary resources many times.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_30":{"id":"ed9f3f35513e_30","name":"7a4a","type":"P","href":null,"layout":null,"metadata":null,"text":"Finally, there is one extra solution to a particular example of this problem. For collections in which the number of instances is sufficiently small, it is possible to maintain all these instances in Hibernate second-level cache. An example of how to enable cache to a class is shown in the listing below.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_31":{"id":"ed9f3f35513e_31","name":"1b75","type":"PRE","href":null,"layout":null,"metadata":null,"text":"@Entity\n@Cacheable\n@Cache(usage = READ_WRITE)\npublic class Company {\n\n    private int rent;\n}","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_31.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_31.markups.0":{"type":"CODE","start":8,"end":46,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_32":{"id":"ed9f3f35513e_32","name":"8564","type":"P","href":null,"layout":null,"metadata":null,"text":"Using this approach would avoid the need to reach the database to fetch this info every time it is needed. It is a good solution when applicable (which is not the case many times, unfortunately).","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_33":{"id":"ed9f3f35513e_33","name":"be47","type":"P","href":null,"layout":null,"metadata":null,"text":"So to conclude, although Hibernate does a very good job in abstracting the persistence layer and helps with performance as much as possible, we cannot trust it blindly and our code must be designed to search objects efficiently. Whenever writing queries that use methods as list(), iterate() or load(), be aware that accessing collections may lead to the n+1 problem and to latency issues that may reduce drastically the performance of the application.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_33.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_33.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:ed9f3f35513e_33.markups.2","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:ed9f3f35513e_33.markups.0":{"type":"EM","start":274,"end":292,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_33.markups.1":{"type":"EM","start":295,"end":301,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:ed9f3f35513e_33.markups.2":{"type":"EM","start":354,"end":359,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Tag:software-development":{"id":"software-development","displayTitle":"Software Development","__typename":"Tag"},"Tag:orm":{"id":"orm","displayTitle":"Orm","__typename":"Tag"},"Tag:hibernate":{"id":"hibernate","displayTitle":"Hibernate","__typename":"Tag"},"Tag:query":{"id":"query","displayTitle":"Query","__typename":"Tag"},"Collaborator:c497710fa3fe-88f193f2d74a":{"id":"c497710fa3fe-88f193f2d74a","user":{"type":"id","generated":false,"id":"User:88f193f2d74a","typename":"User"},"state":"visible","__typename":"Collaborator"},"User:88f193f2d74a":{"id":"88f193f2d74a","name":"Adilson Atalla","__typename":"User"},"Collaborator:c497710fa3fe-5984cb8958d9":{"id":"c497710fa3fe-5984cb8958d9","user":{"type":"id","generated":false,"id":"User:5984cb8958d9","typename":"User"},"state":"visible","__typename":"Collaborator"},"User:5984cb8958d9":{"id":"5984cb8958d9","name":"Guilherme Rodrigues Salerno","__typename":"User"},"$Post:c497710fa3fe.previewContent":{"subtitle":"One of the greatest challenges in software design is the difference of paradigm between the object-oriented world (in which many of our…","__typename":"PreviewContent"},"$Post:c497710fa3fe.responses":{"stream":[],"__typename":"StreamConnection"}}</script><script src="./Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium_files/manifest.fa68a4a6.js"></script><script src="./Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium_files/vendors_main.34c849d5.chunk.js"></script><script src="./Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium_files/main.9983ec64.chunk.js"></script><script src="./Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium_files/vendors_screen.collection.packageBuilder_screen.collection.styleEditor_screen.landingpages.pres45_sc_643621df.0eae2f52.chunk.js"></script>
<script src="./Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium_files/vendors_screen.post_screen.post.amp_screen.post.series_screen.sequence.post.b90b8296.chunk.js"></script>
<script src="./Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium_files/screen.collection.packageBuilder_screen.collection.styleEditor_screen.landingpages.pres45_screen.lan_dc41d166.98208092.chunk.js"></script>
<script src="./Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium_files/screen.collection.packageBuilder_screen.collection.styleEditor_screen.landingpages.pres45_screen.lan_83d9351d.0554d7e3.chunk.js"></script>
<script src="./Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium_files/screen.post.796bd162.chunk.js"></script><script>window.main();</script><script src="./Hibernate and the n+1 selections problem - QuintoAndar Tech Blog - Medium_files/p.js" async="" id="parsely-cf"></script></body></html>