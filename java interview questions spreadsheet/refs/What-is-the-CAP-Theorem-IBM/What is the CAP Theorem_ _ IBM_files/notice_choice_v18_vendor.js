(function(c){c.noticeData=function(){return data={us:{status:"OPT_IN",lang:"en"},ag:{status:"OPT_IN",lang:"en"},ai:{status:"OPT_IN",lang:"en"},aw:{status:"OPT_IN",lang:"en"},bb:{status:"OPT_IN",lang:"en"},bm:{status:"OPT_IN",lang:"en"},bs:{status:"OPT_IN",lang:"en"},ca:{status:"OPT_IN",lang:"en"},gd:{status:"OPT_IN",lang:"en"},gy:{status:"OPT_IN",lang:"en"},jm:{status:"OPT_IN",lang:"en"},kn:{status:"OPT_IN",lang:"en"},ky:{status:"OPT_IN",lang:"en"},ms:{status:"OPT_IN",lang:"en"},sr:{status:"OPT_IN",lang:"en"},tc:{status:"OPT_IN",lang:"en"},tt:{status:"OPT_IN",lang:"en"},vc:{status:"OPT_IN",lang:"en"},vg:{status:"OPT_IN",lang:"en"},ca:{status:"OPT_IN",lang:"fr"},at:{status:"OPT_IN",lang:"de"},ch:{status:"OPT_IN",lang:"de"},ch:{status:"OPT_IN",lang:"fr"},de:{status:"OPT_IN",lang:"de"},dk:{status:"OPT_IN",lang:"da"},fi:{status:"OPT_IN",lang:"fi"},no:{status:"OPT_IN",lang:"no"},se:{status:"OPT_IN",lang:"sv"},uk:{status:"OPT_IN",lang:"en"},ie:{status:"OPT_IN",lang:"en"},be:{status:"OPT_IN",lang:"en"},nl:{status:"OPT_IN",lang:"nl"},fr:{status:"OPT_IN",lang:"fr"},it:{status:"OPT_IN",lang:"it"},cy:{status:"OPT_IN",lang:"en"},es:{status:"OPT_IN",lang:"es"},gr:{status:"OPT_IN",lang:"el"},il:{status:"OPT_IN",lang:"he"},pt:{status:"OPT_IN",lang:"pt"},ar:{status:"OPT_IN",lang:"es"},bo:{status:"OPT_IN",lang:"es"},br:{status:"OPT_IN",lang:"pt"},cl:{status:"OPT_IN",lang:"es"},co:{status:"OPT_IN",lang:"es"},"do":{status:"OPT_IN",lang:"en"},ec:{status:"OPT_IN",lang:"es"},mx:{status:"OPT_IN",lang:"es"},pe:{status:"OPT_IN",lang:"es"},py:{status:"OPT_IN",lang:"es"},uy:{status:"OPT_IN",lang:"es"},ve:{status:"OPT_IN",lang:"es"},au:{status:"OPT_IN",lang:"en"},id:{status:"OPT_IN",lang:"en"},my:{status:"OPT_IN",lang:"en"},ph:{status:"OPT_IN",lang:"en"},sg:{status:"OPT_IN",lang:"en"},th:{status:"OPT_IN",lang:"en"},vn:{status:"OPT_IN",lang:"en"},cn:{status:"OPT_IN",lang:"zh"},hk:{status:"OPT_IN",lang:"en"},tw:{status:"OPT_IN",lang:"zh"},bd:{status:"OPT_IN",lang:"en"},"in":{status:"OPT_IN",lang:"en"},lk:{status:"OPT_IN",lang:"en"},kp:{status:"OPT_IN",lang:"ko"},kr:{status:"OPT_IN",lang:"ko"},ae:{status:"OPT_IN",lang:"en"},bg:{status:"OPT_IN",lang:"bg"},bh:{status:"OPT_IN",lang:"en"},cz:{status:"OPT_IN",lang:"cs"},dz:{status:"OPT_IN",lang:"fr"},ee:{status:"OPT_IN",lang:"et"},eg:{status:"OPT_IN",lang:"en"},hr:{status:"OPT_IN",lang:"hr"},hu:{status:"OPT_IN",lang:"hu"},jo:{status:"OPT_IN",lang:"en"},kw:{status:"OPT_IN",lang:"en"},lb:{status:"OPT_IN",lang:"en"},lt:{status:"OPT_IN",lang:"lt"},lv:{status:"OPT_IN",lang:"lv"},ma:{status:"OPT_IN",lang:"fr"},mk:{status:"OPT_IN",lang:"mk"},om:{status:"OPT_IN",lang:"en"},pk:{status:"OPT_IN",lang:"en"},pl:{status:"OPT_IN",lang:"pl"},qa:{status:"OPT_IN",lang:"en"},ro:{status:"OPT_IN",lang:"ro"},rs:{status:"OPT_IN",lang:"sr"},me:{status:"OPT_IN",lang:"sr"},ru:{status:"OPT_IN",lang:"ru"},sa:{status:"OPT_IN",lang:"en"},si:{status:"OPT_IN",lang:"si"},sk:{status:"OPT_IN",lang:"sk"},tn:{status:"OPT_IN",lang:"fr"},tr:{status:"OPT_IN",lang:"tr"},ua:{status:"OPT_IN",lang:"uk"},za:{status:"OPT_IN",lang:"en"},ad:{status:"OPT_IN",lang:"en"},af:{status:"OPT_IN",lang:"en"},al:{status:"OPT_IN",lang:"en"},am:{status:"OPT_IN",lang:"en"},an:{status:"OPT_IN",lang:"en"},ao:{status:"OPT_IN",lang:"pt"},as:{status:"OPT_IN",lang:"en"},ax:{status:"OPT_IN",lang:"en"},az:{status:"OPT_IN",lang:"en"},ba:{status:"OPT_IN",lang:"en"},bf:{status:"OPT_IN",lang:"en"},bi:{status:"OPT_IN",lang:"en"},bj:{status:"OPT_IN",lang:"en"},bn:{status:"OPT_IN",lang:"en"},bt:{status:"OPT_IN",lang:"en"},bv:{status:"OPT_IN",lang:"en"},bw:{status:"OPT_IN",lang:"en"},by:{status:"OPT_IN",lang:"en"},bz:{status:"OPT_IN",lang:"en"},cc:{status:"OPT_IN",lang:"en"},cd:{status:"OPT_IN",lang:"en"},cf:{status:"OPT_IN",lang:"en"},cg:{status:"OPT_IN",lang:"en"},ci:{status:"OPT_IN",lang:"en"},ck:{status:"OPT_IN",lang:"en"},cm:{status:"OPT_IN",lang:"en"},cr:{status:"OPT_IN",lang:"en"},cu:{status:"OPT_IN",lang:"en"},cv:{status:"OPT_IN",lang:"en"},cx:{status:"OPT_IN",lang:"en"},dj:{status:"OPT_IN",lang:"en"},eh:{status:"OPT_IN",lang:"en"},er:{status:"OPT_IN",lang:"en"},et:{status:"OPT_IN",lang:"en"},fj:{status:"OPT_IN",lang:"en"},fk:{status:"OPT_IN",lang:"en"},fm:{status:"OPT_IN",lang:"en"},fo:{status:"OPT_IN",lang:"en"},ga:{status:"OPT_IN",lang:"en"},ge:{status:"OPT_IN",lang:"en"},gf:{status:"OPT_IN",lang:"en"},gg:{status:"OPT_IN",lang:"en"},gh:{status:"OPT_IN",lang:"en"},gi:{status:"OPT_IN",lang:"en"},gl:{status:"OPT_IN",lang:"en"},gm:{status:"OPT_IN",lang:"en"},gn:{status:"OPT_IN",lang:"en"},gp:{status:"OPT_IN",lang:"en"},gq:{status:"OPT_IN",lang:"en"},gs:{status:"OPT_IN",lang:"en"},gt:{status:"OPT_IN",lang:"en"},gu:{status:"OPT_IN",lang:"en"},gw:{status:"OPT_IN",lang:"en"},hm:{status:"OPT_IN",lang:"en"},hn:{status:"OPT_IN",lang:"en"},ht:{status:"OPT_IN",lang:"en"},im:{status:"OPT_IN",lang:"en"},io:{status:"OPT_IN",lang:"en"},iq:{status:"OPT_IN",lang:"en"},ir:{status:"OPT_IN",lang:"en"},is:{status:"OPT_IN",lang:"en"},je:{status:"OPT_IN",lang:"en"},ke:{status:"OPT_IN",lang:"en"},kg:{status:"OPT_IN",lang:"en"},kh:{status:"OPT_IN",lang:"en"},ki:{status:"OPT_IN",lang:"en"},km:{status:"OPT_IN",lang:"en"},kp:{status:"OPT_IN",lang:"en"},kz:{status:"OPT_IN",lang:"en"},la:{status:"OPT_IN",lang:"en"},li:{status:"OPT_IN",lang:"en"},lr:{status:"OPT_IN",lang:"en"},ls:{status:"OPT_IN",lang:"en"},lu:{status:"OPT_IN",lang:"en"},ly:{status:"OPT_IN",lang:"en"},mc:{status:"OPT_IN",lang:"en"},md:{status:"OPT_IN",lang:"en"},mg:{status:"OPT_IN",lang:"en"},mh:{status:"OPT_IN",lang:"en"},mk:{status:"OPT_IN",lang:"en"},ml:{status:"OPT_IN",lang:"en"},mm:{status:"OPT_IN",lang:"en"},mn:{status:"OPT_IN",lang:"en"},mo:{status:"OPT_IN",lang:"en"},mp:{status:"OPT_IN",lang:"en"},mq:{status:"OPT_IN",lang:"en"},mr:{status:"OPT_IN",lang:"en"},mt:{status:"OPT_IN",lang:"en"},mu:{status:"OPT_IN",lang:"en"},mv:{status:"OPT_IN",lang:"en"},mw:{status:"OPT_IN",lang:"en"},mz:{status:"OPT_IN",lang:"en"},na:{status:"OPT_IN",lang:"en"},nc:{status:"OPT_IN",lang:"en"},ne:{status:"OPT_IN",lang:"en"},nf:{status:"OPT_IN",lang:"en"},ng:{status:"OPT_IN",lang:"en"},ni:{status:"OPT_IN",lang:"en"},np:{status:"OPT_IN",lang:"en"},nr:{status:"OPT_IN",lang:"en"},nu:{status:"OPT_IN",lang:"en"},nz:{status:"OPT_IN",lang:"en"},pa:{status:"OPT_IN",lang:"en"},pf:{status:"OPT_IN",lang:"en"},pg:{status:"OPT_IN",lang:"en"},pm:{status:"OPT_IN",lang:"en"},pn:{status:"OPT_IN",lang:"en"},pr:{status:"OPT_IN",lang:"en"},ps:{status:"OPT_IN",lang:"en"},pw:{status:"OPT_IN",lang:"en"},re:{status:"OPT_IN",lang:"en"},rw:{status:"OPT_IN",lang:"en"},sb:{status:"OPT_IN",lang:"en"},sc:{status:"OPT_IN",lang:"en"},sd:{status:"OPT_IN",lang:"en"},sh:{status:"OPT_IN",lang:"en"},sj:{status:"OPT_IN",lang:"en"},sl:{status:"OPT_IN",lang:"en"},si:{status:"OPT_IN",lang:"sl"},sm:{status:"OPT_IN",lang:"en"},sn:{status:"OPT_IN",lang:"en"},so:{status:"OPT_IN",lang:"en"},sp:{status:"OPT_IN",lang:"en"},st:{status:"OPT_IN",lang:"en"},sv:{status:"OPT_IN",lang:"en"},sy:{status:"OPT_IN",lang:"en"},sz:{status:"OPT_IN",lang:"en"},td:{status:"OPT_IN",lang:"en"},tf:{status:"OPT_IN",lang:"en"},tg:{status:"OPT_IN",lang:"en"},tj:{status:"OPT_IN",lang:"en"},tk:{status:"OPT_IN",lang:"en"},tl:{status:"OPT_IN",lang:"en"},tm:{status:"OPT_IN",lang:"en"},to:{status:"OPT_IN",lang:"en"},tv:{status:"OPT_IN",lang:"en"},tz:{status:"OPT_IN",lang:"en"},ug:{status:"OPT_IN",lang:"en"},uz:{status:"OPT_IN",lang:"en"},va:{status:"OPT_IN",lang:"en"},vi:{status:"OPT_IN",lang:"en"},vu:{status:"OPT_IN",lang:"en"},wf:{status:"OPT_IN",lang:"en"},ws:{status:"OPT_IN",lang:"en"},ye:{status:"OPT_IN",lang:"en"},yt:{status:"OPT_IN",lang:"en"},zm:{status:"OPT_IN",lang:"en"},zw:{status:"OPT_IN",lang:"en"},vn:{status:"OPT_IN",lang:"vi"},cr:{status:"OPT_IN",lang:"es"},kz:{status:"OPT_IN",lang:"kk"},kz:{status:"OPT_IN",lang:"ru"},uz:{status:"OPT_IN",lang:"uz"},uz:{status:"OPT_IN",lang:"ru"},bw:{status:"OPT_IN",lang:"en"},cm:{status:"OPT_IN",lang:"en"},gh:{status:"OPT_IN",lang:"en"},sl:{status:"OPT_IN",lang:"en"},mw:{status:"OPT_IN",lang:"en"},tz:{status:"OPT_IN",lang:"en"},na:{status:"OPT_IN",lang:"en"},sc:{status:"OPT_IN",lang:"en"},ug:{status:"OPT_IN",lang:"en"},et:{status:"OPT_IN",lang:"en"},bf:{status:"OPT_IN",lang:"fr"},cm:{status:"OPT_IN",lang:"fr"},td:{status:"OPT_IN",lang:"fr"},cg:{status:"OPT_IN",lang:"fr"},cd:{status:"OPT_IN",lang:"fr"},ga:{status:"OPT_IN",lang:"fr"},ci:{status:"OPT_IN",lang:"fr"},mg:{status:"OPT_IN",lang:"fr"},mu:{status:"OPT_IN",lang:"fr"},ne:{status:"OPT_IN",lang:"fr"},sn:{status:"OPT_IN",lang:"fr"},mz:{status:"OPT_IN",lang:"pt"},jp:{status:"OPT_IN",lang:"ja"},cw:{status:"OPT_IN",lang:"en"},dm:{status:"OPT_IN",lang:"en"},lc:{status:"OPT_IN",lang:"en"},gb:{status:"OPT_IN",lang:"en"},aq:{status:"OPT_IN",lang:"en"},bl:{status:"OPT_IN",lang:"en"},bq:{status:"OPT_IN",lang:"en"},mf:{status:"OPT_IN",lang:"en"},ss:{status:"OPT_IN",lang:"en"},sx:{status:"OPT_IN",lang:"en"},um:{status:"OPT_IN",lang:"en"},sa:{status:"OPT_IN",lang:"ar"},ae:{status:"OPT_IN",lang:"ar"}}};function b(d){var e=d.match(/^(https?\:)?\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return e&&{href:d,protocol:e[1],host:e[2],hostname:e[3],port:e[4],pathname:e[5],search:e[6],hash:e[7]}}function a(){var d=document.querySelector('script[src$="notice_choice_v18_vendor.js"]'),e={};if(d){d=d.getAttribute("src");e=b(d)}ncEnvironmentUrl="//www.ibm.com";if(e){switch(e.host){case"wwwpreview.ibm.com":ncEnvironmentUrl="//wwwpreview.ibm.com";break;case"wwwstage.ibm.com":ncEnvironmentUrl="//wwwstage.ibm.com"}}return ncEnvironmentUrl}c.noticeandchoice=function(e){var k=a();console.log(k);var j={noticechoiceStatus:c.noticeData(),serverUrl:"//nc-granular.mybluemix.net",serverUrlLookup:"//nc-lookup.mybluemix.net",serverUrlSave:"//nc-producer.mybluemix.net",ecmJsonUrl:k,ncForm:"",privacyDiv:"",countryObj:"",AllMediaObj:[],mediaOptionsCheckboxIDs:[],mediaOptions:{},responseJsonData:null,ncNoMediaErrorText:null,ncMediaChoice:null,nc_ifAllIBMChecked:false,pageCountry:null,countryStatus:"OPT_IN",formCountry:null,retrievedPrefCodes:"",ncHidden_ErrOfferCode:"",parserData:"",ncHidden_ErrPrefCode:"",ncECM_JSON:null,customFlag:false,questionType:"",isAllCodeisError:false,noticeOptionChangedEmailOrAllMedia:false,isGranularOn:false,defaultText:"",countryData:"",mediaClick:[],countryvalue:{Afghanistan:"AF","Åland Islands":"AX",Albania:"AL",Algeria:"DZ","American Samoa":"AS",AndorrA:"AD",Angola:"AO",Anguilla:"AI",Antarctica:"AQ","Antigua and Barbuda":"AG",Argentina:"AR",Armenia:"AM",Aruba:"AW",Australia:"AU",Austria:"AT",Azerbaijan:"AZ",Bahamas:"BS",Bahrain:"BH",Bangladesh:"BD",Barbados:"BB",Belarus:"BY",Belgium:"BE",Belize:"BZ",Benin:"BJ",Bermuda:"BM",Bhutan:"BT",Bolivia:"BO","Bosnia and Herzegovina":"BA",Botswana:"BW","Bouvet Island":"BV",Brazil:"BR","British Indian Ocean Territory":"IO","Brunei Darussalam":"BN",Bulgaria:"BG","Burkina Faso":"BF",Burundi:"BI",Cambodia:"KH",Cameroon:"CM",Canada:"CA","Cape Verde":"CV","Cayman Islands":"KY","Central African Republic":"CF",Chad:"TD",Chile:"CL",China:"CN","Christmas Island":"CX","Cocos (Keeling) Islands":"CC",Colombia:"CO",Comoros:"KM",Congo:"CG","Congo, The Democratic Republic of the":"CD","Cook Islands":"CK","Costa Rica":"CR","Cote D'Ivoire":"CI",Croatia:"HR",Cuba:"CU",Cyprus:"CY","Czech Republic":"CZ",Denmark:"DK",Djibouti:"DJ",Dominica:"DM","Dominican Republic":"DO",Ecuador:"EC",Egypt:"EG","El Salvador":"SV","Equatorial Guinea":"GQ",Eritrea:"ER",Estonia:"EE",Ethiopia:"ET","Falkland Islands (Malvinas)":"FK","Faroe Islands":"FO",Fiji:"FJ",Finland:"FI",France:"FR","French Guiana":"GF","French Polynesia":"PF","French Southern Territories":"TF",Gabon:"GA",Gambia:"GM",Georgia:"GE",Germany:"DE",Ghana:"GH",Gibraltar:"GI",Greece:"GR",Greenland:"GL",Grenada:"GD",Guadeloupe:"GP",Guam:"GU",Guatemala:"GT",Guernsey:"GG",Guinea:"GN","Guinea-Bissau":"GW",Guyana:"GY",Haiti:"HT","Heard Island and Mcdonald Islands":"HM","Holy See (Vatican City State)":"VA",Honduras:"HN","Hong Kong":"HK",Hungary:"HU",Iceland:"IS",India:"IN",Indonesia:"ID","Iran, Islamic Republic Of":"IR",Iraq:"IQ",Ireland:"IE","Isle of Man":"IM",Israel:"IL",Italy:"IT",Jamaica:"JM",Japan:"JP",Jersey:"JE",Jordan:"JO",Kazakhstan:"KZ",Kenya:"KE",Kiribati:"KI","Korea, Democratic People'S Republic of":"KP","Korea, Republic of":"KR",Kuwait:"KW",Kyrgyzstan:"KG","Lao People'S Democratic Republic":"LA",Latvia:"LV",Lebanon:"LB",Lesotho:"LS",Liberia:"LR","Libyan Arab Jamahiriya":"LY",Liechtenstein:"LI",Lithuania:"LT",Luxembourg:"LU",Macao:"MO","Macedonia, The Former Yugoslav Republic of":"MK",Madagascar:"MG",Malawi:"MW",Malaysia:"MY",Maldives:"MV",Mali:"ML",Malta:"MT","Marshall Islands":"MH",Martinique:"MQ",Mauritania:"MR",Mauritius:"MU",Mayotte:"YT",Mexico:"MX","Micronesia, Federated States of":"FM","Moldova, Republic of":"MD",Monaco:"MC",Mongolia:"MN",Montserrat:"MS",Morocco:"MA",Mozambique:"MZ",Myanmar:"MM",Namibia:"NA",Nauru:"NR",Nepal:"NP",Netherlands:"NL","Netherlands Antilles":"AN","New Caledonia":"NC","New Zealand":"NZ",Nicaragua:"NI",Niger:"NE",Nigeria:"NG",Niue:"NU","Norfolk Island":"NF","Northern Mariana Islands":"MP",Norway:"NO",Oman:"OM",Pakistan:"PK",Palau:"PW","Palestinian Territory, Occupied":"PS",Panama:"PA","Papua New Guinea":"PG",Paraguay:"PY",Peru:"PE",Philippines:"PH",Pitcairn:"PN",Poland:"PL",Portugal:"PT","Puerto Rico":"PR",Qatar:"QA",Reunion:"RE",Romania:"RO","Russian Federation":"RU",RWANDA:"RW","Saint Helena":"SH","Saint Kitts and Nevis":"KN","Saint Lucia":"LC","Saint Pierre and Miquelon":"PM","Saint Vincent and the Grenadines":"VC",Samoa:"WS","San Marino":"SM","Sao Tome and Principe":"ST","Saudi Arabia":"SA",Senegal:"SN","Serbia and Montenegro":"CS",Seychelles:"SC","Sierra Leone":"SL",Singapore:"SG",Slovakia:"SK",Slovenia:"SI","Solomon Islands":"SB",Somalia:"SO","South Africa":"ZA","South Georgia and the South Sandwich Islands":"GS",Spain:"ES","Sri Lanka":"LK",Sudan:"SD",Suriname:"SR","Svalbard and Jan Mayen":"SJ",Swaziland:"SZ",Sweden:"SE",Switzerland:"CH","Syrian Arab Republic":"SY","Taiwan, Province of China":"TW",Tajikistan:"TJ","Tanzania, United Republic of":"TZ",Thailand:"TH","Timor-Leste":"TL",Togo:"TG",Tokelau:"TK",Tonga:"TO","Trinidad and Tobago":"TT",Tunisia:"TN",Turkey:"TR",Turkmenistan:"TM","Turks and Caicos Islands":"TC",Tuvalu:"TV",Uganda:"UG",Ukraine:"UA","United Arab Emirates":"AE","United Kingdom":"GB","United States":"US","United States Minor Outlying Islands":"UM",Uruguay:"UY",Uzbekistan:"UZ",Vanuatu:"VU",Venezuela:"VE","Viet Nam":"VN","Virgin Islands, British":"VG","Virgin Islands, U.S.":"VI","Wallis and Futuna":"WF","Western Sahara":"EH",Yemen:"YE",Zambia:"ZM",Zimbabwe:"ZW"},checkBoxFlag:false,emailoptInOut:"DEFAULT",defaultunchecked:false,defaultStatusMedia:{},noticeOptionChanged:false,userChangOption:{},formLoading:false,ajaxCurrentlyRunningOnPage:false,country:"",lang:"",labels:{"0":"EMAIL","1":"PHONE","2":"POSTAL","3":"FAX","4":"OTHER"}},l=this,e=e||{},d;var g=0;l.init=function(){d=c.extend({},j,e);d.ncForm=c("#"+d.id.form);if(d.ncForm.length===0){return true}if(!d.id.preText&&!d.id.privacyText){var q=c("#"+d.id.privacyDiv);if(q.length!==0){var p='<p><img src="https://1.www.s81c.com/i/common/loading.gif"> <b><strong> Loading Privacy Preferences ... </strong> </b></p>';q.html(p).addClass("ibm-notice-choice-container");d.privacyDiv=q}}if(typeof d.defaultcountry==="undefinded"||d.defaultcountry===""){return true}var n=d.defaultcountry.split("-");d.country=n[0];d.lang=n[1];l.initDom();var o=d.ecmJsonUrl+"/common/translations/notice/"+d.country+"/"+d.lang+"/ncContent_v18.js";var m={title:"pageLoad",defaultUrl:d.ecmJsonUrl+"/common/translations/notice/zz/en/ncContent_v18.js",time:5000,flag:false};l.callingEcmSevice(o,m)};l.callingEcmSevice=function(m,n){NoticeChoice={};c.ajax({dataType:"script",url:m,timeout:n.time}).done(function(){switch(n.title){case"pageLoad":if(typeof NoticeChoice.Content==="undefined"){NoticeChoice.Content=d.countryData=l.setWorldWide()}l.onTranslationLoaded(NoticeChoice.Content);break;case"ecmDataFeedJson":if(typeof NoticeChoice.GranularChoices==="undefined"&&n.flag===false){n.flag=true;l.callingEcmSevice(n.defaultUrl,n)}else{if(typeof NoticeChoice.GranularChoices!=="undefined"){l.granularChoices(NoticeChoice.GranularChoices)}else{d.isGranularOn=false}}break;case"countryChange":if(typeof NoticeChoice.Content==="undefined"){NoticeChoice.Content=d.countryData=l.setWorldWide()}else{d.countryData=NoticeChoice.Content}l.changeFormCountryOptions(NoticeChoice.Content);break}}).fail(function(p){if(n.flag===false){n.flag=true;switch(n.title){case"pageLoad":l.onTranslationLoaded(l.setWorldWide());break;case"ecmDataFeedJson":l.callingEcmSevice(n.defaultUrl,n);break;case"countryChange":d.countryData=NoticeChoice.Content;l.changeFormCountryOptions(l.setWorldWide());break}}else{var o=c("<p/>").append("I accept ").append(c("<a>").attr({href:"http://www.ibm.com/privacy/"+d.country+"/"+d.lang}).html("IBM's Privacy statement"));d.privacyDiv.html(o)}})};l.onTranslationLoaded=function(r){d.responseJsonData=r;d.ncNoMediaErrorText=r.OtherPreferences.noMediaErrorTextt;d.ncMediaChoice=r.OtherPreferences.mediaChoice;d.nc_ifAllIBMChecked=c.parseJSON(r.OtherPreferences.allIBMNoticeChecked);var o=d.questionType=d.questionType;var q="";if(typeof d.questionChoice!=="undefined"){q=d.questionChoice}else{d.questionChoice=""}if((typeof o==="undefined"&&o==="")||(q!==""&&typeof q!=="undefined")){d.questionType="questionChoice"}l.coutryStatus(d.responseJsonData);if(d.country!==d.pageCountry){d.formCountry=r.cc_name;if((d.granular)&&(d.granular.toLowerCase()==="on")){var p=d.offerCode;if(typeof p!=="undefined"&&p!==""){var n={url:d.serverUrl+"/v1/offercode?code="+p,callback:"ibmCommonDynamicNavShowResults",time:5000,data:{},name:"offerCode"};l.serviceAjaxCall(n)}else{l.ecmDataFeedJson()}}else{d.isGranularOn=false;l.jsonParser(d);if(d.countryObj){var m=d.countryObj.val();if(m!==""){if(m.length>2){m=d.countryvalue[m]}l.onChangeCountry(m,d)}}}}};l.granularChoices=function(n){d.ncECM_JSON=n;if(typeof d.dcSubject!=="undefined"&&d.dcSubject!==""){d.isGranularOn=true}l.jsonParser(d);var m=d.countryObj.val();if(m){if(m.length>2){m=d.countryvalue[m]}l.onChangeCountry(m,d)}};l.changeFormCountryOptions=function(p){l.coutryStatus(p);var n=d.parserData,m="";if((d.granular)&&d.granular.toLowerCase()==="on"&&p.GranularPreference.EnglishGranularText!==""&&d.lang==="en"){m=p.GranularPreference.EnglishGranularText}else{if(p.OtherPreferences.englishNoticeText!==""&&d.lang==="en"){m=p.OtherPreferences.englishNoticeText}else{m=d.defaultText}}if(d.questionType==="1"){m=d.defaultText}c("#"+d.id.privacyDiv+" a").attr("target","_blank");if(d.noticeOptionChanged===true){if(d.questionType!=="1"){if(d.questionType==="AllMedia"&&d.isGranularOn===false){if(d.id.preText&&d.id.privacyText){c("#"+d.id.preText).html(m)}else{c("#ncHeading label").html(m)}}else{if(d.id.preText&&d.id.privacyText){c("#"+d.id.preText).html(m)}else{c("#ncHeading").html(m)}}}if(!d.id.preText&&!d.id.privacyText){d.privacyDiv.find("a").attr("target","_blank")}return}if(d.isGranularOn===true){switch(d.countryStatus){case"OPT_IN":c("#NC_Granular_Preferences :checked").prop("checked",false).trigger("change");break;case"OPT_OUT":if(d.emailoptInOut==="OPT_OUT"){c("#NC_Granular_Preferences :checked").prop("checked",false).trigger("change")}else{c("#NC_Granular_Preferences :input[type=checkbox]:not(:last)").prop("checked",true).trigger("change")}break}if(d.questionType==="AllMedia"){d.defaultStatusMedia.AllMedia=JSON.parse(p.OptInContent.oneQuestionApp[0].checked);n=[]}else{if(d.questionType==="1"){d.defaultStatusMedia.EMAIL=JSON.parse(p.OptInContent.oneQuestionApp[0].checked);n=[]}}if(d.id.preText&&d.id.privacyText){c("#"+d.id.preText).html(m)}else{c("#ncHeading").html(m)}}else{var o=d.questionType;switch(o){case"AllMedia":if(d.countryStatus==="OPT_IN"||d.emailoptInOut==="OPT_OUT"){d.AllMediaObj.prop("checked",false).trigger("change");d.defaultunchecked=true}else{if(d.countryStatus==="OPT_OUT"||d.emailoptInOut==="OPT_IN"){d.AllMediaObj.prop("checked",true).trigger("change")}}if(d.id.preText&&d.id.privacyText){c("#"+d.id.preText).html(m)}else{c("#ncHeading label").html(m)}n=[];break;case"1":break;default:if(d.id.preText&&d.id.privacyText){c("#"+d.id.preText).html(m)}else{c("#ncHeading").html(m)}break}}if(d.id.question1){$questionbox=c("#"+d.id.question1)}c.map(n,function(v){if(v.checked!=="hidden"){var r=d.labels[v.id],t="NC_CHECK_"+r,q="NC_HIDDEN_"+r,s=c("#"+t),u=c("#"+q);d.defaultStatusMedia[r]=JSON.parse(v.checked);if(s.length!==0||d.id.question1){if(v.id.toString()==="0"&&(d.countryStatus==="OPT_IN"||d.emailoptInOut==="OPT_OUT")){if(d.id.question1){c("#"+d.id.question1).prop("checked",false).trigger("change")}s.prop("checked",false).trigger("change");u.val("OPT_OUT")}else{if(v.checked==="true"){if(d.id.question1&&v.id.toString()==="0"){c("#"+d.id.question1).prop("checked",true).trigger("change")}s.prop("checked",true).trigger("change");u.val("OPT_IN")}else{if(d.id.question1&&v.id.toString()==="0"){c("#"+d.id.question1).prop("checked",false).trigger("change")}d.defaultunchecked=true;s.prop("checked",false).trigger("change");u.val("OPT_OUT")}}}}});if(d.privacyDiv){d.privacyDiv.find("a").attr("target","_blank")}};l.coutryStatus=function(o){var m=o.OptInContent;var n=d.questionType;switch(n){case"1":case"AllMedia":d.parserData=m.oneQuestionApp;if(m.oneQuestionApp[0].checked==="true"){d.countryStatus="OPT_OUT"}else{d.countryStatus="OPT_IN"}break;case"4":case"questionChoice":d.parserData=m.fourQuestionApp;if(m.fourQuestionApp[0].checked==="true"){d.countryStatus="OPT_OUT"}else{d.countryStatus="OPT_IN"}break;default:d.parserData=m.twoQuestionApp;if(m.twoQuestionApp[0].checked==="true"){d.countryStatus="OPT_OUT"}else{d.countryStatus="OPT_IN"}break}};l.serviceAjaxCall=function(m){c.ajax({dataType:"json",url:m.url,jsonpCallback:m.callback,data:m.data,timeout:m.time,type:m.method||"get"}).done(function(n){switch(m.name){case"emailChange":checkOptStatusCallback(n);break;case"offerCode":d.isGranularOn=true;d.retrievedPrefCodes=n.RESDATA.PAC.split(",");c.map(n.RESDATA.MofferCode.split(","),function(o){d.ncHidden_ErrOfferCode+=o+","});l.ecmDataFeedJson();break;case"formSave":if(d.customFlag===false){d.formLoading=true;d.ncForm.find(":submit").trigger("click")}else{d.customFlag=false}break}}).fail(function(n){if(n.status==502){if(g<3){g++;serviceAjaxCall(m)}}if(m.name==="offerCode"){d.isGranularOn=false;l.jsonParser(d)}else{if(m.name==="formSave"){if(d.customFlag===false){d.formLoading=true;d.ncForm.find(":submit").trigger("click")}else{d.customFlag=false}}else{console.log("Error loading in "+m.name+" Service")}}}).always(function(){d.ajaxCurrentlyRunningOnPage=false})};l.ecmDataFeedJson=function(){var m=d.ecmJsonUrl+"/common/translations/notice/"+d.country+"/"+d.lang+"/ncGranularPreference_v18.js";var n={title:"ecmDataFeedJson",defaultUrl:d.ecmJsonUrl+"/common/translations/notice/zz/en/ncGranularPreference_v18.js",time:5000,flag:false};l.callingEcmSevice(m,n)};l.jsonParser=function(){var m="";if(!d.id.preText&&!d.id.privacyText){if(d.privacyDiv.length===0){return false}}if(d.granular&&d.granular.toLowerCase()==="on"&&d.isGranularOn===true){var t=typeof d.footer!=="undefined"&&d.footer.toLowerCase()==="on"?"F":"L";m=l.granularDisplay(t,d);if(t==="F"){d.privacyDiv.html(m);applyWidget();return}}var u=d.questionChoice.split(",");if(u.length>1&&u.length<5){u.push("1");u=u.filter(function(K,J){return J===u.indexOf(K)});u.sort();d.questionChoice=u.join();l.questionChoicePopulator(m,d)}else{var w=d.parserData;var G=d.responseJsonData.OptInContent;var E="";if((d.granular)&&d.granular.toLowerCase()==="on"&&d.responseJsonData.GranularPreference.EnglishGranularText!==""&&d.lang==="en"){E=d.responseJsonData.GranularPreference.EnglishGranularText}else{if(d.responseJsonData.OtherPreferences.englishNoticeText!==""&&d.lang==="en"){E=d.responseJsonData.OtherPreferences.englishNoticeText}else{E=d.isGranularOn===true?d.responseJsonData.GranularPreference.GranularText:G.preText}}if(d.questionType==="1"){E=G.preText}E="<p id='ncHeading'>"+E+"</p>";if(u.length==1){d.parserData=G.oneQuestionApp}var y=G.postText;if(d.trial){var F=d.responseJsonData.OtherPreferences.trailPrivacyText;matchedValue=F.match(/<tc>.*<\/tc>/g);if(matchedValue){var o=matchedValue[0].replace(/<tc>|<\/tc>/g,"");var s="<a href='"+d.trial+"' target='_blank' class='ibm-tooltip' >"+o+"</a>";var q=new RegExp("<tc>"+o+"</tc>","g");y=F.replace(q,s)}}var v=d.privacyDiv;var I=d.questionType;var n=c("<span class='ibm-input-group'/>");var x="";if(d.isGranularOn){switch(I){case"1":E='<p id="ncHeading">'+d.responseJsonData.GranularPreference.GranularEmailText+"</p>";E+="<input type='hidden' name='NC_HIDDEN_EMAIL' value='"+d.countryStatus+"' id='NC_HIDDEN_EMAIL' />";d.defaultStatusMedia.EMAIL=JSON.parse(w[0].checked);w=[];break;case"AllMedia":E='<p id="ncHeading">'+d.responseJsonData.GranularPreference.GranularText+"</p>";E+="<input type='hidden' name='NC_HIDDEN_AllMedia' value='"+d.countryStatus+"' id='NC_HIDDEN_AllMedia' />";d.defaultStatusMedia.AllMedia=JSON.parse(w[0].checked);w=[];break;default:x="<p>"+d.ncMediaChoice+"</p>";break}}else{if(I==="AllMedia"){var H=c("<p/>",{id:"ncHeading"});var p={type:"checkbox",name:"NC_CHECK_AllMedia",value:"0",id:"NC_CHECK_AllMedia","class":"ncMediaOption ibm-styled-checkbox"};if(d.countryStatus==="OPT_OUT"){p.checked="checked"}var r=c("<input />",p);r.appendTo(H);c("<label/>",{"for":"NC_CHECK_AllMedia",html:d.responseJsonData.OptInContent.preText,css:{display:"inline"},"class":"ibm-field-label"}).appendTo(H);c("<input/>",{type:"hidden",name:"NC_HIDDEN_AllMedia",value:d.countryStatus,id:"NC_HIDDEN_AllMedia","class":"ncMediaOption"}).appendTo(H);var C=c("<span class='ibm-checkbox-wrapper'/>").append(H);n.append(C);E=n;w=[]}else{if(I==="1"){E=""}}}if(typeof E==="object"){d.defaultText=E.text()}else{var A=c(E);var B=A.find("*").not("a");for(var z=B.length-1;z>=0;z--){var D=B[z];c(D).replaceWith(D.innerHTML)}d.defaultText=A.html()}if(d.id.preText&&d.id.privacyText){d.countryStatus;c("#"+d.id.preText).html(E)}else{v.html(E).append(m,x)}c.map(w,function(M){if(M.checked!=="hidden"){if(d.id.question1&&d.labels[M.id]=="EMAIL"){if(M.checked==="true"){c("#"+d.id.question1).prop("checked",true)}}else{if(d.id.question2&&d.labels[M.id]=="OTHER"){if(M.checked==="true"){c("#"+d.id.question2).prop("checked",true)}}}var O="NC_CHECK_"+d.labels[M.id];var J="NC_HIDDEN_"+d.labels[M.id];var N={name:O,value:M.id,type:"checkbox",title:d.labels[M.id]+" CheckBox",id:O,"class":"ncMediaOption ibm-styled-checkbox"};var L="OPT_OUT";if(M.checked==="true"){L="OPT_IN";N.checked="checked"}var P=c("<input />",N);var Q=c("<label/>",{"for":O,html:M.optionTextPost,"class":"ibm-field-label"});d.defaultStatusMedia[M.optionTextPost]=JSON.parse(M.checked);N={id:J,name:J,value:L,type:"hidden"};var K=c("<input />",N);if(d.id.question1&&d.id.question2){var R=c("<span/>",{"class":"ibm-checkbox-wrapper"})}else{var R=c("<span/>",{"class":"ibm-checkbox-wrapper"}).append(P,Q.css({marginLeft:"5px"}))}n.append(R,K);n.append("<br>")}});if(d.id.preText&&d.id.privacyText){c("#"+d.id.privacyText).html(y).prepend(n).find("br").remove()}else{v.append(n);v.append("<p>"+y+"</p>");d.privacyDiv.find("a").attr("target","_blank")}if(I==="AllMedia"){d.AllMediaObj=c("#NC_CHECK_AllMedia")}}};l.granularDisplay=function(z){if(!d.offerCode){var y=z==="L"?d.dcSubject:d.preferenceareas;if(typeof y!=="undefined"){d.retrievedPrefCodes=y.split(",")}else{d.retrievedPrefCodes=""}}var t=d.responseJsonData.OtherPreferences.allIBMNotice;var x=d.ncECM_JSON;var B=x.preferenceAreas;var q={};var A=[];var w=[];c.map(d.retrievedPrefCodes,function(F){var D={};if(typeof B[F]!=="undefined"){var E=z==="L"?B[F].prefDesc:B[F].footerDesc;var C=z==="L"?B[F].prefCode:B[F].footerCode;if(c.inArray(E,w)===-1&&E!==""){q[F]={};if(z==="L"){q[F]={prefCode:B[F].prefCode,description:E,prefHelp:B[F].prefHelp,prefDesc:B[F].prefDesc}}else{q[F]={prefCode:B[F].footerCode,description:E,prefHelp:B[F].footerHelp,prefDesc:B[F].footerDesc}}D[F]=C;A.push(D);w.push(E)}}else{if(d.ncHidden_ErrPrefCode.indexOf(F)==-1){d.ncHidden_ErrPrefCode+=F+","}}});var r=Object.keys(q).length;if(r!==0){q=l.sortObject(q,"description",d)}q.ncALL_IBM_CHOICE={};q.ncALL_IBM_CHOICE={description:"NC_ALL_IBM_CHOICE",prefHelp:t,prefDesc:t};var m=0;r+=1;var p=r>6?6:r;var v="<div id='NC_Granular_Preferences'><span class='ibm-input-group'>";if(p>1){var u="checked='checked'";var n=true;if(d.countryStatus==="OPT_IN"){u="";n=false}var o,s;for(o in q){if(q.hasOwnProperty(o)){m++;if(m>6){break}s="";if(m>=p){if(z==="L"){s=q.ncALL_IBM_CHOICE;v+='<div  title="'+s.prefHelp+'"><span class="ibm-checkbox-wrapper"><input class="ibm-styled-checkbox"  type="checkbox" id="NC_Granular_Choice_-'+s.description+'" name="NC_Granular_Choice_-'+o+'"><label class="ibm-field-label" for="NC_Granular_Choice_-'+s.description+'">'+s.prefDesc+"</label></span></div>"}}else{s=q[o];v+='<div  title="'+s.prefHelp+'"><span class="ibm-checkbox-wrapper"><input class="ibm-styled-checkbox"  type="checkbox"'+u+' id="NC_Granular_Choice_-'+s.description.replace(/\s+/g,"_")+'" name="NC_Granular_Choice_-'+s.prefCode+'"><label class="ibm-field-label" for="NC_Granular_Choice_-'+s.description.replace(/\s+/g,"_")+'">'+s.prefDesc+"</label></span></div>";d.defaultStatusMedia[s.prefCode]=n}}}d.isGranularOn=true}else{d.isGranularOn=false}v+="</span></div>";v+='<input type="hidden" id="NC_Hidden_ErrOfferCode" name="NC_Hidden_ErrOfferCode" value="'+d.ncHidden_ErrOfferCode+'"></input>';v+="<input type='hidden' id='NC_Hidden_ErrPrefCode' name='NC_Hidden_ErrPrefCode' value='"+d.ncHidden_ErrPrefCode+"'></input>";v+="<input type='hidden' id='NC_Hidden_ShortAreaCodes' name='NC_Hidden_ShortAreaCodes' value='"+JSON.stringify(A)+"'></input>";v+="<input type='hidden' id='NC_Hidden_NoMediErrorText' name='NC_Hidden_NoMediErrorText' value='"+d.ncNoMediaErrorText+"'></input>";return v};l.sortObject=function(n,m){return Object.keys(n).sort(function(p,o){return n[p][m]<n[o][m]?-1:n[o][m]<n[p][m]?1:0}).reduce(function(o,p){o[p]=n[p];return o},{})};l.questionChoicePopulator=function(r){var v=d.questionChoice.split(",");var y=d.parserData;var z=d.responseJsonData.OptInContent;d.defaultStatusMedia={};var m=d.privacyDiv;var q=z.postText;if(d.trial){var t=d.responseJsonData.OtherPreferences.trailPrivacyText;matchedValue=t.match(/<tc>.*<\/tc>/g);if(matchedValue){var p=matchedValue[0].replace(/<tc>|<\/tc>/g,"");var s="<a href='"+d.trial+"' target='_blank' class='ibm-tooltip' >"+p+"</a>";var o=new RegExp("<tc>"+p+"</tc>","g");q=t.replace(o,s)}}var n=d.defaultText=d.isGranularOn===true?d.responseJsonData.GranularPreference.GranularText:z.preText;var x=d.isGranularOn===true?"<p>"+d.ncMediaChoice+"</p>":"";m.html("<p id='ncHeading'>"+n+"</p>").append(r,x);var w={};for(i=0;i<v.length;i++){w[v[i]-1]=v[i]-1}var u=c("<span/>",{"class":"ibm-input-group"});c.each(y,function(F,C){if(typeof w[F]!=="undefined"&&w[F].toString()===C.id){var H={};if(C.checked!=="hidden"){H=d.labels[C.id];var E="NC_CHECK_"+H;var A="NC_HIDDEN_"+H;var D={name:E,value:C.id,type:"checkbox",title:d.labels[C.id]+" CheckBox",id:E,"class":"ncMediaOption ibm-styled-checkbox"};var J="OPT_OUT";if(C.checked==="true"){D.checked="checked";J="OPT_IN"}d.defaultStatusMedia[H]=JSON.parse(C.checked);var G=c("<input />",D);H=c("<label/>",{"for":E,html:C.optionTextPost,"class":"ibm-field-label"});D={id:A,name:A,value:J,type:"hidden"};var B=c("<input />",D);var I=c("<span/>",{"class":"ibm-checkbox-wrapper"}).append(G,H);u.append(I,B);u.append("<br>")}}});m.append(u);m.append("<p>"+q+"</p>");d.privacyDiv.find("a").attr("target","_blank")};l.onChangeCountry=function(m){if(m===null||m===""){return}console.log(m);var q=m.toLowerCase(),p=typeof d.noticechoiceStatus[m.toLowerCase()]==="undefined"?"zz":d.noticechoiceStatus[m.toLowerCase()].lang,n=d.ecmJsonUrl+"/common/translations/notice/"+q+"/"+p+"/ncContent_v18.js";var o={title:"countryChange",defaultUrl:d.ecmJsonUrl+"/common/translations/notice/zz/en/ncContent_v18.js",time:5000,flag:false};l.callingEcmSevice(n,o)};l.initDom=function(){var o=c("#"+d.id.country);if(o.length!==0){d.countryObj=o;o.on("change",function(){var p=c.trim(c(this).val());if(p!==""){if(p.length>2){p=d.countryvalue[p]}l.onChangeCountry(p,d)}else{l.changeFormCountryOptions(d.responseJsonData,d)}})}var m=c("#"+d.id.email);if(m.length!==0){m.on("change",function(){var p=c(this).val();var q=/^[a-zA-Z0-9.!#\[\]$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/g;if(c.trim(p)!==""&&q.test(p)){l.onChangeEmail(c(this).val())}else{if(o.length!==0&&o.val()!==""){d.emailoptInOut="DEFAULT";l.coutryStatus(d.countryData);l.changeFormCountryOptions(d.countryData)}else{d.emailoptInOut="DEFAULT";l.coutryStatus(d.responseJsonData);l.changeFormCountryOptions(d.responseJsonData)}}})}if(m.length!==0&&d.ncForm.length!==0){var n=d.id.customButton;if(typeof n!=="undefined"&&n!==""){c("#"+n).on("click",function(p){p.stopPropagation();if(c.trim(m.val())!==""){d.customFlag=true;if(d.ajaxCurrentlyRunningOnPage){setTimeout(function(){return l.submitNCForm(m.val())},2000);return false}else{return l.submitNCForm(m.val())}}else{console.warn("Please enter the email ID")}})}d.ncForm.on("submit",function(p){if(d.Submit){if(d.Submit.toLowerCase()!=="false"){p.cancelBubble=true;p.stopPropagation();if(d.ajaxCurrentlyRunningOnPage){setTimeout(function(){return l.submitNCForm(m.val())},2000);return false}else{return l.submitNCForm(m.val())}}}else{p.cancelBubble=true;p.stopPropagation();if(d.ajaxCurrentlyRunningOnPage){setTimeout(function(){return l.submitNCForm(m.val())},2000);return false}else{return l.submitNCForm(m.val())}}})}if(!d.id.preText&&!d.id.privacyText){c("#"+d.id.privacyDiv).off("change click");c("#"+d.id.privacyDiv).on("change click"," input[type=checkbox]",function(q){var p=c(this).attr("name");if(q.type=="click"){d.checkBoxFlag=true;if(c.inArray(p,d.mediaClick)===-1){d.mediaClick.push(p)}if(p==="NC_CHECK_EMAIL"||p==="NC_CHECK_AllMedia"){d.noticeOptionChangedEmailOrAllMedia=true}}if(q.type==="change"&&d.checkBoxFlag===true){h();l.onClickMediaOption(p)}})}else{c("#"+d.id.form).on("change click"," input[type=checkbox]",function(q){var p=c(this).attr("name");if(q.type=="click"){d.checkBoxFlag=true;if(c.inArray(p,d.mediaClick)===-1){d.mediaClick.push(p)}if(c(this).attr("id")===c("#"+d.id.question1).attr("id")){d.noticeOptionChangedEmailOrAllMedia=true}}if(q.type==="change"&&d.checkBoxFlag===true){l.onClickMediaOption(p)}})}};l.onClickMediaOption=function(o){d.noticeOptionChanged=true;var q=o.split("-")[1];if(typeof q==="undefined"){q=o}d.userChangOption[q]={OrignalvalueChanged:true};if(c.inArray(o,d.mediaOptionsCheckboxIDs)===-1){return}if(c(".ncMediaOption").length!==0){var p=c(".ncMediaOption:checked").length,m=c("#NC_Granular_Preferences :checked");if((p===0)&&(m.length>0)){alert(d.ncNoMediaErrorText);var n=c(".ncMediaOption:checkbox").first().parents("span");n.css("border","1px dotted red");setTimeout(function(){n.removeAttr("style")},2000)}}};l.setWorldWide=function(){return{cc_name:"zz",cc_lang:"en",cc_default_status:"OPT_IN",OptInContent:{preText:"Please keep me informed of products, services and offerings from IBM companies worldwide.",oneQuestionApp:[{id:"0",optionTextPre:"",checked:"false",optionTextPost:"Please keep me informed by email of products, services and offerings from IBM companies worldwide."}],twoQuestionApp:[{id:"0",optionTextPre:"",checked:"false",optionTextPost:"by email."},{id:"4",optionTextPre:"",checked:"true",optionTextPost:"by telephone or postal mail."}],fourQuestionApp:[{id:"0",optionTextPre:"",checked:"false",optionTextPost:"by email."},{id:"1",optionTextPre:"",checked:"false",optionTextPost:"by telephone."},{id:"2",optionTextPre:"",checked:"true",optionTextPost:"by postal mail."},{id:"3",optionTextPre:"",checked:"hidden",optionTextPost:""}],postText:"By submitting this form I agree that IBM may process my data in the manner indicated above and as described in <a href='http://www.ibm.com/privacy/zz/en/' target='_blank'>IBM's Privacy statement</a>."},GranularPreference:{GranularEmailText:"Please keep me informed by email of products, services and offerings from IBM companies worldwide.  Check the boxes below to receive more information about:",GranularText:"Please keep me informed of products, services and offerings from IBM companies worldwide.  Check the boxes below to receive more information about:",EnglishGranularText:""},OtherPreferences:{allIBMNotice:"I would also like to receive information about other IBM products.",englishNoticeText:"",allIBMNoticeChecked:"false",noMediaErrorTextt:"You have selected a product category, please select your preferred media choice.",mediaChoice:"Please tell us how you would like to be contacted.",trailPrivacyText:"By submitting this form I agree that IBM may process my data in the manner indicated above and as described in <a href='http://www.ibm.com/privacy/zz/en' target='_blank'>IBM's Privacy statement</a> and <tc>Terms and Conditions</tc>."}}};l.onChangeEmail=function(n){if(d.noticeOptionChanged===true){return true}var m={data:{country:d.country,language:d.lang,sid:101,emailAddress:n},time:5000,url:d.serverUrlLookup+"/v1/preferences",callback:"checkOptStatusCallback",name:"emailChange"};d.ajaxCurrentlyRunningOnPage=true;l.serviceAjaxCall(m)};checkOptStatusCallback=function(p){d.defaultunchecked=false;var n=p[0].OPTSTATUS;if(d.isGranularOn===true){c("#NC_Granular_Preferences :input[type=checkbox]:not(:last)").prop("checked",true).trigger("change")}var o;switch(n.toString()){case"0":d.emailoptInOut="OPT_IN";break;case"1":d.emailoptInOut="OPT_OUT";d.defaultunchecked=true;o=c("#NC_CHECK_EMAIL");if(o.length!==0){o.prop("checked",false).trigger("change")}if(d.AllMediaObj.length!==0){d.AllMediaObj.prop("checked",false).trigger("change")}break;case"2":d.emailoptInOut="NEW";break;case"3":case"4":d.emailoptInOut="ERROR";break}var m=d.countryObj.val();if(m){l.changeFormCountryOptions(d.countryData,d)}else{l.changeFormCountryOptions(d.responseJsonData,d)}};function h(){j.mediaOptions={AllMedia:{},EMAIL:{status:"",value:0},PHONE:{status:"",value:-9,hidden:""},POSTAL:{status:"",value:-9,hidden:""},FAX:{status:"",value:-9,hidden:""},OTHER:{status:"",value:-9,hidden:""}},container=d.privacyDiv,mediaHiddenBox=[],mediaCheckbox=[],emailOptCurrentStatus="",checkbox=[];if(d.id.preText&&d.id.privacyText){container=c("#"+d.id.form)}if((d.questionType==="AllMedia"||d.questionType==="1")&&d.isGranularOn===true){d.noticeOptionChanged=false;d.checkBoxFlag=false}if(d.questionType==="AllMedia"){emailOptCurrentStatus=j.mediaOptions.EMAIL.status=d.countryStatus;if(d.defaultunchecked===true||d.noticeOptionChanged===true){emailOptCurrentStatus="UNCHANGED";j.mediaOptions.EMAIL.status="OPT_IN"}var n=c("#NC_CHECK_AllMedia");if(n.length!==0){if(n.get(0).checked===true){emailOptCurrentStatus=j.mediaOptions.EMAIL.status="OPT_OUT"}else{if(d.noticeOptionChanged===false){c("#NC_HIDDEN_AllMedia").val("OPT_IN")}}}mediaHiddenBox=container.find("[name^=NC_HIDDEN_]")}else{if(d.id.preText&&d.id.privacyText){mediaCheckbox=container.find("input[type=checkbox]")}else{mediaCheckbox=container.children(".ibm-input-group").find("input[type=checkbox]")}mediaHiddenBox=container.find("[name^=NC_HIDDEN_]")}if(mediaCheckbox.length!==0){c.map(j.mediaOptions,function(p,q){if(d.id.preText&&d.id.privacyText){if(q=="EMAIL"){checkbox=c("#"+d.id.question1)}else{checkbox=c("#"+d.id.question2)}}else{checkbox=mediaCheckbox.filter("#NC_CHECK_"+q)}if(checkbox.length!==0){switch(q){case"AllMedia":case"EMAIL":if(checkbox.get(0).checked){emailOptCurrentStatus=j.mediaOptions.EMAIL.status="OPT_OUT"}else{if(d.emailoptInOut==="OPT_IN"||d.defaultunchecked===true){emailOptCurrentStatus=checkbox.get(0).checked===true?"OPT_IN":"UNCHANGED";j.mediaOptions.EMAIL.status="OPT_IN"}else{j.mediaOptions.EMAIL.status="OPT_IN";emailOptCurrentStatus="UNCHANGED"}}break;default:j.mediaOptions[q].hidden=mediaHiddenBox.filter("#NC_HIDDEN_"+q).val();j.mediaOptions[q].value=checkbox.get(0).value;if(checkbox.get(0).checked){j.mediaOptions[q].status="OPT_OUT"}else{j.mediaOptions[q].status=checkbox.get(0).checked===true?"OPT_IN":"UNCHANGED"}break}}})}if(j.mediaOptions.EMAIL.status===""){if(d.emailoptInOut==="OPT_IN"||d.emailoptInOut==="OPT_OUT"){emailOptCurrentStatus=j.mediaOptions.EMAIL.status=d.emailoptInOut}else{emailOptCurrentStatus=j.mediaOptions.EMAIL.status=d.countryStatus}}var m=[];c.map(j.mediaOptions,function(q,p){m=mediaHiddenBox.filter("#NC_HIDDEN_"+p);if(m.length!==0){switch(p){case"AllMedia":case"EMAIL":if(d.id.preText&&d.id.privacyText){question1=c("#"+d.id.question1);checkboxname=question1.attr("name");setvalue=l.setStatus(m.val(),emailOptCurrentStatus,checkboxname);m.val(setvalue);question1.val(setvalue);name=question1.attr("name");hiddenbox=question1.parents("div").find("[name="+name+"][type=hidden]");hiddenbox.val(setvalue)}else{m.val(l.setStatus(m.val(),emailOptCurrentStatus,"NC_CHECK_"+p))}break;default:if(d.id.preText&&d.id.privacyText){question2=c("#"+d.id.question2);checkboxname=question2.attr("name");setvalue=l.setStatus(m.val(),j.mediaOptions[p].status,checkboxname);question2.val(setvalue);m.val(setvalue);name=question2.attr("name");hiddenbox=question2.parents("div").find("[name="+name+"][type=hidden]");hiddenbox.val(setvalue)}else{m.val(l.setStatus(m.val(),j.mediaOptions[p].status,"NC_CHECK_"+p))}break}}});var o=typeof d.footer!=="undefined"&&d.footer.toLowerCase()==="on"?"F":"L";if(d.isGranularOn===true&&o==="L"){l.setUPGranularpairs(mediaHiddenBox,container,mediaCheckbox,d)}emailAjaxValue="";if(d.isGranularOn===true&&d.questionType.toLowerCase()==="allmedia"){emailAjaxValue=c("#ALL_IBM_AllMedia").val()}else{if(d.questionType.toLowerCase()==="allmedia"){emailAjaxValue=c("#NC_HIDDEN_AllMedia").val()}else{if(d.isGranularOn===true){emailAjaxValue=c("#ALL_IBM_EMAIL").val()}else{emailAjaxValue=c("#NC_HIDDEN_EMAIL").val()}}}if(emailAjaxValue==="SUPRESSION"){emailAjaxValue="OPT_OUT"}else{if(emailAjaxValue==="PERMISSION"){emailAjaxValue="OPT_IN"}}}l.submitNCForm=function(q){if(d.formLoading===true&&d.customFlag===true){return false}else{if(d.formLoading===true){return true}}h();if(typeof d.footer!=="undefined"&&d.footer.toLowerCase()==="on"&&d.isGranularOn===true){d.SaveToGECS="false"}var o=d.pageDesc+" :: Form Country : "+d.formCountry+" ::  QUESTION TYPE : "+d.countryStatus;var n="UPID not available";if(window.digitalData){if(window.digitalData.user){if(window.digitalData.user.profile){if(window.digitalData.user.profile.auid){n=window.digitalData.user.profile.auid}}}}var p={country:d.country,language:d.lang,PAGEDESC:o,sid:"102",emailAddress:q,oldEmailStatus:d.emailoptInOut?d.emailoptInOut:"not loaded",NC_CHECK_EMAIL:emailAjaxValue,NC_ID_EMAIL:j.mediaOptions.EMAIL.value,OLD_NC_CHECK_PHONE:j.mediaOptions.PHONE.hidden,NC_CHECK_PHONE:j.mediaOptions.PHONE.status,NC_ID_PHONE:j.mediaOptions.PHONE.value,OLD_NC_CHECK_POSTAL:j.mediaOptions.POSTAL.hidden,NC_CHECK_POSTAL:j.mediaOptions.POSTAL.status,NC_ID_POSTAL:j.mediaOptions.POSTAL.value,OLD_NC_CHECK_FAX:j.mediaOptions.FAX.hidden,NC_CHECK_FAX:j.mediaOptions.FAX.status,NC_ID_FAX:j.mediaOptions.FAX.value,OLD_NC_CHECK_OTHER:j.mediaOptions.OTHER.hidden,NC_CHECK_OTHER:j.mediaOptions.OTHER.status,NC_ID_OTHER:j.mediaOptions.OTHER.value,saveToGECS:(d.SaveToGECS&&d.SaveToGECS.toLowerCase()==="false")?false:true,jsFramework:"v18v",NC_UPID:n};var m={url:d.serverUrlSave+"/v1/preference",callback:"formSubmitNCCallback",time:8000,data:p,method:"POST",name:"formSave"};setTimeout(function(){l.serviceAjaxCall(m);return false},500)};function f(){}l.setStatus=function(m,n,p){var o="";if(n==="OPT_OUT"){o="PERMISSION"}else{if((m=="OPT_OUT"||m==="NEW"||m==="OPT_IN")&&(n==="OPT_IN"&&d.checkBoxFlag===false)){o="PERMISSION"}else{if(c.inArray(p,d.mediaClick)!==-1&&(n==="OPT_IN"||n=="UNCHANGED")){o="SUPRESSION"}else{o="UNCHANGED"}}}return o};l.setUPGranularpairs=function(q,m,u,p){var o=c("#NC_Granular_Preferences input"),v=[],s={},t=false,n=false,r="";c.each(q,function(){var w=c(this).val(),x=c(this).attr("name").split("_")[2];s={};c.each(o,function(){var y=c(this).attr("name");y=y.split("-")[1];y=y.indexOf("ALL_IBM")!==-1?"ALL_IBM":y;r=w;if(y==="ALL_IBM"){r=r=="SUPRESSION"?"PERMISSION":r;n=c(this).get(0).checked;r=r=="PERMISSION"&&n===false?"UNCHANGED":r;if(p.nc_ifAllIBMChecked!==n){r=c(this).get(0).checked===true?r:"SUPRESSION";if(c("#NC_CHECK_"+x).length!==0){t=c("#NC_CHECK_"+x).get(0).checked;if(t!==p.defaultStatusMedia[x]){r=t===true?r:"UNCHANGED"}}}}else{t=c(this).get(0).checked===true?true:false;if(p.countryStatus==="OPT_OUT"){if(c("#NC_CHECK_"+x).length!==0){t=c("#NC_CHECK_"+x).get(0).checked}r=t===true?"Permission":"UNCHANGED";if(typeof(p.defaultStatusMedia[x])!="undefined"&&p.defaultStatusMedia[x]!=="hidden"){if(t!=p.defaultStatusMedia[x]){r=t===true?"Permission":"SUPRESSION"}}}var z=p.userChangOption[y];if(typeof z==="undefined"&&p.countryStatus==="OPT_IN"){r=s[y]="UNCHANGED"}else{s[y]=r}}c("<input/>").attr({type:"Hidden",value:r,name:y+"_"+x,id:y+"_"+x}).appendTo(m)});v.push(s)});c("#NC_Hidden_ShortAreaCodes").val(JSON.stringify(v))};l.init()}}(jQuery));