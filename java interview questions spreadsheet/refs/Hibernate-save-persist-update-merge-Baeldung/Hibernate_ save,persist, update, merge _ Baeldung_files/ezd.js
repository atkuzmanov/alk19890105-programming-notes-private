!function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){var i=n(1),a=n(2);t.exports=function(t,e,n){var o=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||i)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e)for(var s=0;s<16;++s)e[o+s]=r[s];return e||a(r)}},function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);t.exports=function(){return n(i),i}}else{var a=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),a[e]=t>>>((3&e)<<3)&255;return a}}},function(t,e){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);t.exports=function(t,e){var i=e||0,a=n;return[a[t[i++]],a[t[i++]],a[t[i++]],a[t[i++]],"-",a[t[i++]],a[t[i++]],"-",a[t[i++]],a[t[i++]],"-",a[t[i++]],a[t[i++]],"-",a[t[i++]],a[t[i++]],a[t[i++]],a[t[i++]],a[t[i++]],a[t[i++]]].join("")}},function(t,e,n){"use strict";n.r(e);var i=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.selectors=n},o=[new i("adsense",["ins[id^='aswift_'] > iframe"]),new i("dfp",["iframe[id^='google_ads_iframe_']"]),new i("outbrain",[".OUTBRAIN > .ob-widget"]),new i("taboola",["div[id^='taboola-'] > .trc_rbox_container"]),new i("zergnet",["div[id^='zergnet-widget-']","div.zergnet-widget"]),new i("sovrn",["div.sovrn-onetag-ad"]),new i("content.ad",["div[id^='ac_'] > .ac_adbox"]),new i("media net",["iframe[id^='_mN_main_']","iframe[id^='_mN_dy_']"]),new i("tynt",["div.tynt-ad-container"]),new i("my6",["div[class*='my6_widget']"]),new i("spot.im",["div[data-spotim-module='recirculation']"]),new i("proper media",["iframe[id^='proper-ad-']"]),new i("revcontent",["div.rc-wc.rc-bp"]),new i("mgid",["div[class^='mgid-ad-']"]),new i("amazon native",["div[id^='amzn-native-ad-']"]),new i("spotx",["div[id^='spotx_content_container']"]),new i("ligatus",["div[id^='ligatusframe']"]),new i("adhese",["div[id^='adheseVisibleDiv']"]),new i("infolinks",["div.IL_BASE"]),new i("disqus",["div#disqus_thread > iframe[src*='disqusads']"]),new i("triplelift",["div.tlod > div"])];function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r(s,"getDomain",function(t){var e=document.createElement("a");return e.href=t,e.hostname}),r(s,"addClass",function(t,e){t.classList?t.classList.add(e):a.className+=" ".concat(e)}),r(s,"getAbsolutePosition",function(t){var e=t.getBoundingClientRect();return{x:Math.round(e.left+window.scrollX),y:Math.round(e.top+window.scrollY)}}),r(s,"attachEvent",function(t,e,n){t.addEventListener?t.addEventListener(e,n):t.attachEvent&&t.attachEvent("on".concat(e),n)}),r(s,"isVisible",function(t){return t.offsetWidth>0&&t.offsetHeight>0}),r(s,"isAncestorOfClass",function(t,e){for(;t.parentNode&&t.parentNode!==document.body;)if((t=t.parentNode).className.indexOf(e)>0)return!0;return!1});var c=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n}var e,n,i;return e=t,(n=[{key:"add",value:function(e){return new t(this.x+e.x,this.y+e.y)}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"withinRect",value:function(t,e){if(this.equals(t)||this.equals(e))return!0;var n=Math.max(t.x,e.x),i=Math.max(t.y,e.y),a=Math.min(t.x,e.x),o=Math.min(t.y,e.y);return!(this.x>n||this.x<a||this.y>i|this.y<o)}},{key:"toString",value:function(){return"(".concat(this.x,", ").concat(this.y,")")}}])&&d(e.prototype,n),i&&d(e,i),t}();function u(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var h=n(0),f=1,p=2,m=3;(new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.adElements=[],this.pageviewData={},this.impressionData={},this.adsFound=0,this.adCoordinates={},this.lastRecordedDensityData={},this.DEBUG=!1,this.pageWidth=Math.max(document.body.scrollWidth,document.body.offsetWidth,document.documentElement.clientWidth,document.documentElement.scrollWidth,document.documentElement.offsetWidth),this.pageHeight=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight),"undefined"==typeof ezoTemplate?this.platformID=m:ezoTemplate.indexOf("orig_site")>=0||ezoTemplate.indexOf("old_site")>=0?this.platformID=p:this.platformID=f}var e,n,i;return e=t,i=[{key:"_fireData",value:function(t,e){(new Image).src=t+"?d="+encodeURIComponent(JSON.stringify(e))}},{key:"getPixelURL",value:function(t){return("undefined"==typeof ezoTemplate||"undefined"!=typeof ezJsu&&1==ezJsu||"undefined"!=typeof _ez_sa&&1==_ez_sa||"undefined"!=typeof isAmp&&!0===isAmp||"undefined"!=typeof ezWp&&!0===ezWp)&&(t="//g.ezoic.net"+t),t}},{key:"_setEzaqData",value:function(t){t.pageview_id=_ezaq.page_view_id,t.domain=s.getDomain(_ezaq.url),t.url=_ezaq.url,t.form_factor_id=_ezaq.form_factor_id}},{key:"iOSSafari",value:function(){var t=window.navigator.userAgent,e=!!t.match(/iPad/i)||!!t.match(/iPhone/i),n=!!t.match(/WebKit/i);return e&&n&&!t.match(/CriOS/i)}}],(n=[{key:"run",value:function(){this._attachEvents(),"complete"===document.readyState&&this._run()}},{key:"_run",value:function(){this._log("Running ad density"),this._findAds(),this._gatherData(),this._fire()}},{key:"_attachEvents",value:function(){"complete"!==document.readyState&&s.attachEvent(document,"load",this._run.bind(this)),s.attachEvent(document,"blur",this._run.bind(this)),s.attachEvent(document,"unload",this._run.bind(this)),s.attachEvent(document,"pagehide",this._run.bind(this)),s.attachEvent(window,"blur",this._run.bind(this)),s.attachEvent(window,"unload",this._run.bind(this)),s.attachEvent(window,"pagehide",this._run.bind(this))}},{key:"_findAds",value:function(){var t=this;o.forEach(function(e){e.selectors.forEach(function(n){var i,a=document.querySelectorAll(n);a.forEach(function(n){t._handleFoundAd(n,e.name)}),(i=t.adElements).push.apply(i,u(a))})}),this._log("Have found ".concat(this.adsFound," ads"))}},{key:"_handleFoundAd",value:function(t,e){var n="ezdensity-".concat(this.adsFound),i=s.getAbsolutePosition(t),a=new c(i.x,i.y),o=a.toString();if(!(t.className.indexOf("ezdensity")>=0||this.adCoordinates.hasOwnProperty(o))&&!(i.x<0||i.x>this.pageWidth||i.y<0||i.x>this.pageHeight)&&s.isVisible(t)){var r=window.getComputedStyle(t);if("none"!==r.display){for(var d=Math.round(parseFloat(r.width)),u=Math.round(parseFloat(r.height)),l=new c(d,u),h=a.add(l),f=0,p=Object.keys(this.adCoordinates);f<p.length;f++){var m=p[f],g=this.adCoordinates[m];if(a.withinRect(g.topLeft,g.bottomRight))return}s.isAncestorOfClass(t,"ezdensity")||(s.addClass(t,n),this._log("Found new ad ".concat(n," at pos ").concat(o," with size ").concat(d,"x").concat(u)),this._log(t),this.impressionData[n]={ad_network:e,ad_width:d,ad_height:u,pos_x:i.x,pos_y:i.y},this.adCoordinates[n]={topLeft:a,bottomRight:h},this.DEBUG&&(t.style.border="",t.style.borderStyle="groove",t.style.borderWidth="8px",t.style.borderColor="#5fa624"),this.adsFound++)}}}},{key:"_gatherData",value:function(){this._gatherPageviewData(),this._calculateDensity()}},{key:"_gatherPageviewData",value:function(){Object.keys(this.pageviewData)>0||(this.pageviewData.platform_id=this.platformID,this._setPageviewData(this.pageviewData))}},{key:"_setPageviewData",value:function(e){e.platform_id=this.platformID,this.platformID===f||this.platformID===p?t._setEzaqData(e):(this.pageviewData.hasOwnProperty("pageview_id")?e.pageview_id=this.pageviewData.pageview_id:e.pageview_id=h(),this.pageviewData.hasOwnProperty("domain")?e.domain=this.pageviewData.domain:e.domain=s.getDomain(window.location),this.pageviewData.hasOwnProperty("url")?e.url=this.pageviewData.url:e.url=window.location.protocol+"//"+window.location.hostname+window.location.pathname)}},{key:"_fire",value:function(){var e=this;this.pageviewData.page_pixel_count===this.lastRecordedDensityData.page_pixel_count&&this.pageviewData.ad_pixel_count===this.lastRecordedDensityData.ad_pixel_count&&this.pageviewData.ad_density===this.lastRecordedDensityData.ad_density||(this._log("Firing pageview data with pixel count ".concat(this.pageviewData.pixel_count," and an ad density of ").concat(this.pageviewData.ad_density)),this.lastRecordedDensityData.page_pixel_count=this.pageviewData.page_pixel_count,this.lastRecordedDensityData.ad_pixel_count=this.pageviewData.ad_pixel_count,this.lastRecordedDensityData.ad_density=this.pageviewData.ad_density,t._fireData(t.getPixelURL("/detroitchicago/dpv.gif"),this.pageviewData));var n={data:[]};Object.keys(this.impressionData).forEach(function(t){e.impressionData[t].fired||(e._log("Adding imp data for ".concat(t)),n.data.push(e.impressionData[t]))}),n.data.length>0&&(this._setPageviewData(n),this._log("Firing imp data"),t._fireData(t.getPixelURL("/detroitchicago/dimp.gif"),n),Object.keys(this.impressionData).forEach(function(t){e.impressionData[t].fired=!0}))}},{key:"_calculateDensity",value:function(){var t=this,e=Math.max(document.body.scrollWidth,document.body.offsetWidth,document.documentElement.clientWidth,document.documentElement.scrollWidth,document.documentElement.offsetWidth);e!==this.pageWidth&&(this.pageWidth=e);var n=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight);n!==this.pageHeight&&(this.pageHeight=n);var i=Math.round(e*n);this._log("Running on page with width ".concat(e," height ").concat(n," with ").concat(i," total pixels"));var a=0;Object.keys(this.impressionData).forEach(function(e){a+=t.impressionData[e].ad_width*t.impressionData[e].ad_height}),this.pageviewData.page_pixel_count=i,this.pageviewData.ad_pixel_count=a,this.pageviewData.ad_density=100*a/i,this._log("Page has an ad density of ".concat(this.pageviewData.ad_density))}},{key:"_log",value:function(t){this.DEBUG&&console.log("[Ezoic Ad Density]",t)}}])&&l(e.prototype,n),i&&l(e,i),t}())).run()}]);