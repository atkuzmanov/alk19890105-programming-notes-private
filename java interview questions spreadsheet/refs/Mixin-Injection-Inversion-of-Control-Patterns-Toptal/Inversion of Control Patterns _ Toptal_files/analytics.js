!function t(e,n,r){function o(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return o(n?n:t)},c,c.exports,t,e,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e){var n,r;n=t("./lib/processor.coffee"),r=function(t){var e,r,o,i;return e=null!=(i=t.AdstageAnalytics)?i:"_as",null==t[e]&&(t[e]=function(){var n;return null==(n=t[e]).q&&(n.q=[]),t[e].q.push(arguments)}),r=t[e],null==r||r.loaded!==!0?(o=new n(t,r),t[e]=o.process,o.processAll()):void 0},"undefined"!=typeof window&&null!==window?r(window):e.exports=r},{"./lib/processor.coffee":4}],2:[function(t,e){var n;e.exports=n=function(){function t(t,e,n,r){this.document=t,this.expires=e,this.domain=n,this.path=null!=r?r:"/"}return t.prototype.get=function(t){var e;return e=this.document.cookie.match("(^|;) ?"+t+"=([^;]*)(;|$)"),null!=e?unescape(e[2]):null},t.prototype.set=function(t,e,n){var r,o;return null==n&&(n=this.expires),o=1*new Date+1e3*n,o=new Date(o),r=""+t+"="+escape(e)+"; ",r+="expires="+o.toGMTString()+"; ",r+="path="+escape(this.path)+"; ","none"!==this.domain&&(r+="domain="+escape(this.domain)+";"),this.document.cookie=r,e},t}()},{}],3:[function(t,e){var n;e.exports=n=function(){function t(){this.data={}}return t.prototype.get=function(t){return this.data[t]},t.prototype.set=function(t,e){return this.data[t]=e},t}()},{}],4:[function(t,e){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}},i=[].slice;r=t("./tracker.coffee"),e.exports=n=function(){function t(t,e){var n;null==e&&(e={}),this.getAll=o(this.getAll,this),this.getByName=o(this.getByName,this),this.process=o(this.process,this),this.context=t,this.queue=null!=(n=e.q)?n:[],this.trackers={},this.process.processor=this,this.process.getByName=this.getByName,this.process.getAll=this.getAll}return t.prototype.process=function(){var t,e,n,r;return e=arguments[0],t=2<=arguments.length?i.call(arguments,1):[],"function"==typeof e?e(this.getByName()):(n=e.split("."),null!=n[1]?(r=n[0],e=n[1]):(r=this.default_name,e=n[0]),"create"!==e&&(r=this.getByName(r)),this[e].apply(this,[r].concat(i.call(t))))},t.prototype.getByName=function(t){var e;if(null==t&&(t=this.default_name),null==(null!=(e=this.trackers)?e[t]:void 0))throw"No tracker created";return this.trackers[t]},t.prototype.getAll=function(){return this.trackers},t.prototype.processAll=function(){var t,e;for(e=[];t=this.queue.shift();)e.push(this.process.apply(this,t));return e},t.prototype.create=function(t,e,n){return null==n&&(n={}),t=new r(this.context,e,n),this.trackers[t.get("name")]=t,null!=this.default_name?this.default_name:this.default_name=t.get("name")},t.prototype.set=function(){var t,e;return e=arguments[0],t=2<=arguments.length?i.call(arguments,1):[],e.set.apply(e,t)},t.prototype.send=function(){var t,e,n;return e=arguments[0],n=arguments[1],t=3<=arguments.length?i.call(arguments,2):[],e.send.apply(e,[n].concat(i.call(t)))},t}()},{"./tracker.coffee":5}],5:[function(t,e){var n,r,o,i,s=[].slice;i=t("./transport.coffee"),n=t("./cookie_store.coffee"),r=t("./non_store.coffee"),e.exports=o=function(){function t(t,e,n){var r,o,i,s;null==n&&(n={}),this.context=t,this.document=t.document,this.options={},s=this.defaults;for(r in s)o=s[r],this.set(r,o);for(r in n)o=n[r],this.set(r,o);null==(i=this.options).trackerId&&(i.trackerId=e)}return t.prototype.defaults={logEndpoint:"https://tracker.adstage.io/collect",logging:!1,storage:"cookie",name:"adstage",trackerId:null,clientId:null,referrer:null,timestamp:1*new Date,cookieDomain:null,cookieExpires:63072e3,clientIdCookieName:"as_uid",referrerCookieName:"as_dr",timestampCookieName:"as_ts",referrerCookieExpires:2592e3,timestampCookieExpires:2592e3},t.prototype.hit_fields=["page","trackerId","clientId","referrer","screenResolution","title","timestamp"],t.prototype.log=function(){var t,e,n;return e=arguments[0],n=arguments[1],t=3<=arguments.length?s.call(arguments,2):[],this.options.logging?console.log.apply(console,[""+e+" -- "+n].concat(s.call(t))):void 0},t.prototype.generate_clientId=function(){var t,e,n;return n=this.getStorage(this.get("storage")),e=this.get("clientIdCookieName"),t=n.get(e),t?(this.log("info","Loaded client id "+t),this.set("clientId",t),n.set(e,t)):(t=this.uuid(),this.log("info","Generated client id "+t),this.set("clientId",t),n.set(e,t))},t.prototype.uuid=function(){var t,e,n,r;for(n=[],t="0123456789abcdef",e=r=0;35>=r;e=++r)n[e]=t.substr(Math.floor(16*Math.random()),1);return n[14]="4",n[19]=t.substr(8|3&n[19],1),n[8]=n[13]=n[18]=n[23]="-",n.join("")},t.prototype.generate_cookieDomain=function(){var t;return null!=(t=this.context.location)?t.hostname:void 0},t.prototype.generate_referrer=function(){var t,e,n,r,o,i,s,a,u,c;return i=this.getStorage(this.get("storage")),o=this.get("referrerCookieName"),r=this.get("referrerCookieExpires"),u=this.get("timestampCookieName"),a=this.get("timestampCookieExpires"),t=i.get(o),c=i.get(u),n=this.document.referrer,s=this.get("timestamp"),e=this.get("page"),/as_clid/.test(e)&&(n=e),/as_clid/.test(n)?(i.set(u,s,a),i.set(o,n,r),this.set("referrer",n)):t?(c&&this.set("timestamp",c),this.set("referrer",t)):this.set("referrer",n)},t.prototype.generate_title=function(){return this.document.title},t.prototype.generate_screenResolution=function(){var t,e,n,r;return""+(null!=(t=this.context)?null!=(e=t.screen)?e.width:void 0:void 0)+"x"+(null!=(n=this.context)?null!=(r=n.screen)?r.height:void 0:void 0)},t.prototype.generate_page=function(){return this.context.location.protocol+"//"+this.context.location.hostname+this.context.location.pathname+this.context.location.search},t.prototype.getStorage=function(t){var e;return null!=this.store?this.store:this.store=function(){switch(t){case"cookie":return e=new n(this.document,this.get("cookieExpires"),this.get("cookieDomain"));case"none":return new r}}.call(this)},t.prototype.get=function(t,e){return null==e&&(e=null),null!=this.options[t]?this.options[t]:e?"function"==typeof e?e():e:"function"==typeof this["generate_"+t]?this["generate_"+t]():e},t.prototype.set=function(t,e){return this.options[t]=e},t.prototype.buildEvent=function(){var t,e,n,r,o,i,a,u;switch(e=arguments[0],t=2<=arguments.length?s.call(arguments,1):[],o=null,e){case"pageview":t[0]&&(o=t[0]),n={};break;case"event":throw"Not currently supported";default:n=e}for(null==n.page&&(n.page=o),u=this.hit_fields,i=0,a=u.length;a>i;i++)r=u[i],null==n[r]&&(n[r]=this.get(r));return n},t.prototype.buildTransport=function(t){return new i(this,t)},t.prototype.send=function(){var t,e;return t=1<=arguments.length?s.call(arguments,0):[],e=this.buildEvent.apply(this,t),this.log("info","Logging hit",e)},t}()},{"./cookie_store.coffee":2,"./non_store.coffee":3,"./transport.coffee":6}],6:[function(t,e){var n,r={}.hasOwnProperty;e.exports=n=function(){function t(t,e){this.tracker=t,this.base_url=e}return t.prototype.protocol_map={viewportSize:"vs",timestamp:"ts",timezoneOffset:"tz",clientId:"cid",trackerId:"tid",referrer:"dr",title:"dt",page:"dp"},t.prototype.document=function(){return this.tracker.document},t.prototype.send=function(t,e){var n;return null==e&&(e=function(){}),n=this.buildQuery(this.mapData(t)),this.getScript(this.base_url+"?"+n,e)},t.prototype.buildQuery=function(t){var e,n;return function(){var o;o=[];for(e in t)r.call(t,e)&&(n=t[e],o.push(""+e+"="+encodeURIComponent(n)));return o}().join("&")},t.prototype.mapData=function(t){var e,n,r,o,i;null==t&&(t={}),r=new Date,e={},t.timezoneOffset=r.getTimezoneOffset(),i=this.protocol_map;for(o in i)n=i[o],null!=t[o]&&(e[n]=t[o]);return e},t.prototype.getScript=function(t,e){var n,r,o;return o=this.document().createElement("script"),o.src=t,r=this.document().getElementsByTagName("head")[0],n=!1,o.onload=o.onreadystatechange=function(){return n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState?void 0:(n=!0,e(),o.onload=o.onreadystatechange=null,r.removeChild(o))},r.appendChild(o)},t}()},{}]},{},[1]);