<!DOCTYPE html>
<!-- saved from url=(0075)https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/ -->
<html lang="en"><!----><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="google-site-verification" content="Cghc1HFx2GBn1D5ans5vLlaX-pme-BY2wJpaLqHs_H0"><meta name="”keywords”" content="”java," openshift,="" docker,="" michal="" fabjanski,="" github,="" jekyll,="" programming,="" spring,="" hibernate,="" spring="" boot,="" kubernetes”=""><link rel="dns-prefetch" href="https://fonts.googleapis.com/"><link rel="dns-prefetch" href="https://google-analytics.com/"><link rel="dns-prefetch" href="https://www.google-analytics.com/"><link rel="dns-prefetch" href="https://maxcdn.bootstrapcdn.com/"><link rel="dns-prefetch" href="https://ajax.googleapis.com/"><link rel="dns-prefetch" href="https://fonts.gstatic.com/"><link rel="dns-prefetch" href="https://dev-diary-2.disqus.com/"><title>Design Patterns used in Spring Framework Part 2 - Creational Patterns (Factory, Builder, Singleton, Prototype). | Devdiaries</title><meta name="generator" content="Jekyll v3.8.4"><meta property="og:title" content="Design Patterns used in Spring Framework Part 2 - Creational Patterns (Factory, Builder, Singleton, Prototype)."><meta name="author" content="Michal Fabjanski"><meta property="og:locale" content="en_US"><meta name="description" content="Creational design patterns deal with object creation mechanisms, trying to create objects in a manner suitable to the situation. In this article, I will describe the most popular patterns in this category and how Spring uses them!"><meta property="og:description" content="Creational design patterns deal with object creation mechanisms, trying to create objects in a manner suitable to the situation. In this article, I will describe the most popular patterns in this category and how Spring uses them!"><link rel="canonical" href="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/"><meta property="og:url" content="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/"><meta property="og:site_name" content="Devdiaries"><meta property="og:image" content="https://www.devdiaries.net/images/spring-design-patterns-creational.jpg"><meta property="og:type" content="article"><meta property="article:published_time" content="2019-06-02T00:00:00+00:00"><script type="application/ld+json"> {"description":"Creational design patterns deal with object creation mechanisms, trying to create objects in a manner suitable to the situation. In this article, I will describe the most popular patterns in this category and how Spring uses them!","headline":"Design Patterns used in Spring Framework Part 2 - Creational Patterns (Factory, Builder, Singleton, Prototype).","dateModified":"2019-06-02T00:00:00+00:00","datePublished":"2019-06-02T00:00:00+00:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/"},"image":"https://www.devdiaries.net/images/spring-design-patterns-creational.jpg","url":"https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/","author":{"@type":"Person","name":"Michal Fabjanski"},"@context":"https://schema.org"}</script><link rel="stylesheet" href="./Design Patterns used in Spring Framework Part 2 - Creational Patterns (Factory, Builder, Singleton, Prototype). _ Devdiaries_files/bootstrap.min.css"><link rel="stylesheet" href="./Design Patterns used in Spring Framework Part 2 - Creational Patterns (Factory, Builder, Singleton, Prototype). _ Devdiaries_files/main.css"><link rel="stylesheet" href="./Design Patterns used in Spring Framework Part 2 - Creational Patterns (Factory, Builder, Singleton, Prototype). _ Devdiaries_files/font-awesome.min.css"> <!-- Replace these icons with your own. --><link rel="apple-touch-icon" sizes="60x60" href="https://www.devdiaries.net/assets/img/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="114x114" href="https://www.devdiaries.net/assets/img/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="152x152" href="https://www.devdiaries.net/assets/img/apple-icon-152x152.png"><link rel="icon" type="image/png" sizes="192x192" href="https://www.devdiaries.net/assets/img/android-icon-192x192.png"><link rel="shortcut icon" href="https://www.devdiaries.net/favicon.ico" type="image/x-icon"><link rel="icon" href="https://www.devdiaries.net/favicon.ico" type="image/x-icon"><link href="./Design Patterns used in Spring Framework Part 2 - Creational Patterns (Factory, Builder, Singleton, Prototype). _ Devdiaries_files/aos.css" rel="stylesheet"> <!-- Google Analytics code.<head> tag is the right place for analytics code as directed by Google. This is unofficial light version which loads blazing fast! Implemented for faster page load. --><script src="./Design Patterns used in Spring Framework Part 2 - Creational Patterns (Factory, Builder, Singleton, Prototype). _ Devdiaries_files/ga-lite.min.js" async=""></script><script> var galite = galite || {}; galite.UA = 'UA-139553005-1';</script><script async="" src="./Design Patterns used in Spring Framework Part 2 - Creational Patterns (Factory, Builder, Singleton, Prototype). _ Devdiaries_files/latest.js"></script><script src="./Design Patterns used in Spring Framework Part 2 - Creational Patterns (Factory, Builder, Singleton, Prototype). _ Devdiaries_files/Chart.bundle.min.js"></script><style type="text/css">/* Chart.js */
@-webkit-keyframes chartjs-render-animation{from{opacity:0.99}to{opacity:1}}@keyframes chartjs-render-animation{from{opacity:0.99}to{opacity:1}}.chartjs-render-monitor{-webkit-animation:chartjs-render-animation 0.001s;animation:chartjs-render-animation 0.001s;}</style><script type="text/javascript" async="" src="./Design Patterns used in Spring Framework Part 2 - Creational Patterns (Factory, Builder, Singleton, Prototype). _ Devdiaries_files/MathJax.js"></script><script src="./Design Patterns used in Spring Framework Part 2 - Creational Patterns (Factory, Builder, Singleton, Prototype). _ Devdiaries_files/embed.js" data-timestamp="1581453212654"></script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck.RTL {right: .7em; left: auto}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover, .MJXp-munder {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > *, .MJXp-munder > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><link rel="prefetch" as="style" href="https://c.disquscdn.com/next/embed/styles/lounge.15d8f2a22cfa6b9f96345c682b01a08f.css"><link rel="prefetch" as="script" href="https://c.disquscdn.com/next/embed/common.bundle.b9167d06dc7bd01b59d6d6332d6aafa1.js"><link rel="prefetch" as="script" href="https://c.disquscdn.com/next/embed/lounge.bundle.a0b0b564b806112a1c4571475f829256.js"><link rel="prefetch" as="script" href="https://disqus.com/next/config.js"><script src="./Design Patterns used in Spring Framework Part 2 - Creational Patterns (Factory, Builder, Singleton, Prototype). _ Devdiaries_files/alfie.f51946af45e0b561c60f768335c9eb79.js" async="" charset="UTF-8"></script></head><body data-aos-easing="ease" data-aos-duration="600" data-aos-delay="0"><div id="MathJax_Message" style="display: none;"></div><div class="loader" style="display: none;"><div class="lds-ring"><div></div><div></div><div></div><div></div></div></div><div class="wrapper"><div class="container-grid"><div class="sidebar"><div class="author-container shadow"><div class="author"><img src="./Design Patterns used in Spring Framework Part 2 - Creational Patterns (Factory, Builder, Singleton, Prototype). _ Devdiaries_files/ja.jpg" width="100%" height="auto;" alt="Devdiaries" onclick="location.href=&#39;/&#39;"></div><div class="about text-center"><h1 class="title"><a href="https://www.devdiaries.net/">Devdiaries</a></h1></div><div class="bio text-center"><p class="m0">Michael`s Blog</p></div><hr class="dashed"><div class="social text-center"> <ul class="portfolio p0"> <li><a href="https://www.devdiaries.net/about/">About Me</a></li> <li><a href="https://www.devdiaries.net/categories/">Categories</a></li> <li><a href="https://www.devdiaries.net/contact/">Contact</a></li> </ul> <ul class="sm p0 m0a"> <li><a href="https://www.linkedin.com/in/michal-fabjanski"><i class="fa fa-linkedin"></i></a></li> <li><a href="https://github.com/"><i class="fa fa-github"></i></a></li> </ul></div></div></div><div class="main"><div class="main-container shadow"><div class="title-space"> <h2>Design Patterns used in Spring Framework Part 2 - Creational Patterns (Factory, Builder, Singleton, Prototype).</h2></div><hr class="dashed"> <main> <ul class="breadcrumbs"> <li><a href="https://www.devdiaries.net/">Home</a></li> <li><a href="https://www.devdiaries.net/blog/">Blog</a></li> <li><a href="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/#">Spring design pat...</a></li> </ul><div class="meta"> <p> <small> <span> <i class="fa fa-calendar" aria-hidden="true"></i> 02 Jun 2019&nbsp; </span> <span> <i class="fa fa-user" aria-hidden="true"></i> Michal Fabjanski&nbsp; </span> <span> <i class="fa fa-clock-o" aria-hidden="true"></i> 16 mins read. </span> </small> </p></div><div class="featured-image" style="background-image: url(/images/spring-design-patterns-creational.jpg)"></div><article> <ul class="toc rev clearfix"> <li><a href="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/#the-factory-pattern">The Factory pattern</a> <ul> <li><a href="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/#intent">Intent</a></li> <li><a href="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/#problem-solution">Problem Solution</a></li> <li><a href="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/#structure-of-the-factory-pattern">Structure of the Factory Pattern</a></li> <li><a href="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/#abstract-factory-pattern">Abstract Factory Pattern</a></li> <li><a href="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/#factory-pattern-implementation-in-spring">Factory Pattern implementation in Spring</a></li> <li><a href="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/#factory-pattern-popular-use-cases-in-spring-framework">Factory Pattern popular use cases in Spring Framework</a></li> </ul> </li> <li><a href="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/#the-builder-pattern">The Builder pattern</a> <ul> <li><a href="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/#intent-1">Intent</a></li> <li><a href="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/#problem-solution-1">Problem Solution</a></li> <li><a href="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/#structure-of-the-builder-pattern">Structure of the Builder Pattern</a></li> <li><a href="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/#builder-pattern-implementation-in-spring">Builder Pattern implementation in Spring</a></li> </ul> </li> <li><a href="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/#the-singleton-pattern">The Singleton pattern</a> <ul> <li><a href="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/#intent-2">Intent</a></li> <li><a href="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/#problem-solution-2">Problem Solution</a></li> <li><a href="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/#structure-of-the-singleton-pattern">Structure of the Singleton Pattern</a></li> <li><a href="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/#singleton-pattern-exemplary-implementation-in-spring">Singleton Pattern exemplary implementation in Spring</a></li> <li><a href="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/#singleton-pattern-vs-spring-singletons">Singleton Pattern vs Spring Singletons</a></li> </ul> </li> <li><a href="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/#the-prototype-pattern">The Prototype pattern</a> <ul> <li><a href="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/#intent-3">Intent</a></li> <li><a href="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/#problem-solution-3">Problem Solution</a></li> <li><a href="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/#structure-of-the-prototype-pattern">Structure of the Prototype Pattern</a></li> <li><a href="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/#prototypepattern-implementation-in-spring">PrototypePattern implementation in Spring</a></li> </ul> </li> <li><a href="https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/#conclusion">Conclusion</a></li> </ul> <p><strong>Creational design patterns</strong> deal with object creation mechanisms, trying to create objects in a manner suitable to the situation. In this article, I will describe the most popular patterns in this category and how Spring uses them!</p> <h3 id="the-factory-pattern">The Factory pattern</h3> <p>Spring, in itself, is already an example implementation of the Factory pattern. The pattern is used throughout the entire framework. One of the primary places it’s used is the <code class="highlighter-rouge">BeanFactory</code> class.</p> <h4 id="intent">Intent</h4> <ul> <li>Factory pattern allows construction of similar classes of different types using a <strong>factory method</strong></li> <li>Method call creates the object for you</li> <li>Created objects are instances from classes that <strong>share an interface or subclass</strong></li> </ul> <h4 id="problem-solution">Problem Solution</h4> <ul> <li>Thanks to Factory Design Pattern you do not have to worry about class construction in more than one place.</li> <li>It allows you to leverage the interface for repetitive operations.</li> <li>Copy-paste bugs are less likely.</li> </ul> <h4 id="structure-of-the-factory-pattern">Structure of the Factory Pattern</h4> <p>Firstly, you have to <strong>create common interface</strong> that you are going to use in objects factory. Then, you need to <strong>create a class that creates instances of your inteface</strong>. In that class, you have to implement a method that servers concrete classes that you will then implement from the interface itself. So, again, we have a class that has a method that creates instances of the interface when under the coverage that it’s actually creating instances in the concrete class.</p> <h4 id="abstract-factory-pattern">Abstract Factory Pattern</h4> <p><strong>Abstract Factory Pattern</strong> is a pattern very similar to the Factory Pattern. You can say that it is <strong>Factory of factories</strong>. In a nutshell, there are two main differences between the Factory Pattern and Abstract Factory:</p> <ul> <li>Abstract Factory design pattern creates Factory</li> <li>Factory design pattern creates Products</li> </ul> <figure class="highlight"><pre><code class="language-java" data-lang="java">  
<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">AbstractFactory</span> <span class="o">{</span>  
    <span class="kd">public</span> <span class="kd">abstract</span> <span class="n">Product1Base</span> <span class="nf">CreateProduct1</span><span class="o">();</span>  
    <span class="kd">public</span> <span class="kd">abstract</span> <span class="n">Product2Base</span> <span class="nf">CreateProduct2</span><span class="o">();</span>  
<span class="o">}</span>  
<span class="kd">class</span> <span class="nc">ConcreteFactory1</span> <span class="kd">extends</span> <span class="n">AbstractFactory</span><span class="o">{</span>  
  
    <span class="nd">@Override</span>  
  <span class="kd">public</span> <span class="n">Product1Base</span> <span class="nf">CreateProduct1</span><span class="o">()</span> <span class="o">{</span>  
        <span class="k">return</span> <span class="k">new</span> <span class="nf">ConcreteProduct1</span><span class="o">();</span>  
    <span class="o">}</span>  
  
    <span class="nd">@Override</span>  
  <span class="kd">public</span> <span class="n">Product2Base</span> <span class="nf">CreateProduct2</span><span class="o">()</span> <span class="o">{</span>  
        <span class="k">return</span> <span class="k">new</span> <span class="nf">ConcreteProduct2</span><span class="o">();</span>  
    <span class="o">}</span>  
<span class="o">}</span>  
  
<span class="kd">class</span> <span class="nc">ConcreteFactory2</span> <span class="kd">extends</span> <span class="n">AbstractFactory</span><span class="o">{</span>  
  
    <span class="nd">@Override</span>  
  <span class="kd">public</span> <span class="n">Product1Base</span> <span class="nf">CreateProduct1</span><span class="o">()</span> <span class="o">{</span>  
        <span class="k">return</span> <span class="k">new</span> <span class="nf">ConcreteAnotherProduct1</span><span class="o">();</span>  
    <span class="o">}</span>  
  
    <span class="nd">@Override</span>  
  <span class="kd">public</span> <span class="n">Product2Base</span> <span class="nf">CreateProduct2</span><span class="o">()</span> <span class="o">{</span>  
        <span class="k">return</span> <span class="k">new</span> <span class="nf">ConcreteAnotherProduct2</span><span class="o">();</span>  
    <span class="o">}</span>  
<span class="o">}</span>  </code></pre></figure> <p>The <code class="highlighter-rouge">AbstractFactory</code> class is responsible for creating several different types (in contrast to Factory Pattern). As you can see in the above example, each of the factories can be associated with different objects within the same group (in this case - products).</p> <h4 id="factory-pattern-implementation-in-spring">Factory Pattern implementation in Spring</h4> <p>Let`s take a look at above interface:</p> <figure class="highlight"><pre><code class="language-java" data-lang="java">  
  <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Animal</span> <span class="o">{</span>  
    <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">);</span>  
    <span class="n">String</span> <span class="nf">getName</span><span class="o">();</span>  
    <span class="n">String</span> <span class="nf">getType</span><span class="o">();</span>  
    <span class="kt">void</span> <span class="nf">makeASound</span><span class="o">();</span>  
<span class="o">}</span></code></pre></figure> <p><code class="highlighter-rouge">Animal</code> interface has several methods that are common to all animals (each animal has a type and name). So, now you need to create a new class: <code class="highlighter-rouge">AnimalFactory</code></p> <figure class="highlight"><pre><code class="language-java" data-lang="java">  
<span class="nd">@Component</span>  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AnimalFactory</span> <span class="o">{</span>  
    <span class="kd">public</span> <span class="n">Animal</span> <span class="nf">createAnimal</span><span class="o">(</span><span class="n">String</span> <span class="n">type</span><span class="o">)</span> <span class="o">{</span>  
        <span class="k">switch</span> <span class="o">(</span><span class="n">type</span><span class="o">)</span> <span class="o">{</span>  
            <span class="k">case</span> <span class="s">"bird"</span><span class="o">:</span>  
                <span class="k">return</span> <span class="k">new</span> <span class="nf">Bird</span><span class="o">();</span>  
            <span class="k">case</span> <span class="s">"cat"</span><span class="o">:</span>  
                <span class="k">return</span> <span class="k">new</span> <span class="nf">Cat</span><span class="o">();</span>  
            <span class="k">default</span><span class="o">:</span>  
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">UnsupportedOperationException</span><span class="o">(</span><span class="s">"Unsupported animal type!"</span><span class="o">);</span>  
        <span class="o">}</span>  
  
    <span class="o">}</span>  
<span class="o">}</span></code></pre></figure> <p>I added <code class="highlighter-rouge">@Component</code> annotation because I want the Spring to manage this factory. There is one method (<strong>factory method</strong>) which returns an Animal - <code class="highlighter-rouge">createAnimal</code>. It is a very simple factory that supports only two types of animals (cat, bird). If another type is provided, an exception will be thrown.</p> <p>Let’s create Spring controller - <code class="highlighter-rouge">FactoryController</code>:</p> <figure class="highlight"><pre><code class="language-java" data-lang="java">  
<span class="nd">@RestController</span>  
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/"</span><span class="o">)</span>  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FactoryController</span> <span class="o">{</span>  
  
    <span class="kd">private</span> <span class="n">AnimalFactory</span> <span class="n">factory</span><span class="o">;</span>  
  
    <span class="nd">@Autowired</span>  
  <span class="kd">public</span> <span class="nf">FactoryController</span><span class="o">(</span><span class="n">AnimalFactory</span> <span class="n">factory</span><span class="o">)</span> <span class="o">{</span>  
        <span class="k">this</span><span class="o">.</span><span class="na">factory</span> <span class="o">=</span> <span class="n">factory</span><span class="o">;</span>  
    <span class="o">}</span>  
  
    <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"addAminal/{type}/{name}"</span><span class="o">)</span>  
    <span class="kd">public</span> <span class="n">Animal</span> <span class="nf">addAnimal</span><span class="o">(</span><span class="nd">@PathVariable</span> <span class="n">String</span> <span class="n">type</span><span class="o">,</span> <span class="nd">@PathVariable</span> <span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>  
        <span class="n">Animal</span> <span class="n">animal</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">factory</span><span class="o">.</span><span class="na">createAnimal</span><span class="o">(</span><span class="n">type</span><span class="o">);</span>  
        <span class="n">animal</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>  
        <span class="n">animal</span><span class="o">.</span><span class="na">makeASound</span><span class="o">();</span>  
        <span class="k">return</span> <span class="n">animal</span><span class="o">;</span>  
    <span class="o">}</span>  
<span class="o">}</span></code></pre></figure> <p>I added one <code class="highlighter-rouge">@PostMapping</code> method, which we will pass through the <code class="highlighter-rouge">@PathVariable</code> type and name of the animal. In response, we will get the new animal object created by the factory. Let’s test it using a postman: <img src="./Design Patterns used in Spring Framework Part 2 - Creational Patterns (Factory, Builder, Singleton, Prototype). _ Devdiaries_files/createAnimal.JPG" alt="factory-pattern-spring-java"> Application logs: <img src="./Design Patterns used in Spring Framework Part 2 - Creational Patterns (Factory, Builder, Singleton, Prototype). _ Devdiaries_files/applicationLogs.JPG" alt="factory-pattern-spring-logs"></p> <p>As you can see, we have just created a new object - a bird using our factory.</p> <h4 id="factory-pattern-popular-use-cases-in-spring-framework">Factory Pattern popular use cases in Spring Framework</h4> <p>The Spring framework uses the factory design pattern for the creation of the objects by using two approaches:</p> <ul> <li>Spring BeanFactory Container (e.g <code class="highlighter-rouge">org.springframework.beans.factory.BeanFactory</code>) - It is the simplest container in the Spring framework which provides the basic support for DI</li> <li>Spring ApplicationContext Container (e.g <code class="highlighter-rouge">[org.springframework.context.ApplicationContext]</code>) - t is another container present in spring container which adds extra enterprise-specific functionality such as publishing application events to the attentive event listeners or loading messages from a properties file.</li> </ul> <p>As you can see, entire Spring is already an example implementation of the Factory pattern (any Spring application’s application context is just a giant Factory)</p> <h3 id="the-builder-pattern">The Builder pattern</h3> <p>Another common creational pattern is the <strong>Builder</strong> pattern. The popular use of Builder in the Spring is ResultAction. This class is part of the MockMcv - used for testing web applications.</p> <h4 id="intent-1">Intent</h4> <ul> <li>Each method return the object reference it`s called from.</li> <li>There is <code class="highlighter-rouge">build()</code> method which returns a fully contstructed object (based on all the intermediate calls).</li> </ul> <h4 id="problem-solution-1">Problem Solution</h4> <ul> <li>Improves the readability of the code when object creation has many parameters.</li> <li>Useful when some or all paramaters are optional.</li> </ul> <h4 id="structure-of-the-builder-pattern">Structure of the Builder Pattern</h4> <p>Firstly, you need to <strong>define a base class with all args constructor</strong>. Then, you have to create a Builder class with <strong>attributes and setters for each argument of the base class</strong>. Each setter should return the builder. Then, need to create a <code class="highlighter-rouge">build()</code> methid that will construct and return object of base class.</p> <h4 id="builder-pattern-implementation-in-spring">Builder Pattern implementation in Spring</h4> <p>I started my implementation with a simple Java class - <code class="highlighter-rouge">Employee.java</code>:</p> <figure class="highlight"><pre><code class="language-java" data-lang="java">  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Employee</span> <span class="o">{</span>  
    <span class="kd">private</span> <span class="n">String</span> <span class="n">firstName</span><span class="o">;</span>  
    <span class="kd">private</span> <span class="n">String</span> <span class="n">lastName</span><span class="o">;</span>  
    <span class="kd">private</span> <span class="n">String</span> <span class="n">employeeId</span><span class="o">;</span>  
    <span class="kd">private</span> <span class="n">String</span> <span class="n">email</span><span class="o">;</span>  
  
    <span class="kd">public</span> <span class="nf">Employee</span><span class="o">(</span><span class="n">String</span> <span class="n">firstName</span><span class="o">,</span> <span class="n">String</span> <span class="n">lastName</span><span class="o">,</span> <span class="n">String</span> <span class="n">employeeId</span><span class="o">,</span> <span class="n">String</span> <span class="n">email</span><span class="o">)</span> <span class="o">{</span>  
        <span class="k">this</span><span class="o">.</span><span class="na">firstName</span> <span class="o">=</span> <span class="n">firstName</span><span class="o">;</span>  
        <span class="k">this</span><span class="o">.</span><span class="na">lastName</span> <span class="o">=</span> <span class="n">lastName</span><span class="o">;</span>  
        <span class="k">this</span><span class="o">.</span><span class="na">employeeId</span> <span class="o">=</span> <span class="n">employeeId</span><span class="o">;</span>  
        <span class="k">this</span><span class="o">.</span><span class="na">email</span> <span class="o">=</span> <span class="n">email</span><span class="o">;</span>  
    <span class="o">}</span>  
  
    <span class="kd">public</span> <span class="nf">Employee</span><span class="o">()</span> <span class="o">{</span>  
    <span class="o">}</span>  
  
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getFirstName</span><span class="o">()</span> <span class="o">{</span>  
        <span class="k">return</span> <span class="n">firstName</span><span class="o">;</span>  
    <span class="o">}</span>  
  
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getLastName</span><span class="o">()</span> <span class="o">{</span>  
        <span class="k">return</span> <span class="n">lastName</span><span class="o">;</span>  
    <span class="o">}</span>  
  
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getEmployeeId</span><span class="o">()</span> <span class="o">{</span>  
        <span class="k">return</span> <span class="n">employeeId</span><span class="o">;</span>  
    <span class="o">}</span>  
    
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getEmail</span><span class="o">()</span> <span class="o">{</span>  
        <span class="k">return</span> <span class="n">email</span><span class="o">;</span>  
    <span class="o">}</span>  
<span class="o">}</span></code></pre></figure> <p>There are a couple attributes, contructor and auto-generated getters. It’s time for implementing builder pattern! To do this, create the <code class="highlighter-rouge">EmployeeBuilder</code> class with the same fields as the Employee class. Generate setters - one for each of our fields. If you generate setters by IDE, you must remember to <strong>change the type returned by setter (void) to EmployeeBuilder</strong>.</p> <figure class="highlight"><pre><code class="language-java" data-lang="java">  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">EmployeeBuilder</span> <span class="o">{</span>  
    <span class="kd">private</span> <span class="n">String</span> <span class="n">firstName</span><span class="o">;</span>  
    <span class="kd">private</span> <span class="n">String</span> <span class="n">lastName</span><span class="o">;</span>  
    <span class="kd">private</span> <span class="n">String</span> <span class="n">employeeId</span><span class="o">;</span>  
    <span class="kd">private</span> <span class="n">String</span> <span class="n">email</span><span class="o">;</span>  
  
    <span class="c1">// Each setter returns EmployeBuilder object.  </span>
  <span class="kd">public</span> <span class="n">EmployeeBuilder</span> <span class="nf">setFirstName</span><span class="o">(</span><span class="n">String</span> <span class="n">firstName</span><span class="o">)</span> <span class="o">{</span>  
        <span class="k">this</span><span class="o">.</span><span class="na">firstName</span> <span class="o">=</span> <span class="n">firstName</span><span class="o">;</span>  
        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>  
    <span class="o">}</span>  
  
    <span class="kd">public</span> <span class="n">EmployeeBuilder</span> <span class="nf">setLastName</span><span class="o">(</span><span class="n">String</span> <span class="n">lastName</span><span class="o">)</span> <span class="o">{</span>  
        <span class="k">this</span><span class="o">.</span><span class="na">lastName</span> <span class="o">=</span> <span class="n">lastName</span><span class="o">;</span>  
        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>  
    <span class="o">}</span>  
  
    <span class="kd">public</span> <span class="n">EmployeeBuilder</span> <span class="nf">setEmployeeId</span><span class="o">(</span><span class="n">String</span> <span class="n">employeeId</span><span class="o">)</span> <span class="o">{</span>  
        <span class="k">this</span><span class="o">.</span><span class="na">employeeId</span> <span class="o">=</span> <span class="n">employeeId</span><span class="o">;</span>  
        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>  
    <span class="o">}</span>  
  
    <span class="kd">public</span> <span class="n">EmployeeBuilder</span> <span class="nf">setEmail</span><span class="o">(</span><span class="n">String</span> <span class="n">email</span><span class="o">)</span> <span class="o">{</span>  
        <span class="k">this</span><span class="o">.</span><span class="na">email</span> <span class="o">=</span> <span class="n">email</span><span class="o">;</span>  
        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>  
    <span class="o">}</span>  
  
    <span class="kd">public</span> <span class="n">Employee</span> <span class="nf">buildEmployee</span><span class="o">()</span> <span class="o">{</span>  
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Employee</span><span class="o">(</span><span class="n">firstName</span><span class="o">,</span><span class="n">lastName</span><span class="o">,</span> <span class="n">employeeId</span><span class="o">,</span> <span class="n">email</span><span class="o">);</span>  
    <span class="o">}</span>  
<span class="o">}</span></code></pre></figure> <p>At the end I use the <code class="highlighter-rouge">public Employee buildEmployee()</code> method that creates the employee. The advantage of this solution is that if any of our fields are null, null will be populated. We don’t really have to think about where the nulls go. Let’s take a look at action. I created <code class="highlighter-rouge">BuilderController</code> Spring controller which has two endpoints. The first creates an employee with all fields, the second creates an employee without an email:</p> <figure class="highlight"><pre><code class="language-java" data-lang="java">  
<span class="nd">@RestController</span>  
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/builder"</span><span class="o">)</span>  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BuilderController</span> <span class="o">{</span>  
  
    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"employee1"</span><span class="o">)</span>  
    <span class="kd">public</span> <span class="n">Employee</span> <span class="nf">getEmployee1</span><span class="o">()</span> <span class="o">{</span>  
        <span class="k">return</span> <span class="k">new</span> <span class="nf">EmployeeBuilder</span><span class="o">()</span>  
                <span class="o">.</span><span class="na">setEmployeeId</span><span class="o">(</span><span class="s">"1234"</span><span class="o">)</span>  
                <span class="o">.</span><span class="na">setEmail</span><span class="o">(</span><span class="s">"test@test.com"</span><span class="o">)</span>  
                <span class="o">.</span><span class="na">setFirstName</span><span class="o">(</span><span class="s">"John"</span><span class="o">)</span>  
                <span class="o">.</span><span class="na">setLastName</span><span class="o">(</span><span class="s">"smith"</span><span class="o">)</span>  
                <span class="o">.</span><span class="na">buildEmployee</span><span class="o">();</span>  
    <span class="o">}</span>  
  
    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"employee2"</span><span class="o">)</span>  
    <span class="kd">public</span> <span class="n">Employee</span> <span class="nf">getEmployee2</span><span class="o">()</span> <span class="o">{</span>  
        <span class="k">return</span> <span class="k">new</span> <span class="nf">EmployeeBuilder</span><span class="o">()</span>  
                <span class="o">.</span><span class="na">setEmployeeId</span><span class="o">(</span><span class="s">"4321"</span><span class="o">)</span>  
                <span class="o">.</span><span class="na">setFirstName</span><span class="o">(</span><span class="s">"Jeff"</span><span class="o">)</span>  
                <span class="o">.</span><span class="na">setLastName</span><span class="o">(</span><span class="s">"Freeman"</span><span class="o">)</span>  
                <span class="o">.</span><span class="na">buildEmployee</span><span class="o">();</span>  
    <span class="o">}</span>  
<span class="o">}</span></code></pre></figure> <p>As you probably expect, the GET request on the first edpoint returns: <img src="./Design Patterns used in Spring Framework Part 2 - Creational Patterns (Factory, Builder, Singleton, Prototype). _ Devdiaries_files/builderSpring1.JPG" alt="builder-pattern-spring-framework"></p> <p>The second endpoint returns the employee with a null as an email: <img src="./Design Patterns used in Spring Framework Part 2 - Creational Patterns (Factory, Builder, Singleton, Prototype). _ Devdiaries_files/builderSpring12.JPG" alt="builder-pattern-spring-framework"></p> <h3 id="the-singleton-pattern">The Singleton pattern</h3> <p><strong>Singleton</strong> is a pattern used by every Java developer who uses Spring. <strong>Every bean is by default a singleton</strong>. Its purpose is to provide the possibility of creating <strong>only one object of a given class</strong> and providing global access to it.</p> <h4 id="intent-2">Intent</h4> <ul> <li>There is an only private constructor.</li> <li>Class stores reference to the instance of itself.</li> <li>There is <strong>getInstance()</strong> method which returns a reference of singleton class instance or constructs new object if not constructed.</li> </ul> <p>In Singleton pattern, Java <code class="highlighter-rouge">new Class</code> <strong>is never called on the class</strong> except getInstance case. You should wrap this method with some locking functionality to ensure multi-thread safety.</p> <h4 id="problem-solution-2">Problem Solution</h4> <p>Singleton can be used in cases:</p> <ul> <li>Object creation is expensive.</li> <li>The class that stores the application configuration. From anywhere in the system, we can modify it and we want the changes to be visible from anywhere. At the same time, we can not allow different versions of configurations to be maintained in the system.</li> <li>You need to store static state for multiple parts of the application.</li> <li>You need to control who has access to an object (concurrency controlling).</li> </ul> <h4 id="structure-of-the-singleton-pattern">Structure of the Singleton Pattern</h4> <p>There are many ways to implement a singleton, but all can be reduced to three main points:</p> <ul> <li>First you have to create a private constructor in your Singleton class</li> <li>Then, create an instance handle which is stored in the class</li> <li>Create static <code class="highlighter-rouge">getInstance()</code> method that uses a synchronized block on the object to reduce the thread safety risk.</li> </ul> <h4 id="singleton-pattern-exemplary-implementation-in-spring">Singleton Pattern exemplary implementation in Spring</h4> <p>In the following example, we will implement our own Singleton. Then we will prove that the Spring components are singletons by default. Let’s start with creating a couple of classes. The first one we are going to create is <code class="highlighter-rouge">Singleton.java</code> class which will be a traditional singleton (described in the previous point):</p> <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Singleton</span> <span class="o">{</span>  
    <span class="kd">private</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="n">instance</span><span class="o">;</span>  
  
    <span class="kd">private</span> <span class="nf">Singleton</span><span class="o">(){}</span>  
  
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="nf">getInstance</span><span class="o">()</span> <span class="o">{</span>  
        <span class="k">if</span><span class="o">(</span><span class="kc">null</span> <span class="o">==</span> <span class="n">instance</span><span class="o">){</span>  
            <span class="kd">synchronized</span> <span class="o">(</span><span class="n">Singleton</span><span class="o">.</span><span class="na">class</span><span class="o">){</span>  
                <span class="k">if</span><span class="o">(</span><span class="kc">null</span><span class="o">==</span><span class="n">instance</span><span class="o">)</span> <span class="o">{</span>  
                    <span class="n">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Singleton</span><span class="o">();</span>  
                <span class="o">}</span>  
            <span class="o">}</span>  
        <span class="o">}</span>  
        <span class="k">return</span> <span class="n">instance</span><span class="o">;</span>  
    <span class="o">}</span>  
<span class="o">}</span></code></pre></figure> <p>Now, create simple Spring <code class="highlighter-rouge">@Component</code> class without any logic:</p> <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Component</span>  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpringSingleton</span> <span class="o">{</span>  
<span class="o">}</span></code></pre></figure> <p>Next, let’s test whether our singletons ensure that only one object is created. I used the JUnit test (generated automatically when creating a Spring Boot project in Spring Initializer):</p> <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@RunWith</span><span class="o">(</span><span class="n">SpringRunner</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>  
<span class="nd">@SpringBootTest</span>  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpringDesignPatternsApplicationTests</span> <span class="o">{</span>  
  
    <span class="nd">@Autowired</span>  
  <span class="n">SpringSingleton</span> <span class="n">springSingleton1</span><span class="o">;</span>  
  
    <span class="nd">@Autowired</span>  
  <span class="n">SpringSingleton</span> <span class="n">springSingleton2</span><span class="o">;</span>  
  
    <span class="nd">@Test</span>  
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">singletonObjectsShouldBeEquals</span><span class="o">()</span> <span class="o">{</span>  
  
        <span class="n">Singleton</span> <span class="n">singleton1</span> <span class="o">=</span> <span class="n">Singleton</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>  
        <span class="n">Singleton</span> <span class="n">singleton2</span> <span class="o">=</span> <span class="n">Singleton</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>  
  
<span class="c1">//      Checking if the Singleton objects are definitely one, the same object  </span>
  <span class="n">Assert</span><span class="o">.</span><span class="na">assertSame</span><span class="o">(</span><span class="n">singleton1</span><span class="o">,</span> <span class="n">singleton2</span><span class="o">);</span>  
  
<span class="c1">//      Checking if the spring components are definitely singletons  </span>
  <span class="n">Assert</span><span class="o">.</span><span class="na">assertSame</span><span class="o">(</span><span class="n">springSingleton1</span><span class="o">,</span> <span class="n">springSingleton2</span><span class="o">);</span>  
    <span class="o">}</span>  
<span class="o">}</span></code></pre></figure> <p><code class="highlighter-rouge">assertSame()</code> method checks if arguments are same objects. Test result: passed - everything was the same. That`s how you can write traditional singletons or singletons in Spring.</p> <h4 id="singleton-pattern-vs-spring-singletons">Singleton Pattern vs Spring Singletons</h4> <p>There is one more thing you should know. As I wrote - all Spring beans are singletons by default. However, these are not the same singletons as the traditional singletons. The traditional Singleton pattern assumes that there is only one instance of a given class at the space managed by Java classloader. In Spring, there is only one instance of Bean for each given context (<code class="highlighter-rouge">_org.springframework.context.ApplicationContext</code>) instance. So, if you have more then one context, all managed by the same Java classloader, you will probably have more than one instance of a bean.</p> <h3 id="the-prototype-pattern">The Prototype pattern</h3> <p>The <strong>prototype</strong> is a pattern whose purpose is to copy objects from the parent object. In the prototype pattern, a new object is created by <strong>cloning an existing object</strong>. In Java, the <code class="highlighter-rouge">clone()</code> method is an implementation of this design pattern.</p> <h4 id="intent-3">Intent</h4> <ul> <li>Instance is cloned at runtime to give new instances that have the same state</li> <li>In Java It’s done with the <code class="highlighter-rouge">Cloneable</code> interface/</li> </ul> <h4 id="problem-solution-3">Problem Solution</h4> <p>The prototype can be used in cases:</p> <ul> <li>You have to create a lot of instances of the same or similar objects, and cloning is more efficient than creating instances of objects with the new Java keyword.</li> <li>Useful with objects that must be thread safe and need to store state (e.g shopping carts - where you want to have the same behavior but the individual items in the cart are different)</li> </ul> <h4 id="structure-of-the-prototype-pattern">Structure of the Prototype Pattern</h4> <ul> <li>Create an abstract base class that implements Cloneable.</li> <li>Extend abstract class in prototype instances.</li> <li>Override the <code class="highlighter-rouge">clone()</code> method in those prototype instances - add the class specific behavior.</li> </ul> <h4 id="prototypepattern-implementation-in-spring">PrototypePattern implementation in Spring</h4> <p>I will not implement the traditional Java prototype. However, I will show you how to create a prototype bean in Spring. I created one dumb class: <code class="highlighter-rouge">SpringPrototype.java</code></p> <figure class="highlight"><pre><code class="language-java" data-lang="java">  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpringPrototype</span> <span class="o">{</span>  
<span class="o">}</span></code></pre></figure> <p>In the main application class in Spring, I defined defined a new prototype bean by setting <code class="highlighter-rouge">@Scope</code> to prototype:</p> <figure class="highlight"><pre><code class="language-java" data-lang="java">  
<span class="nd">@Bean</span>  
<span class="nd">@Scope</span><span class="o">(</span><span class="s">"prototype"</span><span class="o">)</span>  
<span class="kd">public</span> <span class="n">SpringPrototype</span> <span class="nf">prototype</span><span class="o">(){</span>  
    <span class="k">return</span> <span class="k">new</span> <span class="nf">SpringPrototype</span><span class="o">();</span>  
<span class="o">}</span></code></pre></figure> <p>JUnit test:</p> <figure class="highlight"><pre><code class="language-java" data-lang="java">    
<span class="nd">@Autowired</span>  
<span class="n">SpringPrototype</span> <span class="n">prototype1</span><span class="o">;</span>  
  
<span class="nd">@Autowired</span>  
<span class="n">SpringPrototype</span> <span class="n">prototype2</span><span class="o">;</span>  
  
<span class="nd">@Test</span>  
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">prototypeObjectsShouldNotBeEquals</span><span class="o">()</span> <span class="o">{</span>  
    <span class="n">Assert</span><span class="o">.</span><span class="na">assertNotSame</span><span class="o">(</span><span class="n">prototype1</span><span class="o">,</span> <span class="n">prototype2</span><span class="o">);</span>  
<span class="o">}</span></code></pre></figure> <p>I injected two instances of the SpringPrototype class with <code class="highlighter-rouge">@Autowired</code>. Just like in the Singleton example - I used the static method from Assert to check that the created instances are not the same. My test is green. It’s proof that there are <strong>two different instances of the same object.</strong></p> <h3 id="conclusion">Conclusion</h3> <p>I hope you liked the post. We’ve got to know the most important creational patterns used in Spring. In the next post, we will learn about structural patterns in Spring Framework!</p> <p>The source code from the post is available on my <a href="https://github.com/MichalFab/spring-design-patterns">Github repo</a>.</p> </article> <hr class="dashed"><div class="row rev"><div class="col-md-12"><div class="share-box"> <i class="fa fa-share-alt" aria-hidden="true"></i> <a class="f nostyle" href="https://www.facebook.com/sharer/sharer.php?u=https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/" onclick="window.open(this.href, &#39;mywin&#39;, &#39;left=20,top=20,width=500,height=500,toolbar=1,resizable=0&#39;); return false;"><i class="fa fa-facebook-official fa"></i></a> <a class="t nostyle" href="https://twitter.com/intent/tweet?text=&amp;url=https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/" onclick="window.open(this.href, &#39;mywin&#39;, &#39;left=20,top=20,width=500,height=500,toolbar=1,resizable=0&#39;); return false;"><i class="fa fa-twitter fa"></i></a> <a class="g nostyle" href="https://plus.google.com/share?url=https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/" onclick="window.open(this.href, &#39;mywin&#39;, &#39;left=20,top=20,width=500,height=500,toolbar=1,resizable=0&#39;); return false;"><i class="fa fa-google-plus fa"></i></a> <a class="r nostyle" href="http://www.reddit.com/submit?url=https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/" onclick="window.open(this.href, &#39;mywin&#39;, &#39;left=20,top=20,width=900,height=500,toolbar=1,resizable=0&#39;); return false;"><i class="fa fa-reddit fa"></i></a> <a class="l nostyle" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/&amp;title=&amp;summary=&amp;source=dev-diary.github.io" onclick="window.open(this.href, &#39;mywin&#39;, &#39;left=20,top=20,width=500,height=500,toolbar=1,resizable=0&#39;); return false;"><i class="fa fa-linkedin fa"></i></a> <a class="e nostyle" href="mailto:?subject=&amp;body=Check&amp;out&amp;this&amp;site&amp;https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/"><i class="fa fa-envelope fa"></i></a></div></div></div><div class="row"><div class="col-md-12"> <p class="categories rev"> <span><a href="https://www.devdiaries.net/categories/#spring-framework">Spring framework</a></span> <span><a href="https://www.devdiaries.net/categories/#java">Java</a></span> <span><a href="https://www.devdiaries.net/categories/#design-patterns">Design patterns</a></span></p></div></div><div id="disqus_thread"><iframe id="dsq-app2005" name="dsq-app2005" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="./Design Patterns used in Spring Framework Part 2 - Creational Patterns (Factory, Builder, Singleton, Prototype). _ Devdiaries_files/saved_resource.html" style="width: 1px !important; min-width: 100% !important; border: none !important; overflow: hidden !important; height: 535px !important;" horizontalscrolling="no" verticalscrolling="no"></iframe></div><script> var disqus_config = function () { this.page.url = 'https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/'; this.page.identifier = 'https://www.devdiaries.net/blog/Spring-Design-Patterns-Creational-Patterns/'; }; (function() { var d = document, s = d.createElement('script'); s.src = 'https://dev-diary-2.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> <!--<div class="comment-loader">--> <!--<button class="comments cards">Comments</button>--> <!--</div>--> <!--<div class="disqus hide">Loading comments&hellip;</div>--> <!--<div class="disqus-loading"></div>--> <!--<script>--> <!--/*--> <!-- disqusLoader.js v1.0--> <!-- A JavaScript plugin for lazy-loading Disqus comments widget.--> <!-- - --> <!-- By Osvaldas Valutis, www.osvaldas.info--> <!-- Available for use under the MIT License--> <!--*/--> <!--(function(b,f,l){var r=function(a){a=a.getBoundingClientRect();return{top:a.top+f.body.scrollTop,left:a.left+f.body.scrollLeft}},t=function(a,c){var d=f.createElement("script");d.src=a;d.async=!0;d.setAttribute("data-timestamp",+new Date);d.addEventListener("load",function(){"function"===typeof c&&c()});(f.head||f.body).appendChild(d)};l=function(a,c){var d,e;return function(){var g=this,f=arguments,b=+new Date;d&&b<d+a?(clearTimeout(e),e=setTimeout(function(){d=b;c.apply(g,f)},a)):(d=b,c.apply(g,--> <!--f))}};var m=!1,n=!1,p=!1,k=!1,h="unloaded",e=!1,q=function(){if(!e||!f.body.contains(e)||"loaded"==e.disqusLoaderStatus)return!0;var a=b.pageYOffset,c=r(e).top;if(c-a>b.innerHeight*n||0<a-c-e.offsetHeight-b.innerHeight*n)return!0;(a=f.getElementById("disqus_thread"))&&a.removeAttribute("id");e.setAttribute("id","disqus_thread");e.disqusLoaderStatus="loaded";"loaded"==h?DISQUS.reset({reload:!0,config:p}):(b.disqus_config=p,"unloaded"==h&&(h="loading",t(k,function(){h="loaded"})))};b.addEventListener("scroll",--> <!--l(m,q));b.addEventListener("resize",l(m,q));b.disqusLoader=function(a,c){var d={laziness:1,throttle:250,scriptUrl:!1,disqusConfig:!1},b=c,g,h={};for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&(h[g]=d[g]);for(g in b)Object.prototype.hasOwnProperty.call(b,g)&&(h[g]=b[g]);c=h;n=c.laziness+1;m=c.throttle;p=c.disqusConfig;k=!1===k?c.scriptUrl:k;e="string"===typeof a?f.querySelector(a):"number"===typeof a.length?a[0]:a;e.disqusLoaderStatus="unloaded";q()}})(window,document,0);--> <!--</script>--> <!--<script>--> <!-- disqusLoader( '.disqus',--> <!-- {--> <!-- scriptUrl: '//{"shortname"=>"dev-diary-2"}.disqus.com/embed.js',--> <!-- disqusConfig: function()--> <!-- {--><script src="./Design Patterns used in Spring Framework Part 2 - Creational Patterns (Factory, Builder, Singleton, Prototype). _ Devdiaries_files/jquery.min.js"></script><script> $(document).ready(function () { $(".loader").hide(); });</script><script> $("#search-input").keyup(function () { $("main").hide(); $("search-container").show(); if (!$('#search-input').val()) { $("main").show(); $("search-container").hide(); } });</script><script src="./Design Patterns used in Spring Framework Part 2 - Creational Patterns (Factory, Builder, Singleton, Prototype). _ Devdiaries_files/jekyll-search.min.js" type="text/javascript"></script><script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-container'), searchResultTemplate: '<a class="nostyle" href="{url}"><div class="blog borders cards"><div class="image" style="background-image: url({image});"></div><div class="content"><h3 class="title">{title}</h3><p class="description">{description}</p></div></div></a>', noResultsText: 'No results found', json: '/search.json' })</script><script src="./Design Patterns used in Spring Framework Part 2 - Creational Patterns (Factory, Builder, Singleton, Prototype). _ Devdiaries_files/aos.js"></script><script> AOS.init({ duration: 600, once: true, disable: 'mobile' });</script><script> $("button").click(function () { $(".disqus").toggle(); $(".comments").toggle(); });</script></main></div></div></div></div><iframe style="display: none;" src="./Design Patterns used in Spring Framework Part 2 - Creational Patterns (Factory, Builder, Singleton, Prototype). _ Devdiaries_files/saved_resource(1).html"></iframe></body></html>