!function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){"use strict";var analytics=require("@segment/analytics.js-core"),Integrations=require("./integrations");module.exports=exports=analytics,exports.VERSION="2.6.5",Object.keys(Integrations).forEach(function(t){analytics.use(Integrations[t])}),window.bigPicture=window.bigPicture||{},window.bigPicture._analytics=analytics},{"./integrations":2,"@segment/analytics.js-core":33}],2:[function(require,module,exports){"use strict";module.exports={adroll:require("analytics.js-integration-adroll"),activecampaign:require("analytics.js-integration-activecampaign"),adwords:require("analytics.js-integration-adwords"),amplitude:require("@bigpicture/analytics.js-integration-amplitude"),bigpicture:require("analytics.js-integration-bigpicture"),"bing-ads":require("analytics.js-integration-bing-ads"),closeio:require("analytics.js-integration-closeio"),"crazy-egg":require("analytics.js-integration-crazy-egg"),customerio:require("analytics.js-integration-customerio"),drift:require("@bigpicture/analytics.js-integration-drift"),drip:require("@bigpicture/analytics.js-integration-drip"),"facebook-pixel":require("analytics.js-integration-facebook-pixel"),"google-analytics":require("@bigpicture/analytics.js-integration-google-analytics"),"google-tag-manager":require("analytics.js-integration-google-tag-manager"),hotjar:require("analytics.js-integration-hotjar"),hubspot:require("analytics.js-integration-hubspot"),intercom:require("analytics.js-integration-intercom"),klaviyo:require("analytics.js-integration-klaviyo"),marketo:require("analytics.js-integration-marketo"),mixpanel:require("analytics.js-integration-mixpanel"),olark:require("analytics.js-integration-olark"),optimizely:require("analytics.js-integration-optimizely"),"perfect-audience":require("analytics.js-integration-perfect-audience"),redshift:require("analytics.js-integration-redshift"),segmentio:require("analytics.js-integration-segment"),slack:require("analytics.js-integration-slack"),"twitter-ads":require("analytics.js-integration-twitter-ads"),"visual-website-optimizer":require("analytics.js-integration-visual-website-optimizer"),woopra:require("analytics.js-integration-woopra"),webhooks:require("analytics.js-integration-webhooks")}},{"@bigpicture/analytics.js-integration-amplitude":3,"@bigpicture/analytics.js-integration-drift":7,"@bigpicture/analytics.js-integration-drip":11,"@bigpicture/analytics.js-integration-google-analytics":12,"analytics.js-integration-activecampaign":59,"analytics.js-integration-adroll":60,"analytics.js-integration-adwords":61,"analytics.js-integration-bigpicture":65,"analytics.js-integration-bing-ads":66,"analytics.js-integration-closeio":70,"analytics.js-integration-crazy-egg":71,"analytics.js-integration-customerio":72,"analytics.js-integration-facebook-pixel":76,"analytics.js-integration-google-tag-manager":77,"analytics.js-integration-hotjar":82,"analytics.js-integration-hubspot":86,"analytics.js-integration-intercom":90,"analytics.js-integration-klaviyo":94,"analytics.js-integration-marketo":95,"analytics.js-integration-mixpanel":99,"analytics.js-integration-olark":103,"analytics.js-integration-optimizely":104,"analytics.js-integration-perfect-audience":110,"analytics.js-integration-redshift":111,"analytics.js-integration-segment":112,"analytics.js-integration-slack":116,"analytics.js-integration-twitter-ads":117,"analytics.js-integration-visual-website-optimizer":118,"analytics.js-integration-webhooks":119,"analytics.js-integration-woopra":120}],3:[function(require,module,exports){"use strict";function logEvent(track,dontSetRevenue){this.setDeviceIdFromAnonymousId(track);var props=track.properties(),options=track.options(this.name),event=track.event(),mapQueryParams=this.options.mapQueryParams,query=track.proxy("context.page.search");if(!is.empty(mapQueryParams)){var type,params={};each(function(value,key){type=value,"user_properties"===type?params[key]=query:props[key]=query},mapQueryParams),"user_properties"===type&&window.amplitude.setUserProperties(params)}this.options.includeUrl&&(props.url=track.proxy("context.page.url")),options.groups?window.amplitude.logEventWithGroups(event,props,options.groups):window.amplitude.logEvent(event,props),track.revenue()&&!dontSetRevenue&&this.setRevenue(mapRevenueAttributes(track))}function mapRevenueAttributes(track){var mapRevenueType={"order completed":"Purchase","product purchased":"Purchase"};return{price:track.price(),productId:track.productId(),revenueType:track.proxy("properties.revenueType")||mapRevenueType[track.event().toLowerCase()],quantity:track.quantity(),eventProps:track.properties(),revenue:track.revenue()}}var bind=require("component-bind"),integration=require("@segment/analytics.js-integration"),topDomain=require("@segment/top-domain"),when=require("do-when"),is=require("is"),each=require("@ndhoule/each"),Track=require("segmentio-facade").Track,umd="function"==typeof window.define&&window.define.amd,src="//d24n15hnbwhuhn.cloudfront.net/libs/amplitude-4.5.2-min.gz.js",Amplitude=module.exports=integration("Amplitude").global("amplitude").option("apiKey","").option("trackAllPages",!1).option("trackNamedPages",!0).option("trackCategorizedPages",!0).option("trackUtmProperties",!0).option("trackReferrer",!1).option("batchEvents",!1).option("eventUploadThreshold",30).option("eventUploadPeriodMillis",3e4).option("useLogRevenueV2",!1).option("forceHttps",!1).option("trackGclid",!1).option("saveParamsReferrerOncePerSession",!0).option("deviceIdFromUrlParam",!1).option("mapQueryParams",{}).option("trackRevenuePerProduct",!1).option("preferAnonymousIdForDeviceId",!1).option("includeUrl",!1).tag('<script src="'+src+'">');Amplitude.prototype.initialize=function(){!function(e,t){function r(e,t){e.prototype[t]=function(){return this._q.push([t].concat(Array.prototype.slice.call(arguments,0))),this}}function p(e){for(var n=0;n<l.length;n++)!function(t){e[t]=function(){e._q.push([t].concat(Array.prototype.slice.call(arguments,0)))}}(l[n])}for(var n=e.amplitude||{_q:[],_iq:{}},i=function(){return this._q=[],this},s=["add","append","clearAll","prepend","set","setOnce","unset"],o=0;o<s.length;o++)r(i,s[o]);n.Identify=i;for(var a=function(){return this._q=[],this},u=["setProductId","setQuantity","setPrice","setRevenueType","setEventProperties"],c=0;c<u.length;c++)r(a,u[c]);n.Revenue=a;var l=["init","logEvent","logRevenue","setUserId","setUserProperties","setOptOut","setVersionName","setDomain","setDeviceId","setGlobalUserProperties","identify","clearUserProperties","setGroup","logRevenueV2","regenerateDeviceId","logEventWithTimestamp","logEventWithGroups","setSessionId"];p(n),n.getInstance=function(e){return e=(e&&0!==e.length?e:"$default_instance").toLowerCase(),n._iq.hasOwnProperty(e)||(n._iq[e]={_q:[]},p(n._iq[e])),n._iq[e]},e.amplitude=n}(window,document),this.setDomain(window.location.href),window.amplitude.init(this.options.apiKey,null,{includeUtm:this.options.trackUtmProperties,includeReferrer:this.options.trackReferrer,batchEvents:this.options.batchEvents,eventUploadThreshold:this.options.eventUploadThreshold,eventUploadPeriodMillis:this.options.eventUploadPeriodMillis,forceHttps:this.options.forceHttps,includeGclid:this.options.trackGclid,saveParamsReferrerOncePerSession:this.options.saveParamsReferrerOncePerSession,deviceIdFromUrlParam:this.options.deviceIdFromUrlParam});var loaded=bind(this,this.loaded),ready=this.ready;if(umd)return void window.require([src],function(amplitude){window.amplitude=amplitude,when(loaded,function(){window.amplitude.runQueuedFunctions(),ready()})});this.load(function(){when(loaded,function(){window.amplitude.runQueuedFunctions(),ready()})})},Amplitude.prototype.loaded=function(){return!(!window.amplitude||!window.amplitude.options)},Amplitude.prototype.page=function(page){this.setDeviceIdFromAnonymousId(page);var category=page.category(),name=page.fullName(),opts=this.options;opts.trackAllPages&&this.track(page.track()),category&&opts.trackCategorizedPages&&this.track(page.track(category)),name&&opts.trackNamedPages&&this.track(page.track(name))},Amplitude.prototype.identify=function(identify){this.setDeviceIdFromAnonymousId(identify);var id=identify.userId(),traits=identify.traits();if(id&&window.amplitude.setUserId(id),traits){var mapQueryParams=this.options.mapQueryParams,query=identify.proxy("context.page.search");is.empty(mapQueryParams)||each(function(value,key){traits[key]=query},mapQueryParams),window.amplitude.setUserProperties(traits)}var groups=identify.options(this.name).groups;if(groups&&is.object(groups))for(var group in groups)groups.hasOwnProperty(group)&&window.amplitude.setGroup(group,groups[group])},Amplitude.prototype.track=logEvent,Amplitude.prototype.orderCompleted=function(track){this.setDeviceIdFromAnonymousId(track);var products=track.products(),clonedTrack=track.json(),trackRevenuePerProduct=this.options.trackRevenuePerProduct;if(!products||!Array.isArray(products))return logEvent.call(this,track);delete clonedTrack.properties.products,logEvent.call(this,new Track(clonedTrack),trackRevenuePerProduct),each(function(product){var price=product.price,quantity=product.quantity;clonedTrack.properties=product,clonedTrack.event="Product Purchased",trackRevenuePerProduct&&null!=price&&quantity&&this.setRevenue(mapRevenueAttributes(new Track(clonedTrack))),logEvent.call(this,new Track(clonedTrack),trackRevenuePerProduct)}.bind(this),products)},Amplitude.prototype.group=function(group){this.setDeviceIdFromAnonymousId(group);var groupType=group.traits()[this.options.groupTypeTrait],groupValue=group.traits()[this.options.groupValueTrait];if(groupType&&groupValue)window.amplitude.setGroup(groupType,groupValue);else{var groupId=group.groupId();groupId&&window.amplitude.setGroup("[Segment] Group",groupId)}},Amplitude.prototype.setDomain=function(href){var domain=topDomain(href);window.amplitude.setDomain(domain)},Amplitude.prototype.setDeviceIdFromAnonymousId=function(facade){this.options.preferAnonymousIdForDeviceId&&this.setDeviceId(facade.anonymousId())},Amplitude.prototype.setDeviceId=function(deviceId){deviceId&&window.amplitude.setDeviceId(deviceId)},Amplitude.prototype.setRevenue=function(properties){var price=properties.price,productId=properties.productId,revenueType=properties.revenueType,quantity=properties.quantity,eventProps=properties.eventProps,revenue=properties.revenue;if(this.options.useLogRevenueV2){price||(price=revenue,quantity=1);var ampRevenue=(new window.amplitude.Revenue).setPrice(price).setQuantity(quantity).setEventProperties(eventProps);revenueType&&ampRevenue.setRevenueType(revenueType),productId&&ampRevenue.setProductId(productId),window.amplitude.logRevenueV2(ampRevenue)}else window.amplitude.logRevenue(revenue||price*quantity,quantity,productId)}},{"@ndhoule/each":18,"@segment/analytics.js-integration":4,"@segment/top-domain":57,"component-bind":125,"do-when":144,is:153,"segmentio-facade":178}],4:[function(require,module,exports){"use strict";function createIntegration(name){function Integration(options){if(options&&options.addIntegration)return options.addIntegration(Integration);this.debug=debug("analytics:integration:"+slug(name)),this.options=defaults(clone(options)||{},this.defaults),this._queue=[],this.once("ready",bind(this,this.flush)),Integration.emit("construct",this),this.ready=bind(this,this.ready),this._wrapInitialize(),this._wrapPage(),this._wrapTrack()}return Integration.prototype.defaults={},Integration.prototype.globals=[],Integration.prototype.templates={},Integration.prototype.name=name,extend(Integration,statics),extend(Integration.prototype,protos),Integration}var bind=require("component-bind"),clone=require("@ndhoule/clone"),debug=require("debug"),defaults=require("@ndhoule/defaults"),extend=require("@ndhoule/extend"),slug=require("slug-component"),protos=require("./protos"),statics=require("./statics");module.exports=createIntegration},{"./protos":5,"./statics":6,"@ndhoule/clone":15,"@ndhoule/defaults":16,"@ndhoule/extend":20,"component-bind":125,debug:142,"slug-component":184}],5:[function(require,module,exports){"use strict";function getMappingType(mapping){return is.array(mapping)?every(isMixed,mapping)?"mixed":"array":is.object(mapping)?"map":"unknown"}function isMixed(item){return!!is.object(item)&&(!!is.string(item.key)&&!!has.call(item,"value"))}function loadImage(attrs,fn){fn=fn||function(){};var img=new Image;return img.onerror=error(fn,"failed to load pixel",img),img.onload=function(){fn()},img.src=attrs.src,img.width=1,img.height=1,img}function error(fn,message,img){return function(e){e=e||window.event;var err=new Error(message);err.event=e,err.source=img,fn(err)}}function render(template,locals){return foldl(function(attrs,val,key){return attrs[key]=val.replace(/\{\{\ *(\w+)\ *\}\}/g,function(_,$1){return locals[$1]}),attrs},{},template.attrs)}var Emitter=require("component-emitter"),after=require("@ndhoule/after"),each=require("@ndhoule/each"),events=require("analytics-events"),every=require("@ndhoule/every"),fmt=require("@segment/fmt"),foldl=require("@ndhoule/foldl"),is=require("is"),loadIframe=require("load-iframe"),loadScript=require("@segment/load-script"),nextTick=require("next-tick"),normalize=require("to-no-case"),has=Object.prototype.hasOwnProperty,noop=function(){},onerror=window.onerror;Emitter(exports),exports.initialize=function(){var ready=this.ready;nextTick(ready)},exports.loaded=function(){return!1},exports.page=function(page){},exports.track=function(track){},exports.map=function(options,key){var normalizedComparator=normalize(key),mappingType=getMappingType(options);return"unknown"===mappingType?[]:foldl(function(matchingValues,val,key){var compare,result;return"map"===mappingType&&(compare=key,result=val),"array"===mappingType&&(compare=val,result=val),"mixed"===mappingType&&(compare=val.key,result=val.value),normalize(compare)===normalizedComparator&&matchingValues.push(result),matchingValues},[],options)},exports.invoke=function(method){if(this[method]){var args=Array.prototype.slice.call(arguments,1);return this._ready?(this.debug("%s with %o",method,args),this[method].apply(this,args)):this.queue(method,args)}},exports.queue=function(method,args){if("page"===method&&this._assumesPageview&&!this._initialized)return this.page.apply(this,args);this._queue.push({method:method,args:args})},exports.flush=function(){this._ready=!0;var self=this;each(function(call){self[call.method].apply(self,call.args)},this._queue),this._queue.length=0},exports.reset=function(){for(var i=0;i<this.globals.length;i++)window[this.globals[i]]=void 0;window.onerror=onerror,window.onload=null},exports.load=function(name,locals,callback){"function"==typeof name&&(callback=name,locals=null,name=null),name&&"object"==typeof name&&(callback=locals,locals=name,name=null),"function"==typeof locals&&(callback=locals,locals=null),name=name||"library",locals=locals||{},locals=this.locals(locals);var template=this.templates[name];if(!template)throw new Error(fmt('template "%s" not defined.',name));var attrs=render(template,locals);callback=callback||noop;var el,self=this;switch(template.type){case"img":attrs.width=1,attrs.height=1,el=loadImage(attrs,callback);break;case"script":el=loadScript(attrs,function(err){if(!err)return callback();self.debug('error loading "%s" error="%s"',self.name,err)}),delete attrs.src,each(function(val,key){el.setAttribute(key,val)},attrs);break;case"iframe":el=loadIframe(attrs,callback)}return el},exports.locals=function(locals){locals=locals||{};var cache=Math.floor((new Date).getTime()/36e5);return locals.hasOwnProperty("cache")||(locals.cache=cache),each(function(val,key){locals.hasOwnProperty(key)||(locals[key]=val)},this.options),locals},exports.ready=function(){this.emit("ready")},exports._wrapInitialize=function(){var initialize=this.initialize;this.initialize=function(){this.debug("initialize"),this._initialized=!0;var ret=initialize.apply(this,arguments);return this.emit("initialize"),ret},this._assumesPageview&&(this.initialize=after(2,this.initialize))},exports._wrapPage=function(){var page=this.page;this.page=function(){return this._assumesPageview&&!this._initialized?this.initialize.apply(this,arguments):page.apply(this,arguments)}},exports._wrapTrack=function(){var t=this.track;this.track=function(track){var called,ret,event=track.event();for(var method in events)if(has.call(events,method)){var regexp=events[method];if(!this[method])continue;if(!regexp.test(event))continue;ret=this[method].apply(this,arguments),called=!0;break}return called||(ret=t.apply(this,arguments)),ret}}},{"@ndhoule/after":13,"@ndhoule/each":18,"@ndhoule/every":19,"@ndhoule/foldl":21,"@segment/fmt":48,"@segment/load-script":52,"analytics-events":58,"component-emitter":133,is:153,"load-iframe":159,"next-tick":166,"to-no-case":187}],6:[function(require,module,exports){"use strict";function objectify(str){str=str.replace(' src="',' data-src="');var el=domify(str),attrs={};return each(function(attr){var name="data-src"===attr.name?"src":attr.name;includes(attr.name+"=",str)&&(attrs[name]=attr.value)},el.attributes),{type:el.tagName.toLowerCase(),attrs:attrs}}var Emitter=require("component-emitter"),domify=require("domify"),each=require("@ndhoule/each"),includes=require("@ndhoule/includes");Emitter(exports),exports.option=function(key,value){return this.prototype.defaults[key]=value,this},exports.mapping=function(name){return this.option(name,[]),this.prototype[name]=function(key){return this.map(this.options[name],key)},this},exports.global=function(key){return this.prototype.globals.push(key),this},exports.assumesPageview=function(){return this.prototype._assumesPageview=!0,this},exports.readyOnLoad=function(){return this.prototype._readyOnLoad=!0,this},exports.readyOnInitialize=function(){return this.prototype._readyOnInitialize=!0,this},exports.tag=function(name,tag){return null==tag&&(tag=name,name="library"),this.prototype.templates[name]=objectify(tag),this}},{"@ndhoule/each":18,"@ndhoule/includes":22,"component-emitter":133,domify:145}],7:[function(require,module,exports){"use strict";function convertDate(date){return Math.floor(date.getTime()/1e3)}var convertDates=require("@segment/convert-dates"),each=require("@ndhoule/each"),integration=require("@segment/analytics.js-integration"),timeHash=3e5*Math.ceil(new Date/3e5),Drift=module.exports=integration("Drift").global("drift").option("embedId","").option("defaultHide",!1).option("sendCompany",!1).tag('<script src="https://js.driftt.com/include/'+timeHash+'/{{ embedId }}.js">');Drift.prototype.initialize=function(){var drift;drift=window.drift=window.driftt=window.driftt||[],drift.methods=["identify","track","reset","debug","show","ping","page","hide","off","on"],drift.factory=function(method){return function(){var args;args=Array.prototype.slice.call(arguments),args.unshift(method),drift.push(args)}},each(function(key){drift[key]=drift.factory(key)},drift.methods),this.options.defaultHide&&drift.hide(),drift.on("emailCapture",function(e){e.data.email&&window.bigPicture.identify({email:e.data.email},{integrations:{All:!1}})}),this.load(this.ready)},Drift.prototype.loaded=function(){return void 0!==window.drift},Drift.prototype.identify=function(identify){if(!identify.userId())return this.debug("user id required");var traits=identify.traits(),id=identify.userId();delete traits.id;var integrationOptions=identify.options(this.name);window.drift.identify(id,traits,integrationOptions),this.identified=!0},Drift.prototype.track=function(track){var properties=track.properties();properties=convertDates(properties,convertDate),window.drift.track(track.event(),properties)},Drift.prototype.page=function(page){var email,userId=this.analytics.user().id();try{email=this.analytics.user().traits().email}catch(err){}!this.identified&&userId&&email&&(window.drift.identify(userId,{email:email}),this.identified=!0),window.drift.page(page.name())},Drift.prototype.group=function(group){var email,userId=this.analytics.user().id();try{email=this.analytics.user().traits().email}catch(err){}if(!(this.identified||userId||email)&&this.options.sendCompany){var traits=group.traits();if(!traits.name)return;drift.on("ready",function(api,payload){var name=traits.name+" visitor";api.setUserAttributes({name:name})})}},Drift.prototype.run=function(method,params){drift.on("ready",function(api,payload){switch(method){case"show":case"hide":drift[method].call(drift,params);break;case"showWelcomeMessage":api[method].call(api,params);break;case"scheduleMeeting":api[method].call(api,params.driftUserId)}})}},{"@ndhoule/each":18,"@segment/analytics.js-integration":8,"@segment/convert-dates":47}],8:[function(require,module,exports){arguments[4][4][0].apply(exports,arguments)},{"./protos":9,"./statics":10,"@ndhoule/clone":15,"@ndhoule/defaults":16,"@ndhoule/extend":20,"component-bind":125,debug:142,dup:4,"slug-component":184}],9:[function(require,module,exports){arguments[4][5][0].apply(exports,arguments)},{"@ndhoule/after":13,"@ndhoule/each":18,"@ndhoule/every":19,"@ndhoule/foldl":21,"@segment/fmt":48,"@segment/load-script":52,"analytics-events":58,"component-emitter":133,dup:5,is:153,"load-iframe":159,"next-tick":166,"to-no-case":187}],10:[function(require,module,exports){arguments[4][6][0].apply(exports,arguments)},{"@ndhoule/each":18,"@ndhoule/includes":22,"component-emitter":133,domify:145,dup:6}],11:[function(require,module,exports){"use strict";function format(obj){var ret={};return each(function(value,key){var formattedKey=key.replace(/\s/g,"_");ret[formattedKey]=value},obj),ret}var integration=require("@segment/analytics.js-integration"),isObject=require("isobject"),push=require("global-queue")("_dcq"),each=require("@ndhoule/each"),find=require("obj-case").find,Drip=module.exports=integration("Drip").global("_dc").global("_dcq").global("_dcqi").global("_dcs").option("account","").tag('<script src="//tag.getdrip.com/{{ account }}.js">');Drip.prototype.initialize=function(){window._dcq=window._dcq||[],window._dcs=window._dcs||{},window._dcs.account=this.options.account,this.load(this.ready)},Drip.prototype.loaded=function(){return isObject(window._dc)},Drip.prototype.track=function(track){var props=format(track.properties()),cents=Math.round(100*track.revenue());cents&&(props.value=cents),delete props.revenue,push("track",track.event(),props)},Drip.prototype.identify=function(identify){if(identify.email()){push("identify",format(identify.traits()));var dripCampaignId=find(identify.options(this.name),"campaignId")||this.options.campaignId;dripCampaignId&&push("subscribe",{campaign_id:dripCampaignId,fields:identify.traits()})}}},{"@ndhoule/each":18,"@segment/analytics.js-integration":41,"global-queue":148,isobject:155,"obj-case":167}],12:[function(require,module,exports){"use strict";function path(properties,options){if(properties){var str=properties.path;return options.includeSearch&&properties.search&&(str+=properties.search),str}}function formatValue(value){return!value||value<0?0:Math.round(value)}function metrics(obj,data){var dimensions=data.dimensions,metrics=data.metrics,contentGroupings=data.contentGroupings,ret={};return each([metrics,dimensions,contentGroupings],function(group){each(group,function(prop,key){var value=dot(obj,prop)||obj[prop];is.bool(value)&&(value=value.toString()),(value||0===value)&&(ret[key]=value)})}),ret}function enhancedEcommerceTrackProduct(track,trackerName){var props=track.properties(),product={id:track.productId()||track.id()||track.sku(),name:track.name(),category:track.category(),quantity:track.quantity(),price:track.price(),brand:props.brand,variant:props.variant,currency:track.currency()},coupon=track.proxy("properties.coupon");coupon&&(product.coupon=coupon),window.ga(trackerName+"ec:addProduct",product)}function enhancedEcommerceProductAction(track,action,data,trackerName){enhancedEcommerceTrackProduct(track,trackerName),window.ga(trackerName+"ec:setAction",action,data||{})}function extractCheckoutOptions(props){var options=[props.paymentMethod,props.shippingMethod],valid=reject(options);return valid.length>0?valid.join(", "):null}function createProductTrack(track,properties){return properties.currency=properties.currency||track.currency(),new Track({properties:properties})}function buildPayload(payload,properties,dataConfig){if(!dataConfig)return payload;for(var key in dataConfig)properties[dataConfig[key]]&&(payload[key]=properties[dataConfig[key]]);return payload}var user,Track=require("segmentio-facade").Track,defaults=require("@ndhoule/defaults"),dot=require("obj-case"),each=require("component-each"),integration=require("@segment/analytics.js-integration"),is=require("is"),len=require("object-component").length,push=require("global-queue")("_gaq"),reject=require("reject"),useHttps=require("use-https");module.exports=exports=function(analytics){analytics.addIntegration(GA),user=analytics.user()};var GA=exports.Integration=integration("Google Analytics").readyOnLoad().global("ga").global("gaplugins").global("_gaq").global("GoogleAnalyticsObject").option("anonymizeIp",!1).option("useGoogleAmpClientId",!1).option("classic",!1).option("contentGroupings",{}).option("dimensions",{}).option("domain","auto").option("domains",[]).option("doubleClick",!1).option("enhancedEcommerce",!1).option("enhancedLinkAttribution",!1).option("ignoredReferrers",null).option("includeSearch",!1).option("setAllMappedProps",!0).option("metrics",{}).option("nonInteraction",!1).option("sendUserId",!1).option("siteSpeedSampleRate",1).option("sampleRate",100).option("trackCategorizedPages",!0).option("trackNamedPages",!0).option("trackingId","").option("optimize","").option("createNewTracker",!1).option("nameTracker",!1).tag("library",'<script src="//www.google-analytics.com/analytics.js">').tag("double click",'<script src="//stats.g.doubleclick.net/dc.js">').tag("http",'<script src="http://www.google-analytics.com/ga.js">').tag("https",'<script src="https://ssl.google-analytics.com/ga.js">');GA.on("construct",function(integration){integration.options.classic?(integration.initialize=integration.initializeClassic,integration.loaded=integration.loadedClassic,integration.page=integration.pageClassic,integration.track=integration.trackClassic,integration.orderCompleted=integration.completedOrderClassic):integration.options.enhancedEcommerce&&(integration.productViewed=integration.productViewedEnhanced,integration.productClicked=integration.productClickedEnhanced,integration.productAdded=integration.productAddedEnhanced,integration.productRemoved=integration.productRemovedEnhanced,integration.checkoutStarted=integration.checkoutStartedEnhanced,integration.checkoutStepViewed=integration.checkoutStepViewedEnhanced,integration.checkoutStepCompleted=integration.checkoutStepCompletedEnhanced,integration.orderUpdated=integration.orderUpdatedEnhanced,integration.orderCompleted=integration.orderCompletedEnhanced,integration.orderRefunded=integration.orderRefundedEnhanced,integration.promotionViewed=integration.promotionViewedEnhanced,integration.promotionClicked=integration.promotionClickedEnhanced,integration.productListViewed=integration.productListViewedEnhanced,integration.productListFiltered=integration.productListFilteredEnhanced)}),GA.prototype.initialize=function(){this.pageCalled=!1;var opts=this.options;window.GoogleAnalyticsObject="ga",window.ga=window.ga||function(){window.ga.q=window.ga.q||[],window.ga.q.push(arguments)},window.ga.l=(new Date).getTime(),"localhost"===window.location.hostname&&(opts.domain="none");var config={cookieDomain:opts.domain||GA.prototype.defaults.domain,siteSpeedSampleRate:opts.siteSpeedSampleRate,sampleRate:opts.sampleRate,allowLinker:!0,useGoogleAmpClientId:opts.useGoogleAmpClientId};opts.createNewTracker||opts.nameTracker?(config.name="bpGATracker",this._trackerName="bpGATracker."):this._trackerName="",window.ga("create",opts.trackingId,config),opts.domains&&opts.domains.length>0&&(window.ga(this._trackerName+"require","linker"),window.ga(this._trackerName+"linker:autoLink",opts.domains)),opts.optimize&&window.ga(this._trackerName+"require",opts.optimize),opts.doubleClick&&window.ga(this._trackerName+"require","displayfeatures"),opts.enhancedLinkAttribution&&window.ga(this._trackerName+"require","linkid","linkid.js"),opts.sendUserId&&user.id()&&window.ga(this._trackerName+"set","userId",user.id()),opts.anonymizeIp&&window.ga(this._trackerName+"set","anonymizeIp",!0);var userTraits=user.traits();user.id()&&(userTraits.id=user.id());var custom=metrics(userTraits,opts);len(custom)&&window.ga(this._trackerName+"set",custom),this.load("library",this.ready)},GA.prototype.loaded=function(){return!!window.gaplugins},GA.prototype.page=function(page){var track,category=page.category(),props=page.properties(),name=page.fullName(),opts=this.options,campaign=page.proxy("context.campaign")||{},pageview={},pagePath=path(props,this.options),pageTitle=name||props.title,pageReferrer=page.referrer()||"";this._category=category,pageview.page=pagePath,pageview.title=pageTitle,pageview.location=props.url,campaign.name&&(pageview.campaignName=campaign.name),campaign.source&&(pageview.campaignSource=campaign.source),campaign.medium&&(pageview.campaignMedium=campaign.medium),campaign.content&&(pageview.campaignContent=campaign.content),campaign.term&&(pageview.campaignKeyword=campaign.term);var payload={page:pagePath,title:pageTitle},custom=metrics(props,opts);len(custom)&&(opts.setAllMappedProps?window.ga(this._trackerName+"set",custom):each(custom,function(key,value){pageview[key]=value})),pageReferrer!==document.referrer&&(payload.referrer=pageReferrer),window.ga(this._trackerName+"set",payload),this.pageCalled&&delete pageview.location,window.ga(this._trackerName+"send","pageview",pageview),category&&this.options.trackCategorizedPages&&(track=page.track(category),this.track(track,{nonInteraction:1})),name&&this.options.trackNamedPages&&(track=page.track(name),this.track(track,{nonInteraction:1})),this.pageCalled=!0},GA.prototype.identify=function(identify){var opts=this.options;opts.sendUserId&&identify.userId()&&window.ga(this._trackerName+"set","userId",identify.userId());var custom=metrics(identify.traits(),opts);len(custom)&&window.ga(this._trackerName+"set",custom)},GA.prototype.track=function(track,options){var contextOpts=track.options(this.name),interfaceOpts=this.options,opts=defaults(options||{},contextOpts);opts=defaults(opts,interfaceOpts);var props=track.properties(),campaign=track.proxy("context.campaign")||{},payload={eventAction:track.event(),eventCategory:track.category()||this._category||"All",eventLabel:props.label,eventValue:formatValue(props.value||track.revenue()),nonInteraction:void 0!==props.nonInteraction?!!props.nonInteraction:!!opts.nonInteraction},dataConfig=contextOpts.dataConfig;payload=buildPayload(payload,props,dataConfig),campaign.name&&(payload.campaignName=campaign.name),campaign.source&&(payload.campaignSource=campaign.source),campaign.medium&&(payload.campaignMedium=campaign.medium),campaign.content&&(payload.campaignContent=campaign.content),campaign.term&&(payload.campaignKeyword=campaign.term);var custom=metrics(props,interfaceOpts);len(custom)&&(interfaceOpts.setAllMappedProps?window.ga(this._trackerName+"set",custom):each(custom,function(key,value){payload[key]=value})),window.ga(this._trackerName+"send","event",payload)},GA.prototype.orderCompleted=function(track){var total=track.total()||track.revenue()||0,orderId=track.orderId(),products=track.products(),props=track.properties(),self=this
;orderId&&(this.ecommerce||(window.ga(this._trackerName+"require","ecommerce"),this.ecommerce=!0),window.ga(this._trackerName+"ecommerce:addTransaction",{affiliation:props.affiliation,shipping:track.shipping(),revenue:total,tax:track.tax(),id:orderId,currency:track.currency()}),each(products,function(product){var productTrack=createProductTrack(track,product);window.ga(self._trackerName+"ecommerce:addItem",{category:productTrack.category(),quantity:productTrack.quantity(),price:productTrack.price(),name:productTrack.name(),sku:productTrack.sku(),id:orderId,currency:productTrack.currency()})}),window.ga(this._trackerName+"ecommerce:send"))},GA.prototype.initializeClassic=function(){var opts=this.options,anonymize=opts.anonymizeIp,domain=opts.domain,enhanced=opts.enhancedLinkAttribution,ignore=opts.ignoredReferrers,sample=opts.siteSpeedSampleRate;if(window._gaq=window._gaq||[],push("_setAccount",opts.trackingId),push("_setAllowLinker",!0),anonymize&&push("_gat._anonymizeIp"),domain&&push("_setDomainName",domain),sample&&push("_setSiteSpeedSampleRate",sample),enhanced){var protocol="https:"===document.location.protocol?"https:":"http:";push("_require","inpage_linkid",protocol+"//www.google-analytics.com/plugins/ga/inpage_linkid.js")}if(ignore&&(is.array(ignore)||(ignore=[ignore]),each(ignore,function(domain){push("_addIgnoredRef",domain)})),this.options.doubleClick)this.load("double click",this.ready);else{var name=useHttps()?"https":"http";this.load(name,this.ready)}},GA.prototype.loadedClassic=function(){return!(!window._gaq||window._gaq.push===Array.prototype.push)},GA.prototype.pageClassic=function(page){var track,category=page.category(),props=page.properties(),name=page.fullName();push("_trackPageview",path(props,this.options)),category&&this.options.trackCategorizedPages&&(track=page.track(category),this.track(track,{nonInteraction:1})),name&&this.options.trackNamedPages&&(track=page.track(name),this.track(track,{nonInteraction:1}))},GA.prototype.trackClassic=function(track,options){var opts=options||track.options(this.name),props=track.properties(),revenue=track.revenue(),event=track.event(),category=this._category||track.category()||"All",label=props.label,value=formatValue(revenue||props.value),nonInteraction=!(!props.nonInteraction&&!opts.nonInteraction);push("_trackEvent",category,event,label,value,nonInteraction)},GA.prototype.completedOrderClassic=function(track){var total=track.total()||track.revenue()||0,orderId=track.orderId(),products=track.products()||[],props=track.properties(),currency=track.currency();orderId&&(push("_addTrans",orderId,props.affiliation,total,track.tax(),track.shipping(),track.city(),track.state(),track.country()),each(products,function(product){var track=new Track({properties:product});push("_addItem",orderId,track.sku(),track.name(),track.category(),track.price(),track.quantity())}),push("_set","currencyCode",currency),push("_trackTrans"))},GA.prototype.loadEnhancedEcommerce=function(track){var self=this;this.enhancedEcommerceLoaded||(window.ga(self._trackerName+"require","ec"),this.enhancedEcommerceLoaded=!0),window.ga(self._trackerName+"set","&cu",track.currency())},GA.prototype.pushEnhancedEcommerce=function(track){var self=this,args=reject([self._trackerName+"send","event",track.category()||"EnhancedEcommerce",track.event()||"Action not defined",track.properties().label,{nonInteraction:1}]);window.ga.apply(window,args)},GA.prototype.checkoutStartedEnhanced=function(track){this.checkoutStepViewed(track)},GA.prototype.orderUpdatedEnhanced=function(track){this.checkoutStartedEnhanced(track)},GA.prototype.checkoutStepViewedEnhanced=function(track){var products=track.products(),props=track.properties(),options=extractCheckoutOptions(props),self=this;this.loadEnhancedEcommerce(track),each(products,function(product){enhancedEcommerceTrackProduct(createProductTrack(track,product),self._trackerName)}),window.ga(self._trackerName+"ec:setAction","checkout",{step:props.step||1,option:options||void 0}),this.pushEnhancedEcommerce(track)},GA.prototype.checkoutStepCompletedEnhanced=function(track){var props=track.properties(),options=extractCheckoutOptions(props),self=this;props.step&&options&&(this.loadEnhancedEcommerce(track),window.ga(self._trackerName+"ec:setAction","checkout_option",{step:props.step||1,option:options}),window.ga(self._trackerName+"send","event","Checkout","Option"))},GA.prototype.orderCompletedEnhanced=function(track){var total=track.total()||track.revenue()||0,orderId=track.orderId(),products=track.products(),props=track.properties(),self=this;orderId&&(this.loadEnhancedEcommerce(track),each(products,function(product){enhancedEcommerceTrackProduct(createProductTrack(track,product),self._trackerName)}),window.ga(self._trackerName+"ec:setAction","purchase",{id:orderId,affiliation:props.affiliation,revenue:total,tax:track.tax(),shipping:track.shipping(),coupon:track.coupon()}),this.pushEnhancedEcommerce(track))},GA.prototype.orderRefundedEnhanced=function(track){var orderId=track.orderId(),products=track.products(),self=this;orderId&&(this.loadEnhancedEcommerce(track),each(products,function(product){var track=new Track({properties:product});window.ga(self._trackerName+"ec:addProduct",{id:track.productId()||track.id()||track.sku(),quantity:track.quantity()})}),window.ga(self._trackerName+"ec:setAction","refund",{id:orderId}),this.pushEnhancedEcommerce(track))},GA.prototype.productAddedEnhanced=function(track){var self=this;this.loadEnhancedEcommerce(track),enhancedEcommerceProductAction(track,"add",null,self._trackerName),this.pushEnhancedEcommerce(track)},GA.prototype.productRemovedEnhanced=function(track){var self=this;this.loadEnhancedEcommerce(track),enhancedEcommerceProductAction(track,"remove",null,self._trackerName),this.pushEnhancedEcommerce(track)},GA.prototype.productViewedEnhanced=function(track){var props=track.properties(),data={},self=this;this.loadEnhancedEcommerce(track),props.list&&(data.list=props.list),enhancedEcommerceProductAction(track,"detail",data,self._trackerName),this.pushEnhancedEcommerce(track)},GA.prototype.productClickedEnhanced=function(track){var props=track.properties(),data={},self=this;this.loadEnhancedEcommerce(track),props.list&&(data.list=props.list),enhancedEcommerceProductAction(track,"click",data,self._trackerName),this.pushEnhancedEcommerce(track)},GA.prototype.promotionViewedEnhanced=function(track){var props=track.properties(),self=this;this.loadEnhancedEcommerce(track),window.ga(self._trackerName+"ec:addPromo",{id:track.promotionId()||track.id(),name:track.name(),creative:props.creative,position:props.position}),this.pushEnhancedEcommerce(track)},GA.prototype.promotionClickedEnhanced=function(track){var props=track.properties(),self=this;this.loadEnhancedEcommerce(track),window.ga(self._trackerName+"ec:addPromo",{id:track.promotionId()||track.id(),name:track.name(),creative:props.creative,position:props.position}),window.ga(self._trackerName+"ec:setAction","promo_click",{}),this.pushEnhancedEcommerce(track)},GA.prototype.productListViewedEnhanced=function(track){var props=track.properties(),products=track.products(),self=this;this.loadEnhancedEcommerce(track),each(products,function(product){var item=new Track({properties:product});if(item.productId()||item.sku()||item.name()){var impressionObj={id:item.productId()||item.sku(),name:item.name(),category:item.category()||track.category(),list:props.list_id||track.category()||"products",brand:item.properties().brand,variant:item.properties().variant,price:item.price(),position:products.map(function(x){return x.product_id}).indexOf(item.productId())+1};for(var prop in impressionObj)void 0===impressionObj[prop]&&delete impressionObj[prop];window.ga(self._trackerName+"ec:addImpression",impressionObj)}}),this.pushEnhancedEcommerce(track)},GA.prototype.productListFilteredEnhanced=function(track){var props=track.properties(),products=track.products();props.filters=props.filters||[],props.sorters=props.sorters||[];var filters=props.filters.map(function(obj){return obj.type+":"+obj.value}).join(),sorts=props.sorts.map(function(obj){return obj.type+":"+obj.value}).join(),self=this;this.loadEnhancedEcommerce(track),each(products,function(product){var item=new Track({properties:product});if(item.productId()||item.sku()||item.name()){var impressionObj={id:item.productId()||item.sku(),name:item.name(),category:item.category()||track.category(),list:props.list_id||track.category()||"search results",brand:item.properties().brand,variant:filters+"::"+sorts,price:item.price(),position:products.map(function(x){return x.product_id}).indexOf(item.productId())+1};for(var prop in impressionObj)void 0===impressionObj[prop]&&delete impressionObj[prop];window.ga(self._trackerName+"ec:addImpression",impressionObj)}}),this.pushEnhancedEcommerce(track)}},{"@ndhoule/defaults":16,"@segment/analytics.js-integration":41,"component-each":131,"global-queue":148,is:153,"obj-case":167,"object-component":168,reject:170,"segmentio-facade":178,"use-https":194}],13:[function(require,module,exports){"use strict";var arity=require("@ndhoule/arity"),objToString=Object.prototype.toString,isFunction=function(val){return"function"==typeof val},isNumber=function(val){var type=typeof val;return"number"===type||"object"===type&&"[object Number]"===objToString.call(val)},after=function(n,fn){if(!isNumber(n))throw new TypeError("Expected a number but received "+typeof n);if(!isFunction(fn))throw new TypeError("Expected a function but received "+typeof fn);var callCount=0;return arity(fn.length,function(){if(!((callCount+=1)<n))return fn.apply(this,arguments)})};module.exports=after},{"@ndhoule/arity":14}],14:[function(require,module,exports){"use strict";var objToString=Object.prototype.toString,isFunction=function(val){return"function"==typeof val},isNumber=function(val){var type=typeof val;return"number"===type||"object"===type&&"[object Number]"===objToString.call(val)},createParams=function(n){for(var args=[],i=1;i<=n;i+=1)args.push("arg"+i);return args},createArityWrapper=function(n){var paramNames=createParams(n).join(", "),wrapperBody="".concat("  return function(",paramNames,") {\n","    return func.apply(this, arguments);\n","  };");return new Function("func",wrapperBody)},arityWrapperCache=[function(fn){return function(){return fn.apply(this,arguments)}},function(fn){return function(arg1){return fn.apply(this,arguments)}},function(fn){return function(arg1,arg2){return fn.apply(this,arguments)}},function(fn){return function(arg1,arg2,arg3){return fn.apply(this,arguments)}},function(fn){return function(arg1,arg2,arg3,arg4){return fn.apply(this,arguments)}},function(fn){return function(arg1,arg2,arg3,arg4,arg5){return fn.apply(this,arguments)}}],arity=function(n,func){if(!isFunction(func))throw new TypeError("Expected a function but got "+typeof func);return n=Math.max(isNumber(n)?n:0,0),arityWrapperCache[n]||(arityWrapperCache[n]=createArityWrapper(n)),arityWrapperCache[n](func)};module.exports=arity},{}],15:[function(require,module,exports){"use strict";var type=require("component-type"),clone=function clone(obj){var t=type(obj);if("object"===t){var copy={};for(var key in obj)obj.hasOwnProperty(key)&&(copy[key]=clone(obj[key]));return copy}if("array"===t){for(var copy=new Array(obj.length),i=0,l=obj.length;i<l;i++)copy[i]=clone(obj[i]);return copy}if("regexp"===t){var flags="";return flags+=obj.multiline?"m":"",flags+=obj.global?"g":"",flags+=obj.ignoreCase?"i":"",new RegExp(obj.source,flags)}return"date"===t?new Date(obj.getTime()):obj};module.exports=clone},{"component-type":139}],16:[function(require,module,exports){"use strict";var drop=require("@ndhoule/drop"),rest=require("@ndhoule/rest"),has=Object.prototype.hasOwnProperty,objToString=Object.prototype.toString,isObject=function(value){return Boolean(value)&&"object"==typeof value},isPlainObject=function(value){return Boolean(value)&&"[object Object]"===objToString.call(value)},shallowCombiner=function(target,source,value,key){return has.call(source,key)&&void 0===target[key]&&(target[key]=value),source},deepCombiner=function(target,source,value,key){return has.call(source,key)&&(isPlainObject(target[key])&&isPlainObject(value)?target[key]=defaultsDeep(target[key],value):void 0===target[key]&&(target[key]=value)),source},defaultsWith=function(combiner,target){if(!isObject(target))return target;combiner=combiner||shallowCombiner;for(var sources=drop(2,arguments),i=0;i<sources.length;i+=1)for(var key in sources[i])combiner(target,sources[i],sources[i][key],key);return target},defaultsDeep=function(target){return defaultsWith.apply(null,[deepCombiner,target].concat(rest(arguments)))},defaults=function(target){return defaultsWith.apply(null,[null,target].concat(rest(arguments)))};module.exports=defaults,module.exports.deep=defaultsDeep},{"@ndhoule/drop":17,"@ndhoule/rest":26}],17:[function(require,module,exports){"use strict";var max=Math.max,drop=function(count,collection){var length=collection?collection.length:0;if(!length)return[];for(var toDrop=max(Number(count)||0,0),resultsLength=max(length-toDrop,0),results=new Array(resultsLength),i=0;i<resultsLength;i+=1)results[i]=collection[i+toDrop];return results};module.exports=drop},{}],18:[function(require,module,exports){"use strict";var keys=require("@ndhoule/keys"),objToString=Object.prototype.toString,isNumber=function(val){var type=typeof val;return"number"===type||"object"===type&&"[object Number]"===objToString.call(val)},isArray="function"==typeof Array.isArray?Array.isArray:function(val){return"[object Array]"===objToString.call(val)},isArrayLike=function(val){return null!=val&&(isArray(val)||"function"!==val&&isNumber(val.length))},arrayEach=function(iterator,array){for(var i=0;i<array.length&&!1!==iterator(array[i],i,array);i+=1);},baseEach=function(iterator,object){for(var ks=keys(object),i=0;i<ks.length&&!1!==iterator(object[ks[i]],ks[i],object);i+=1);},each=function(iterator,collection){return(isArrayLike(collection)?arrayEach:baseEach).call(this,iterator,collection)};module.exports=each},{"@ndhoule/keys":23}],19:[function(require,module,exports){"use strict";var each=require("@ndhoule/each"),every=function(predicate,collection){if("function"!=typeof predicate)throw new TypeError("`predicate` must be a function but was a "+typeof predicate);var result=!0;return each(function(val,key,collection){if(!(result=!!predicate(val,key,collection)))return!1},collection),result};module.exports=every},{"@ndhoule/each":18}],20:[function(require,module,exports){"use strict";var has=Object.prototype.hasOwnProperty,extend=function(dest){for(var sources=Array.prototype.slice.call(arguments,1),i=0;i<sources.length;i+=1)for(var key in sources[i])has.call(sources[i],key)&&(dest[key]=sources[i][key]);return dest};module.exports=extend},{}],21:[function(require,module,exports){"use strict";var each=require("@ndhoule/each"),foldl=function(iterator,accumulator,collection){if("function"!=typeof iterator)throw new TypeError("Expected a function but received a "+typeof iterator);return each(function(val,i,collection){accumulator=iterator(accumulator,val,i,collection)},collection),accumulator};module.exports=foldl},{"@ndhoule/each":18}],22:[function(require,module,exports){"use strict";var each=require("@ndhoule/each"),strIndexOf=String.prototype.indexOf,sameValueZero=function(value1,value2){return value1===value2?0!==value1||1/value1==1/value2:value1!==value1&&value2!==value2},includes=function(searchElement,collection){var found=!1;return"string"==typeof collection?-1!==strIndexOf.call(collection,searchElement):(each(function(value){if(sameValueZero(value,searchElement))return found=!0,!1},collection),found)};module.exports=includes},{"@ndhoule/each":18}],23:[function(require,module,exports){"use strict";var hop=Object.prototype.hasOwnProperty,strCharAt=String.prototype.charAt,toStr=Object.prototype.toString,charAt=function(str,index){return strCharAt.call(str,index)},has=function(context,prop){return hop.call(context,prop)},isString=function(val){return"[object String]"===toStr.call(val)},isArrayLike=function(val){return null!=val&&"function"!=typeof val&&"number"==typeof val.length},indexKeys=function(target,pred){pred=pred||has;for(var results=[],i=0,len=target.length;i<len;i+=1)pred(target,i)&&results.push(String(i));return results},objectKeys=function(target,pred){pred=pred||has;var results=[];for(var key in target)pred(target,key)&&results.push(String(key));return results},keys=function(source){return null==source?[]:isString(source)?indexKeys(source,charAt):isArrayLike(source)?indexKeys(source,has):objectKeys(source)};module.exports=keys},{}],24:[function(require,module,exports){"use strict";var each=require("@ndhoule/each"),map=function(iterator,collection){if("function"!=typeof iterator)throw new TypeError("Expected a function but received a "+typeof iterator);var result=[];return each(function(val,i,collection){result.push(iterator(val,i,collection))},collection),result};module.exports=map},{"@ndhoule/each":18}],25:[function(require,module,exports){"use strict";var objToString=Object.prototype.toString,existy=function(val){return null!=val},isArray=function(val){return"[object Array]"===objToString.call(val)},isString=function(val){return"string"==typeof val||"[object String]"===objToString.call(val)},isObject=function(val){return null!=val&&"object"==typeof val},pick=function(props,object){if(!existy(object)||!isObject(object))return{};isString(props)&&(props=[props]),isArray(props)||(props=[]);for(var result={},i=0;i<props.length;i+=1)isString(props[i])&&props[i]in object&&(result[props[i]]=object[props[i]]);return result};module.exports=pick},{}],26:[function(require,module,exports){"use strict";var max=Math.max,rest=function(collection){if(null==collection||!collection.length)return[];for(var results=new Array(max(collection.length-2,0)),i=1;i<collection.length;i+=1)results[i-1]=collection[i];return results};module.exports=rest},{}],27:[function(require,module,exports){"use strict";var keys=require("@ndhoule/keys"),values=function(source){for(var ks=keys(source),results=new Array(ks.length),i=0;i<ks.length;i+=1)results[i]=source[ks[i]];return results};module.exports=values},{"@ndhoule/keys":23}],28:[function(require,module,exports){function alias(obj,method){switch(type(method)){case"object":return aliasByDictionary(clone(obj),method);case"function":return aliasByFunction(clone(obj),method)}}function aliasByDictionary(obj,aliases){for(var key in aliases)void 0!==obj[key]&&(obj[aliases[key]]=obj[key],delete obj[key]);return obj}function aliasByFunction(obj,convert){var output={};for(var key in obj)output[convert(key)]=obj[key];return output}var type=require("component-type"),clone=require("component-clone");module.exports=alias},{"component-clone":126,"component-type":139}],29:[function(require,module,exports){(function(global){"use strict";function Analytics(){this._options({}),this.Integrations={},this._integrations={},this._readied=!1,this._timeout=300,this._user=user,this.log=debug("analytics.js"),bindAll(this);var self=this;this.on("initialize",function(settings,options){options.initialPageview&&self.page(),self._parseQuery(window.location.search)})}var _analytics=global.analytics,Alias=require("segmentio-facade").Alias,Emitter=require("component-emitter"),Group=require("segmentio-facade").Group,Identify=require("segmentio-facade").Identify,Page=require("segmentio-facade").Page,Track=require("segmentio-facade").Track,after=require("@ndhoule/after"),bindAll=require("bind-all"),clone=require("@ndhoule/clone"),extend=require("extend"),cookie=require("./cookie"),debug=require("debug"),defaults=require("@ndhoule/defaults"),each=require("@ndhoule/each"),foldl=require("@ndhoule/foldl"),group=require("./group"),is=require("is"),isMeta=require("@segment/is-meta"),keys=require("@ndhoule/keys"),memory=require("./memory"),nextTick=require("next-tick"),normalize=require("./normalize"),on=require("component-event").bind,pageDefaults=require("./pageDefaults"),pick=require("@ndhoule/pick"),prevent=require("@segment/prevent-default"),querystring=require("component-querystring"),store=require("./store"),user=require("./user"),type=require("component-type");Emitter(Analytics.prototype),Analytics.prototype.use=function(plugin){return plugin(this),this},Analytics.prototype.addIntegration=function(Integration){var name=Integration.prototype.name;if(!name)throw new TypeError("attempted to add an invalid integration");return this.Integrations[name]=Integration,this},Analytics.prototype.init=Analytics.prototype.initialize=function(settings,options){settings=settings||{},options=options||{},this._options(options),this._readied=!1;var self=this;each(function(opts,name){self.Integrations[name]||delete settings[name]},settings),each(function(opts,name){var Integration=self.Integrations[name],clonedOpts={};extend(!0,clonedOpts,opts);var integration=new Integration(clonedOpts);self.log("initialize %o - %o",name,opts),self.add(integration)},settings);var integrations=this._integrations;user.load(),group.load();var integrationCount=keys(integrations).length,ready=after(integrationCount,function(){self._readied=!0,self.emit("ready")});return integrationCount<=0&&ready(),this.failedInitializations=[],each(function(integration){options.initialPageview&&!1===integration.options.initialPageview&&(integration.page=after(2,integration.page)),integration.analytics=self,integration.once("ready",ready);try{integration.initialize()}catch(e){var integrationName=integration.name;self.failedInitializations.push(integrationName),self.log("Error initializing %s integration: %o",integrationName,e),integration.ready()}},integrations),this.initialized=!0,this.emit("initialize",settings,options),this},Analytics.prototype.setAnonymousId=function(id){return this.user().anonymousId(id),this},Analytics.prototype.add=function(integration){return this._integrations[integration.name]=integration,this},Analytics.prototype.identify=function(id,traits,options,fn){is.fn(options)&&(fn=options,options=null),is.fn(traits)&&(fn=traits,options=null,traits=null),is.object(id)&&(options=traits,traits=id,id=user.id()),user.identify(id,traits);var msg=this.normalize({options:options,traits:user.traits(),userId:user.id()});return this._invoke("identify",new Identify(msg)),this.emit("identify",id,traits,options),this._callback(fn),this},Analytics.prototype.user=function(){return user},Analytics.prototype.group=function(id,traits,options,fn){if(!arguments.length)return group;is.fn(options)&&(fn=options,options=null),is.fn(traits)&&(fn=traits,options=null,traits=null),is.object(id)&&(options=traits,traits=id,id=group.id()),group.identify(id,traits);var msg=this.normalize({options:options,traits:group.traits(),groupId:group.id()});return this._invoke("group",new Group(msg)),this.emit("group",id,traits,options),this._callback(fn),this},Analytics.prototype.track=function(event,properties,options,fn){is.fn(options)&&(fn=options,options=null),is.fn(properties)&&(fn=properties,options=null,properties=null);var plan=this.options.plan||{},events=plan.track||{},msg=this.normalize({properties:properties,options:options,event:event});if(plan=events[event]){if(this.log("plan %o - %o",event,plan),!1===plan.enabled)return this._callback(fn);defaults(msg.integrations,plan.integrations||{})}return this._invoke("track",new Track(msg)),this.emit("track",event,properties,options),this._callback(fn),this},Analytics.prototype.trackClick=Analytics.prototype.trackLink=function(links,event,properties){if(!links)return this;"element"===type(links)&&(links=[links]);var self=this;return each(function(el){if("element"!==type(el))throw new TypeError("Must pass HTMLElement to `analytics.trackLink`.");on(el,"click",function(e){var ev=is.fn(event)?event(el):event,props=is.fn(properties)?properties(el):properties,href=el.getAttribute("href")||el.getAttributeNS("http://www.w3.org/1999/xlink","href")||el.getAttribute("xlink:href");self.track(ev,props),href&&"_blank"!==el.target&&!isMeta(e)&&(prevent(e),self._callback(function(){window.location.href=href}))})},links),this},Analytics.prototype.trackSubmit=Analytics.prototype.trackForm=function(forms,event,properties){if(!forms)return this;"element"===type(forms)&&(forms=[forms]);var self=this;return each(function(el){function handler(e){prevent(e);var ev=is.fn(event)?event(el):event,props=is.fn(properties)?properties(el):properties;self.track(ev,props),self._callback(function(){el.submit()})}if("element"!==type(el))throw new TypeError("Must pass HTMLElement to `analytics.trackForm`.");var $=window.jQuery||window.Zepto;$?$(el).submit(handler):on(el,"submit",handler)},forms),this},Analytics.prototype.page=function(category,name,properties,options,fn){is.fn(options)&&(fn=options,options=null),is.fn(properties)&&(fn=properties,options=properties=null),is.fn(name)&&(fn=name,options=properties=name=null),"object"===type(category)&&(options=name,properties=category,name=category=null),"object"===type(name)&&(options=properties,properties=name,name=null),"string"===type(category)&&"string"!==type(name)&&(name=category,category=null),properties=clone(properties)||{},name&&(properties.name=name),category&&(properties.category=category);var defs=pageDefaults();defaults(properties,defs);var overrides=pick(keys(defs),properties);is.empty(overrides)||(options=options||{},options.context=options.context||{},options.context.page=overrides);var msg=this.normalize({properties:properties,category:category,options:options,name:name});return this._invoke("page",new Page(msg)),this.emit("page",category,name,properties,options),this._callback(fn),this},Analytics.prototype.pageview=function(url){var properties={};return url&&(properties.path=url),this.page(properties),this},Analytics.prototype.alias=function(to,from,options,fn){is.fn(options)&&(fn=options,options=null),is.fn(from)&&(fn=from,options=null,from=null),is.object(from)&&(options=from,from=null);var msg=this.normalize({options:options,previousId:from,userId:to});return this._invoke("alias",new Alias(msg)),this.emit("alias",to,from,options),this._callback(fn),this},Analytics.prototype.ready=function(fn){return is.fn(fn)&&(this._readied?nextTick(fn):this.once("ready",fn)),this},Analytics.prototype.timeout=function(timeout){this._timeout=timeout},Analytics.prototype.debug=function(str){!arguments.length||str?debug.enable("analytics:"+(str||"*")):debug.disable()},Analytics.prototype._options=function(options){return options=options||{},this.options=options,cookie.options(options.cookie),store.options(options.localStorage),user.options(options.user),group.options(options.group),this},Analytics.prototype._callback=function(fn){return is.fn(fn)&&(this._timeout?setTimeout(fn,this._timeout):nextTick(fn)),this},Analytics.prototype._invoke=function(method,facade){var self=this;this.emit("invoke",facade);var failedInitializations=self.failedInitializations||[];return each(function(integration,name){facade.enabled(name)&&(failedInitializations.indexOf(name)>=0?self.log("Skipping invokation of .%s method of %s integration. Integation failed to initialize properly.",method,name):integration.invoke.call(integration,method,facade))},this._integrations),this},Analytics.prototype.push=function(args){var method=args.shift();this[method]&&this[method].apply(this,args)},Analytics.prototype.reset=function(){this.user().logout(),this.group().logout()},Analytics.prototype._parseQuery=function(query){function pickPrefix(prefix,object){var sub,length=prefix.length;return foldl(function(acc,val,key){return key.substr(0,length)===prefix&&(sub=key.substr(length),acc[sub]=val),acc},{},object)}var q=querystring.parse(query),traits=pickPrefix("ajs_trait_",q),props=pickPrefix("ajs_prop_",q);return q.ajs_uid&&this.identify(q.ajs_uid,traits),q.ajs_event&&this.track(q.ajs_event,props),q.ajs_aid&&user.anonymousId(q.ajs_aid),this},Analytics.prototype.normalize=function(msg){return msg=normalize(msg,keys(this._integrations)),msg.anonymousId&&user.anonymousId(msg.anonymousId),msg.anonymousId=user.anonymousId(),msg.context.page=defaults(msg.context.page||{},pageDefaults()),msg},Analytics.prototype.noConflict=function(){return window.analytics=_analytics,this},module.exports=Analytics,module.exports.cookie=cookie,module.exports.memory=memory,module.exports.store=store}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./cookie":30,"./group":32,"./memory":34,"./normalize":35,"./pageDefaults":36,"./store":37,"./user":38,"@ndhoule/after":13,"@ndhoule/clone":15,"@ndhoule/defaults":16,"@ndhoule/each":18,"@ndhoule/foldl":21,"@ndhoule/keys":23,"@ndhoule/pick":25,"@segment/is-meta":49,"@segment/prevent-default":53,"bind-all":124,"component-emitter":133,"component-event":134,"component-querystring":137,"component-type":139,debug:39,extend:146,is:153,"next-tick":166,"segmentio-facade":178}],30:[function(require,module,exports){"use strict";function Cookie(options){this.options(options)}var bindAll=require("bind-all"),clone=require("@ndhoule/clone"),cookie=require("component-cookie"),debug=require("debug")("analytics.js:cookie"),defaults=require("@ndhoule/defaults"),json=require("json3"),topDomain=require("@segment/top-domain");Cookie.prototype.options=function(options){if(0===arguments.length)return this._options;options=options||{};var domain="."+topDomain(window.location.href);"."===domain&&(domain=null),this._options=defaults(options,{maxage:31536e6,path:"/",domain:domain}),this.set("ajs:test",!0),this.get("ajs:test")||(debug("fallback to domain=null"),this._options.domain=null),this.remove("ajs:test")},Cookie.prototype.set=function(key,value){try{return value=json.stringify(value),cookie(key,value,clone(this._options)),!0}catch(e){return!1}},Cookie.prototype.get=function(key){try{var value=cookie(key);return value=value?json.parse(value):null}catch(e){return null}},Cookie.prototype.remove=function(key){try{return cookie(key,null,clone(this._options)),!0}catch(e){return!1}},module.exports=bindAll(new Cookie),module.exports.Cookie=Cookie},{"@ndhoule/clone":15,"@ndhoule/defaults":16,"@segment/top-domain":57,"bind-all":124,"component-cookie":127,debug:39,json3:157}],31:[function(require,module,exports){"use strict";function Entity(options){this.options(options),this.initialize()}var clone=require("@ndhoule/clone"),cookie=require("./cookie"),debug=require("debug")("analytics:entity"),defaults=require("@ndhoule/defaults"),extend=require("@ndhoule/extend"),memory=require("./memory"),store=require("./store"),isodateTraverse=require("@segment/isodate-traverse");module.exports=Entity,Entity.prototype.initialize=function(){return cookie.set("ajs:cookies",!0),cookie.get("ajs:cookies")?(cookie.remove("ajs:cookies"),void(this._storage=cookie)):store.enabled?void(this._storage=store):(debug("warning using memory store both cookies and localStorage are disabled"),void(this._storage=memory))},Entity.prototype.storage=function(){return this._storage},Entity.prototype.options=function(options){if(0===arguments.length)return this._options;this._options=defaults(options||{},this.defaults||{})},Entity.prototype.id=function(id){switch(arguments.length){case 0:return this._getId();case 1:return this._setId(id)}},Entity.prototype._getId=function(){var ret=this._options.persist?this.storage().get(this._options.cookie.key):this._id;return void 0===ret?null:ret},Entity.prototype._setId=function(id){this._options.persist?this.storage().set(this._options.cookie.key,id):this._id=id},Entity.prototype.properties=Entity.prototype.traits=function(traits){switch(arguments.length){case 0:return this._getTraits();case 1:return this._setTraits(traits)}},Entity.prototype._getTraits=function(){var ret=this._options.persist?store.get(this._options.localStorage.key):this._traits;return ret?isodateTraverse(clone(ret)):{}},Entity.prototype._setTraits=function(traits){traits=traits||{},
this._options.persist?store.set(this._options.localStorage.key,traits):this._traits=traits},Entity.prototype.identify=function(id,traits){traits=traits||{};var current=this.id();null!==current&&current!==id||(traits=extend(this.traits(),traits)),id&&this.id(id),this.debug("identify %o, %o",id,traits),this.traits(traits),this.save()},Entity.prototype.save=function(){return!!this._options.persist&&(cookie.set(this._options.cookie.key,this.id()),store.set(this._options.localStorage.key,this.traits()),!0)},Entity.prototype.logout=function(){this.id(null),this.traits({}),cookie.remove(this._options.cookie.key),store.remove(this._options.localStorage.key)},Entity.prototype.reset=function(){this.logout(),this.options({})},Entity.prototype.load=function(){this.id(cookie.get(this._options.cookie.key)),this.traits(store.get(this._options.localStorage.key))}},{"./cookie":30,"./memory":34,"./store":37,"@ndhoule/clone":15,"@ndhoule/defaults":16,"@ndhoule/extend":20,"@segment/isodate-traverse":50,debug:39}],32:[function(require,module,exports){"use strict";function Group(options){this.defaults=Group.defaults,this.debug=debug,Entity.call(this,options)}var Entity=require("./entity"),bindAll=require("bind-all"),debug=require("debug")("analytics:group"),inherit=require("inherits");Group.defaults={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},inherit(Group,Entity),module.exports=bindAll(new Group),module.exports.Group=Group},{"./entity":31,"bind-all":124,debug:39,inherits:150}],33:[function(require,module,exports){"use strict";var Analytics=require("./analytics"),analytics=new Analytics;analytics.VERSION=require("../package.json").version,module.exports=analytics},{"../package.json":40,"./analytics":29}],34:[function(require,module,exports){"use strict";function Memory(){this.store={}}var bindAll=require("bind-all"),clone=require("@ndhoule/clone"),has=Object.prototype.hasOwnProperty;module.exports=bindAll(new Memory),Memory.prototype.set=function(key,value){return this.store[key]=clone(value),!0},Memory.prototype.get=function(key){if(has.call(this.store,key))return clone(this.store[key])},Memory.prototype.remove=function(key){return delete this.store[key],!0}},{"@ndhoule/clone":15,"bind-all":124}],35:[function(require,module,exports){"use strict";function normalize(msg,list){function integration(name){return!(!includes(name,list)&&"all"!==name.toLowerCase()&&!includes(name.toLowerCase(),lower))}var lower=map(function(s){return s.toLowerCase()},list),opts=msg.options||{},integrations=opts.integrations||{},providers=opts.providers||{},context=opts.context||{},ret={};return debug("<-",msg),each(function(value,key){integration(key)&&(has.call(integrations,key)||(integrations[key]=value),delete opts[key])},opts),delete opts.providers,each(function(value,key){integration(key)&&"object"!==type(integrations[key])&&(has.call(integrations,key)&&"boolean"==typeof providers[key]||(integrations[key]=value))},providers),each(function(value,key){includes(key,toplevel)?ret[key]=opts[key]:context[key]=opts[key]},opts),delete msg.options,ret.integrations=integrations,ret.context=context,ret=defaults(ret,msg),debug("->",ret),ret}var debug=require("debug")("analytics.js:normalize"),defaults=require("@ndhoule/defaults"),each=require("@ndhoule/each"),includes=require("@ndhoule/includes"),map=require("@ndhoule/map"),type=require("component-type"),has=Object.prototype.hasOwnProperty;module.exports=normalize;var toplevel=["integrations","anonymousId","timestamp","context"]},{"@ndhoule/defaults":16,"@ndhoule/each":18,"@ndhoule/includes":22,"@ndhoule/map":24,"component-type":139,debug:39}],36:[function(require,module,exports){"use strict";function pageDefaults(){return{path:canonicalPath(),referrer:document.referrer,search:location.search,title:document.title,url:canonicalUrl(location.search)}}function canonicalPath(){var canon=canonical();return canon?url.parse(canon).pathname:window.location.pathname}function canonicalUrl(search){var canon=canonical();if(canon)return includes("?",canon)?canon:canon+search;var url=window.location.href,i=url.indexOf("#");return-1===i?url:url.slice(0,i)}var canonical=require("@segment/canonical"),includes=require("@ndhoule/includes"),url=require("component-url");module.exports=pageDefaults},{"@ndhoule/includes":22,"@segment/canonical":46,"component-url":140}],37:[function(require,module,exports){"use strict";function Store(options){this.options(options)}var bindAll=require("bind-all"),defaults=require("@ndhoule/defaults"),store=require("@segment/store");Store.prototype.options=function(options){if(0===arguments.length)return this._options;options=options||{},defaults(options,{enabled:!0}),this.enabled=options.enabled&&store.enabled,this._options=options},Store.prototype.set=function(key,value){return!!this.enabled&&store.set(key,value)},Store.prototype.get=function(key){return this.enabled?store.get(key):null},Store.prototype.remove=function(key){return!!this.enabled&&store.remove(key)},module.exports=bindAll(new Store),module.exports.Store=Store},{"@ndhoule/defaults":16,"@segment/store":55,"bind-all":124}],38:[function(require,module,exports){"use strict";function User(options){this.defaults=User.defaults,this.debug=debug,Entity.call(this,options)}var Entity=require("./entity"),bindAll=require("bind-all"),cookie=require("./cookie"),debug=require("debug")("analytics:user"),inherit=require("inherits"),rawCookie=require("component-cookie"),uuid=require("uuid");User.defaults={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},inherit(User,Entity),User.prototype.id=function(id){var prev=this._getId(),ret=Entity.prototype.id.apply(this,arguments);return null==prev?ret:(prev!=id&&id&&this.anonymousId(null),ret)},User.prototype.anonymousId=function(anonymousId){var store=this.storage();return arguments.length?(store.set("ajs_anonymous_id",anonymousId),this):(anonymousId=store.get("ajs_anonymous_id"))?anonymousId:(anonymousId=rawCookie("_sio"))?(anonymousId=anonymousId.split("----")[0],store.set("ajs_anonymous_id",anonymousId),store.remove("_sio"),anonymousId):(anonymousId=uuid.v4(),store.set("ajs_anonymous_id",anonymousId),store.get("ajs_anonymous_id"))},User.prototype.logout=function(){Entity.prototype.logout.call(this),this.anonymousId(null)},User.prototype.load=function(){this._loadOldCookie()||Entity.prototype.load.call(this)},User.prototype._loadOldCookie=function(){var user=cookie.get(this._options.cookie.oldKey);return!!user&&(this.id(user.id),this.traits(user.traits),cookie.remove(this._options.cookie.oldKey),!0)},module.exports=bindAll(new User),module.exports.User=User},{"./cookie":30,"./entity":31,"bind-all":124,"component-cookie":127,debug:39,inherits:150,uuid:197}],39:[function(require,module,exports){function debug(name){return debug.enabled(name)?function(fmt){fmt=coerce(fmt);var curr=new Date,ms=curr-(debug[name]||curr);debug[name]=curr,fmt=name+" "+fmt+" +"+debug.humanize(ms),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function coerce(val){return val instanceof Error?val.stack||val.message:val}module.exports=debug,debug.names=[],debug.skips=[],debug.enable=function(name){try{localStorage.debug=name}catch(e){}for(var split=(name||"").split(/[\s,]+/),len=split.length,i=0;i<len;i++)name=split[i].replace("*",".*?"),"-"===name[0]?debug.skips.push(new RegExp("^"+name.substr(1)+"$")):debug.names.push(new RegExp("^"+name+"$"))},debug.disable=function(){debug.enable("")},debug.humanize=function(ms){return ms>=36e5?(ms/36e5).toFixed(1)+"h":ms>=6e4?(ms/6e4).toFixed(1)+"m":ms>=1e3?(ms/1e3|0)+"s":ms+"ms"},debug.enabled=function(name){for(var i=0,len=debug.skips.length;i<len;i++)if(debug.skips[i].test(name))return!1;for(var i=0,len=debug.names.length;i<len;i++)if(debug.names[i].test(name))return!0;return!1};try{window.localStorage&&debug.enable(localStorage.debug)}catch(e){}},{}],40:[function(require,module,exports){module.exports={_from:"git+ssh://git@github.com/bigpictureio/analytics.js-core.git",_id:"@segment/analytics.js-core@3.4.0",_inBundle:!1,_location:"/@segment/analytics.js-core",_phantomChildren:{},_requested:{type:"git",raw:"@segment/analytics.js-core@git+ssh://git@github.com/bigpictureio/analytics.js-core.git",name:"@segment/analytics.js-core",escapedName:"@segment%2fanalytics.js-core",scope:"@segment",rawSpec:"git+ssh://git@github.com/bigpictureio/analytics.js-core.git",saveSpec:"git+ssh://git@github.com/bigpictureio/analytics.js-core.git",fetchSpec:"ssh://git@github.com/bigpictureio/analytics.js-core.git",gitCommittish:null},_requiredBy:["/"],_resolved:"git+ssh://git@github.com/bigpictureio/analytics.js-core.git#a2fc5f9943565dcdd7d4fcfef1ec046fbfa9565e",_spec:"@segment/analytics.js-core@git+ssh://git@github.com/bigpictureio/analytics.js-core.git",_where:"/Users/michael/code/analytics/integrations/client/analytics.js",author:{name:"Segment",email:"friends@segment.com"},bugs:{url:"https://github.com/segmentio/analytics.js-core/issues"},bundleDependencies:!1,dependencies:{"@ndhoule/after":"^1.0.0","@ndhoule/clone":"^1.0.0","@ndhoule/defaults":"^2.0.1","@ndhoule/each":"^2.0.1","@ndhoule/extend":"^2.0.0","@ndhoule/foldl":"^2.0.1","@ndhoule/includes":"^2.0.1","@ndhoule/keys":"^2.0.0","@ndhoule/map":"^2.0.1","@ndhoule/pick":"^2.0.0","@segment/canonical":"^1.0.0","@segment/is-meta":"^1.0.0","@segment/isodate":"^1.0.2","@segment/isodate-traverse":"^1.0.1","@segment/prevent-default":"^1.0.0","@segment/store":"^1.3.20","@segment/top-domain":"^3.0.0","bind-all":"^1.0.0","component-cookie":"^1.1.2","component-emitter":"^1.2.1","component-event":"^0.1.4","component-querystring":"^2.0.0","component-type":"^1.2.1","component-url":"^0.2.1",debug:"^0.7.4",extend:"3.0.1",inherits:"^2.0.1",install:"^0.7.3",is:"^3.1.0",json3:"^3.3.2","new-date":"^1.0.0","next-tick":"^0.2.2","segmentio-facade":"^3.0.2",uuid:"^2.0.2"},deprecated:!1,description:"The hassle-free way to integrate analytics into any web application.",devDependencies:{"@segment/analytics.js-integration":"^3.2.1","@segment/eslint-config":"^3.1.1",browserify:"13.0.0","compat-trigger-event":"^1.0.0","component-each":"^0.2.6",eslint:"^2.9.0","eslint-plugin-mocha":"^2.2.0","eslint-plugin-require-path-exists":"^1.1.5",jquery:"^3.2.1",karma:"1.3.0","karma-browserify":"^5.0.4","karma-chrome-launcher":"^1.0.1","karma-coverage":"^1.0.0","karma-junit-reporter":"^1.0.0","karma-mocha":"1.0.1","karma-phantomjs-launcher":"^1.0.0","karma-sauce-launcher":"^1.0.0","karma-spec-reporter":"0.0.26",mocha:"^2.2.5","phantomjs-prebuilt":"^2.1.7",proclaim:"^3.4.1",sinon:"^1.7.3",watchify:"^3.7.0"},homepage:"https://github.com/segmentio/analytics.js-core#readme",keywords:["analytics","analytics.js","segment","segment.io"],license:"SEE LICENSE IN LICENSE",main:"lib/index.js",name:"@segment/analytics.js-core",repository:{type:"git",url:"git+https://github.com/segmentio/analytics.js-core.git"},scripts:{test:"make test"},version:"3.4.0"}},{}],41:[function(require,module,exports){"use strict";function createIntegration(name){function Integration(options){if(options&&options.addIntegration)return options.addIntegration(Integration);this.debug=debug("analytics:integration:"+slug(name));var clonedOpts={};extend(!0,clonedOpts,options),this.options=defaults(clonedOpts||{},this.defaults),this._queue=[],this.once("ready",bind(this,this.flush)),Integration.emit("construct",this),this.ready=bind(this,this.ready),this._wrapInitialize(),this._wrapPage(),this._wrapTrack()}return Integration.prototype.defaults={},Integration.prototype.globals=[],Integration.prototype.templates={},Integration.prototype.name=name,extend(Integration,statics),extend(Integration.prototype,protos),Integration}var bind=require("component-bind"),debug=require("debug"),defaults=require("@ndhoule/defaults"),extend=require("extend"),slug=require("slug-component"),protos=require("./protos"),statics=require("./statics");module.exports=createIntegration},{"./protos":42,"./statics":43,"@ndhoule/defaults":16,"component-bind":125,debug:142,extend:146,"slug-component":184}],42:[function(require,module,exports){"use strict";function getMappingType(mapping){return is.array(mapping)?every(isMixed,mapping)?"mixed":"array":is.object(mapping)?"map":"unknown"}function isMixed(item){return!!is.object(item)&&(!!is.string(item.key)&&!!has.call(item,"value"))}function loadImage(attrs,fn){fn=fn||function(){};var img=new Image;return img.onerror=error(fn,"failed to load pixel",img),img.onload=function(){fn()},img.src=attrs.src,img.width=1,img.height=1,img}function error(fn,message,img){return function(e){e=e||window.event;var err=new Error(message);err.event=e,err.source=img,fn(err)}}function render(template,locals){return foldl(function(attrs,val,key){return attrs[key]=val.replace(/\{\{\ *(\w+)\ *\}\}/g,function(_,$1){return locals[$1]}),attrs},{},template.attrs)}var Emitter=require("component-emitter"),after=require("@ndhoule/after"),each=require("@ndhoule/each"),events=require("analytics-events"),every=require("@ndhoule/every"),fmt=require("@segment/fmt"),foldl=require("@ndhoule/foldl"),is=require("is"),loadIframe=require("load-iframe"),loadScript=require("@segment/load-script"),nextTick=require("next-tick"),normalize=require("to-no-case"),has=Object.prototype.hasOwnProperty,noop=function(){},onerror=window.onerror;Emitter(exports),exports.initialize=function(){var ready=this.ready;nextTick(ready)},exports.loaded=function(){return!1},exports.page=function(page){},exports.track=function(track){},exports.map=function(options,key){var normalizedComparator=normalize(key),mappingType=getMappingType(options);return"unknown"===mappingType?[]:foldl(function(matchingValues,val,key){var compare,result;return"map"===mappingType&&(compare=key,result=val),"array"===mappingType&&(compare=val,result=val),"mixed"===mappingType&&(compare=val.key,result=val.value),normalize(compare)===normalizedComparator&&matchingValues.push(result),matchingValues},[],options)},exports.invoke=function(method){if(this[method]){var args=Array.prototype.slice.call(arguments,1);return this._ready?(this.debug("%s with %o",method,args),this[method].apply(this,args)):this.queue(method,args)}},exports.queue=function(method,args){this._queue.push({method:method,args:args})},exports.flush=function(){this._ready=!0;var self=this;each(function(call){self[call.method].apply(self,call.args)},this._queue),this._queue.length=0},exports.reset=function(){for(var i=0;i<this.globals.length;i++)window[this.globals[i]]=void 0;window.onerror=onerror,window.onload=null},exports.load=function(name,locals,callback){"function"==typeof name&&(callback=name,locals=null,name=null),name&&"object"==typeof name&&(callback=locals,locals=name,name=null),"function"==typeof locals&&(callback=locals,locals=null),name=name||"library",locals=locals||{},locals=this.locals(locals);var template=this.templates[name];if(!template)throw new Error(fmt('template "%s" not defined.',name));var attrs=render(template,locals);callback=callback||noop;var el,self=this;switch(template.type){case"img":attrs.width=1,attrs.height=1,el=loadImage(attrs,callback);break;case"script":el=loadScript(attrs,function(err){if(!err)return callback();self.debug('error loading "%s" error="%s"',self.name,err)}),delete attrs.src,each(function(val,key){el.setAttribute(key,val)},attrs);break;case"iframe":el=loadIframe(attrs,callback)}return el},exports.locals=function(locals){locals=locals||{};var cache=Math.floor((new Date).getTime()/36e5);return locals.hasOwnProperty("cache")||(locals.cache=cache),each(function(val,key){locals.hasOwnProperty(key)||(locals[key]=val)},this.options),locals},exports.ready=function(){this.emit("ready")},exports._wrapInitialize=function(){var initialize=this.initialize;this.initialize=function(){this.debug("initialize"),this._initialized=!0;var ret=initialize.apply(this,arguments);return this.emit("initialize"),ret}},exports._wrapPage=function(){if(this._assumesPageview)return this.page=after(2,this.page)},exports._wrapTrack=function(){var t=this.track;this.track=function(track){var called,ret,event=track.event();for(var method in events)if(has.call(events,method)){var regexp=events[method];if(!this[method])continue;if(!regexp.test(event))continue;ret=this[method].apply(this,arguments),called=!0;break}return called||(ret=t.apply(this,arguments)),ret}}},{"@ndhoule/after":13,"@ndhoule/each":18,"@ndhoule/every":19,"@ndhoule/foldl":21,"@segment/fmt":48,"@segment/load-script":52,"analytics-events":44,"component-emitter":133,is:153,"load-iframe":159,"next-tick":166,"to-no-case":187}],43:[function(require,module,exports){"use strict";function objectify(str){str=str.replace(' src="',' data-src="');var el=domify(str),attrs={};return each(function(attr){var name="data-src"===attr.name?"src":attr.name;includes(attr.name+"=",str)&&(attrs[name]=attr.value)},el.attributes),{type:el.tagName.toLowerCase(),attrs:attrs}}var Emitter=require("component-emitter"),domify=require("domify"),each=require("@ndhoule/each"),includes=require("@ndhoule/includes");Emitter(exports),exports.option=function(key,value){return this.prototype.defaults[key]=value,this},exports.mapping=function(name){return this.option(name,[]),this.prototype[name]=function(key){return this.map(this.options[name],key)},this},exports.global=function(key){return this.prototype.globals.push(key),this},exports.assumesPageview=function(){return this.prototype._assumesPageview=!0,this},exports.readyOnLoad=function(){return this.prototype._readyOnLoad=!0,this},exports.readyOnInitialize=function(){return this.prototype._readyOnInitialize=!0,this},exports.tag=function(name,tag){return null==tag&&(tag=name,name="library"),this.prototype.templates[name]=objectify(tag),this}},{"@ndhoule/each":18,"@ndhoule/includes":22,"component-emitter":133,domify:145}],44:[function(require,module,exports){"use strict";var map=require("@ndhoule/map"),foldl=require("@ndhoule/foldl"),eventMap={videoPlaybackStarted:[{object:"video playback",action:"started"}],videoPlaybackPaused:[{object:"video playback",action:"paused"}],videoPlaybackInterrupted:[{object:"video playback",action:"interrupted"}],videoPlaybackResumed:[{object:"video playback",action:"resumed"}],videoPlaybackCompleted:[{object:"video playback",action:"completed"}],videoPlaybackBufferStarted:[{object:"video playback buffer",action:"started"}],videoPlaybackBufferCompleted:[{object:"video playback buffer",action:"completed"}],videoPlaybackSeekStarted:[{object:"video playback seek",action:"started"}],videoPlaybackSeekCompleted:[{object:"video playback seek",action:"completed"}],videoContentStarted:[{object:"video content",action:"started"}],videoContentPlaying:[{object:"video content",action:"playing"}],videoContentCompleted:[{object:"video content",action:"completed"}],videoAdStarted:[{object:"video ad",action:"started"}],videoAdPlaying:[{object:"video ad",action:"playing"}],videoAdCompleted:[{object:"video ad",action:"completed"}],promotionViewed:[{object:"promotion",action:"viewed"}],promotionClicked:[{object:"promotion",action:"clicked"}],productsSearched:[{object:"products",action:"searched"}],productListViewed:[{object:"product list",action:"viewed"},{object:"product category",action:"viewed"}],productListFiltered:[{object:"product list",action:"filtered"}],productClicked:[{object:"product",action:"clicked"}],productViewed:[{object:"product",action:"viewed"}],productAdded:[{object:"product",action:"added"}],productRemoved:[{object:"product",action:"removed"}],cartViewed:[{object:"cart",action:"viewed"}],orderUpdated:[{object:"order",action:"updated"}],orderCompleted:[{object:"order",action:"completed"}],orderRefunded:[{object:"order",action:"refunded"}],orderCancelled:[{object:"order",action:"cancelled"}],paymentInfoEntered:[{object:"payment info",action:"entered"}],checkoutStarted:[{object:"checkout",action:"started"}],checkoutStepViewed:[{object:"checkout step",action:"viewed"}],checkoutStepCompleted:[{object:"checkout step",action:"completed"}],couponEntered:[{object:"coupon",action:"entered"}],couponApplied:[{object:"coupon",action:"applied"}],couponDenied:[{object:"coupon",action:"denied"}],couponRemoved:[{object:"coupon",action:"removed"}],productAddedToWishlist:[{object:"product",action:"added to wishlist"}],productRemovedFromWishlist:[{object:"product",action:"removed from wishlist"}],productAddedFromWishlistToCart:[{object:"product",action:"added to cart from wishlist"},{object:"product",action:"added from wishlist to cart"}],productShared:[{object:"product",action:"shared"}],cartShared:[{object:"cart",action:"shared"}],productReviewed:[{object:"product",action:"reviewed"}],applicationInstalled:[{object:"application",action:"installed"}],applicationUpdated:[{object:"application",action:"updated"}],applicationOpened:[{object:"application",action:"opened"}],applicationBackgrounded:[{object:"application",action:"backgrounded"}],applicationUninstalled:[{object:"application",action:"uninstalled"}],applicationCrashed:[{object:"application",action:"crashed"}],installAttributed:[{object:"install",action:"attributed"}],deepLinkOpened:[{object:"deep link",action:"opened"}],pushNotificationReceived:[{object:"push notification",action:"received"}],pushNotificationTapped:[{object:"push notification",action:"tapped"}],pushNotificationBounced:[{object:"push notification",action:"bounced"}],emailBounced:[{object:"email",action:"bounced"}],emailDelivered:[{object:"email",action:"delivered"}],emailLinkClicked:[{object:"email link",action:"clicked"}],emailMarkedAsSpam:[{object:"email",action:"marked as spam"}],emailOpened:[{object:"email",action:"opened"}],unsubscribed:[{object:"",action:"unsubscribed"}]};module.exports=foldl(function(ret,pairs,method){var values=map(function(pair){return map(function(permutation){return"^[ _]?"+[].concat.apply([],map(function(words){return words.split(" ")},permutation)).join("[ _]?")+"[ _]?"},[[pair.action,pair.object],[pair.object,pair.action]]).join("|")},pairs),conjoined=values.join("|")+"$";return ret[method]=new RegExp(conjoined,"i"),ret},{},eventMap)},{"@ndhoule/foldl":21,"@ndhoule/map":24}],45:[function(require,module,exports){function encode(input){var chr1,chr2,chr3,enc1,enc2,enc3,enc4,output="",i=0;for(input=utf8Encode(input);i<input.length;)chr1=input.charCodeAt(i++),chr2=input.charCodeAt(i++),chr3=input.charCodeAt(i++),enc1=chr1>>2,enc2=(3&chr1)<<4|chr2>>4,enc3=(15&chr2)<<2|chr3>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output=output+keyStr.charAt(enc1)+keyStr.charAt(enc2)+keyStr.charAt(enc3)+keyStr.charAt(enc4);return output}var utf8Encode=require("utf8-encode"),keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";module.exports=encode},{"utf8-encode":195}],46:[function(require,module,exports){"use strict";function canonical(){for(var tag,tags=document.getElementsByTagName("link"),i=0;tag=tags[i];i++)if("canonical"===tag.getAttribute("rel"))return tag.getAttribute("href")}module.exports=canonical},{}],47:[function(require,module,exports){"use strict";function convertDates(obj,convert){return obj=clone(obj),each(function(val,key){"date"===type(val)&&(obj[key]=convert(val)),"object"!==type(val)&&"array"!==type(val)||(obj[key]=convertDates(val,convert))},obj),obj}var clone=require("@ndhoule/clone"),each=require("@ndhoule/each"),type=require("component-type");module.exports=convertDates},{"@ndhoule/clone":15,"@ndhoule/each":18,"component-type":139}],48:[function(require,module,exports){(function(global){"use strict";function fmt(str){var args=Array.prototype.slice.call(arguments,1),j=0;return str.replace(/%([a-z])/gi,function(match,f){return fmt[f]?fmt[f](args[j++]):match+f})}var toString=global.JSON&&"function"==typeof JSON.stringify?JSON.stringify:String;fmt.o=toString,fmt.s=String,fmt.d=parseInt,module.exports=fmt}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],49:[function(require,module,exports){"use strict";function isMeta(e){if(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)return!0;var which=e.which,button=e.button;return which||void 0===button?2===which:1&!button&&2&!button&&4&button}module.exports=isMeta},{}],50:[function(require,module,exports){"use strict";function traverse(input,strict){return void 0===strict&&(strict=!0),"object"===type(input)?object(input,strict):"array"===type(input)?array(input,strict):input}function object(obj,strict){return!obj.length||"number"!=typeof obj.length||obj.length-1 in obj||(obj.lengthNonArray=obj.length,delete obj.length),each(obj,function(key,val){isodate.is(val,strict)?obj[key]=isodate.parse(val):"object"!==type(val)&&"array"!==type(val)||traverse(val,strict)}),obj.lengthNonArray&&(obj.length=obj.lengthNonArray,delete obj.lengthNonArray),obj}function array(arr,strict){return each(arr,function(val,x){"object"===type(val)?traverse(val,strict):isodate.is(val,strict)&&(arr[x]=isodate.parse(val))}),arr}var type=require("component-type"),each=require("component-each"),isodate=require("@segment/isodate");module.exports=traverse},{"@segment/isodate":51,"component-each":131,"component-type":139}],51:[function(require,module,exports){"use strict";var matcher=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;exports.parse=function(iso){var numericKeys=[1,5,6,7,11,12],arr=matcher.exec(iso),offset=0;if(!arr)return new Date(iso);for(var val,i=0;val=numericKeys[i];i++)arr[val]=parseInt(arr[val],10)||0;arr[2]=parseInt(arr[2],10)||1,arr[3]=parseInt(arr[3],10)||1,arr[2]--,arr[8]=arr[8]?(arr[8]+"00").substring(0,3):0," "===arr[4]?offset=(new Date).getTimezoneOffset():"Z"!==arr[9]&&arr[10]&&(offset=60*arr[11]+arr[12],"+"===arr[10]&&(offset=0-offset));var millis=Date.UTC(arr[1],arr[2],arr[3],arr[5],arr[6]+offset,arr[7],arr[8]);return new Date(millis)},exports.is=function(string,strict){return"string"==typeof string&&((!strict||!1!==/^\d{4}-\d{2}-\d{2}/.test(string))&&matcher.test(string))}},{}],52:[function(require,module,exports){"use strict";function loadScript(options,cb){if(!options)throw new Error("Can't load nothing...");"string"===type(options)&&(options={src:options});var https="https:"===document.location.protocol||"chrome-extension:"===document.location.protocol;options.src&&0===options.src.indexOf("//")&&(options.src=(https?"https:":"http:")+options.src),https&&options.https?options.src=options.https:!https&&options.http&&(options.src=options.http);var script=document.createElement("script");return script.type="text/javascript",script.async=!0,script.src=options.src,"function"===type(cb)&&onload(script,cb),tick(function(){var firstScript=document.getElementsByTagName("script")[0];firstScript.parentNode.insertBefore(script,firstScript)}),script}var onload=require("script-onload"),tick=require("next-tick"),type=require("component-type");module.exports=loadScript},{"component-type":139,"next-tick":166,"script-onload":171}],53:[function(require,module,exports){"use strict";function preventDefault(e){return e=e||window.event,e.preventDefault?e.preventDefault():e.returnValue=!1}module.exports=preventDefault},{}],54:[function(require,module,exports){"use strict";function json(url,obj,headers,fn){function done(){if(4===req.readyState)return fn(null,req)}3===arguments.length&&(fn=headers,headers={});var req=new XMLHttpRequest;req.onerror=fn,req.onreadystatechange=done,req.open("POST",url,!0);for(var k in headers)req.setRequestHeader(k,headers[k]);req.send(JSON.stringify(obj))}function base64(url,obj,_,fn){3===arguments.length&&(fn=_);var prefix=exports.prefix,data=encode(obj);url+="?"+prefix+"="+data,jsonp(url,{param:exports.callback},function(err,obj){if(err)return fn(err);fn(null,{url:url,body:obj})})}function encode(obj){var str="";return str=JSON.stringify(obj),str=base64encode(str),str=str.replace(/\+/g,"-").replace(/\//g,"_"),encodeURIComponent(str)}var JSON=require("json3"),base64encode=require("@segment/base64-encode"),cors=require("has-cors"),jsonp=require("jsonp");exports=module.exports=cors?json:base64,exports.callback="callback",exports.prefix="data",exports.json=json,exports.base64=base64,exports.type=cors?"xhr":"jsonp"},{"@segment/base64-encode":45,"has-cors":149,json3:157,jsonp:158}],55:[function(require,module,exports){(function(global){"use strict";var JSON=require("json3");module.exports=function(){var storage,store={},win="undefined"!=typeof window?window:global,doc=win.document,localStorageName="localStorage";if(store.disabled=!1,store.version="1.3.20",store.set=function(key,value){},store.get=function(key,defaultVal){},store.has=function(key){return void 0!==store.get(key)},store.remove=function(key){},store.clear=function(){},store.transact=function(key,defaultVal,transactionFn){null==transactionFn&&(transactionFn=defaultVal,defaultVal=null),null==defaultVal&&(defaultVal={});var val=store.get(key,defaultVal);transactionFn(val),store.set(key,val)},store.getAll=function(){var ret={};return store.forEach(function(key,val){ret[key]=val}),ret},store.forEach=function(){},store.serialize=function(value){return JSON.stringify(value)},store.deserialize=function(value){if("string"==typeof value)try{return JSON.parse(value)}catch(e){return value||void 0}},function(){try{return localStorageName in win&&win[localStorageName]}catch(err){return!1}}())storage=win[localStorageName],store.set=function(key,val){return void 0===val?store.remove(key):(storage.setItem(key,store.serialize(val)),val)},store.get=function(key,defaultVal){var val=store.deserialize(storage.getItem(key));return void 0===val?defaultVal:val},store.remove=function(key){storage.removeItem(key)},store.clear=function(){storage.clear()},store.forEach=function(callback){for(var i=0;i<storage.length;i++){var key=storage.key(i);callback(key,store.get(key))}};else if(doc&&doc.documentElement.addBehavior){var storageOwner,storageContainer;try{storageContainer=new ActiveXObject("htmlfile"),storageContainer.open(),storageContainer.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></iframe>'),storageContainer.close(),storageOwner=storageContainer.w.frames[0].document,storage=storageOwner.createElement("div")}catch(e){storage=doc.createElement("div"),storageOwner=doc.body}var withIEStorage=function(storeFunction){return function(){var args=Array.prototype.slice.call(arguments,0);args.unshift(storage),storageOwner.appendChild(storage),storage.addBehavior("#default#userData"),storage.load(localStorageName);var result=storeFunction.apply(store,args);return storageOwner.removeChild(storage),result}},forbiddenCharsRegex=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),ieKeyFix=function(key){return key.replace(/^d/,"___$&").replace(forbiddenCharsRegex,"___")};store.set=withIEStorage(function(storage,key,val){return key=ieKeyFix(key),void 0===val?store.remove(key):(storage.setAttribute(key,store.serialize(val)),storage.save(localStorageName),val)}),store.get=withIEStorage(function(storage,key,defaultVal){key=ieKeyFix(key);var val=store.deserialize(storage.getAttribute(key));return void 0===val?defaultVal:val}),store.remove=withIEStorage(function(storage,key){key=ieKeyFix(key),storage.removeAttribute(key),storage.save(localStorageName)}),store.clear=withIEStorage(function(storage){var attributes=storage.XMLDocument.documentElement.attributes;storage.load(localStorageName);for(var i=attributes.length-1;i>=0;i--)storage.removeAttribute(attributes[i].name);storage.save(localStorageName)}),store.forEach=withIEStorage(function(storage,callback){for(var attr,attributes=storage.XMLDocument.documentElement.attributes,i=0;attr=attributes[i];++i)callback(attr.name,store.deserialize(storage.getAttribute(attr.name)))})}try{var testKey="__storejs__";store.set(testKey,testKey),store.get(testKey)!=testKey&&(store.disabled=!0),store.remove(testKey)}catch(e){store.disabled=!0}return store.enabled=!store.disabled,store}()
}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{json3:157}],56:[function(require,module,exports){"use strict";function pad(number){var n=number.toString();return 1===n.length?"0"+n:n}function toISOString(date){return date.getUTCFullYear()+"-"+pad(date.getUTCMonth()+1)+"-"+pad(date.getUTCDate())+"T"+pad(date.getUTCHours())+":"+pad(date.getUTCMinutes())+":"+pad(date.getUTCSeconds())+"."+String((date.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}module.exports=toISOString},{}],57:[function(require,module,exports){"use strict";function domain(url){for(var cookie=exports.cookie,levels=exports.levels(url),i=0;i<levels.length;++i){var domain=levels[i],opts={domain:"."+domain};if(cookie("__tld__",1,opts),cookie("__tld__"))return cookie("__tld__",null,opts),domain}return""}var parse=require("component-url").parse,cookie=require("component-cookie");domain.levels=function(url){var host=parse(url).hostname,parts=host.split("."),last=parts[parts.length-1],levels=[];if(4===parts.length&&last===parseInt(last,10))return levels;if(parts.length<=1)return levels;for(var i=parts.length-2;i>=0;--i)levels.push(parts.slice(i).join("."));return levels},domain.cookie=cookie,exports=module.exports=domain},{"component-cookie":127,"component-url":140}],58:[function(require,module,exports){module.exports={promotionViewed:/^[ _]?promotion[ _]?viewed?[ _]?$/i,viewedPromotion:/^[ _]?viewed[ _]?promotion?[ _]?$/i,promotionClicked:/^[ _]?promotion[ _]?clicked?[ _]?$/i,clickedPromotion:/^[ _]?clicked[ _]?promotion?[ _]?$/i,productsSearched:/^[ _]?products[ _]?searched[ _]?$/i,productListViewed:/^[ _]?product[ _]?list[ _]?viewed[ _]?$/i,productListFiltered:/^[ _]?product[ _]?list[ _]?filtered[ _]?$/i,viewedProductCategory:/^[ _]?viewed[ _]?product[ _]?category[ _]?$/i,viewedProductDetails:/^[ _]?viewed[ _]?product[ _]?details?[ _]?$/i,productClicked:/^[ _]?product[ _]?clicked[ _]?$/i,clickedProduct:/^[ _]?clicked[ _]?product[ _]?$/i,productViewed:/^[ _]?product[ _]?viewed[ _]?$/i,viewedProduct:/^[ _]?viewed[ _]?product[ _]?$/i,productAdded:/^[ _]?product[ _]?added[ _]?$/i,addedProduct:/^[ _]?added[ _]?product[ _]?$/i,productRemoved:/^[ _]?product[ _]?removed[ _]?$/i,removedProduct:/^[ _]?removed[ _]?product[ _]?$/i,cartViewed:/^[ _]?cart[ _]?viewed[ _]?$/i,orderStarted:/^[ _]?order[ _]?started[ _]?$/i,startedOrder:/^[ _]?started[ _]?order[ _]?$/i,orderUpdated:/^[ _]?order[ _]?updated[ _]?$/i,updatedOrder:/^[ _]?updated[ _]?order[ _]?$/i,orderCompleted:/^[ _]?order[ _]?completed[ _]?$/i,completedOrder:/^[ _]?completed[ _]?order[ _]?$/i,orderRefunded:/^[ _]?order[ _]?refunded[ _]?$/i,refundedOrder:/^[ _]?refunded[ _]?order[ _]?$/i,orderCancelled:/^[ _]?order[ _]?cancelled[ _]?$/i,paymentInfoAdded:/^[ _]?payment[ _]?info[ _]?added[ _]?$/i,checkoutStarted:/^[ _]?checkout[ _]?started[ _]?$/i,checkoutStepViewed:/^[ _]?checkout[ _]?step[ _]?viewed[ _]?$/i,viewedCheckoutStep:/^[ _]?viewed[ _]?checkout[ _]?step[ _]?$/i,checkoutStepCompleted:/^[ _]?checkout[ _]?step[ _]?completed[ _]?$/i,completedCheckoutStep:/^[ _]?completed[ _]?checkout[ _]?step[ _]?$/i,couponEntered:/^[ _]?coupon[ _]?entered[ _]?$/i,couponApplied:/^[ _]?coupon[ _]?applied[ _]?$/i,couponDenied:/^[ _]?coupon[ _]?denied[ _]?$/i,couponRemoved:/^[ _]?coupon[ _]?removed[ _]?$/i,productAddedToWishlist:/^[ _]?product[ _]?added[ _]?to[ _]?wishlist[ _]?$/i,wishlistProductRemoved:/^[ _]?wishlist[ _]?product[ _]?removed[ _]?$/i,wishlistProductAddedToCart:/^[ _]?wishlist[ _]?product[ _]?added[ _]?to[ _]?cart[ _]?$/i,productShared:/^[ _]?product[ _]?shared[ _]?$/i,cartShared:/^[ _]?cart[ _]?shared[ _]?$/i,productRemoved:/^[ _]?product[ _]?removed[ _]?$/i,applicationInstalled:/^[ _]?application[ _]?installed[ _]?$/i,applicationUpdated:/^[ _]?application[ _]?updated[ _]?$/i,applicationOpened:/^[ _]?application[ _]?opened[ _]?$/i,applicationBackgrounded:/^[ _]?application[ _]?backgrounded[ _]?$/i,applicationUninstalled:/^[ _]?application[ _]?uninstalled[ _]?$/i,installAttributed:/^[ _]?install[ _]?attributed[ _]?$/i,deepLinkOpened:/^[ _]?deep[ _]?link[ _]?opened[ _]?$/i,pushNotificationReceived:/^[ _]?push[ _]?notification[ _]?received[ _]?$/i,pushNotificationTapped:/^[ _]?push[ _]?notification[ _]?received[ _]?$/i,pushNotificationBounced:/^[ _]?push[ _]?notification[ _]?bounced[ _]?$/i}},{}],59:[function(require,module,exports){"use strict";var integration=require("analytics.js-integration-hook"),ActiveCampaign=module.exports=integration("ActiveCampaign").option("actid","").option("serverMethods","track,identify").tag("singleTag",'<script src="//trackcmp.net/visit?actid={{ actid }}&e={{ email }}&r={{ referrer }}&u={{ url }}"/>');ActiveCampaign.prototype.page=function(page){var traits=this.analytics.user().traits(),email=traits.email||"";this.load("singleTag",{actid:this.options.actid,email:encodeURIComponent(email),referrer:encodeURIComponent(page.referrer()),url:encodeURIComponent(page.url())})},ActiveCampaign.prototype.canSend=function(msg){return!!this.analytics.user().traits().email}},{"analytics.js-integration-hook":81}],60:[function(require,module,exports){"use strict";function sendConversion(events,data){each(function(segmentId){data.adroll_segments=segmentId,window.__adroll.record_user(data)},events)}function formulateData(track,alias){var aliases=alias||{};return foldl(function(props,val,key){return props[snake(key)]=val,props},track.properties(aliases))}var each=require("@ndhoule/each"),foldl=require("@ndhoule/foldl"),integration=require("@segment/analytics.js-integration"),snake=(require("@ndhoule/map"),require("to-snake-case")),useHttps=require("use-https"),AdRoll=module.exports=integration("AdRoll").assumesPageview().global("__adroll").global("__adroll_loaded").global("adroll_adv_id").global("adroll_custom_data").global("adroll_email").global("adroll_pix_id").option("advId","").option("pixId","").option("_version",2).tag("http",'<script src="http://a.adroll.com/j/roundtrip.js">').tag("https",'<script src="https://s.adroll.com/j/roundtrip.js">').mapping("events");AdRoll.prototype.initialize=function(){window.adroll_adv_id=this.options.advId,window.adroll_pix_id=this.options.pixId,window.__adroll_loaded=!0;var name=useHttps()?"https":"http";this.load(name,this.ready)},AdRoll.prototype.loaded=function(){return!!window.__adroll},AdRoll.prototype.page=function(page){this.track(page.track(page.fullName()))},AdRoll.prototype.identify=function(identify){identify.email()&&(window.adroll_email=identify.email(),window.__adroll.record_adroll_email("segment"))},AdRoll.prototype.track=function(track){var events=this.events(track.event()),userId=this.analytics.user().id(),data=formulateData(track,{revenue:"adroll_conversion_value"});userId&&(data.user_id=userId),sendConversion(events,data)},AdRoll.prototype.productViewed=AdRoll.prototype.productAdded=function(track){var events=this.events(track.event()),userId=this.analytics.user().id(),data=formulateData(track,{id:"product_id",productId:"product_id",price:"adroll_conversion_value"});userId&&(data.user_id=userId),sendConversion(events,data)},AdRoll.prototype.orderCompleted=function(track){var events=this.events(track.event()),userId=this.analytics.user().id(),data=formulateData(track,{orderId:"order_id",revenue:"adroll_conversion_value"});track.properties().currency&&(data.adroll_currency=track.properties().currency,delete data.currency),userId&&(data.user_id=userId),sendConversion(events,data)}},{"@ndhoule/each":18,"@ndhoule/foldl":21,"@ndhoule/map":24,"@segment/analytics.js-integration":41,"to-snake-case":188,"use-https":194}],61:[function(require,module,exports){"use strict";var each=require("@ndhoule/each"),integration=require("@segment/analytics.js-integration"),when=require("do-when"),AdWords=module.exports=integration("AdWords").option("conversionId","").option("remarketing",!1).tag('<script src="//www.googleadservices.com/pagead/conversion_async.js">').mapping("events");AdWords.prototype.initialize=function(){var loaded=this.loaded,ready=this.ready;this.load(function(){when(loaded,ready)})},AdWords.prototype.loaded=function(){return!(!document.body||!window.google_trackConversion)},AdWords.prototype.page=function(){var remarketing=!!this.options.remarketing,id=this.options.conversionId,props={};window.google_trackConversion({google_conversion_id:id,google_custom_params:props,google_remarketing_only:remarketing})},AdWords.prototype.track=function(track){var id=this.options.conversionId,events=this.events(track.event()),revenue=track.revenue()||0;each(function(label){var props=track.properties();delete props.revenue,window.google_trackConversion({google_conversion_id:id,google_custom_params:props,google_conversion_language:"en",google_conversion_format:"3",google_conversion_color:"ffffff",google_conversion_label:label,google_conversion_value:revenue,google_remarketing_only:!1})},events)}},{"@ndhoule/each":18,"@segment/analytics.js-integration":62,"do-when":144}],62:[function(require,module,exports){arguments[4][4][0].apply(exports,arguments)},{"./protos":63,"./statics":64,"@ndhoule/clone":15,"@ndhoule/defaults":16,"@ndhoule/extend":20,"component-bind":125,debug:142,dup:4,"slug-component":184}],63:[function(require,module,exports){arguments[4][5][0].apply(exports,arguments)},{"@ndhoule/after":13,"@ndhoule/each":18,"@ndhoule/every":19,"@ndhoule/foldl":21,"@segment/fmt":48,"@segment/load-script":52,"analytics-events":58,"component-emitter":133,dup:5,is:153,"load-iframe":159,"next-tick":166,"to-no-case":187}],64:[function(require,module,exports){arguments[4][6][0].apply(exports,arguments)},{"@ndhoule/each":18,"@ndhoule/includes":22,"component-emitter":133,domify:145,dup:6}],65:[function(require,module,exports){"use strict";function hasMethod(serverMethods,action){return!!serverMethods&&serverMethods.split(",").indexOf(action)>=0}function noop(){}var integration=require("@segment/analytics.js-integration"),nanoajax=require("nanoajax"),extend=require("@ndhoule/extend"),BigPicture=module.exports=integration("BigPicture").option("url","https://3mscbwu135.execute-api.us-west-2.amazonaws.com/prod/integrations");BigPicture.prototype.initialize=function(){this.analytics.on("invoke",this._handle.bind(this)),this.ready()},BigPicture.prototype.loaded=function(){return!0},BigPicture.prototype._handle=function(msg){var serverIntegrations={},_integrations=(msg.integrations(),this.analytics._integrations);for(var integration in _integrations){var current=_integrations[integration];if(msg.enabled(integration)&&current.options&&current.options.server&&hasMethod(current.options.serverMethods,msg.action())&&current.canSend()){var contextOpts=msg.options(integration);serverIntegrations[integration]=extend({},current.options,contextOpts)}}if(0!=Object.keys(serverIntegrations).length){var data=msg.json();data.integrations=serverIntegrations,this.send(data)}},BigPicture.prototype.normalize=function(msg){this.debug("normalize %o",msg);var user=this.analytics.user(),ctx=msg.context=msg.context||msg.options||{};switch(ctx.library={name:"analytics.js",version:this.analytics.VERSION},ctx.userAgent=navigator.userAgent,ctx.traits=user.traits(),msg.userId=msg.userId||user.id(),msg.anonymousId=user.anonymousId(),msg.sentAt=new Date,this.debug("normalized %o",msg),msg.type){case"track":msg.properties=msg.properties||{};break;case"identify":case"group":msg.traits=msg.traits||{}}return msg},BigPicture.prototype.send=function(msg,fn){var headers={"Content-Type":"application/json"};fn=fn||noop;var options=msg.options||{};options=Object.assign({},this.options.settings,options),msg=this.normalize(msg),msg.id=window.bigPicture.project.id,msg.settings=options;var data={auth:"0iPqA4p0U5",data:msg};nanoajax.ajax({url:this.options.url,method:"POST",headers:headers,cors:!0,body:JSON.stringify(data)},fn)}},{"@ndhoule/extend":20,"@segment/analytics.js-integration":41,nanoajax:161}],66:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration"),Bing=module.exports=integration("Bing Ads").global("UET").global("uetq").option("tagId","").tag('<script src="//bat.bing.com/bat.js">');Bing.prototype.initialize=function(){window.uetq=window.uetq||[];var self=this;self.load(function(){var setup={ti:self.options.tagId,q:window.uetq};window.uetq=new window.UET(setup),self.ready()})},Bing.prototype.loaded=function(){return!(!window.uetq||window.uetq.push===Array.prototype.push)},Bing.prototype.page=function(){window.uetq.push("pageLoad")},Bing.prototype.track=function(track){var event={ea:"track",el:track.event()};track.category()&&(event.ec=track.category()),track.revenue()&&(event.gv=track.revenue()),window.uetq.push(event)}},{"@segment/analytics.js-integration":67}],67:[function(require,module,exports){arguments[4][4][0].apply(exports,arguments)},{"./protos":68,"./statics":69,"@ndhoule/clone":15,"@ndhoule/defaults":16,"@ndhoule/extend":20,"component-bind":125,debug:142,dup:4,"slug-component":184}],68:[function(require,module,exports){arguments[4][5][0].apply(exports,arguments)},{"@ndhoule/after":13,"@ndhoule/each":18,"@ndhoule/every":19,"@ndhoule/foldl":21,"@segment/fmt":48,"@segment/load-script":52,"analytics-events":58,"component-emitter":133,dup:5,is:153,"load-iframe":159,"next-tick":166,"to-no-case":187}],69:[function(require,module,exports){arguments[4][6][0].apply(exports,arguments)},{"@ndhoule/each":18,"@ndhoule/includes":22,"component-emitter":133,domify:145,dup:6}],70:[function(require,module,exports){"use strict";var integration=require("analytics.js-integration-hook");module.exports=integration("CloseIo")},{"analytics.js-integration-hook":81}],71:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration"),CrazyEgg=module.exports=integration("Crazy Egg").assumesPageview().global("CE2").option("accountNumber","").tag('<script src="//script.crazyegg.com/pages/scripts/{{ path }}.js?{{ cacheBuster }}">');CrazyEgg.prototype.initialize=function(){var number=this.options.accountNumber,path=number.slice(0,4)+"/"+number.slice(4),cacheBuster=Math.floor((new Date).getTime()/36e5);this.load({path:path,cacheBuster:cacheBuster},this.ready)},CrazyEgg.prototype.loaded=function(){return!!window.CE2}},{"@segment/analytics.js-integration":41}],72:[function(require,module,exports){"use strict";function convertDate(date){return Math.floor(date.getTime()/1e3)}var Identify=require("segmentio-facade").Identify,alias=require("@segment/alias"),convertDates=require("@segment/convert-dates"),integration=require("@segment/analytics.js-integration"),Customerio=module.exports=integration("Customer.io").global("_cio").option("siteId","").option("useEmailAsId",!1).tag('<script id="cio-tracker" src="https://assets.customer.io/assets/track.js" data-site-id="{{ siteId }}">');Customerio.prototype.initialize=function(){window._cio=window._cio||[],function(){var a,b,c;for(a=function(f){return function(){window._cio.push([f].concat(Array.prototype.slice.call(arguments,0)))}},b=["identify","track"],c=0;c<b.length;c++)window._cio[b[c]]=a(b[c])}(),this.load(this.ready)},Customerio.prototype.loaded=function(){return!(!window._cio||window._cio.push===Array.prototype.push)},Customerio.prototype.identify=function(identify){var id=identify.userId(),traits=identify.traits();if(!id&&this.options.useEmailAsId&&traits.email&&(id=traits.email),!id)return this.debug("user id required");var traits=identify.traits({createdAt:"created"});traits=alias(traits,{created:"created_at"}),traits.id=id,traits=convertDates(traits,convertDate),window._cio.identify(traits)},Customerio.prototype.group=function(group){var traits=group.traits(),user=this.analytics.user();traits=alias(traits,function(trait){return"Group "+trait}),this.identify(new Identify({userId:user.id(),traits:traits}))},Customerio.prototype.track=function(track){var properties=track.properties();properties=convertDates(properties,convertDate),window._cio.track(track.event(),properties)}},{"@segment/alias":28,"@segment/analytics.js-integration":73,"@segment/convert-dates":47,"segmentio-facade":178}],73:[function(require,module,exports){arguments[4][4][0].apply(exports,arguments)},{"./protos":74,"./statics":75,"@ndhoule/clone":15,"@ndhoule/defaults":16,"@ndhoule/extend":20,"component-bind":125,debug:142,dup:4,"slug-component":184}],74:[function(require,module,exports){arguments[4][5][0].apply(exports,arguments)},{"@ndhoule/after":13,"@ndhoule/each":18,"@ndhoule/every":19,"@ndhoule/foldl":21,"@segment/fmt":48,"@segment/load-script":52,"analytics-events":58,"component-emitter":133,dup:5,is:153,"load-iframe":159,"next-tick":166,"to-no-case":187}],75:[function(require,module,exports){arguments[4][6][0].apply(exports,arguments)},{"@ndhoule/each":18,"@ndhoule/includes":22,"component-emitter":133,domify:145,dup:6}],76:[function(require,module,exports){"use strict";function formatRevenue(revenue){return Number(revenue||0).toFixed(2)}function formatTraits(analytics){var traits=analytics&&analytics.user().traits();if(!traits)return{};var firstName,lastName;if(traits.firstName)firstName=traits.firstName,lastName=traits.lastName;else{var nameArray=traits.name&&traits.name.toLowerCase().split(" ")||[];firstName=nameArray.shift(),lastName=nameArray.pop()}var gender=traits.gender&&traits.gender.slice(0,1).toLowerCase(),birthday=traits.birthday&&dateformat(traits.birthday,"yyyymmdd"),address=traits.address||{},city=address.city&&address.city.split(" ").join("").toLowerCase(),state=address.state&&address.state.toLowerCase(),postalCode=address.postalCode;return reject({em:traits.email,fn:firstName,ln:lastName,ph:traits.phone,ge:gender,db:birthday,ct:city,st:state,zp:postalCode})}var integration=require("@segment/analytics.js-integration"),foldl=require("@ndhoule/foldl"),each=require("@ndhoule/each"),reject=require("reject"),dateformat=require("dateformat"),Track=require("segmentio-facade").Track,FacebookPixel=module.exports=integration("Facebook Pixel").global("fbq").option("pixelId","").option("agent","big").option("valueIdentifier","value").option("initWithExistingTraits",!1).mapping("standardEvents").mapping("legacyEvents").tag('<script src="//connect.facebook.net/en_US/fbevents.js">');FacebookPixel.prototype.initialize=function(){if(window._fbq=function(){window.fbq.callMethod?window.fbq.callMethod.apply(window.fbq,arguments):window.fbq.queue.push(arguments)},window.fbq=window.fbq||window._fbq,window.fbq.push=window.fbq,window.fbq.loaded=!0,window.fbq.disablePushState=!0,window.fbq.agent=this.options.agent,window.fbq.version="2.0",window.fbq.queue=[],this.load(this.ready),this.options.initWithExistingTraits){var traits=formatTraits(this.analytics);window.fbq("init",this.options.pixelId,traits)}else window.fbq("init",this.options.pixelId)},FacebookPixel.prototype.loaded=function(){return!(!window.fbq||!window.fbq.callMethod)},FacebookPixel.prototype.page=function(){window.fbq("track","PageView")},FacebookPixel.prototype.track=function(track){var event=track.event(),revenue=formatRevenue(track.revenue()),payload=foldl(function(acc,val,key){return"revenue"===key?(acc.value=revenue,acc):(acc[key]=val,acc)},{},track.properties()),standard=this.standardEvents(event),legacy=this.legacyEvents(event);if(![].concat(standard,legacy).length)return void window.fbq("trackCustom",event,payload);each(function(event){"Purchase"===event&&(payload.currency=track.currency()),window.fbq("track",event,payload)},standard),each(function(event){window.fbq("track",event,{currency:track.currency(),value:revenue})},legacy)},FacebookPixel.prototype.productListViewed=function(track){window.fbq("track","ViewContent",{content_ids:[track.category()||""],content_type:"product_group"}),each(function(event){window.fbq("track",event,{currency:track.currency(),value:formatRevenue(track.revenue())})},this.legacyEvents(track.event()))},FacebookPixel.prototype.productViewed=function(track){window.fbq("track","ViewContent",{content_ids:[track.productId()||track.id()||track.sku()||""],content_type:"product",content_name:track.name()||"",content_category:track.category()||"",currency:track.currency(),value:formatRevenue("value"===this.options.valueIdentifier?track.value():track.price())}),each(function(event){window.fbq("track",event,{currency:track.currency(),value:formatRevenue(track.revenue())})},this.legacyEvents(track.event()))},FacebookPixel.prototype.productAdded=function(track){window.fbq("track","AddToCart",{content_ids:[track.productId()||track.id()||track.sku()||""],content_type:"product",content_name:track.name()||"",content_category:track.category()||"",currency:track.currency(),value:formatRevenue("value"===this.options.valueIdentifier?track.value():track.price())}),each(function(event){window.fbq("track",event,{currency:track.currency(),value:formatRevenue(track.revenue())})},this.legacyEvents(track.event()))},FacebookPixel.prototype.orderCompleted=function(track){var content_ids=foldl(function(acc,product){var item=new Track({properties:product}),key=item.productId()||item.id()||item.sku();return key&&acc.push(key),acc},[],track.products()||[]),revenue=formatRevenue(track.revenue());window.fbq("track","Purchase",{content_ids:content_ids,content_type:"product",currency:track.currency(),value:revenue}),each(function(event){window.fbq("track",event,{currency:track.currency(),value:formatRevenue(track.revenue())})},this.legacyEvents(track.event()))}},{"@ndhoule/each":18,"@ndhoule/foldl":21,"@segment/analytics.js-integration":41,dateformat:141,reject:170,"segmentio-facade":178}],77:[function(require,module,exports){function buildPayload(actionName,properties,dataConfig){return properties.name=actionName,dataConfig&&dataConfig.event?properties.event=properties[dataConfig.event]:(properties.event=properties.name,delete properties.name),properties}var integration=require("@segment/analytics.js-integration"),push=require("global-queue")("dataLayer",{wrap:!1}),GTM=module.exports=integration("Google Tag Manager").global("dataLayer").global("google_tag_manager").option("containerId","").option("trackNamedPages",!0).option("trackCategorizedPages",!0).tag('<script src="//www.googletagmanager.com/gtm.js?id={{ containerId }}&l=dataLayer">');GTM.prototype.initialize=function(){push({"gtm.start":Number(new Date),event:"gtm.js"}),this.load(this.ready)},GTM.prototype.loaded=function(){return!(!window.dataLayer||Array.prototype.push===window.dataLayer.push)},GTM.prototype.page=function(page){var category=page.category(),name=page.fullName(),opts=this.options;opts.trackAllPages&&this.track(page.track()),category&&opts.trackCategorizedPages&&this.track(page.track(category)),name&&opts.trackNamedPages&&this.track(page.track(name))},GTM.prototype.track=function(track){var payload,dataConfig,contextOpts=track.options(this.name),props=track.properties();dataConfig=contextOpts.dataConfig,payload=buildPayload(track.event(),props,dataConfig),push(payload)}},{"@segment/analytics.js-integration":78,"global-queue":148}],78:[function(require,module,exports){arguments[4][4][0].apply(exports,arguments)},{"./protos":79,"./statics":80,"@ndhoule/clone":15,"@ndhoule/defaults":16,"@ndhoule/extend":20,"component-bind":125,debug:142,dup:4,"slug-component":184}],79:[function(require,module,exports){arguments[4][5][0].apply(exports,arguments)},{"@ndhoule/after":13,"@ndhoule/each":18,"@ndhoule/every":19,"@ndhoule/foldl":21,"@segment/fmt":48,"@segment/load-script":52,"analytics-events":58,"component-emitter":133,dup:5,is:153,"load-iframe":159,"next-tick":166,"to-no-case":187}],80:[function(require,module,exports){arguments[4][6][0].apply(exports,arguments)},{"@ndhoule/each":18,"@ndhoule/includes":22,"component-emitter":133,domify:145,dup:6}],81:[function(require,module,exports){"use strict";function build(integrationName){function IntegrationWrapper(options){return options&&options.addIntegration?options.addIntegration(IntegrationWrapper):(extend(Hook.prototype,IntegrationWrapper.prototype),new Hook(options))}var Hook=integration(integrationName).option("url",integrationsUrl).option("server",!0).option("settings",{});return Hook.prototype.initialize=function(){this.ready()},Hook.prototype.loaded=function(){return!0},Hook.prototype.normalize=function(msg){this.debug("normalize %o",msg);var user=this.analytics.user(),ctx=msg.context=msg.context||msg.options||{};return delete msg.options,delete msg.integrations,ctx.userAgent=navigator.userAgent,ctx.traits=user.traits(),msg.userId=msg.userId||user.id(),msg.anonymousId=user.anonymousId(),msg.sentAt=new Date,this.debug("normalized %o",msg),msg},Hook.prototype.send=function(msg,fn){var headers={"Content-Type":"application/json"};fn=fn||noop;var options=msg.options||{};options=extend(this.options,options),msg=this.normalize(msg),msg.id=window.bigPicture.project.id,msg.integration=this.name,msg.settings=options;var data={auth:INTEGRATION_AUTH,data:msg};nanoajax.ajax({url:this.options.url,method:"POST",headers:headers,cors:!0,body:JSON.stringify(data)},fn)},IntegrationWrapper.prototype.name=integrationName,extend(IntegrationWrapper,Hook),extend(IntegrationWrapper.prototype,Hook.prototype),IntegrationWrapper}function noop(){}var integration=require("@segment/analytics.js-integration"),nanoajax=require("nanoajax"),extend=require("@ndhoule/extend"),INTEGRATION_AUTH="0iPqA4p0U5",integrationsUrl="https://3mscbwu135.execute-api.us-west-2.amazonaws.com/prod/integrations";module.exports=build},{"@ndhoule/extend":20,"@segment/analytics.js-integration":41,nanoajax:161}],82:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration"),isObject=require("isobject"),Hotjar=module.exports=integration("Hotjar").global("hj").global("_hjSettings").option("hjid","").option("hjsv","5").tag("<script async src='//static.hotjar.com/c/hotjar-{{hjid}}.js?sv={{hjsv}}'>");Hotjar.prototype.initialize=function(){window._hjSettings=window._hjSettings||{},window._hjSettings.hjid=this.options.hjid,window._hjSettings.hjsv=this.options.hjsv,this.load()},Hotjar.prototype.loaded=function(){return isObject(window.hj)}},{"@segment/analytics.js-integration":83,isobject:155}],83:[function(require,module,exports){arguments[4][4][0].apply(exports,arguments)},{"./protos":84,"./statics":85,"@ndhoule/clone":15,"@ndhoule/defaults":16,"@ndhoule/extend":20,"component-bind":125,debug:142,dup:4,"slug-component":184}],84:[function(require,module,exports){arguments[4][5][0].apply(exports,arguments)},{"@ndhoule/after":13,"@ndhoule/each":18,"@ndhoule/every":19,"@ndhoule/foldl":21,"@segment/fmt":48,"@segment/load-script":52,"analytics-events":58,"component-emitter":133,dup:5,is:153,"load-iframe":159,"next-tick":166,"to-no-case":187}],85:[function(require,module,exports){arguments[4][6][0].apply(exports,arguments)},{"@ndhoule/each":18,"@ndhoule/includes":22,"component-emitter":133,domify:145,dup:6}],86:[function(require,module,exports){"use strict";function convertDates(properties){return convert(properties,function(date){return date.getTime()})}function formatTraits(traits){var ret={};return each(function(value,key){var k=key.toLowerCase().replace(/\s/g,"_");ret[k]=value},traits),ret}var convert=require("@segment/convert-dates"),integration=require("@segment/analytics.js-integration"),push=require("global-queue")("_hsq"),each=require("@ndhoule/each"),HubSpot=module.exports=integration("HubSpot").global("_hsq").option("portalId",null).tag('<script id="hs-analytics" src="https://js.hs-analytics.net/analytics/{{ cacheBuster }}/{{ portalId }}.js">');HubSpot.prototype.initialize=function(){window._hsq=[];var cacheBuster=3e5*Math.ceil(new Date/3e5);this.load({cacheBuster:cacheBuster},this.ready)},HubSpot.prototype.loaded=function(){return!(!window._hsq||window._hsq.push===Array.prototype.push)},HubSpot.prototype.page=function(){push("trackPageView")},HubSpot.prototype.identify=function(identify){if(identify.email()){var traits=identify.traits({firstName:"firstname",lastName:"lastname"});traits=convertDates(traits),traits=formatTraits(traits),push("identify",traits)}},HubSpot.prototype.track=function(track){var props=convertDates(track.properties({id:"_id",revenue:"value"}));props.id=track.event(),push("trackEvent",track.event(),props)}},{"@ndhoule/each":18,"@segment/analytics.js-integration":87,"@segment/convert-dates":47,"global-queue":148}],87:[function(require,module,exports){arguments[4][4][0].apply(exports,arguments)},{"./protos":88,"./statics":89,"@ndhoule/clone":15,"@ndhoule/defaults":16,"@ndhoule/extend":20,"component-bind":125,debug:142,dup:4,"slug-component":184}],88:[function(require,module,exports){arguments[4][5][0].apply(exports,arguments)},{"@ndhoule/after":13,"@ndhoule/each":18,"@ndhoule/every":19,"@ndhoule/foldl":21,"@segment/fmt":48,"@segment/load-script":52,"analytics-events":58,"component-emitter":133,dup:5,is:153,"load-iframe":159,"next-tick":166,"to-no-case":187}],89:[function(require,module,exports){arguments[4][6][0].apply(exports,arguments)},{"@ndhoule/each":18,"@ndhoule/includes":22,"component-emitter":133,domify:145,dup:6}],90:[function(require,module,exports){"use strict";function formatDate(date){return Math.floor(date/1e3)}function formatNestedCustomTraits(obj,settings){var blacklisted=settings.blacklisted||{},defaultMethod=settings.defaultMethod||"flatten",richLinkProperties=settings.richLinkProperties,basicIntercomTraits=["companies","company","created_at","created","custom_attributes","company_id","id","name","monthly_spend","plan","remote_created_at","remove","user_id","email"],semanticTraits=basicIntercomTraits.concat(richLinkProperties),customTraits=clone(obj);each(function(trait){del(customTraits,trait)},semanticTraits);var standardTraits=pick(semanticTraits,obj),formattedTraits=foldl(function(attrs,value,key){var trait=blacklisted[key];if("stringify"===trait)attrs.stringify[key]=value;else if("flatten"===trait)attrs.flatten[key]=value;else{if("drop"===trait)return attrs;if("object"==typeof value){if("stringify"===defaultMethod&&(attrs.stringify[key]=value),"flatten"===defaultMethod&&(attrs.flatten[key]=value),"drop"===defaultMethod)return attrs}else attrs.nonNestedTraits[key]=value}return attrs},{flatten:{},stringify:{},nonNestedTraits:{}},customTraits),stringifiedTraits=foldl(function(ret,value,key){return ret[key]=JSON.stringify(value),ret},{},formattedTraits.stringify),flattenedTraits=foldl(function(ret,value,key){var pair={};return pair[key]=value,ret=extend(flatten(pair),ret)},{},formattedTraits.flatten);return extend(standardTraits,stringifiedTraits,flattenedTraits,formattedTraits.nonNestedTraits)}function api(){window.Intercom.apply(window.Intercom,arguments)}function hideDefaultLauncher(options){var ret={},setting=options.hideDefaultLauncher;return void 0===setting||"boolean"!=typeof setting?ret:(ret.hide_default_launcher=setting,ret)}var convertDates=require("@segment/convert-dates"),defaults=require("@ndhoule/defaults"),del=require("obj-case").del,integration=require("@segment/analytics.js-integration"),is=require("is"),extend=require("@ndhoule/extend"),foldl=require("@ndhoule/foldl"),flatten=require("flat"),JSON=require("json3"),clone=require("@ndhoule/clone"),each=require("@ndhoule/each"),pick=require("@ndhoule/pick"),Intercom=module.exports=integration("Intercom").global("Intercom").option("activator","#IntercomDefaultWidget").option("appId","").option("blacklisted",{}).option("defaultMethod","flatten").option("richLinkProperties",[]).tag('<script src="https://widget.intercom.io/widget/{{ appId }}">');Intercom.prototype.initialize=function(){window.Intercom=function(){window.Intercom.q.push(arguments)},window.Intercom.q=[],this.load(function(){var integrationSettings=this.options;this.bootOrUpdate({},integrationSettings),this.ready()}.bind(this))},Intercom.prototype.loaded=function(){return"function"==typeof window.Intercom},Intercom.prototype.page=function(page){var integrationSettings=page.options(this.name);this.bootOrUpdate({},integrationSettings)},Intercom.prototype.identify=function(identify){
var traits=identify.traits({userId:"user_id"}),integrationSettings=identify.options(this.name),companyCreated=identify.companyCreated(),created=identify.created(),name=identify.name(),id=identify.userId(),group=this.analytics.group(),settings=this.options;(id||identify.email())&&(null===traits.company||is.object(traits.company)||delete traits.company,traits.company&&defaults(traits.company,group.traits()),name&&(traits.name=name),created&&(del(traits,"created"),del(traits,"createdAt"),traits.created_at=created),companyCreated&&(del(traits.company,"created"),del(traits.company,"createdAt"),traits.company.created_at=companyCreated),traits=convertDates(traits,formatDate),traits=formatNestedCustomTraits(traits,settings),integrationSettings.userHash&&(traits.user_hash=integrationSettings.userHash),integrationSettings.user_hash&&(traits.user_hash=integrationSettings.user_hash),this.bootOrUpdate(traits,integrationSettings))},Intercom.prototype.group=function(group){var settings=this.options,props=group.traits({createdAt:"created",created:"created_at",monthlySpend:"monthly_spend"});props=convertDates(props,formatDate);var id=group.groupId();id&&(props.id=id);var integrationSettings=group.options(this.name);props=formatNestedCustomTraits(props,settings),api("update",extend({company:props},hideDefaultLauncher(integrationSettings)))},Intercom.prototype.track=function(track){var settings=this.options,props=track.properties(),revenue=track.revenue();if(revenue)var revenueData={price:{amount:100*revenue,currency:track.currency()}};props=formatNestedCustomTraits(props,settings),props=extend(props,revenueData),del(props,"revenue"),del(props,"currency"),api("trackEvent",track.event(),props)},Intercom.prototype.bootOrUpdate=function(options,integrationSettings){options=options||{};var method=!0===this.booted?"update":"boot",activator=this.options.activator;options.app_id=this.options.appId,"#IntercomDefaultWidget"!==activator&&(options.widget={activator:activator}),options=extend(options,hideDefaultLauncher(integrationSettings)),api(method,options),this.booted=!0}},{"@ndhoule/clone":15,"@ndhoule/defaults":16,"@ndhoule/each":18,"@ndhoule/extend":20,"@ndhoule/foldl":21,"@ndhoule/pick":25,"@segment/analytics.js-integration":91,"@segment/convert-dates":47,flat:147,is:153,json3:157,"obj-case":167}],91:[function(require,module,exports){arguments[4][4][0].apply(exports,arguments)},{"./protos":92,"./statics":93,"@ndhoule/clone":15,"@ndhoule/defaults":16,"@ndhoule/extend":20,"component-bind":125,debug:142,dup:4,"slug-component":184}],92:[function(require,module,exports){arguments[4][5][0].apply(exports,arguments)},{"@ndhoule/after":13,"@ndhoule/each":18,"@ndhoule/every":19,"@ndhoule/foldl":21,"@segment/fmt":48,"@segment/load-script":52,"analytics-events":58,"component-emitter":133,dup:5,is:153,"load-iframe":159,"next-tick":166,"to-no-case":187}],93:[function(require,module,exports){arguments[4][6][0].apply(exports,arguments)},{"@ndhoule/each":18,"@ndhoule/includes":22,"component-emitter":133,domify:145,dup:6}],94:[function(require,module,exports){"use strict";function filter(facade,list){for(var ret=facade.properties(),x=0;x<list.length;x++)remove(ret,list[x]);return ret}function formatItems(track){return foldl(function(payloads,props){var product=new Track({properties:props}),itemWhitelist=["$event_id","$value","name","product categories","category","id","productId","product_id","sku","quantity","price","productUrl","imageUrl"],itemCustomProps=filter(product,itemWhitelist),item=reject({$value:product.price(),Name:product.name(),Quantity:product.quantity(),ProductCategories:[product.category()],ProductURL:product.proxy("properties.productUrl"),ImageURL:product.proxy("properties.imageUrl"),SKU:product.sku()}),identifier=product.productId()||product.id()||product.sku();return item.$event_id=track.orderId()+"_"+identifier,item=extend(item,itemCustomProps),payloads.push(item),payloads},[],track.products())}function formatProducts(products){return foldl(function(payloads,props){var product=new Track({properties:props}),whitelist=["id","product_id","productId","sku","name","quantity","itemPrice","price","rowTotal","categories","category","productUrl","imageUrl"],customProps=filter(product,whitelist),item=reject({id:product.productId()||product.id(),SKU:product.sku(),Name:product.name(),Quantity:product.quantity(),ItemPrice:product.price(),RowTotal:product.price(),Categories:[product.category()],ProductURL:product.proxy("properties.productUrl"),ImageURL:product.proxy("properties.imageUrl")});return item=extend(item,customProps),payloads.items.push(item),payloads.categories.push(product.category()),payloads.names.push(product.name()),payloads},{categories:[],names:[],items:[]},products)}function reject(obj){return foldl(function(result,val,key){return void 0!==val&&(result[key]=val),result},{},obj)}var integration=require("@segment/analytics.js-integration"),push=require("global-queue")("_learnq"),tick=require("next-tick"),Track=require("segmentio-facade").Track,foldl=require("@ndhoule/foldl"),remove=require("obj-case").del,extend=require("@ndhoule/extend"),Klaviyo=module.exports=integration("Klaviyo").assumesPageview().global("_learnq").option("apiKey","").option("enforceEmail",!1).tag('<script src="//a.klaviyo.com/media/js/analytics/analytics.js">');Klaviyo.prototype.initialize=function(){var self=this;push("account",this.options.apiKey),this.load(function(){tick(self.ready)})},Klaviyo.prototype.loaded=function(){return!(!window._learnq||window._learnq.push===Array.prototype.push)},Klaviyo.prototype.identify=function(identify){if(identify.userId()||identify.email()){var traitAliases={email:"$email",id:"$id",firstName:"$first_name",lastName:"$last_name",phone:"$phone_number",title:"$title"},traits=identify.traits(traitAliases);this.options.enforceEmail&&(remove(traits,"id"),remove(traits,"$id")),this.options.enforceEmail&&!traits.$email||push("identify",traits)}},Klaviyo.prototype.group=function(group){var props=group.properties();props.name&&push("identify",{$organization:props.name})},Klaviyo.prototype.track=function(track){push("track",track.event(),track.properties({revenue:"$value"}))},Klaviyo.prototype.orderCompleted=function(track){var products=formatProducts(track.products()),payload={$event_id:track.orderId(),$value:track.revenue(),Categories:products.categories,ItemNames:products.names,Items:products.items},whitelist=["$event_id","$value","orderId","order_id","categories","itemNames","items","revenue","total","products"],topLevelCustomProps=filter(track,whitelist);payload=extend(payload,topLevelCustomProps),push("track",track.event(),payload);for(var productProperties=formatItems(track),x=0;x<productProperties.length;x++)push("track","Ordered Product",productProperties[x])}},{"@ndhoule/extend":20,"@ndhoule/foldl":21,"@segment/analytics.js-integration":41,"global-queue":148,"next-tick":166,"obj-case":167,"segmentio-facade":178}],95:[function(require,module,exports){function formatParams(params){var querystring=[];for(var i in params)querystring.push(i+"="+params[i]);return querystring.join("&")}var integration=require("@segment/analytics.js-integration"),when=require("do-when"),Marketo=module.exports=integration("Marketo").global("Munchkin").option("accountId","").tag('<script src="//munchkin.marketo.net/munchkin.js">');Marketo.prototype.initialize=function(){function initMunchkin(){!1===didInit&&(didInit=!0,Munchkin.init(options.accountId))}var loaded=this.loaded,ready=this.ready,options=this.options,didInit=!1;this.load(function(){when(loaded,function(){initMunchkin(),ready()})})},Marketo.prototype.loaded=function(){return!(!window.Munchkin||!window.Munchkin.init)},Marketo.prototype.page=function(page){this.track(page.track())},Marketo.prototype.track=function(track){var props=track.properties();props.action=track.event();var params=formatParams(props);Munchkin.munchkinFunction("visitWebPage",{url:document.location.path,params:params})}},{"@segment/analytics.js-integration":96,"do-when":144}],96:[function(require,module,exports){arguments[4][4][0].apply(exports,arguments)},{"./protos":97,"./statics":98,"@ndhoule/clone":15,"@ndhoule/defaults":16,"@ndhoule/extend":20,"component-bind":125,debug:142,dup:4,"slug-component":184}],97:[function(require,module,exports){arguments[4][5][0].apply(exports,arguments)},{"@ndhoule/after":13,"@ndhoule/each":18,"@ndhoule/every":19,"@ndhoule/foldl":21,"@segment/fmt":48,"@segment/load-script":52,"analytics-events":58,"component-emitter":133,dup:5,is:153,"load-iframe":159,"next-tick":166,"to-no-case":187}],98:[function(require,module,exports){arguments[4][6][0].apply(exports,arguments)},{"@ndhoule/each":18,"@ndhoule/includes":22,"component-emitter":133,domify:145,dup:6}],99:[function(require,module,exports){function lowercase(arr){for(var ret=new Array(arr.length),i=0;i<arr.length;++i)ret[i]=String(arr[i]).toLowerCase();return ret}function mapTraits(arr){for(var ret=new Array(arr.length),i=0;i<arr.length;++i)traitAliases.hasOwnProperty(arr[i])?ret.push(traitAliases[arr[i]]):ret.push(arr[i]);return ret}function extendTraits(arr){var keys=[];for(var key in traitAliases)traitAliases.hasOwnProperty(key)&&keys.push(key);for(var i=0;i<keys.length;++i)indexOf(arr,keys[i])<0&&arr.push(keys[i]);return arr}function buildPayload(event,properties,dataConfig){var payload={};return payload.event=event,dataConfig&&dataConfig.event&&properties[dataConfig.event]&&(payload.event=properties[dataConfig.event],properties.name=event),payload.props=properties,payload}var alias=require("@segment/alias"),dates=require("@segment/convert-dates"),del=require("obj-case").del,includes=require("@ndhoule/includes"),integration=require("@segment/analytics.js-integration"),iso=require("@segment/to-iso-string"),pick=require("@ndhoule/pick"),is=require("is"),indexOf=require("component-indexof"),Mixpanel=module.exports=integration("Mixpanel").global("mixpanel").option("useSiteConfig",!1).option("increments",[]).option("peopleProperties",[]).option("superProperties",[]).option("cookieName","").option("crossSubdomainCookie",!0).option("secureCookie",!1).option("persistence","cookie").option("nameTag",!0).option("pageview",!1).option("people",!1).option("token","").option("setAllTraitsByDefault",!0).option("trackAllPages",!1).option("trackNamedPages",!0).option("trackCategorizedPages",!0).tag('<script src="//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js">'),optionsAliases={cookieName:"cookie_name",crossSubdomainCookie:"cross_subdomain_cookie",secureCookie:"secure_cookie"};Mixpanel.prototype.initialize=function(){if(this.options.useSiteConfig)return this.ready();!function(c,a){window.mixpanel=a;var h,e;a._i=[],a.init=function(b,c,f){var g=a;for(void 0!==f?g=a[f]=[]:f="mixpanel",g.people=g.people||[],h=["disable","time_event","track","track_pageview","track_links","track_forms","register","register_once","unregister","identify","alias","name_tag","set_config","people.set","people.increment","people.track_charge","people.append","people.union","people.track_charge","people.clear_charges","people.delete_user"],e=0;e<h.length;e++)!function(a,b){var c=b.split(".");2==c.length&&(a=a[c[0]],b=c[1]),a[b]=function(){a.push([b].concat(Array.prototype.slice.call(arguments,0)))}}(g,h[e]);a._i.push([b,c,f])},a.__SV=1.2}(document,window.mixpanel||[]),this.options.increments=lowercase(this.options.increments);var options=alias(this.options,optionsAliases);window.mixpanel.init(options.token,options),this.load(this.ready)},Mixpanel.prototype.loaded=function(){return!(!window.mixpanel||!window.mixpanel.config)},Mixpanel.prototype.page=function(page){var category=page.category(),name=page.name(),opts=this.options;return opts.trackAllPages?void this.track(page.track()):opts.trackCategorizedPages&&category?name?void this.track(page.track(page.fullName())):void this.track(page.track(category)):void(name&&opts.trackNamedPages&&this.track(page.track(name)))};var traitAliases={created:"$created",email:"$email",firstName:"$first_name",lastName:"$last_name",lastSeen:"$last_seen",name:"$name",username:"$username",phone:"$phone"};Mixpanel.prototype.identify=function(identify){var username=identify.username(),email=identify.email(),id=identify.userId(),setAllTraitsByDefault=this.options.setAllTraitsByDefault,people=this.options.people,peopleProperties=extendTraits(this.options.peopleProperties),superProperties=this.options.superProperties;id&&window.mixpanel.identify(id);var nametag=email||username||id;nametag&&window.mixpanel.name_tag(nametag);var traits=identify.traits(traitAliases);traits.$created&&del(traits,"createdAt"),setAllTraitsByDefault&&(window.mixpanel.register(dates(traits,iso)),this.options.people&&window.mixpanel.people.set(traits));var mappedSuperProps=mapTraits(superProperties),superProps=pick(mappedSuperProps||[],traits);if(is.empty(superProps)||window.mixpanel.register(superProps),people){var mappedPeopleProps=mapTraits(peopleProperties),peopleProps=pick(mappedPeopleProps||[],traits);is.empty(peopleProps)||window.mixpanel.people.set(peopleProps)}},Mixpanel.prototype.track=function(track){var payload,dataConfig,contextOpts=track.options(this.name),increments=this.options.increments,increment=track.event().toLowerCase(),people=this.options.people,props=track.properties(),revenue=track.revenue(),superProps=pick(this.options.superProperties,props);delete props.distinct_id,delete props.ip,delete props.mp_name_tag,delete props.mp_note,delete props.token,people&&includes(increment,increments)&&(window.mixpanel.people.increment(track.event()),window.mixpanel.people.set("Last "+track.event(),new Date)),props=dates(props,iso),dataConfig=contextOpts.dataConfig,payload=buildPayload(track.event(),props,dataConfig),window.mixpanel.track(payload.event,payload.props),is.empty(superProps)||window.mixpanel.register(superProps),revenue&&people&&window.mixpanel.people.track_charge(revenue)},Mixpanel.prototype.alias=function(alias){var mp=window.mixpanel,to=alias.to();mp.get_distinct_id&&mp.get_distinct_id()===to||mp.get_property&&mp.get_property("$people_distinct_id")===to||mp.alias(to,alias.from())}},{"@ndhoule/includes":22,"@ndhoule/pick":25,"@segment/alias":28,"@segment/analytics.js-integration":100,"@segment/convert-dates":47,"@segment/to-iso-string":56,"component-indexof":135,is:153,"obj-case":167}],100:[function(require,module,exports){arguments[4][4][0].apply(exports,arguments)},{"./protos":101,"./statics":102,"@ndhoule/clone":15,"@ndhoule/defaults":16,"@ndhoule/extend":20,"component-bind":125,debug:142,dup:4,"slug-component":184}],101:[function(require,module,exports){arguments[4][5][0].apply(exports,arguments)},{"@ndhoule/after":13,"@ndhoule/each":18,"@ndhoule/every":19,"@ndhoule/foldl":21,"@segment/fmt":48,"@segment/load-script":52,"analytics-events":58,"component-emitter":133,dup:5,is:153,"load-iframe":159,"next-tick":166,"to-no-case":187}],102:[function(require,module,exports){arguments[4][6][0].apply(exports,arguments)},{"@ndhoule/each":18,"@ndhoule/includes":22,"component-emitter":133,domify:145,dup:6}],103:[function(require,module,exports){"use strict";function api(action,value){window.olark("api."+action,value)}function configure(action,value){window.olark.configure(action,value)}var https=require("use-https"),integration=require("@segment/analytics.js-integration"),tick=require("next-tick"),Olark=module.exports=integration("Olark").assumesPageview().global("olark").option("groupId","").option("identify",!0).option("listen",!1).option("page",!0).option("siteId","").option("track",!1).option("inline",!1),integrationContext={name:"olark",version:"1.0.0"};Olark.prototype.initialize=function(){var self=this;this.load(function(){tick(self.ready)});var groupId=this.options.groupId;groupId&&api("chat.setOperatorGroup",{group:groupId}),api("box.onExpand",function(){self._open=!0}),api("box.onShrink",function(){self._open=!1}),this.options.listen&&this.attachListeners()},Olark.prototype.load=function(callback){window.olark||function(c){var f=window,d=document,l=https()?"https:":"http:",z=c.name,r="load",nt=function(){function s(){a.P(r),f[z](r)}f[z]=function(){(a.s=a.s||[]).push(arguments)};for(var a=f[z]._={},q=c.methods.length;q--;)!function(n){f[z][n]=function(){f[z]("call",n,arguments)}}(c.methods[q]);a.l=c.loader,a.i=nt,a.p={0:+new Date},a.P=function(u){a.p[u]=new Date-a.p[0]},f.addEventListener?f.addEventListener(r,s,!1):f.attachEvent("on"+r,s);var ld=function(){function p(hd){return hd="head",["<",hd,"></",hd,"><",i,' onload="var d=',g,";d.getElementsByTagName('head')[0].",j,"(d.",h,"('script')).",k,"='",l,"//",a.l,"'",'"',"></",i,">"].join("")}var i="body",m=d[i];if(!m)return setTimeout(ld,100);a.P(1);var o,j="appendChild",h="createElement",k="src",n=d[h]("div"),v=n[j](d[h](z)),b=d[h]("iframe"),g="document",e="domain";n.style.display="none",m.insertBefore(n,m.firstChild).id=z,b.frameBorder="0",b.id=z+"-loader",/MSIE[ ]+6/.test(navigator.userAgent)&&(b.src="javascript:false"),b.allowTransparency="true",v[j](b);try{b.contentWindow[g].open()}catch(w){c[e]=d[e],o="javascript:var d="+g+".open();d.domain='"+d.domain+"';",b[k]=o+"void(0);"}try{var t=b.contentWindow[g];t.write(p()),t.close()}catch(x){b[k]=o+'d.write("'+p().replace(/"/g,String.fromCharCode(92)+'"')+'");d.close();'}a.P(2)};ld()};nt()}({loader:"static.olark.com/jsclient/loader0.js",name:"olark",methods:["configure","extend","declare","identify"]}),this.options.inline&&configure("box.inline",!0),window.olark.identify(this.options.siteId),callback()},Olark.prototype.loaded=function(){return!!window.olark},Olark.prototype.page=function(page){if(this.options.page){var props=page.properties(),name=page.fullName();(name||props.url)&&(name=name?name+" page":props.url,this.notify("looking at "+name))}},Olark.prototype.identify=function(identify){if(this.options.identify){var username=identify.username(),traits=identify.traits(),id=identify.userId(),email=identify.email(),phone=identify.phone(),name=identify.name()||identify.firstName();traits&&api("visitor.updateCustomFields",traits),email&&api("visitor.updateEmailAddress",{emailAddress:email}),phone&&api("visitor.updatePhoneNumber",{phoneNumber:phone}),name&&api("visitor.updateFullName",{fullName:name});var nickname=name||email||username||id;name&&email&&(nickname+=" ("+email+")"),nickname&&api("chat.updateVisitorNickname",{snippet:nickname})}},Olark.prototype.track=function(track){this.options.track&&this.notify('visitor triggered "'+track.event()+'"')},Olark.prototype.attachListeners=function(){var self=this;api("chat.onBeginConversation",function(){self.analytics.track("Live Chat Conversation Started",{},{context:{integration:integrationContext},integrations:{Olark:!1}})}),api("chat.onMessageToOperator",function(){self.analytics.track("Live Chat Message Sent",{},{context:{integration:integrationContext},integrations:{Olark:!1}})}),api("chat.onMessageToVisitor",function(){self.analytics.track("Live Chat Message Received",{},{context:{integration:integrationContext},integrations:{Olark:!1}})})},Olark.prototype.notify=function(message){this._open&&(message=message.toLowerCase(),api("visitor.getDetails",function(data){data&&data.isConversing&&api("chat.sendNotificationToOperator",{body:message})}))}},{"@segment/analytics.js-integration":41,"next-tick":166,"use-https":194}],104:[function(require,module,exports){"use strict";var keys=require("@ndhoule/keys"),values=require("@ndhoule/values"),foldl=require("@ndhoule/foldl"),each=require("@ndhoule/each"),integration=require("@segment/analytics.js-integration"),push=require("global-queue")("optimizely",{wrap:!1}),tick=require("next-tick"),Optimizely=module.exports=integration("Optimizely").option("trackCategorizedPages",!0).option("trackNamedPages",!0).option("variations",!1).option("listen",!0).option("nonInteraction",!1),optimizelyContext={name:"optimizely",version:"2.0.0"};Optimizely.prototype.initialize=function(){var self=this;push({type:"integration",OAuthClientId:"8259530493"}),tick(function(){Optimizely.initOptimizelyIntegration({referrerOverride:self.setEffectiveReferrer.bind(self),sendExperimentData:self.sendClassicDataToSegment.bind(self),sendCampaignData:self.sendNewDataToSegment.bind(self)})}),this.ready()},Optimizely.prototype.track=function(track){var payload={type:"event",eventName:track.event(),tags:track.properties()};track.revenue()&&(payload.tags.revenue*=100),push(payload);var optimizelyClientInstance=window.optimizelyClientInstance;if(optimizelyClientInstance&&optimizelyClientInstance.track){var attributes=track.properties(),optimizelyOptions=track.options("Optimizely"),userId=optimizelyOptions.userId||track.userId();userId&&optimizelyClientInstance.track(track.event(),userId,attributes,payload.tags.revenue)}},Optimizely.prototype.page=function(page){var category=page.category(),name=page.fullName(),opts=this.options;category&&opts.trackCategorizedPages&&this.track(page.track(category)),name&&opts.trackNamedPages&&this.track(page.track(name))},Optimizely.prototype.sendClassicDataToSegment=function(experimentState){var experiment=experimentState.experiment,variations=experimentState.variations,sections=experimentState.sections,context={integration:optimizelyContext},variationsMap=foldl(function(results,variation){return results[variation.id]=variation.name,results},{},variations),variationIds=keys(variationsMap).sort(),variationNames=values(variationsMap).sort();if(this.options.listen){var props={experimentId:experiment.id,experimentName:experiment.name,variationId:variationIds.join(),variationName:variationNames.join(", ")};if(experiment.referrer&&(props.referrer=experiment.referrer,context.page={referrer:experiment.referrer}),sections){for(var activeSections={},variationIdsToSectionsMap=foldl(function(results,section,sectionId){return each(function(variationId){results[variationId]={id:sectionId,name:section.name}},section.variation_ids),results},{},sections),j=0;j<variationIds.length;j++){var activeVariation=variationIds[j],activeSection=variationIdsToSectionsMap[activeVariation];activeSection&&(activeSections[activeSection.id]=activeSection.name)}props.sectionId=keys(activeSections).sort().join(),props.sectionName=values(activeSections).sort().join(", ")}this.options.nonInteraction&&(props.nonInteraction=1),this.analytics.track("Experiment Viewed",props,context)}if(this.options.variations){var traits={};traits["Experiment: "+experiment.name]=variationNames.join(", "),this.analytics.identify(traits)}},Optimizely.prototype.sendNewDataToSegment=function(campaignState){var experiment=campaignState.experiment,variation=campaignState.variation,context={integration:optimizelyContext},audiencesMap=foldl(function(results,audience){return results[audience.id]=audience.name,results},{},campaignState.audiences),audienceIds=keys(audiencesMap).sort().join(),audienceNames=values(audiencesMap).sort().join(", ");if(this.options.listen){var props={campaignName:campaignState.campaignName,campaignId:campaignState.id,experimentId:experiment.id,experimentName:experiment.name,variationName:variation.name,variationId:variation.id,audienceId:audienceIds,audienceName:audienceNames};experiment.referrer&&(props.referrer=experiment.referrer,context.page={referrer:experiment.referrer}),this.options.nonInteraction&&(props.nonInteraction=1),this.analytics.track("Experiment Viewed",props,context)}if(this.options.variations){var traits={};traits["Experiment: "+experiment.name]=variation.name,this.analytics.identify(traits)}},Optimizely.prototype.setEffectiveReferrer=function(referrer){if(referrer)return window.optimizelyEffectiveReferrer=referrer},Optimizely.initOptimizelyIntegration=function(handlers){!function(referrerOverride,sendExperimentData){var data=window.optimizely&&window.optimizely.data,state=data&&data.state;if(state){var activeExperiments=state.activeExperiments;if(state.redirectExperiment){for(var redirectExperimentId=state.redirectExperiment.experimentId,index=-1,i=0;i<state.activeExperiments.length;i++)if(state.activeExperiments[i]===redirectExperimentId){index=i;break}-1===index&&activeExperiments.push(redirectExperimentId),referrerOverride(state.redirectExperiment.referrer)}for(var k=0;k<activeExperiments.length;k++){var currentExperimentId=activeExperiments[k],activeExperimentState={experiment:{id:currentExperimentId,name:data.experiments[currentExperimentId].name},variations:[],sections:data.sections};state.redirectExperiment&&currentExperimentId===redirectExperimentId&&state.redirectExperiment.referrer&&(activeExperimentState.experiment.referrer=state.redirectExperiment.referrer);for(var variationIds=state.variationIdsMap[activeExperimentState.experiment.id],j=0;j<variationIds.length;j++){var id=variationIds[j],name=data.variations[id].name;activeExperimentState.variations.push({id:id,name:name})}sendExperimentData(activeExperimentState)}}}(handlers.referrerOverride,handlers.sendExperimentData),function(referrerOverride,sendCampaignData){var newActiveCampaign=function(id,referrer){var state=window.optimizely.get&&window.optimizely.get("state");if(state){var activeCampaigns=state.getCampaignStates({isActive:!0}),campaignState=activeCampaigns[id];referrer&&(campaignState.experiment.referrer=referrer),sendCampaignData(campaignState)}},checkReferrer=function(){var state=window.optimizely.get&&window.optimizely.get("state");if(state){var referrer=state.getRedirectInfo()&&state.getRedirectInfo().referrer;if(referrer)return referrerOverride(referrer),referrer}};!function(){window.optimizely=window.optimizely||[];var state=window.optimizely.get&&window.optimizely.get("state");if(state){var referrer=checkReferrer(),activeCampaigns=state.getCampaignStates({isActive:!0});for(var id in activeCampaigns)({}).hasOwnProperty.call(activeCampaigns,id)&&(referrer?newActiveCampaign(id,referrer):newActiveCampaign(id))}else window.optimizely.push({type:"addListener",filter:{type:"lifecycle",name:"initialized"},handler:function(){checkReferrer()}})}(),function(){window.optimizely=window.optimizely||[],window.optimizely.push({type:"addListener",filter:{type:"lifecycle",name:"campaignDecided"},handler:function(event){var id=event.data.campaign.id;newActiveCampaign(id)}})}()}(handlers.referrerOverride,handlers.sendCampaignData)}},{"@ndhoule/each":18,"@ndhoule/foldl":21,"@ndhoule/keys":23,"@ndhoule/values":27,"@segment/analytics.js-integration":105,"global-queue":148,"next-tick":109}],105:[function(require,module,exports){arguments[4][4][0].apply(exports,arguments)},{"./protos":106,"./statics":107,"@ndhoule/clone":15,"@ndhoule/defaults":16,"@ndhoule/extend":20,"component-bind":125,debug:142,dup:4,"slug-component":184}],106:[function(require,module,exports){arguments[4][5][0].apply(exports,arguments)},{"@ndhoule/after":13,"@ndhoule/each":18,"@ndhoule/every":19,"@ndhoule/foldl":21,"@segment/fmt":48,"@segment/load-script":52,"analytics-events":58,"component-emitter":133,dup:5,is:153,"load-iframe":159,"next-tick":108,"to-no-case":187}],107:[function(require,module,exports){arguments[4][6][0].apply(exports,arguments)},{"@ndhoule/each":18,"@ndhoule/includes":22,"component-emitter":133,domify:145,dup:6}],108:[function(require,module,exports){(function(process,setImmediate){"use strict";var callable,byObserver;callable=function(fn){if("function"!=typeof fn)throw new TypeError(fn+" is not a function");return fn},byObserver=function(Observer){var queue,node=document.createTextNode(""),i=0;return new Observer(function(){var data;if(queue){if(data=queue,queue=null,"function"==typeof data)return void data();data.forEach(function(fn){fn()})}}).observe(node,{characterData:!0}),function(fn){if(callable(fn),queue)return void("function"==typeof queue?queue=[queue,fn]:queue.push(fn));queue=fn,node.data=i=++i%2}},module.exports=function(){if(void 0!==process&&process&&"function"==typeof process.nextTick)return process.nextTick;if("object"==typeof document&&document){if("function"==typeof MutationObserver)return byObserver(MutationObserver);if("function"==typeof WebKitMutationObserver)return byObserver(WebKitMutationObserver)}return"function"==typeof setImmediate?function(cb){setImmediate(callable(cb))}:"function"==typeof setTimeout?function(cb){setTimeout(callable(cb),0)}:null}()}).call(this,require("_process"),require("timers").setImmediate)},{_process:169,timers:185}],109:[function(require,module,exports){(function(process,setImmediate){"use strict";var callable,byObserver;callable=function(fn){if("function"!=typeof fn)throw new TypeError(fn+" is not a function");return fn},byObserver=function(Observer){var queue,currentQueue,node=document.createTextNode(""),i=0;return new Observer(function(){var callback;if(queue)currentQueue&&(queue=currentQueue.concat(queue));else{if(!currentQueue)return;queue=currentQueue}if(currentQueue=queue,queue=null,"function"==typeof currentQueue)return callback=currentQueue,currentQueue=null,void callback();for(node.data=i=++i%2;currentQueue;)callback=currentQueue.shift(),currentQueue.length||(currentQueue=null),callback()}).observe(node,{characterData:!0}),function(fn){if(callable(fn),queue)return void("function"==typeof queue?queue=[queue,fn]:queue.push(fn));queue=fn,node.data=i=++i%2}},module.exports=function(){if("object"==typeof process&&process&&"function"==typeof process.nextTick)return process.nextTick;if("object"==typeof document&&document){if("function"==typeof MutationObserver)return byObserver(MutationObserver);if("function"==typeof WebKitMutationObserver)return byObserver(WebKitMutationObserver)}return"function"==typeof setImmediate?function(cb){setImmediate(callable(cb))}:"function"==typeof setTimeout||"object"==typeof setTimeout?function(cb){setTimeout(callable(cb),0)}:null}()}).call(this,require("_process"),require("timers").setImmediate)},{_process:169,timers:185}],110:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration"),push=require("global-queue")("_pq"),PerfectAudience=module.exports=integration("Perfect Audience").assumesPageview().global("_pq").option("siteId","").tag('<script src="//tag.marinsm.com/serve/{{ siteId }}.js">');PerfectAudience.prototype.initialize=function(){window._pq=window._pq||[],this.load(this.ready)},PerfectAudience.prototype.loaded=function(){return!(!window._pq||!window._pq.push)},PerfectAudience.prototype.track=function(track){var total=track.total()||track.revenue(),orderId=track.orderId(),props={},sendProps=!1;return total&&(props.revenue=total,sendProps=!0),orderId&&(props.orderId=orderId,sendProps=!0),sendProps?push("track",track.event(),props):push("track",track.event())},PerfectAudience.prototype.productViewed=function(track){var product=track.productId()||track.id()||track.sku();push("track",track.event()),push("trackProduct",product)},PerfectAudience.prototype.orderCompleted=function(track){var total=track.total()||track.revenue(),orderId=track.orderId(),props={};total&&(props.revenue=total),orderId&&(props.orderId=orderId),push("track",track.event(),props)}},{"@segment/analytics.js-integration":41,"global-queue":148}],111:[function(require,module,exports){"use strict";var integration=require("analytics.js-integration-hook");(module.exports=integration("Redshift").option("serverMethods","track,identify,page,group,alias")).prototype.canSend=function(msg){return!0}},{"analytics.js-integration-hook":81}],112:[function(require,module,exports){function buildPayload(event,properties,dataConfig){var payload={};return payload.event=event,dataConfig&&dataConfig.event&&properties[dataConfig.event]&&(payload.event=properties[dataConfig.event],properties.name=event),payload.props=properties,payload}var integration=require("@segment/analytics.js-integration"),Segment=exports=module.exports=integration("Segment.io").global("analytics").option("apiKey","").tag('<script src="//cdn.segment.com/analytics.js/v1/{{ apiKey }}/analytics.min.js">');Segment.prototype.initialize=function(){!function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize){
if(analytics.invoked)return void(window.console&&console.error&&console.error("Segment snippet included twice."));analytics.invoked=!0,analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"],analytics.factory=function(method){return function(){var args=Array.prototype.slice.call(arguments);return args.unshift(method),analytics.push(args),analytics}};for(var i=0;i<analytics.methods.length;i++){var key=analytics.methods[i];analytics[key]=analytics.factory(key)}}}(),this.load(this.ready)},Segment.prototype.loaded=function(){return!!window.analytics},Segment.prototype.page=function(page){var category=page.category();category?window.analytics.page(category,page.name(),page.properties()):window.analytics.page(page.name(),page.properties())},Segment.prototype.track=function(track){var payload,dataConfig,contextOpts=track.options(this.name),props=track.properties();dataConfig=contextOpts.dataConfig,payload=buildPayload(track.event(),props,dataConfig),window.analytics.track(payload.event,payload.props)},Segment.prototype.identify=function(identify){var opts=identify.options(this.name),id=identify.userId(),traits=identify.traits();window.analytics.identify(id,traits,opts)}},{"@segment/analytics.js-integration":113}],113:[function(require,module,exports){arguments[4][4][0].apply(exports,arguments)},{"./protos":114,"./statics":115,"@ndhoule/clone":15,"@ndhoule/defaults":16,"@ndhoule/extend":20,"component-bind":125,debug:142,dup:4,"slug-component":184}],114:[function(require,module,exports){arguments[4][5][0].apply(exports,arguments)},{"@ndhoule/after":13,"@ndhoule/each":18,"@ndhoule/every":19,"@ndhoule/foldl":21,"@segment/fmt":48,"@segment/load-script":52,"analytics-events":58,"component-emitter":133,dup:5,is:153,"load-iframe":159,"next-tick":166,"to-no-case":187}],115:[function(require,module,exports){arguments[4][6][0].apply(exports,arguments)},{"@ndhoule/each":18,"@ndhoule/includes":22,"component-emitter":133,domify:145,dup:6}],116:[function(require,module,exports){"use strict";var integration=require("analytics.js-integration-hook");(module.exports=integration("Slack").option("serverMethods","track")).prototype.canSend=function(msg){return!0}},{"analytics.js-integration-hook":81}],117:[function(require,module,exports){"use strict";function setStatus(properties){return properties.status?{status:properties.status}:{}}var integration=require("@segment/analytics.js-integration"),defaults=require("@ndhoule/defaults"),foldl=require("@ndhoule/foldl"),each=require("component-each"),get=require("obj-case"),Track=require("segmentio-facade").Track,extend=require("@ndhoule/extend"),TwitterAds=module.exports=integration("Twitter Ads").option("page","").option("universalTagPixelId","").option("identifier","productId").tag("singleTag",'<img src="//analytics.twitter.com/i/adsct?txn_id={{ pixelId }}&p_id=Twitter&tw_sale_amount={{ revenue }}&tw_order_quantity={{ quantity }}"/>').tag("universalTag",'<script src="//static.ads-twitter.com/uwt.js">').mapping("events");TwitterAds.prototype.initialize=function(){var self=this;this.options.universalTagPixelId?(!function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments)},s.version="1.1",s.queue=[])}(window,document),this.load("universalTag",function(){window.twq("init",self.options.universalTagPixelId),self.ready()})):this.ready()},TwitterAds.prototype.page=function(page){this.options.universalTagPixelId?window.twq("track","PageView"):this.options.page&&this.load("singleTag",{pixelId:this.options.page,revenue:0,quantity:0})},TwitterAds.prototype.track=function(track){this.fireLegacyConversionTags(track)},TwitterAds.prototype.productsSearched=function(track){if(this.fireLegacyConversionTags(track),this.options.universalTagPixelId){var payload=setStatus(track.properties());window.twq("track","Search",payload)}},TwitterAds.prototype.productViewed=function(product){if(this.fireLegacyConversionTags(product),this.options.universalTagPixelId){var props=product.properties(),identifier=this.options.identifier,payload={content_ids:[product[identifier]()],content_type:"product",content_name:product.name(),content_category:product.category()};payload=extend(payload,setStatus(props)),window.twq("track","ViewContent",payload)}},TwitterAds.prototype.productAdded=function(product){if(this.fireLegacyConversionTags(product),this.options.universalTagPixelId){var props=product.properties(),identifier=this.options.identifier,payload={content_ids:[product[identifier]()],content_type:"product",content_name:product.name()};payload=extend(payload,setStatus(props)),window.twq("track","AddToCart",payload)}},TwitterAds.prototype.orderCompleted=function(track){var identifier=this.options.identifier,sumOfQuantities=foldl(function(cartQuantity,product){return cartQuantity+(get(product,"quantity")||0)},0,track.products());if(this.fireLegacyConversionTags(track,{quantity:sumOfQuantities}),this.options.universalTagPixelId){var payload={currency:track.currency(),content_type:"product",order_id:track.orderId(),num_items:sumOfQuantities.toString()};track.revenue()&&(payload.value=track.revenue().toFixed(2)),payload=extend(payload,setStatus(track.properties()));var content=foldl(function(ret,item){var product=new Track({properties:item}),contentId=product[identifier]();return ret.ids.push(contentId),ret.names.push(product.name()),ret},{ids:[],names:[]},track.products());payload.content_ids=content.ids.sort(),payload.content_name=content.names.sort().join(", "),window.twq("track","Purchase",payload)}},TwitterAds.prototype.productAddedToWishlist=function(product){if(this.fireLegacyConversionTags(product),this.options.universalTagPixelId){var props=product.properties(),identifier=this.options.identifier,payload={content_name:product.name(),content_category:product.category(),content_ids:[product[identifier]()]};payload=extend(payload,setStatus(props)),window.twq("track","AddToWishlist",payload)}},TwitterAds.prototype.checkoutStarted=function(track){var sumOfQuantities=foldl(function(cartQuantity,product){return cartQuantity+(get(product,"quantity")||0)},0,track.products());if(this.fireLegacyConversionTags(track,{quantity:sumOfQuantities}),this.options.universalTagPixelId){var identifier=this.options.identifier,content=foldl(function(ret,item){var product=new Track({properties:item}),contentId=product[identifier]();return ret.ids.push(contentId),ret.names.push(product.name()),ret.categories.push(product.category()),ret},{ids:[],names:[],categories:[]},track.products()),payload={content_ids:content.ids.sort(),content_name:content.names.sort().join(", "),content_category:content.categories.join(", ")};payload=extend(payload,setStatus(track.properties())),window.twq("track","InitiateCheckout",payload)}},TwitterAds.prototype.paymentInfoEntered=function(track){this.fireLegacyConversionTags(track);var payload=extend({},setStatus(track.properties()));this.options.universalTagPixelId&&window.twq("track","AddPaymentInfo",payload)},TwitterAds.prototype.fireLegacyConversionTags=function(track,override){var events=this.events(track.event()),self=this;each(events,function(pixelId){var tagParams={pixelId:pixelId,quantity:track.proxy("properties.quantity")||0,revenue:track.revenue()||0};override&&(tagParams=defaults(override,tagParams)),self.load("singleTag",tagParams)})}},{"@ndhoule/defaults":16,"@ndhoule/extend":20,"@ndhoule/foldl":21,"@segment/analytics.js-integration":41,"component-each":131,"obj-case":167,"segmentio-facade":178}],118:[function(require,module,exports){"use strict";function rootExperiments(fn){enqueue(function(){var data={},experimentIds=window._vwo_exp_ids;if(!experimentIds)return fn();each(experimentIds,function(experimentId){var variationName=variation(experimentId);variationName&&(data[experimentId]=variationName)}),fn(null,data)})}function experiments(fn){enqueue(function(){var data={},ids=window._vwo_exp_ids;if(!ids)return fn();each(ids,function(id){var name=variation(id);name&&(data["Experiment: "+id]=name)}),fn(null,data)})}function enqueue(fn){window._vis_opt_queue=window._vis_opt_queue||[],window._vis_opt_queue.push(fn)}function variation(id){var experiments=window._vwo_exp;if(!experiments)return null;var experiment=experiments[id],variationId=experiment.combination_chosen;return experiment.ready&&!window._vis_debug&&variationId?experiment.comb_n[variationId]:null}var each=require("component-each"),integration=require("@segment/analytics.js-integration"),tick=require("next-tick"),VWO=module.exports=integration("Visual Website Optimizer").global("_vis_opt_queue").global("_vis_opt_revenue_conversion").global("_vwo_exp").global("_vwo_exp_ids").option("replay",!1).option("listen",!0),integrationContext={name:"visual-website-optimizer",version:"1.0.0"};VWO.prototype.initialize=function(){var self=this;this.options.replay&&tick(function(){self.replay()}),this.options.listen&&tick(function(){self.roots()}),this.ready()},VWO.prototype.orderCompleted=function(track){var total=track.total()||track.revenue()||0;enqueue(function(){window._vis_opt_revenue_conversion(total)})},VWO.prototype.replay=function(){var analytics=this.analytics;experiments(function(err,traits){traits&&analytics.identify(traits)})},VWO.prototype.roots=function(){var analytics=this.analytics;rootExperiments(function(err,data){each(data,function(experimentId,variationName){analytics.track("Experiment Viewed",{experimentId:experimentId,variationName:variationName},{context:{integration:integrationContext}})})})}},{"@segment/analytics.js-integration":41,"component-each":131,"next-tick":166}],119:[function(require,module,exports){function noop(){}function buildPayload(json,dataConfig){if(dataConfig){json.event=json.properties[dataConfig.event],delete json.properties.event;for(var key in dataConfig)"event"!==key&&json.properties[dataConfig[key]]&&(json.properties[key]=json.properties[dataConfig[key]])}return json}var integration=require("@segment/analytics.js-integration"),send=require("@segment/send-json"),webhookUrl="https://ruhqqp38w9.execute-api.us-west-2.amazonaws.com/dev/webhook",Webhooks=exports=module.exports=integration("Webhooks").option("hooks","");exports.global=window,Webhooks.prototype.initialize=function(){this.ready()},Webhooks.prototype.loaded=function(){return!0},Webhooks.prototype.page=function(page){var contextOpts=page.options(this.name),hook=contextOpts.hooks?contextOpts.hooks:null;this.send(page.json(),hook)},Webhooks.prototype.track=function(track){var dataConfig,contextOpts=track.options(this.name),hook=contextOpts.hooks?contextOpts.hooks:null,json=track.json();dataConfig=contextOpts.dataConfig,json=buildPayload(json,dataConfig),delete json.traits,this.send(json,hook)},Webhooks.prototype.normalize=function(msg){this.debug("normalize %o",msg);var user=this.analytics.user(),ctx=(exports.global,msg.context=msg.context||msg.options||{});return delete msg.options,delete msg.integrations,ctx.userAgent=navigator.userAgent,msg.userId=msg.userId||user.id(),msg.anonymousId=user.anonymousId(),msg.sentAt=new Date,this.debug("normalized %o",msg),msg},Webhooks.prototype.send=function(msg,actionHook,fn){var hook=this.options.hooks,headers={"Content-Type":"application/json"};fn=fn||noop;var self=this;msg=this.normalize(msg),actionHook&&(hook=actionHook),send(webhookUrl,{hook:hook,data:msg},headers,function(err,res){if(self.debug("sent %O, received %O",msg,arguments),err)return fn(err);res.url=webhookUrl,fn(null,res)})}},{"@segment/analytics.js-integration":41,"@segment/send-json":54}],120:[function(require,module,exports){"use strict";function stringifyNested(obj){return foldl(function(results,value,key){return is.array(obj[key])?results[key]=json.stringify(obj[key]):results[key]=obj[key],results},{},obj)}var each=require("component-each"),integration=require("@segment/analytics.js-integration"),toSnakeCase=require("to-snake-case"),is=require("is"),foldl=require("@ndhoule/foldl"),json=require("json3"),isostring=require("isostring"),time=require("unix-time"),Woopra=module.exports=integration("Woopra").global("woopra").option("domain","").option("cookieName","wooTracker").option("cookieDomain",null).option("cookiePath","/").option("ping",!0).option("pingInterval",12e3).option("idleTimeout",3e5).option("downloadTracking",!0).option("outgoingTracking",!0).option("outgoingIgnoreSubdomain",!0).option("downloadPause",200).option("outgoingPause",400).option("ignoreQueryUrl",!0).option("hideCampaign",!1).tag('<script src="//static.woopra.com/js/w.js">');Woopra.prototype.initialize=function(){!function(){var i,w=window,a=(document,arguments),f=["config","track","identify","visit","push","call"],c=function(){var i,self=this;for(self._e=[],i=0;i<f.length;i++)!function(f){self[f]=function(){return self._e.push([f].concat(Array.prototype.slice.call(arguments,0))),self}}(f[i])};for(w._w=w._w||{},i=0;i<a.length;i++)w._w[a[i]]=w[a[i]]=w[a[i]]||new c}("woopra"),this.load(this.ready),each(this.options,function(key,value){key=toSnakeCase(key),null!=value&&""!==value&&window.woopra.config(key,value)})},Woopra.prototype.loaded=function(){return!(!window.woopra||!window.woopra.loaded)},Woopra.prototype.page=function(page){var props=page.properties(),name=page.fullName();name&&(props.title=name),window.woopra.track("pv",props)},Woopra.prototype.identify=function(identify){var traits=identify.traits();each(traits,function(key,val){(isostring(val)||is.date(val))&&(traits[key]=1e3*time(val))}),identify.name()&&(traits.name=identify.name()),window.woopra.identify(traits).push()},Woopra.prototype.track=function(track){window.woopra.track(track.event(),stringifyNested(track.properties()))}},{"@ndhoule/foldl":21,"@segment/analytics.js-integration":121,"component-each":131,is:153,isostring:156,json3:157,"to-snake-case":188,"unix-time":193}],121:[function(require,module,exports){arguments[4][4][0].apply(exports,arguments)},{"./protos":122,"./statics":123,"@ndhoule/clone":15,"@ndhoule/defaults":16,"@ndhoule/extend":20,"component-bind":125,debug:142,dup:4,"slug-component":184}],122:[function(require,module,exports){arguments[4][5][0].apply(exports,arguments)},{"@ndhoule/after":13,"@ndhoule/each":18,"@ndhoule/every":19,"@ndhoule/foldl":21,"@segment/fmt":48,"@segment/load-script":52,"analytics-events":58,"component-emitter":133,dup:5,is:153,"load-iframe":159,"next-tick":166,"to-no-case":187}],123:[function(require,module,exports){arguments[4][6][0].apply(exports,arguments)},{"@ndhoule/each":18,"@ndhoule/includes":22,"component-emitter":133,domify:145,dup:6}],124:[function(require,module,exports){"use strict";function bindAll(obj){for(var key in obj){"function"==typeof obj[key]&&(obj[key]=bind(obj,obj[key]))}return obj}var bind=require("component-bind");module.exports=bindAll},{"component-bind":125}],125:[function(require,module,exports){var slice=[].slice;module.exports=function(obj,fn){if("string"==typeof fn&&(fn=obj[fn]),"function"!=typeof fn)throw new Error("bind() requires a function");var args=slice.call(arguments,2);return function(){return fn.apply(obj,args.concat(slice.call(arguments)))}}},{}],126:[function(require,module,exports){function clone(obj){switch(type(obj)){case"object":var copy={};for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(copy[key]=clone(obj[key]));return copy;case"array":for(var copy=new Array(obj.length),i=0,l=obj.length;i<l;i++)copy[i]=clone(obj[i]);return copy;case"regexp":var flags="";return flags+=obj.multiline?"m":"",flags+=obj.global?"g":"",flags+=obj.ignoreCase?"i":"",new RegExp(obj.source,flags);case"date":return new Date(obj.getTime());default:return obj}}var type;try{type=require("component-type")}catch(_){type=require("type")}module.exports=clone},{"component-type":139,type:139}],127:[function(require,module,exports){function set(name,value,options){options=options||{};var str=encode(name)+"="+encode(value);null==value&&(options.maxage=-1),options.maxage&&(options.expires=new Date(+new Date+options.maxage)),options.path&&(str+="; path="+options.path),options.domain&&(str+="; domain="+options.domain),options.expires&&(str+="; expires="+options.expires.toUTCString()),options.secure&&(str+="; secure"),document.cookie=str}function all(){var str;try{str=document.cookie}catch(err){return"undefined"!=typeof console&&"function"==typeof console.error&&console.error(err.stack||err),{}}return parse(str)}function get(name){return all()[name]}function parse(str){var pair,obj={},pairs=str.split(/ *; */);if(""==pairs[0])return obj;for(var i=0;i<pairs.length;++i)pair=pairs[i].split("="),obj[decode(pair[0])]=decode(pair[1]);return obj}function encode(value){try{return encodeURIComponent(value)}catch(e){debug("error `encode(%o)` - %o",value,e)}}function decode(value){try{return decodeURIComponent(value)}catch(e){debug("error `decode(%o)` - %o",value,e)}}var debug=require("debug")("cookie");module.exports=function(name,value,options){switch(arguments.length){case 3:case 2:return set(name,value,options);case 1:return get(name);default:return all()}}},{debug:128}],128:[function(require,module,exports){function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function formatArgs(){var args=arguments,useColors=this.useColors;if(args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff),!useColors)return args;var c="color: "+this.color;args=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1));var index=0,lastC=0;return args[0].replace(/%[a-z%]/g,function(match){"%%"!==match&&(index++,"%c"===match&&(lastC=index))}),args.splice(lastC,0,c),args}function log(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{null==namespaces?exports.storage.removeItem("debug"):exports.storage.debug=namespaces}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}return r}exports=module.exports=require("./debug"),exports.log=log,exports.formatArgs=formatArgs,exports.save=save,exports.load=load,exports.useColors=useColors,exports.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(v){return JSON.stringify(v)},exports.enable(load())},{"./debug":129}],129:[function(require,module,exports){function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(namespace){function disabled(){}function enabled(){var self=enabled,curr=+new Date,ms=curr-(prevTime||curr);self.diff=ms,self.prev=prevTime,self.curr=curr,prevTime=curr,null==self.useColors&&(self.useColors=exports.useColors()),null==self.color&&self.useColors&&(self.color=selectColor());var args=Array.prototype.slice.call(arguments);args[0]=exports.coerce(args[0]),"string"!=typeof args[0]&&(args=["%o"].concat(args));var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if("%%"===match)return match;index++;var formatter=exports.formatters[format];if("function"==typeof formatter){var val=args[index];match=formatter.call(self,val),args.splice(index,1),index--}return match}),"function"==typeof exports.formatArgs&&(args=exports.formatArgs.apply(self,args)),(enabled.log||exports.log||console.log.bind(console)).apply(self,args)}disabled.enabled=!1,enabled.enabled=!0;var fn=exports.enabled(namespace)?enabled:disabled;return fn.namespace=namespace,fn}function enable(namespaces){exports.save(namespaces);for(var split=(namespaces||"").split(/[\s,]+/),len=split.length,i=0;i<len;i++)split[i]&&(namespaces=split[i].replace(/\*/g,".*?"),"-"===namespaces[0]?exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$")):exports.names.push(new RegExp("^"+namespaces+"$")))}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++)if(exports.skips[i].test(name))return!1;for(i=0,len=exports.names.length;i<len;i++)if(exports.names[i].test(name))return!0;return!1}function coerce(val){return val instanceof Error?val.stack||val.message:val}exports=module.exports=debug,exports.coerce=coerce,exports.disable=disable,exports.enable=enable,exports.enabled=enabled,exports.humanize=require("ms"),exports.names=[],exports.skips=[],exports.formatters={};var prevTime,prevColor=0},{ms:130}],130:[function(require,module,exports){function parse(str){if(str=""+str,!(str.length>1e4)){var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(match){var n=parseFloat(match[1]);switch((match[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function short(ms){return ms>=d?Math.round(ms/d)+"d":ms>=h?Math.round(ms/h)+"h":ms>=m?Math.round(ms/m)+"m":ms>=s?Math.round(ms/s)+"s":ms+"ms"}function long(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(!(ms<n))return ms<1.5*n?Math.floor(ms/n)+" "+name:Math.ceil(ms/n)+" "+name+"s"}var s=1e3,m=60*s,h=60*m,d=24*h,y=365.25*d;module.exports=function(val,options){return options=options||{},"string"==typeof val?parse(val):options.long?long(val):short(val)}},{}],131:[function(require,module,exports){function string(obj,fn,ctx){for(var i=0;i<obj.length;++i)fn.call(ctx,obj.charAt(i),i)}function object(obj,fn,ctx){for(var key in obj)has.call(obj,key)&&fn.call(ctx,key,obj[key])}function array(obj,fn,ctx){for(var i=0;i<obj.length;++i)fn.call(ctx,obj[i],i)}try{var type=require("type")}catch(err){var type=require("component-type")}var toFunction=require("to-function"),has=Object.prototype.hasOwnProperty;module.exports=function(obj,fn,ctx){switch(fn=toFunction(fn),ctx=ctx||this,type(obj)){case"array":return array(obj,fn,ctx);case"object":return"number"==typeof obj.length?array(obj,fn,ctx):object(obj,fn,ctx);case"string":return string(obj,fn,ctx)}}},{"component-type":132,"to-function":186,type:132}],132:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}return null===val?"null":void 0===val?"undefined":val&&1===val.nodeType?"element":val===Object(val)?"object":typeof val}},{}],133:[function(require,module,exports){function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype)obj[key]=Emitter.prototype[key];return obj}void 0!==module&&(module.exports=Emitter),Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){return this._callbacks=this._callbacks||{},(this._callbacks["$"+event]=this._callbacks["$"+event]||[]).push(fn),this},Emitter.prototype.once=function(event,fn){function on(){this.off(event,on),fn.apply(this,arguments)}return on.fn=fn,this.on(event,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var callbacks=this._callbacks["$"+event];if(!callbacks)return this;if(1==arguments.length)return delete this._callbacks["$"+event],this;for(var cb,i=0;i<callbacks.length;i++)if((cb=callbacks[i])===fn||cb.fn===fn){callbacks.splice(i,1);break}return this},Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks["$"+event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i)callbacks[i].apply(this,args)}return this},Emitter.prototype.listeners=function(event){return this._callbacks=this._callbacks||{},this._callbacks["$"+event]||[]},Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],134:[function(require,module,exports){var bind=window.addEventListener?"addEventListener":"attachEvent",unbind=window.removeEventListener?"removeEventListener":"detachEvent",prefix="addEventListener"!==bind?"on":"";exports.bind=function(el,type,fn,capture){return el[bind](prefix+type,fn,capture||!1),fn},exports.unbind=function(el,type,fn,capture){return el[unbind](prefix+type,fn,capture||!1),fn}},{}],135:[function(require,module,exports){module.exports=function(arr,obj){if(arr.indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i)if(arr[i]===obj)return i;return-1}},{}],136:[function(require,module,exports){function props(str){return str.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^\/]+)\//g,"").replace(globals,"").match(/[a-zA-Z_]\w*/g)||[]}function map(str,props,fn){var re=/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^\/]+)\/|[a-zA-Z_]\w*/g;return str.replace(re,function(_){return"("==_[_.length-1]?fn(_):~props.indexOf(_)?fn(_):_})}function unique(arr){for(var ret=[],i=0;i<arr.length;i++)~ret.indexOf(arr[i])||ret.push(arr[i]);return ret}function prefixed(str){return function(_){return str+_}}var globals=/\b(Array|Date|Object|Math|JSON)\b/g;module.exports=function(str,fn){var p=unique(props(str));return fn&&"string"==typeof fn&&(fn=prefixed(fn)),fn?map(str,p,fn):p}},{}],137:[function(require,module,exports){var trim=require("trim"),type=require("type"),pattern=/(\w+)\[(\d+)\]/,encode=function(str){try{return encodeURIComponent(str)}catch(e){return str}},decode=function(str){try{return decodeURIComponent(str.replace(/\+/g," "))}catch(e){return str}};exports.parse=function(str){if("string"!=typeof str)return{};if(""==(str=trim(str)))return{};"?"==str.charAt(0)&&(str=str.slice(1));for(var obj={},pairs=str.split("&"),i=0;i<pairs.length;i++){var m,parts=pairs[i].split("="),key=decode(parts[0]);(m=pattern.exec(key))?(obj[m[1]]=obj[m[1]]||[],obj[m[1]][m[2]]=decode(parts[1])):obj[parts[0]]=null==parts[1]?"":decode(parts[1])}return obj},exports.stringify=function(obj){if(!obj)return"";var pairs=[];for(var key in obj){var value=obj[key];if("array"!=type(value))pairs.push(encode(key)+"="+encode(obj[key]));else for(var i=0;i<value.length;++i)pairs.push(encode(key+"["+i+"]")+"="+encode(value[i]))}return pairs.join("&")}},{trim:191,type:138}],138:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===val?"null":void 0===val?"undefined":val!==val?"nan":val&&1===val.nodeType?"element":typeof(val=val.valueOf?val.valueOf():Object.prototype.valueOf.apply(val))}},{}],139:[function(require,module,exports){function isBuffer(obj){return!(null==obj||!(obj._isBuffer||obj.constructor&&"function"==typeof obj.constructor.isBuffer&&obj.constructor.isBuffer(obj)))}var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===val?"null":void 0===val?"undefined":val!==val?"nan":val&&1===val.nodeType?"element":isBuffer(val)?"buffer":typeof(val=val.valueOf?val.valueOf():Object.prototype.valueOf.apply(val))}},{}],140:[function(require,module,exports){function port(protocol){switch(protocol){case"http:":return 80;case"https:":return 443;default:return location.port}}exports.parse=function(url){var a=document.createElement("a");return a.href=url,{href:a.href,host:a.host||location.host,port:"0"===a.port||""===a.port?port(a.protocol):a.port,hash:a.hash,hostname:a.hostname||location.hostname,pathname:"/"!=a.pathname.charAt(0)?"/"+a.pathname:a.pathname,protocol:a.protocol&&":"!=a.protocol?a.protocol:location.protocol,search:a.search,query:a.search.slice(1)}},exports.isAbsolute=function(url){return 0==url.indexOf("//")||!!~url.indexOf("://")},exports.isRelative=function(url){return!exports.isAbsolute(url)},exports.isCrossDomain=function(url){url=exports.parse(url);var location=exports.parse(window.location.href);return url.hostname!==location.hostname||url.port!==location.port||url.protocol!==location.protocol}},{}],141:[function(require,module,exports){!function(global){"use strict";function pad(val,len){for(val=String(val),len=len||2;val.length<len;)val="0"+val;return val}function getWeek(date){var targetThursday=new Date(date.getFullYear(),date.getMonth(),date.getDate());targetThursday.setDate(targetThursday.getDate()-(targetThursday.getDay()+6)%7+3);var firstThursday=new Date(targetThursday.getFullYear(),0,4);firstThursday.setDate(firstThursday.getDate()-(firstThursday.getDay()+6)%7+3);var ds=targetThursday.getTimezoneOffset()-firstThursday.getTimezoneOffset();targetThursday.setHours(targetThursday.getHours()-ds);var weekDiff=(targetThursday-firstThursday)/6048e5;return 1+Math.floor(weekDiff)}function getDayOfWeek(date){var dow=date.getDay();return 0===dow&&(dow=7),dow}function kindOf(val){return null===val?"null":void 0===val?"undefined":"object"!=typeof val?typeof val:Array.isArray(val)?"array":{}.toString.call(val).slice(8,-1).toLowerCase()}var dateFormat=function(){var token=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|'[^']*'|'[^']*'/g,timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,timezoneClip=/[^-+\dA-Z]/g;return function(date,mask,utc,gmt){if(1!==arguments.length||"string"!==kindOf(date)||/\d/.test(date)||(mask=date,date=void 0),date=date||new Date,date instanceof Date||(date=new Date(date)),isNaN(date))throw TypeError("Invalid date");mask=String(dateFormat.masks[mask]||mask||dateFormat.masks.default);var maskSlice=mask.slice(0,4);"UTC:"!==maskSlice&&"GMT:"!==maskSlice||(mask=mask.slice(4),utc=!0,"GMT:"===maskSlice&&(gmt=!0));var _=utc?"getUTC":"get",d=date[_+"Date"](),D=date[_+"Day"](),m=date[_+"Month"](),y=date[_+"FullYear"](),H=date[_+"Hours"](),M=date[_+"Minutes"](),s=date[_+"Seconds"](),L=date[_+"Milliseconds"](),o=utc?0:date.getTimezoneOffset(),W=getWeek(date),N=getDayOfWeek(date),flags={d:d,dd:pad(d),ddd:dateFormat.i18n.dayNames[D],dddd:dateFormat.i18n.dayNames[D+7],m:m+1,mm:pad(m+1),mmm:dateFormat.i18n.monthNames[m],mmmm:dateFormat.i18n.monthNames[m+12],yy:String(y).slice(2),yyyy:y,h:H%12||12,hh:pad(H%12||12),H:H,HH:pad(H),M:M,MM:pad(M),s:s,ss:pad(s),l:pad(L,3),L:pad(Math.round(L/10)),t:H<12?"a":"p",tt:H<12?"am":"pm",T:H<12?"A":"P",TT:H<12?"AM":"PM",Z:gmt?"GMT":utc?"UTC":(String(date).match(timezone)||[""]).pop().replace(timezoneClip,""),o:(o>0?"-":"+")+pad(100*Math.floor(Math.abs(o)/60)+Math.abs(o)%60,4),S:["th","st","nd","rd"][d%10>3?0:(d%100-d%10!=10)*d%10],W:W,N:N};return mask.replace(token,function(match){return match in flags?flags[match]:match.slice(1,match.length-1)})}}();dateFormat.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",
expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},"function"==typeof define&&define.amd?define(function(){return dateFormat}):"object"==typeof exports?module.exports=dateFormat:global.dateFormat=dateFormat}(this)},{}],142:[function(require,module,exports){(function(process){function useColors(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function formatArgs(args){var useColors=this.useColors;if(args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff),useColors){var c="color: "+this.color;args.splice(1,0,c,"color: inherit");var index=0,lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){"%%"!==match&&(index++,"%c"===match&&(lastC=index))}),args.splice(lastC,0,c)}}function log(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{null==namespaces?exports.storage.removeItem("debug"):exports.storage.debug=namespaces}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}return!r&&void 0!==process&&"env"in process&&(r=process.env.DEBUG),r}exports=module.exports=require("./debug"),exports.log=log,exports.formatArgs=formatArgs,exports.save=save,exports.load=load,exports.useColors=useColors,exports.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(v){try{return JSON.stringify(v)}catch(err){return"[UnexpectedJSONParseError]: "+err.message}},exports.enable(load())}).call(this,require("_process"))},{"./debug":143,_process:169}],143:[function(require,module,exports){function selectColor(namespace){var i,hash=0;for(i in namespace)hash=(hash<<5)-hash+namespace.charCodeAt(i),hash|=0;return exports.colors[Math.abs(hash)%exports.colors.length]}function createDebug(namespace){function debug(){if(debug.enabled){var self=debug,curr=+new Date,ms=curr-(prevTime||curr);self.diff=ms,self.prev=prevTime,self.curr=curr,prevTime=curr;for(var args=new Array(arguments.length),i=0;i<args.length;i++)args[i]=arguments[i];args[0]=exports.coerce(args[0]),"string"!=typeof args[0]&&args.unshift("%O");var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if("%%"===match)return match;index++;var formatter=exports.formatters[format];if("function"==typeof formatter){var val=args[index];match=formatter.call(self,val),args.splice(index,1),index--}return match}),exports.formatArgs.call(self,args);(debug.log||exports.log||console.log.bind(console)).apply(self,args)}}return debug.namespace=namespace,debug.enabled=exports.enabled(namespace),debug.useColors=exports.useColors(),debug.color=selectColor(namespace),"function"==typeof exports.init&&exports.init(debug),debug}function enable(namespaces){exports.save(namespaces),exports.names=[],exports.skips=[];for(var split=("string"==typeof namespaces?namespaces:"").split(/[\s,]+/),len=split.length,i=0;i<len;i++)split[i]&&(namespaces=split[i].replace(/\*/g,".*?"),"-"===namespaces[0]?exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$")):exports.names.push(new RegExp("^"+namespaces+"$")))}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++)if(exports.skips[i].test(name))return!1;for(i=0,len=exports.names.length;i<len;i++)if(exports.names[i].test(name))return!0;return!1}function coerce(val){return val instanceof Error?val.stack||val.message:val}exports=module.exports=createDebug.debug=createDebug.default=createDebug,exports.coerce=coerce,exports.disable=disable,exports.enable=enable,exports.enabled=enabled,exports.humanize=require("ms"),exports.names=[],exports.skips=[],exports.formatters={};var prevTime},{ms:160}],144:[function(require,module,exports){function when(condition,fn,interval){if("function"!=typeof condition)throw new Error("condition must be a function");if("function"!=typeof fn)throw new Error("fn must be a function");if(condition())return nextTick(fn);var ref=setInterval(function(){condition()&&(nextTick(fn),clearInterval(ref))},interval||10)}var nextTick=require("next-tick");module.exports=when},{"next-tick":166}],145:[function(require,module,exports){function parse(html,doc){if("string"!=typeof html)throw new TypeError("String expected");doc||(doc=document);var m=/<([\w:]+)/.exec(html);if(!m)return doc.createTextNode(html);html=html.replace(/^\s+|\s+$/g,"");var tag=m[1];if("body"==tag){var el=doc.createElement("html");return el.innerHTML=html,el.removeChild(el.lastChild)}var wrap=map[tag]||map._default,depth=wrap[0],prefix=wrap[1],suffix=wrap[2],el=doc.createElement("div");for(el.innerHTML=prefix+html+suffix;depth--;)el=el.lastChild;if(el.firstChild==el.lastChild)return el.removeChild(el.firstChild);for(var fragment=doc.createDocumentFragment();el.firstChild;)fragment.appendChild(el.removeChild(el.firstChild));return fragment}module.exports=parse;var bugTestDiv,innerHTMLBug=!1;"undefined"!=typeof document&&(bugTestDiv=document.createElement("div"),bugTestDiv.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',innerHTMLBug=!bugTestDiv.getElementsByTagName("link").length,bugTestDiv=void 0);var map={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:innerHTMLBug?[1,"X<div>","</div>"]:[0,"",""]};map.td=map.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],map.option=map.optgroup=[1,'<select multiple="multiple">',"</select>"],map.thead=map.tbody=map.colgroup=map.caption=map.tfoot=[1,"<table>","</table>"],map.polyline=map.ellipse=map.polygon=map.circle=map.text=map.line=map.path=map.rect=map.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],146:[function(require,module,exports){"use strict";var hasOwn=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,isArray=function(arr){return"function"==typeof Array.isArray?Array.isArray(arr):"[object Array]"===toStr.call(arr)},isPlainObject=function(obj){if(!obj||"[object Object]"!==toStr.call(obj))return!1;var hasOwnConstructor=hasOwn.call(obj,"constructor"),hasIsPrototypeOf=obj.constructor&&obj.constructor.prototype&&hasOwn.call(obj.constructor.prototype,"isPrototypeOf");if(obj.constructor&&!hasOwnConstructor&&!hasIsPrototypeOf)return!1;var key;for(key in obj);return void 0===key||hasOwn.call(obj,key)};module.exports=function extend(){var options,name,src,copy,copyIsArray,clone,target=arguments[0],i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[1]||{},i=2),(null==target||"object"!=typeof target&&"function"!=typeof target)&&(target={});i<length;++i)if(null!=(options=arguments[i]))for(name in options)src=target[name],copy=options[name],target!==copy&&(deep&&copy&&(isPlainObject(copy)||(copyIsArray=isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&isArray(src)?src:[]):clone=src&&isPlainObject(src)?src:{},target[name]=extend(deep,clone,copy)):void 0!==copy&&(target[name]=copy));return target}},{}],147:[function(require,module,exports){function flatten(target,opts){function step(object,prev,currentDepth){currentDepth=currentDepth||1,Object.keys(object).forEach(function(key){var value=object[key],isarray=opts.safe&&Array.isArray(value),type=Object.prototype.toString.call(value),isbuffer=isBuffer(value),isobject="[object Object]"===type||"[object Array]"===type,newKey=prev?prev+delimiter+key:key;if(!isarray&&!isbuffer&&isobject&&Object.keys(value).length&&(!opts.maxDepth||currentDepth<maxDepth))return step(value,newKey,currentDepth+1);output[newKey]=value})}opts=opts||{};var delimiter=opts.delimiter||".",maxDepth=opts.maxDepth,output={};return step(target),output}function unflatten(target,opts){function getkey(key){var parsedKey=Number(key);return isNaN(parsedKey)||-1!==key.indexOf(".")?key:parsedKey}opts=opts||{};var delimiter=opts.delimiter||".",overwrite=opts.overwrite||!1,result={};return isBuffer(target)||"[object Object]"!==Object.prototype.toString.call(target)?target:(Object.keys(target).forEach(function(key){for(var split=key.split(delimiter),key1=getkey(split.shift()),key2=getkey(split[0]),recipient=result;void 0!==key2;){var type=Object.prototype.toString.call(recipient[key1]),isobject="[object Object]"===type||"[object Array]"===type;if(!overwrite&&!isobject&&void 0!==recipient[key1])return;(overwrite&&!isobject||!overwrite&&null==recipient[key1])&&(recipient[key1]="number"!=typeof key2||opts.object?{}:[]),recipient=recipient[key1],split.length>0&&(key1=getkey(split.shift()),key2=getkey(split[0]))}recipient[key1]=unflatten(target[key],opts)}),result)}var isBuffer=require("is-buffer");module.exports=flatten;flatten.flatten=flatten,flatten.unflatten=unflatten},{"is-buffer":151}],148:[function(require,module,exports){function generate(name,options){var log=debug("global-queue:"+name);return options=options||{},function(args){args=[].slice.call(arguments),window[name]||(window[name]=[]),log("%o",args),!1===options.wrap?window[name].push.apply(window[name],args):window[name].push(args)}}var debug=require("debug");module.exports=generate},{debug:142}],149:[function(require,module,exports){try{module.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(err){module.exports=!1}},{}],150:[function(require,module,exports){"function"==typeof Object.create?module.exports=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}},{}],151:[function(require,module,exports){function isBuffer(obj){return!!obj.constructor&&"function"==typeof obj.constructor.isBuffer&&obj.constructor.isBuffer(obj)}function isSlowBuffer(obj){return"function"==typeof obj.readFloatLE&&"function"==typeof obj.slice&&isBuffer(obj.slice(0,0))}module.exports=function(obj){return null!=obj&&(isBuffer(obj)||isSlowBuffer(obj)||!!obj._isBuffer)}},{}],152:[function(require,module,exports){module.exports=function(string){return/.+\@.+\..+/.test(string)}},{}],153:[function(require,module,exports){"use strict";var symbolValueOf,objProto=Object.prototype,owns=objProto.hasOwnProperty,toStr=objProto.toString;"function"==typeof Symbol&&(symbolValueOf=Symbol.prototype.valueOf);var isActualNaN=function(value){return value!==value},NON_HOST_TYPES={boolean:1,number:1,string:1,undefined:1},base64Regex=/^([A-Za-z0-9+\/]{4})*([A-Za-z0-9+\/]{4}|[A-Za-z0-9+\/]{3}=|[A-Za-z0-9+\/]{2}==)$/,hexRegex=/^[A-Fa-f0-9]+$/,is={};is.a=is.type=function(value,type){return typeof value===type},is.defined=function(value){return void 0!==value},is.empty=function(value){var key,type=toStr.call(value);if("[object Array]"===type||"[object Arguments]"===type||"[object String]"===type)return 0===value.length;if("[object Object]"===type){for(key in value)if(owns.call(value,key))return!1;return!0}return!value},is.equal=function(value,other){if(value===other)return!0;var key,type=toStr.call(value);if(type!==toStr.call(other))return!1;if("[object Object]"===type){for(key in value)if(!(is.equal(value[key],other[key])&&key in other))return!1;for(key in other)if(!(is.equal(value[key],other[key])&&key in value))return!1;return!0}if("[object Array]"===type){if((key=value.length)!==other.length)return!1;for(;key--;)if(!is.equal(value[key],other[key]))return!1;return!0}return"[object Function]"===type?value.prototype===other.prototype:"[object Date]"===type&&value.getTime()===other.getTime()},is.hosted=function(value,host){var type=typeof host[value];return"object"===type?!!host[value]:!NON_HOST_TYPES[type]},is.instance=is.instanceof=function(value,constructor){return value instanceof constructor},is.nil=is.null=function(value){return null===value},is.undef=is.undefined=function(value){return void 0===value},is.args=is.arguments=function(value){var isStandardArguments="[object Arguments]"===toStr.call(value),isOldArguments=!is.array(value)&&is.arraylike(value)&&is.object(value)&&is.fn(value.callee);return isStandardArguments||isOldArguments},is.array=Array.isArray||function(value){return"[object Array]"===toStr.call(value)},is.args.empty=function(value){return is.args(value)&&0===value.length},is.array.empty=function(value){return is.array(value)&&0===value.length},is.arraylike=function(value){return!!value&&!is.bool(value)&&owns.call(value,"length")&&isFinite(value.length)&&is.number(value.length)&&value.length>=0},is.bool=is.boolean=function(value){return"[object Boolean]"===toStr.call(value)},is.false=function(value){return is.bool(value)&&!1===Boolean(Number(value))},is.true=function(value){return is.bool(value)&&!0===Boolean(Number(value))},is.date=function(value){return"[object Date]"===toStr.call(value)},is.date.valid=function(value){return is.date(value)&&!isNaN(Number(value))},is.element=function(value){return void 0!==value&&"undefined"!=typeof HTMLElement&&value instanceof HTMLElement&&1===value.nodeType},is.error=function(value){return"[object Error]"===toStr.call(value)},is.fn=is.function=function(value){if("undefined"!=typeof window&&value===window.alert)return!0;var str=toStr.call(value);return"[object Function]"===str||"[object GeneratorFunction]"===str||"[object AsyncFunction]"===str},is.number=function(value){return"[object Number]"===toStr.call(value)},is.infinite=function(value){return value===1/0||value===-1/0},is.decimal=function(value){return is.number(value)&&!isActualNaN(value)&&!is.infinite(value)&&value%1!=0},is.divisibleBy=function(value,n){var isDividendInfinite=is.infinite(value),isDivisorInfinite=is.infinite(n),isNonZeroNumber=is.number(value)&&!isActualNaN(value)&&is.number(n)&&!isActualNaN(n)&&0!==n;return isDividendInfinite||isDivisorInfinite||isNonZeroNumber&&value%n==0},is.integer=is.int=function(value){return is.number(value)&&!isActualNaN(value)&&value%1==0},is.maximum=function(value,others){if(isActualNaN(value))throw new TypeError("NaN is not a valid value");if(!is.arraylike(others))throw new TypeError("second argument must be array-like");for(var len=others.length;--len>=0;)if(value<others[len])return!1;return!0},is.minimum=function(value,others){if(isActualNaN(value))throw new TypeError("NaN is not a valid value");if(!is.arraylike(others))throw new TypeError("second argument must be array-like");for(var len=others.length;--len>=0;)if(value>others[len])return!1;return!0},is.nan=function(value){return!is.number(value)||value!==value},is.even=function(value){return is.infinite(value)||is.number(value)&&value===value&&value%2==0},is.odd=function(value){return is.infinite(value)||is.number(value)&&value===value&&value%2!=0},is.ge=function(value,other){if(isActualNaN(value)||isActualNaN(other))throw new TypeError("NaN is not a valid value");return!is.infinite(value)&&!is.infinite(other)&&value>=other},is.gt=function(value,other){if(isActualNaN(value)||isActualNaN(other))throw new TypeError("NaN is not a valid value");return!is.infinite(value)&&!is.infinite(other)&&value>other},is.le=function(value,other){if(isActualNaN(value)||isActualNaN(other))throw new TypeError("NaN is not a valid value");return!is.infinite(value)&&!is.infinite(other)&&value<=other},is.lt=function(value,other){if(isActualNaN(value)||isActualNaN(other))throw new TypeError("NaN is not a valid value");return!is.infinite(value)&&!is.infinite(other)&&value<other},is.within=function(value,start,finish){if(isActualNaN(value)||isActualNaN(start)||isActualNaN(finish))throw new TypeError("NaN is not a valid value");if(!is.number(value)||!is.number(start)||!is.number(finish))throw new TypeError("all arguments must be numbers");return is.infinite(value)||is.infinite(start)||is.infinite(finish)||value>=start&&value<=finish},is.object=function(value){return"[object Object]"===toStr.call(value)},is.primitive=function(value){return!value||!("object"==typeof value||is.object(value)||is.fn(value)||is.array(value))},is.hash=function(value){return is.object(value)&&value.constructor===Object&&!value.nodeType&&!value.setInterval},is.regexp=function(value){return"[object RegExp]"===toStr.call(value)},is.string=function(value){return"[object String]"===toStr.call(value)},is.base64=function(value){return is.string(value)&&(!value.length||base64Regex.test(value))},is.hex=function(value){return is.string(value)&&(!value.length||hexRegex.test(value))},is.symbol=function(value){return"function"==typeof Symbol&&"[object Symbol]"===toStr.call(value)&&"symbol"==typeof symbolValueOf.call(value)},module.exports=is},{}],154:[function(require,module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},{}],155:[function(require,module,exports){"use strict";var isArray=require("isarray");module.exports=function(val){return null!=val&&"object"==typeof val&&!1===isArray(val)}},{isarray:154}],156:[function(require,module,exports){function isDate(val){return"string"==typeof val&&matcher.test(val)&&!isNaN(Date.parse(val))}module.exports=isDate;var matcher=new RegExp("^\\d{4}-\\d{2}-\\d{2}((T\\d{2}:\\d{2}(:\\d{2})?)(\\.\\d{1,6})?(Z|(\\+|-)\\d{2}:\\d{2})?)?$")},{}],157:[function(require,module,exports){(function(global){(function(){function runInContext(context,exports){function has(name){if(has[name]!==undef)return has[name];var isSupported;if("bug-string-char-index"==name)isSupported="a"!="a"[0];else if("json"==name)isSupported=has("json-stringify")&&has("json-parse");else{var value,serialized='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==name){var stringify=exports.stringify,stringifySupported="function"==typeof stringify&&isExtended;if(stringifySupported){(value=function(){return 1}).toJSON=value;try{stringifySupported="0"===stringify(0)&&"0"===stringify(new Number)&&'""'==stringify(new String)&&stringify(getClass)===undef&&stringify(undef)===undef&&stringify()===undef&&"1"===stringify(value)&&"[1]"==stringify([value])&&"[null]"==stringify([undef])&&"null"==stringify(null)&&"[null,null,null]"==stringify([undef,getClass,null])&&stringify({a:[value,!0,!1,null,"\0\b\n\f\r\t"]})==serialized&&"1"===stringify(null,value)&&"[\n 1,\n 2\n]"==stringify([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==stringify(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==stringify(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==stringify(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==stringify(new Date(-1))}catch(exception){stringifySupported=!1}}isSupported=stringifySupported}if("json-parse"==name){var parse=exports.parse;if("function"==typeof parse)try{if(0===parse("0")&&!parse(!1)){value=parse(serialized);var parseSupported=5==value.a.length&&1===value.a[0];if(parseSupported){try{parseSupported=!parse('"\t"')}catch(exception){}if(parseSupported)try{parseSupported=1!==parse("01")}catch(exception){}if(parseSupported)try{parseSupported=1!==parse("1.")}catch(exception){}}}}catch(exception){parseSupported=!1}isSupported=parseSupported}}return has[name]=!!isSupported}context||(context=root.Object()),exports||(exports=root.Object());var Number=context.Number||root.Number,String=context.String||root.String,Object=context.Object||root.Object,Date=context.Date||root.Date,SyntaxError=context.SyntaxError||root.SyntaxError,TypeError=context.TypeError||root.TypeError,Math=context.Math||root.Math,nativeJSON=context.JSON||root.JSON;"object"==typeof nativeJSON&&nativeJSON&&(exports.stringify=nativeJSON.stringify,exports.parse=nativeJSON.parse);var isProperty,forEach,undef,objectProto=Object.prototype,getClass=objectProto.toString,isExtended=new Date(-0xc782b5b800cec);try{isExtended=-109252==isExtended.getUTCFullYear()&&0===isExtended.getUTCMonth()&&1===isExtended.getUTCDate()&&10==isExtended.getUTCHours()&&37==isExtended.getUTCMinutes()&&6==isExtended.getUTCSeconds()&&708==isExtended.getUTCMilliseconds()}catch(exception){}if(!has("json")){var charIndexBuggy=has("bug-string-char-index");if(!isExtended)var floor=Math.floor,Months=[0,31,59,90,120,151,181,212,243,273,304,334],getDay=function(year,month){return Months[month]+365*(year-1970)+floor((year-1969+(month=+(month>1)))/4)-floor((year-1901+month)/100)+floor((year-1601+month)/400)};if((isProperty=objectProto.hasOwnProperty)||(isProperty=function(property){var constructor,members={};return(members.__proto__=null,members.__proto__={toString:1},members).toString!=getClass?isProperty=function(property){var original=this.__proto__,result=property in(this.__proto__=null,this);return this.__proto__=original,result}:(constructor=members.constructor,isProperty=function(property){var parent=(this.constructor||constructor).prototype;return property in this&&!(property in parent&&this[property]===parent[property])}),members=null,isProperty.call(this,property)}),forEach=function(object,callback){var Properties,members,property,size=0;(Properties=function(){this.valueOf=0}).prototype.valueOf=0,members=new Properties;for(property in members)isProperty.call(members,property)&&size++;return Properties=members=null,size?forEach=2==size?function(object,callback){var property,members={},isFunction="[object Function]"==getClass.call(object);for(property in object)isFunction&&"prototype"==property||isProperty.call(members,property)||!(members[property]=1)||!isProperty.call(object,property)||callback(property)}:function(object,callback){var property,isConstructor,isFunction="[object Function]"==getClass.call(object);for(property in object)isFunction&&"prototype"==property||!isProperty.call(object,property)||(isConstructor="constructor"===property)||callback(property);(isConstructor||isProperty.call(object,property="constructor"))&&callback(property)}:(members=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],forEach=function(object,callback){var property,length,isFunction="[object Function]"==getClass.call(object),hasProperty=!isFunction&&"function"!=typeof object.constructor&&objectTypes[typeof object.hasOwnProperty]&&object.hasOwnProperty||isProperty;for(property in object)isFunction&&"prototype"==property||!hasProperty.call(object,property)||callback(property);for(length=members.length;property=members[--length];hasProperty.call(object,property)&&callback(property));}),forEach(object,callback)},!has("json-stringify")){var Escapes={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},toPaddedString=function(width,value){return("000000"+(value||0)).slice(-width)},quote=function(value){for(var result='"',index=0,length=value.length,useCharIndex=!charIndexBuggy||length>10,symbols=useCharIndex&&(charIndexBuggy?value.split(""):value);index<length;index++){var charCode=value.charCodeAt(index);switch(charCode){case 8:case 9:case 10:case 12:case 13:case 34:case 92:result+=Escapes[charCode];break;default:if(charCode<32){result+="\\u00"+toPaddedString(2,charCode.toString(16));break}result+=useCharIndex?symbols[index]:value.charAt(index)}}return result+'"'},serialize=function(property,object,callback,properties,whitespace,indentation,stack){var value,className,year,month,date,time,hours,minutes,seconds,milliseconds,results,element,index,length,prefix,result;try{value=object[property]}catch(exception){}if("object"==typeof value&&value)if("[object Date]"!=(className=getClass.call(value))||isProperty.call(value,"toJSON"))"function"==typeof value.toJSON&&("[object Number]"!=className&&"[object String]"!=className&&"[object Array]"!=className||isProperty.call(value,"toJSON"))&&(value=value.toJSON(property));else if(value>-1/0&&value<1/0){if(getDay){for(date=floor(value/864e5),year=floor(date/365.2425)+1970-1;getDay(year+1,0)<=date;year++);for(month=floor((date-getDay(year,0))/30.42);getDay(year,month+1)<=date;month++);date=1+date-getDay(year,month),time=(value%864e5+864e5)%864e5,hours=floor(time/36e5)%24,minutes=floor(time/6e4)%60,seconds=floor(time/1e3)%60,milliseconds=time%1e3}else year=value.getUTCFullYear(),month=value.getUTCMonth(),date=value.getUTCDate(),hours=value.getUTCHours(),minutes=value.getUTCMinutes(),seconds=value.getUTCSeconds(),milliseconds=value.getUTCMilliseconds();value=(year<=0||year>=1e4?(year<0?"-":"+")+toPaddedString(6,year<0?-year:year):toPaddedString(4,year))+"-"+toPaddedString(2,month+1)+"-"+toPaddedString(2,date)+"T"+toPaddedString(2,hours)+":"+toPaddedString(2,minutes)+":"+toPaddedString(2,seconds)+"."+toPaddedString(3,milliseconds)+"Z"}else value=null;if(callback&&(value=callback.call(object,property,value)),null===value)return"null";if("[object Boolean]"==(className=getClass.call(value)))return""+value;if("[object Number]"==className)return value>-1/0&&value<1/0?""+value:"null";if("[object String]"==className)return quote(""+value);if("object"==typeof value){for(length=stack.length;length--;)if(stack[length]===value)throw TypeError();if(stack.push(value),results=[],prefix=indentation,indentation+=whitespace,"[object Array]"==className){for(index=0,length=value.length;index<length;index++)element=serialize(index,value,callback,properties,whitespace,indentation,stack),results.push(element===undef?"null":element);result=results.length?whitespace?"[\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"]":"["+results.join(",")+"]":"[]"}else forEach(properties||value,function(property){var element=serialize(property,value,callback,properties,whitespace,indentation,stack);element!==undef&&results.push(quote(property)+":"+(whitespace?" ":"")+element)}),result=results.length?whitespace?"{\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"}":"{"+results.join(",")+"}":"{}";return stack.pop(),result}};exports.stringify=function(source,filter,width){var whitespace,callback,properties,className;if(objectTypes[typeof filter]&&filter)if("[object Function]"==(className=getClass.call(filter)))callback=filter;else if("[object Array]"==className){properties={};for(var value,index=0,length=filter.length;index<length;value=filter[index++],("[object String]"==(className=getClass.call(value))||"[object Number]"==className)&&(properties[value]=1));}if(width)if("[object Number]"==(className=getClass.call(width))){if((width-=width%1)>0)for(whitespace="",width>10&&(width=10);whitespace.length<width;whitespace+=" ");}else"[object String]"==className&&(whitespace=width.length<=10?width:width.slice(0,10));return serialize("",(value={},value[""]=source,value),callback,properties,whitespace,"",[])}}if(!has("json-parse")){var Index,Source,fromCharCode=String.fromCharCode,Unescapes={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},abort=function(){throw Index=Source=null,SyntaxError()},lex=function(){for(var value,begin,position,isSigned,charCode,source=Source,length=source.length;Index<length;)switch(charCode=source.charCodeAt(Index)){case 9:case 10:case 13:case 32:Index++;break;case 123:case 125:case 91:case 93:case 58:case 44:return value=charIndexBuggy?source.charAt(Index):source[Index],Index++,value;case 34:for(value="@",Index++;Index<length;)if((charCode=source.charCodeAt(Index))<32)abort();else if(92==charCode)switch(charCode=source.charCodeAt(++Index)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:value+=Unescapes[charCode],Index++;break;case 117:for(begin=++Index,position=Index+4;Index<position;Index++)(charCode=source.charCodeAt(Index))>=48&&charCode<=57||charCode>=97&&charCode<=102||charCode>=65&&charCode<=70||abort();value+=fromCharCode("0x"+source.slice(begin,Index));break;default:abort()}else{if(34==charCode)break;for(charCode=source.charCodeAt(Index),begin=Index;charCode>=32&&92!=charCode&&34!=charCode;)charCode=source.charCodeAt(++Index);value+=source.slice(begin,Index)}if(34==source.charCodeAt(Index))return Index++,value;abort();default:if(begin=Index,45==charCode&&(isSigned=!0,charCode=source.charCodeAt(++Index)),charCode>=48&&charCode<=57){for(48==charCode&&(charCode=source.charCodeAt(Index+1))>=48&&charCode<=57&&abort(),isSigned=!1;Index<length&&(charCode=source.charCodeAt(Index))>=48&&charCode<=57;Index++);if(46==source.charCodeAt(Index)){for(position=++Index;position<length&&(charCode=source.charCodeAt(position))>=48&&charCode<=57;position++);position==Index&&abort(),Index=position}if(101==(charCode=source.charCodeAt(Index))||69==charCode){for(charCode=source.charCodeAt(++Index),43!=charCode&&45!=charCode||Index++,position=Index;position<length&&(charCode=source.charCodeAt(position))>=48&&charCode<=57;position++);position==Index&&abort(),Index=position}return+source.slice(begin,Index)}if(isSigned&&abort(),"true"==source.slice(Index,Index+4))return Index+=4,!0;if("false"==source.slice(Index,Index+5))return Index+=5,!1;if("null"==source.slice(Index,Index+4))return Index+=4,null;abort()}return"$"},get=function(value){var results,hasMembers;if("$"==value&&abort(),"string"==typeof value){if("@"==(charIndexBuggy?value.charAt(0):value[0]))return value.slice(1);if("["==value){for(results=[];"]"!=(value=lex());hasMembers||(hasMembers=!0))hasMembers&&(","==value?"]"==(value=lex())&&abort():abort()),","==value&&abort(),results.push(get(value));return results}if("{"==value){for(results={};"}"!=(value=lex());hasMembers||(hasMembers=!0))hasMembers&&(","==value?"}"==(value=lex())&&abort():abort()),","!=value&&"string"==typeof value&&"@"==(charIndexBuggy?value.charAt(0):value[0])&&":"==lex()||abort(),results[value.slice(1)]=get(lex());return results}abort()}return value},update=function(source,property,callback){var element=walk(source,property,callback);element===undef?delete source[property]:source[property]=element},walk=function(source,property,callback){var length,value=source[property];if("object"==typeof value&&value)if("[object Array]"==getClass.call(value))for(length=value.length;length--;)update(value,length,callback);else forEach(value,function(property){update(value,property,callback)});return callback.call(source,property,value)};exports.parse=function(source,callback){var result,value;return Index=0,Source=""+source,result=get(lex()),"$"!=lex()&&abort(),Index=Source=null,callback&&"[object Function]"==getClass.call(callback)?walk((value={},value[""]=result,value),"",callback):result}}}return exports.runInContext=runInContext,exports}var isLoader="function"==typeof define&&define.amd,objectTypes={function:!0,object:!0},freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports,root=objectTypes[typeof window]&&window||this,freeGlobal=freeExports&&objectTypes[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;if(!freeGlobal||freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal&&freeGlobal.self!==freeGlobal||(root=freeGlobal),freeExports&&!isLoader)runInContext(root,freeExports);else{var nativeJSON=root.JSON,previousJSON=root.JSON3,isRestored=!1,JSON3=runInContext(root,root.JSON3={noConflict:function(){return isRestored||(isRestored=!0,root.JSON=nativeJSON,root.JSON3=previousJSON,
nativeJSON=previousJSON=null),JSON3}});root.JSON={parse:JSON3.parse,stringify:JSON3.stringify}}isLoader&&define(function(){return JSON3})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],158:[function(require,module,exports){function noop(){}function jsonp(url,opts,fn){function cleanup(){script.parentNode&&script.parentNode.removeChild(script),window[id]=noop,timer&&clearTimeout(timer)}function cancel(){window[id]&&cleanup()}"function"==typeof opts&&(fn=opts,opts={}),opts||(opts={});var script,timer,prefix=opts.prefix||"__jp",id=opts.name||prefix+count++,param=opts.param||"callback",timeout=null!=opts.timeout?opts.timeout:6e4,enc=encodeURIComponent,target=document.getElementsByTagName("script")[0]||document.head;return timeout&&(timer=setTimeout(function(){cleanup(),fn&&fn(new Error("Timeout"))},timeout)),window[id]=function(data){debug("jsonp got",data),cleanup(),fn&&fn(null,data)},url+=(~url.indexOf("?")?"&":"?")+param+"="+enc(id),url=url.replace("?&","?"),debug('jsonp req "%s"',url),script=document.createElement("script"),script.src=url,target.parentNode.insertBefore(script,target),cancel}var debug=require("debug")("jsonp");module.exports=jsonp;var count=0},{debug:142}],159:[function(require,module,exports){var is=require("is"),onload=require("script-onload"),tick=require("next-tick");module.exports=function(options,fn){if(!options)throw new Error("Cant load nothing...");is.string(options)&&(options={src:options});var https="https:"===document.location.protocol||"chrome-extension:"===document.location.protocol;options.src&&0===options.src.indexOf("//")&&(options.src=https?"https:"+options.src:"http:"+options.src),https&&options.https?options.src=options.https:!https&&options.http&&(options.src=options.http);var iframe=document.createElement("iframe");return iframe.src=options.src,iframe.width=options.width||1,iframe.height=options.height||1,iframe.style.display="none",is.fn(fn)&&onload(iframe,fn),tick(function(){var firstScript=document.getElementsByTagName("script")[0];firstScript.parentNode.insertBefore(iframe,firstScript)}),iframe}},{is:153,"next-tick":166,"script-onload":171}],160:[function(require,module,exports){function parse(str){if(str=String(str),!(str.length>100)){var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(match){var n=parseFloat(match[1]);switch((match[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function fmtShort(ms){return ms>=d?Math.round(ms/d)+"d":ms>=h?Math.round(ms/h)+"h":ms>=m?Math.round(ms/m)+"m":ms>=s?Math.round(ms/s)+"s":ms+"ms"}function fmtLong(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(!(ms<n))return ms<1.5*n?Math.floor(ms/n)+" "+name:Math.ceil(ms/n)+" "+name+"s"}var s=1e3,m=60*s,h=60*m,d=24*h,y=365.25*d;module.exports=function(val,options){options=options||{};var type=typeof val;if("string"===type&&val.length>0)return parse(val);if("number"===type&&!1===isNaN(val))return options.long?fmtLong(val):fmtShort(val);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))}},{}],161:[function(require,module,exports){(function(global){function getRequest(cors){return cors&&global.XDomainRequest&&!/MSIE 1/.test(navigator.userAgent)?new XDomainRequest:global.XMLHttpRequest?new XMLHttpRequest:void 0}function setDefault(obj,key,value){obj[key]=obj[key]||value}var reqfields=["responseType","withCredentials","timeout","onprogress"];exports.ajax=function(params,callback){function cb(statusCode,responseText){return function(){if(!called){var data,code=void 0===req.status?statusCode:req.status,res=0===req.status?"Error":req.response||req.responseText||responseText;called=!0;try{data=JSON.parse(res)}catch(e){data=res}if(!code||code>=400)return callback(data,null,req);callback(null,data,req)}}}var headers=params.headers||{},body=params.body,method=params.method||(body?"POST":"GET"),called=!1,req=getRequest(params.cors);req.open(method,params.url,!0);var success=req.onload=cb(200);req.onreadystatechange=function(){4===req.readyState&&success()},req.onerror=cb(null,"Error"),req.ontimeout=cb(null,"Timeout"),req.onabort=cb(null,"Abort"),body&&(global.FormData&&body instanceof global.FormData||setDefault(headers,"Content-Type","application/x-www-form-urlencoded"));for(var field,i=0,len=reqfields.length;i<len;i++)field=reqfields[i],void 0!==params[field]&&(req[field]=params[field]);for(var field in headers)req.setRequestHeader(field,headers[field]);return req.send(body),req}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],162:[function(require,module,exports){"use strict";function toMs(num){return num<315576e5?1e3*num:num}var is=require("is"),isodate=require("@segment/isodate"),milliseconds=require("./milliseconds"),seconds=require("./seconds");module.exports=function(val){return is.date(val)?val:is.number(val)?new Date(toMs(val)):isodate.is(val)?isodate.parse(val):milliseconds.is(val)?milliseconds.parse(val):seconds.is(val)?seconds.parse(val):new Date(val)}},{"./milliseconds":163,"./seconds":164,"@segment/isodate":165,is:153}],163:[function(require,module,exports){"use strict";var matcher=/\d{13}/;exports.is=function(string){return matcher.test(string)},exports.parse=function(millis){return millis=parseInt(millis,10),new Date(millis)}},{}],164:[function(require,module,exports){"use strict";var matcher=/\d{10}/;exports.is=function(string){return matcher.test(string)},exports.parse=function(seconds){var millis=1e3*parseInt(seconds,10);return new Date(millis)}},{}],165:[function(require,module,exports){"use strict";var matcher=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;exports.parse=function(iso){var numericKeys=[1,5,6,7,11,12],arr=matcher.exec(iso),offset=0;if(!arr)return new Date(iso);for(var val,i=0;val=numericKeys[i];i++)arr[val]=parseInt(arr[val],10)||0;arr[2]=parseInt(arr[2],10)||1,arr[3]=parseInt(arr[3],10)||1,arr[2]--,arr[8]=arr[8]?(arr[8]+"00").substring(0,3):0," "===arr[4]?offset=(new Date).getTimezoneOffset():"Z"!==arr[9]&&arr[10]&&(offset=60*arr[11]+arr[12],"+"===arr[10]&&(offset=0-offset));var millis=Date.UTC(arr[1],arr[2],arr[3],arr[5],arr[6]+offset,arr[7],arr[8]);return new Date(millis)},exports.is=function(string,strict){return(!strict||!1!==/^\d{4}-\d{2}-\d{2}/.test(string))&&matcher.test(string)}},{}],166:[function(require,module,exports){arguments[4][108][0].apply(exports,arguments)},{_process:169,dup:108,timers:185}],167:[function(require,module,exports){function multiple(fn){return function(obj,path,val,options){normalize=options&&isFunction(options.normalizer)?options.normalizer:defaultNormalize,path=normalize(path);for(var key,finished=!1;!finished;)!function(){for(key in obj){var normalizedKey=normalize(key);if(0===path.indexOf(normalizedKey)){var temp=path.substr(normalizedKey.length);if("."===temp.charAt(0)||0===temp.length){path=temp.substr(1);var child=obj[key];return null==child?void(finished=!0):path.length?void(obj=child):void(finished=!0)}}}key=void 0,finished=!0}();if(key)return null==obj?obj:fn(obj,key,val)}}function find(obj,key){if(obj.hasOwnProperty(key))return obj[key]}function del(obj,key){return obj.hasOwnProperty(key)&&delete obj[key],obj}function replace(obj,key,val){return obj.hasOwnProperty(key)&&(obj[key]=val),obj}function defaultNormalize(path){return path.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}function isFunction(val){return"function"==typeof val}module.exports=multiple(find),module.exports.find=module.exports,module.exports.replace=function(obj,key,val,options){return multiple(replace).call(this,obj,key,val,options),obj},module.exports.del=function(obj,key,options){return multiple(del).call(this,obj,key,null,options),obj}},{}],168:[function(require,module,exports){var has=Object.prototype.hasOwnProperty;exports.keys=Object.keys||function(obj){var keys=[];for(var key in obj)has.call(obj,key)&&keys.push(key);return keys},exports.values=function(obj){var vals=[];for(var key in obj)has.call(obj,key)&&vals.push(obj[key]);return vals},exports.merge=function(a,b){for(var key in b)has.call(b,key)&&(a[key]=b[key]);return a},exports.length=function(obj){return exports.keys(obj).length},exports.isEmpty=function(obj){return 0==exports.length(obj)}},{}],169:[function(require,module,exports){function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,runClearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var cachedSetTimeout,cachedClearTimeout,process=module.exports={};!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},{}],170:[function(require,module,exports){function reject(obj,fn){return fn=fn||compact,"array"==type(obj)?reject.array(obj,fn):reject.object(obj,fn)}function compact(value){return null==value}var type=require("type-component");module.exports=reject,reject.array=function(arr,fn){for(var ret=[],i=0;i<arr.length;++i)fn(arr[i],i)||(ret[ret.length]=arr[i]);return ret},reject.object=function(obj,fn){var ret={};for(var k in obj)obj.hasOwnProperty(k)&&!fn(obj[k],k)&&(ret[k]=obj[k]);return ret},reject.types=reject.type=function(obj,types){return Array.isArray(types)||(types=[types]),reject(obj,function(value){return-1!=types.indexOf(type(value))})}},{"type-component":192}],171:[function(require,module,exports){function add(el,fn){el.addEventListener("load",function(_,e){fn(null,e)},!1),el.addEventListener("error",function(e){var err=new Error('script error "'+el.src+'"');err.event=e,fn(err)},!1)}function attach(el,fn){el.attachEvent("onreadystatechange",function(e){/complete|loaded/.test(el.readyState)&&fn(null,e)}),el.attachEvent("onerror",function(e){var err=new Error('failed to load the script "'+el.src+'"');err.event=e||window.event,fn(err)})}module.exports=function(el,fn){return el.addEventListener?add(el,fn):attach(el,fn)}},{}],172:[function(require,module,exports){"use strict";var get=require("obj-case");module.exports=function(proto){function trait(a,b){return function(){var traits=this.traits(),props=this.properties?this.properties():{};return get(traits,"address."+a)||get(traits,a)||(b?get(traits,"address."+b):null)||(b?get(traits,b):null)||get(props,"address."+a)||get(props,a)||(b?get(props,"address."+b):null)||(b?get(props,b):null)}}proto.zip=trait("postalCode","zip"),proto.country=trait("country"),proto.street=trait("street"),proto.state=trait("state"),proto.city=trait("city"),proto.region=trait("region")}},{"obj-case":167}],173:[function(require,module,exports){"use strict";function Alias(dictionary,opts){Facade.call(this,dictionary,opts)}var inherit=require("./utils").inherit,Facade=require("./facade");inherit(Alias,Facade),Alias.prototype.action=function(){return"alias"},Alias.prototype.type=Alias.prototype.action,Alias.prototype.previousId=function(){return this.field("previousId")||this.field("from")},Alias.prototype.from=Alias.prototype.previousId,Alias.prototype.userId=function(){return this.field("userId")||this.field("to")},Alias.prototype.to=Alias.prototype.userId,module.exports=Alias},{"./facade":175,"./utils":183}],174:[function(require,module,exports){"use strict";function Delete(dictionary,opts){Facade.call(this,dictionary,opts)}var inherit=require("./utils").inherit,Facade=require("./facade");inherit(Delete,Facade),Delete.prototype.type=function(){return"delete"},module.exports=Delete},{"./facade":175,"./utils":183}],175:[function(require,module,exports){"use strict";function Facade(obj,opts){opts=opts||{},"clone"in opts||(opts.clone=!0),opts.clone&&(obj=clone(obj)),"traverse"in opts||(opts.traverse=!0),obj.timestamp="timestamp"in obj?newDate(obj.timestamp):new Date,opts.traverse&&traverse(obj),this.opts=opts,this.obj=obj}function transform(obj){return clone(obj)}var address=require("./address"),clone=require("./utils").clone,isEnabled=require("./is-enabled"),newDate=require("new-date"),objCase=require("obj-case"),traverse=require("@segment/isodate-traverse"),type=require("./utils").type;Facade.prototype.proxy=function(field){var fields=field.split(".");field=fields.shift();var obj=this[field]||this.field(field);return obj?("function"==typeof obj&&(obj=obj.call(this)||{}),0===fields.length?this.opts.clone?transform(obj):obj:(obj=objCase(obj,fields.join(".")),this.opts.clone?transform(obj):obj)):obj},Facade.prototype.field=function(field){var obj=this.obj[field];return this.opts.clone?transform(obj):obj},Facade.proxy=function(field){return function(){return this.proxy(field)}},Facade.field=function(field){return function(){return this.field(field)}},Facade.multi=function(path){return function(){var multi=this.proxy(path+"s");if("array"===type(multi))return multi;var one=this.proxy(path);return one&&(one=[this.opts.clone?clone(one):one]),one||[]}},Facade.one=function(path){return function(){var one=this.proxy(path);if(one)return one;var multi=this.proxy(path+"s");return"array"===type(multi)?multi[0]:void 0}},Facade.prototype.json=function(){var ret=this.opts.clone?clone(this.obj):this.obj;return this.type&&(ret.type=this.type()),ret},Facade.prototype.options=function(integration){var obj=this.obj.options||this.obj.context||{},options=this.opts.clone?clone(obj):obj;if(!integration)return options;if(this.enabled(integration)){var integrations=this.integrations(),value=integrations[integration]||objCase(integrations,integration);return"object"!=typeof value&&(value=objCase(this.options(),integration)),"object"==typeof value?value:{}}},Facade.prototype.context=Facade.prototype.options,Facade.prototype.enabled=function(integration){var allEnabled=this.proxy("options.providers.all");"boolean"!=typeof allEnabled&&(allEnabled=this.proxy("options.all")),"boolean"!=typeof allEnabled&&(allEnabled=this.proxy("integrations.all")),"boolean"!=typeof allEnabled&&(allEnabled=!0);var enabled=allEnabled&&isEnabled(integration),options=this.integrations();if(options.providers&&options.providers.hasOwnProperty(integration)&&(enabled=options.providers[integration]),options.hasOwnProperty(integration)){var settings=options[integration];enabled="boolean"!=typeof settings||settings}return!!enabled},Facade.prototype.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()},Facade.prototype.active=function(){var active=this.proxy("options.active");return null!==active&&void 0!==active||(active=!0),active},Facade.prototype.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")},Facade.prototype.sessionId=Facade.prototype.anonymousId,Facade.prototype.groupId=Facade.proxy("options.groupId"),Facade.prototype.traits=function(aliases){var ret=this.proxy("options.traits")||{},id=this.userId();aliases=aliases||{},id&&(ret.id=id);for(var alias in aliases){var value=null==this[alias]?this.proxy("options.traits."+alias):this[alias]();null!=value&&(ret[aliases[alias]]=value,delete ret[alias])}return ret},Facade.prototype.library=function(){var library=this.proxy("options.library");return library?"string"==typeof library?{name:library,version:null}:library:{name:"unknown",version:null}},Facade.prototype.device=function(){var device=this.proxy("context.device");"object"!==type(device)&&(device={});var library=this.library().name;return device.type?device:(library.indexOf("ios")>-1&&(device.type="ios"),library.indexOf("android")>-1&&(device.type="android"),device)},Facade.prototype.userAgent=Facade.proxy("context.userAgent"),Facade.prototype.timezone=Facade.proxy("context.timezone"),Facade.prototype.timestamp=Facade.field("timestamp"),Facade.prototype.channel=Facade.field("channel"),Facade.prototype.ip=Facade.proxy("context.ip"),Facade.prototype.userId=Facade.field("userId"),address(Facade.prototype),module.exports=Facade},{"./address":172,"./is-enabled":179,"./utils":183,"@segment/isodate-traverse":50,"new-date":162,"obj-case":167}],176:[function(require,module,exports){"use strict";function Group(dictionary,opts){Facade.call(this,dictionary,opts)}var inherit=require("./utils").inherit,isEmail=require("is-email"),newDate=require("new-date"),Facade=require("./facade");inherit(Group,Facade),Group.prototype.action=function(){return"group"},Group.prototype.type=Group.prototype.action,Group.prototype.groupId=Facade.field("groupId"),Group.prototype.created=function(){var created=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(created)return newDate(created)},Group.prototype.email=function(){var email=this.proxy("traits.email");if(email)return email;var groupId=this.groupId();return isEmail(groupId)?groupId:void 0},Group.prototype.traits=function(aliases){var ret=this.properties(),id=this.groupId();aliases=aliases||{},id&&(ret.id=id);for(var alias in aliases){var value=null==this[alias]?this.proxy("traits."+alias):this[alias]();null!=value&&(ret[aliases[alias]]=value,delete ret[alias])}return ret},Group.prototype.name=Facade.proxy("traits.name"),Group.prototype.industry=Facade.proxy("traits.industry"),Group.prototype.employees=Facade.proxy("traits.employees"),Group.prototype.properties=function(){return this.field("traits")||this.field("properties")||{}},module.exports=Group},{"./facade":175,"./utils":183,"is-email":152,"new-date":162}],177:[function(require,module,exports){"use strict";function Identify(dictionary,opts){Facade.call(this,dictionary,opts)}var Facade=require("./facade"),get=require("obj-case"),inherit=require("./utils").inherit,isEmail=require("is-email"),newDate=require("new-date"),trim=require("trim"),type=require("./utils").type;inherit(Identify,Facade),Identify.prototype.action=function(){return"identify"},Identify.prototype.type=Identify.prototype.action,Identify.prototype.traits=function(aliases){var ret=this.field("traits")||{},id=this.userId();aliases=aliases||{},id&&(ret.id=id);for(var alias in aliases){var value=null==this[alias]?this.proxy("traits."+alias):this[alias]();null!=value&&(ret[aliases[alias]]=value,alias!==aliases[alias]&&delete ret[alias])}return ret},Identify.prototype.email=function(){var email=this.proxy("traits.email");if(email)return email;var userId=this.userId();return isEmail(userId)?userId:void 0},Identify.prototype.created=function(){var created=this.proxy("traits.created")||this.proxy("traits.createdAt");if(created)return newDate(created)},Identify.prototype.companyCreated=function(){var created=this.proxy("traits.company.created")||this.proxy("traits.company.createdAt");if(created)return newDate(created)},Identify.prototype.companyName=function(){return this.proxy("traits.company.name")},Identify.prototype.name=function(){var name=this.proxy("traits.name");if("string"==typeof name)return trim(name);var firstName=this.firstName(),lastName=this.lastName();return firstName&&lastName?trim(firstName+" "+lastName):void 0},Identify.prototype.firstName=function(){var firstName=this.proxy("traits.firstName");if("string"==typeof firstName)return trim(firstName);var name=this.proxy("traits.name");return"string"==typeof name?trim(name).split(" ")[0]:void 0},Identify.prototype.lastName=function(){var lastName=this.proxy("traits.lastName");if("string"==typeof lastName)return trim(lastName);var name=this.proxy("traits.name");if("string"==typeof name){var space=trim(name).indexOf(" ");if(-1!==space)return trim(name.substr(space+1))}},Identify.prototype.uid=function(){return this.userId()||this.username()||this.email()},Identify.prototype.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")},Identify.prototype.age=function(){var date=this.birthday(),age=get(this.traits(),"age");if(null!=age)return age;if("date"===type(date)){return(new Date).getFullYear()-date.getFullYear()}},Identify.prototype.avatar=function(){var traits=this.traits();return get(traits,"avatar")||get(traits,"photoUrl")||get(traits,"avatarUrl")},Identify.prototype.position=function(){var traits=this.traits();return get(traits,"position")||get(traits,"jobTitle")},Identify.prototype.username=Facade.proxy("traits.username"),Identify.prototype.website=Facade.one("traits.website"),Identify.prototype.websites=Facade.multi("traits.website"),Identify.prototype.phone=Facade.one("traits.phone"),Identify.prototype.phones=Facade.multi("traits.phone"),Identify.prototype.address=Facade.proxy("traits.address"),Identify.prototype.gender=Facade.proxy("traits.gender"),Identify.prototype.birthday=Facade.proxy("traits.birthday"),module.exports=Identify},{"./facade":175,"./utils":183,"is-email":152,"new-date":162,"obj-case":167,trim:191}],178:[function(require,module,exports){"use strict";var Facade=require("./facade");Facade.Alias=require("./alias"),Facade.Group=require("./group"),Facade.Identify=require("./identify"),Facade.Track=require("./track"),Facade.Page=require("./page"),Facade.Screen=require("./screen"),Facade.Delete=require("./delete"),module.exports=Facade},{"./alias":173,"./delete":174,"./facade":175,"./group":176,"./identify":177,"./page":180,"./screen":181,"./track":182}],179:[function(require,module,exports){"use strict";var disabled={Salesforce:!0};module.exports=function(integration){return!disabled[integration]}},{}],180:[function(require,module,exports){"use strict";function Page(dictionary,opts){Facade.call(this,dictionary,opts)}var inherit=require("./utils").inherit,Facade=require("./facade"),Track=require("./track"),isEmail=require("is-email");inherit(Page,Facade),Page.prototype.action=function(){return"page"},Page.prototype.type=Page.prototype.action,Page.prototype.category=Facade.field("category"),Page.prototype.name=Facade.field("name"),Page.prototype.title=Facade.proxy("properties.title"),Page.prototype.path=Facade.proxy("properties.path"),Page.prototype.url=Facade.proxy("properties.url"),Page.prototype.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},Page.prototype.properties=function(aliases){var props=this.field("properties")||{},category=this.category(),name=this.name();aliases=aliases||{},category&&(props.category=category),name&&(props.name=name);for(var alias in aliases){var value=null==this[alias]?this.proxy("properties."+alias):this[alias]();null!=value&&(props[aliases[alias]]=value,alias!==aliases[alias]&&delete props[alias])}return props},Page.prototype.email=function(){var email=this.proxy("context.traits.email")||this.proxy("properties.email");if(email)return email;var userId=this.userId();return isEmail(userId)?userId:void 0},Page.prototype.fullName=function(){var category=this.category(),name=this.name();return name&&category?category+" "+name:name},Page.prototype.event=function(name){return name?"Viewed "+name+" Page":"Loaded a Page"},Page.prototype.track=function(name){var json=this.json();return json.event=this.event(name),json.timestamp=this.timestamp(),json.properties=this.properties(),new Track(json,this.opts)},module.exports=Page},{"./facade":175,"./track":182,"./utils":183,"is-email":152}],181:[function(require,module,exports){"use strict";function Screen(dictionary,opts){Page.call(this,dictionary,opts)}var inherit=require("./utils").inherit,Page=require("./page"),Track=require("./track");inherit(Screen,Page),Screen.prototype.action=function(){return"screen"},Screen.prototype.type=Screen.prototype.action,Screen.prototype.event=function(name){return name?"Viewed "+name+" Screen":"Loaded a Screen"},Screen.prototype.track=function(name){var json=this.json();return json.event=this.event(name),json.timestamp=this.timestamp(),json.properties=this.properties(),new Track(json,this.opts)},module.exports=Screen},{"./page":180,"./track":182,"./utils":183}],182:[function(require,module,exports){"use strict";function Track(dictionary,opts){Facade.call(this,dictionary,opts)}function currency(val){if(val){if("number"==typeof val)return val;if("string"==typeof val)return val=val.replace(/\$/g,""),val=parseFloat(val),isNaN(val)?void 0:val}}var inherit=require("./utils").inherit,type=require("./utils").type,Facade=require("./facade"),Identify=require("./identify"),isEmail=require("is-email"),get=require("obj-case");inherit(Track,Facade),Track.prototype.action=function(){return"track"},Track.prototype.type=Track.prototype.action,Track.prototype.event=Facade.field("event"),Track.prototype.value=Facade.proxy("properties.value"),Track.prototype.category=Facade.proxy("properties.category"),Track.prototype.id=Facade.proxy("properties.id"),Track.prototype.productId=function(){return this.proxy("properties.product_id")||this.proxy("properties.productId")},Track.prototype.promotionId=function(){return this.proxy("properties.promotion_id")||this.proxy("properties.promotionId")},Track.prototype.cartId=function(){return this.proxy("properties.cart_id")||this.proxy("properties.cartId")},Track.prototype.checkoutId=function(){return this.proxy("properties.checkout_id")||this.proxy("properties.checkoutId")},Track.prototype.paymentId=function(){return this.proxy("properties.payment_id")||this.proxy("properties.paymentId")},Track.prototype.couponId=function(){return this.proxy("properties.coupon_id")||this.proxy("properties.couponId")},Track.prototype.wishlistId=function(){return this.proxy("properties.wishlist_id")||this.proxy("properties.wishlistId")},Track.prototype.reviewId=function(){return this.proxy("properties.review_id")||this.proxy("properties.reviewId")},Track.prototype.orderId=function(){return this.proxy("properties.id")||this.proxy("properties.order_id")||this.proxy("properties.orderId")},Track.prototype.sku=Facade.proxy("properties.sku"),Track.prototype.tax=Facade.proxy("properties.tax"),Track.prototype.name=Facade.proxy("properties.name"),Track.prototype.price=Facade.proxy("properties.price"),Track.prototype.total=Facade.proxy("properties.total"),Track.prototype.repeat=Facade.proxy("properties.repeat"),Track.prototype.coupon=Facade.proxy("properties.coupon"),Track.prototype.shipping=Facade.proxy("properties.shipping"),Track.prototype.discount=Facade.proxy("properties.discount"),Track.prototype.shippingMethod=function(){return this.proxy("properties.shipping_method")||this.proxy("properties.shippingMethod")},Track.prototype.paymentMethod=function(){return this.proxy("properties.payment_method")||this.proxy("properties.paymentMethod")},Track.prototype.description=Facade.proxy("properties.description"),Track.prototype.plan=Facade.proxy("properties.plan"),Track.prototype.subtotal=function(){var subtotal=get(this.properties(),"subtotal"),total=this.total()||this.revenue();if(subtotal)return subtotal;if(!total)return 0;if(this.total()){var n=this.tax();n&&(total-=n),n=this.shipping(),n&&(total-=n),n=this.discount(),n&&(total+=n)}return total},Track.prototype.products=function(){var props=this.properties(),products=get(props,"products");return"array"===type(products)?products:[]},Track.prototype.quantity=function(){return(this.obj.properties||{}).quantity||1},Track.prototype.currency=function(){return(this.obj.properties||{}).currency||"USD"},Track.prototype.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},Track.prototype.query=Facade.proxy("options.query"),Track.prototype.properties=function(aliases){var ret=this.field("properties")||{};aliases=aliases||{};for(var alias in aliases){var value=null==this[alias]?this.proxy("properties."+alias):this[alias]();null!=value&&(ret[aliases[alias]]=value,delete ret[alias])}return ret},Track.prototype.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()},Track.prototype.email=function(){var email=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(email)return email;var userId=this.userId();return isEmail(userId)?userId:void 0},Track.prototype.revenue=function(){var revenue=this.proxy("properties.revenue"),event=this.event(),orderCompletedRegExp=/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i;return!revenue&&event&&event.match(orderCompletedRegExp)&&(revenue=this.proxy("properties.total")),currency(revenue)},Track.prototype.cents=function(){var revenue=this.revenue();return"number"!=typeof revenue?this.value()||0:100*revenue},Track.prototype.identify=function(){var json=this.json();return json.traits=this.traits(),new Identify(json,this.opts)},module.exports=Track},{"./facade":175,"./identify":177,"./utils":183,"is-email":152,"obj-case":167}],183:[function(require,module,exports){"use strict";exports.inherit=require("inherits"),exports.clone=require("@ndhoule/clone"),exports.type=require("type-component")},{"@ndhoule/clone":15,inherits:150,"type-component":192}],184:[function(require,module,exports){module.exports=function(str,options){return options||(options={}),str.toLowerCase().replace(options.replace||/[^a-z0-9]/g," ").replace(/^ +| +$/g,"").replace(/ +/g,options.separator||"-")}},{}],185:[function(require,module,exports){
(function(setImmediate,clearImmediate){function Timeout(id,clearFn){this._id=id,this._clearFn=clearFn}var nextTick=require("process/browser.js").nextTick,apply=Function.prototype.apply,slice=Array.prototype.slice,immediateIds={},nextImmediateId=0;exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(timeout){timeout.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(window,this._id)},exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId),item._idleTimeout=msecs},exports.unenroll=function(item){clearTimeout(item._idleTimeoutId),item._idleTimeout=-1},exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;msecs>=0&&(item._idleTimeoutId=setTimeout(function(){item._onTimeout&&item._onTimeout()},msecs))},exports.setImmediate="function"==typeof setImmediate?setImmediate:function(fn){var id=nextImmediateId++,args=!(arguments.length<2)&&slice.call(arguments,1);return immediateIds[id]=!0,nextTick(function(){immediateIds[id]&&(args?fn.apply(null,args):fn.call(null),exports.clearImmediate(id))}),id},exports.clearImmediate="function"==typeof clearImmediate?clearImmediate:function(id){delete immediateIds[id]}}).call(this,require("timers").setImmediate,require("timers").clearImmediate)},{"process/browser.js":169,timers:185}],186:[function(require,module,exports){function toFunction(obj){switch({}.toString.call(obj)){case"[object Object]":return objectToFunction(obj);case"[object Function]":return obj;case"[object String]":return stringToFunction(obj);case"[object RegExp]":return regexpToFunction(obj);default:return defaultToFunction(obj)}}function defaultToFunction(val){return function(obj){return val===obj}}function regexpToFunction(re){return function(obj){return re.test(obj)}}function stringToFunction(str){return/^ *\W+/.test(str)?new Function("_","return _ "+str):new Function("_","return "+get(str))}function objectToFunction(obj){var match={};for(var key in obj)match[key]="string"==typeof obj[key]?defaultToFunction(obj[key]):toFunction(obj[key]);return function(val){if("object"!=typeof val)return!1;for(var key in match){if(!(key in val))return!1;if(!match[key](val[key]))return!1}return!0}}function get(str){var props=expr(str);if(!props.length)return"_."+str;var val,i,prop;for(i=0;i<props.length;i++)prop=props[i],val="_."+prop,val="('function' == typeof "+val+" ? "+val+"() : "+val+")",str=stripNested(prop,str,val);return str}function stripNested(prop,str,val){return str.replace(new RegExp("(\\.)?"+prop,"g"),function($0,$1){return $1?$0:val})}var expr;try{expr=require("props")}catch(e){expr=require("component-props")}module.exports=toFunction},{"component-props":136,props:136}],187:[function(require,module,exports){function toNoCase(string){return hasSpace.test(string)?string.toLowerCase():hasSeparator.test(string)?(unseparate(string)||string).toLowerCase():uncamelize(string).toLowerCase()}function unseparate(string){return string.replace(separatorSplitter,function(m,next){return next?" "+next:""})}function uncamelize(string){return string.replace(camelSplitter,function(m,previous,uppers){return previous+" "+uppers.toLowerCase().split("").join(" ")})}module.exports=toNoCase;var hasSpace=/\s/,hasSeparator=/[\W_]/,separatorSplitter=/[\W_]+(.|$)/g,camelSplitter=/(.)([A-Z]+)/g},{}],188:[function(require,module,exports){function toSnakeCase(string){return toSpace(string).replace(/\s/g,"_")}var toSpace=require("to-space-case");module.exports=toSnakeCase},{"to-space-case":189}],189:[function(require,module,exports){function toSpaceCase(string){return clean(string).replace(/[\W_]+(.|$)/g,function(matches,match){return match?" "+match:""}).trim()}var clean=require("to-no-case");module.exports=toSpaceCase},{"to-no-case":190}],190:[function(require,module,exports){function toNoCase(string){return hasSpace.test(string)?string.toLowerCase():hasSeparator.test(string)?(unseparate(string)||string).toLowerCase():hasCamel.test(string)?uncamelize(string).toLowerCase():string.toLowerCase()}function unseparate(string){return string.replace(separatorSplitter,function(m,next){return next?" "+next:""})}function uncamelize(string){return string.replace(camelSplitter,function(m,previous,uppers){return previous+" "+uppers.toLowerCase().split("").join(" ")})}module.exports=toNoCase;var hasSpace=/\s/,hasSeparator=/(_|-|\.|:)/,hasCamel=/([a-z][A-Z]|[A-Z][a-z])/,separatorSplitter=/[\W_]+(.|$)/g,camelSplitter=/(.)([A-Z]+)/g},{}],191:[function(require,module,exports){function trim(str){return str.replace(/^\s*|\s*$/g,"")}exports=module.exports=trim,exports.left=function(str){return str.replace(/^\s*/,"")},exports.right=function(str){return str.replace(/\s*$/,"")}},{}],192:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array"}return null===val?"null":void 0===val?"undefined":val===Object(val)?"object":typeof val}},{}],193:[function(require,module,exports){module.exports=function(date){return date=new Date(date),Math.floor(date.getTime()/1e3)}},{}],194:[function(require,module,exports){function transform(url){return check()?"https:"+url:"http:"+url}function check(){return"https:"==location.protocol||"chrome-extension:"==location.protocol}module.exports=function(url){switch(arguments.length){case 0:return check();case 1:return transform(url)}}},{}],195:[function(require,module,exports){function encode(string){string=string.replace(/\r\n/g,"\n");for(var utftext="",n=0;n<string.length;n++){var c=string.charCodeAt(n);c<128?utftext+=String.fromCharCode(c):c>127&&c<2048?(utftext+=String.fromCharCode(c>>6|192),utftext+=String.fromCharCode(63&c|128)):(utftext+=String.fromCharCode(c>>12|224),utftext+=String.fromCharCode(c>>6&63|128),utftext+=String.fromCharCode(63&c|128))}return utftext}module.exports=encode},{}],196:[function(require,module,exports){(function(global){var rng,crypto=global.crypto||global.msCrypto;if(crypto&&crypto.getRandomValues){var _rnds8=new Uint8Array(16);rng=function(){return crypto.getRandomValues(_rnds8),_rnds8}}if(!rng){var _rnds=new Array(16);rng=function(){for(var r,i=0;i<16;i++)0==(3&i)&&(r=4294967296*Math.random()),_rnds[i]=r>>>((3&i)<<3)&255;return _rnds}}module.exports=rng}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],197:[function(require,module,exports){function parse(s,buf,offset){var i=buf&&offset||0,ii=0;for(buf=buf||[],s.toLowerCase().replace(/[0-9a-f]{2}/g,function(oct){ii<16&&(buf[i+ii++]=_hexToByte[oct])});ii<16;)buf[i+ii++]=0;return buf}function unparse(buf,offset){var i=offset||0,bth=_byteToHex;return bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]}function v1(options,buf,offset){var i=buf&&offset||0,b=buf||[];options=options||{};var clockseq=void 0!==options.clockseq?options.clockseq:_clockseq,msecs=void 0!==options.msecs?options.msecs:(new Date).getTime(),nsecs=void 0!==options.nsecs?options.nsecs:_lastNSecs+1,dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&void 0===options.clockseq&&(clockseq=clockseq+1&16383),(dt<0||msecs>_lastMSecs)&&void 0===options.nsecs&&(nsecs=0),nsecs>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=msecs,_lastNSecs=nsecs,_clockseq=clockseq,msecs+=122192928e5;var tl=(1e4*(268435455&msecs)+nsecs)%4294967296;b[i++]=tl>>>24&255,b[i++]=tl>>>16&255,b[i++]=tl>>>8&255,b[i++]=255&tl;var tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255,b[i++]=255&tmh,b[i++]=tmh>>>24&15|16,b[i++]=tmh>>>16&255,b[i++]=clockseq>>>8|128,b[i++]=255&clockseq;for(var node=options.node||_nodeId,n=0;n<6;n++)b[i+n]=node[n];return buf||unparse(b)}function v4(options,buf,offset){var i=buf&&offset||0;"string"==typeof options&&(buf="binary"==options?new Array(16):null,options=null),options=options||{};var rnds=options.random||(options.rng||_rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf)for(var ii=0;ii<16;ii++)buf[i+ii]=rnds[ii];return buf||unparse(rnds)}for(var _rng=require("./rng"),_byteToHex=[],_hexToByte={},i=0;i<256;i++)_byteToHex[i]=(i+256).toString(16).substr(1),_hexToByte[_byteToHex[i]]=i;var _seedBytes=_rng(),_nodeId=[1|_seedBytes[0],_seedBytes[1],_seedBytes[2],_seedBytes[3],_seedBytes[4],_seedBytes[5]],_clockseq=16383&(_seedBytes[6]<<8|_seedBytes[7]),_lastMSecs=0,_lastNSecs=0,uuid=v4;uuid.v1=v1,uuid.v4=v4,uuid.parse=parse,uuid.unparse=unparse,module.exports=uuid},{"./rng":196}]},{},[1]);
