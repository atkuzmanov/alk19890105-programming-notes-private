WPac.XDM = WPac.XDM || {

    xdm: {},

    channel: {},

    xhr: function(host) {
        if (this.xdm[host] && this.iframe(host)) {
            return this.xdm[host];
        } else {
            return (this.xdm[host] = this.create(host));
        }
    },

    iframe: function(host) {
        return document.getElementById('easyXDM_' + this.channel[host] + '_provider');
    },

    create: function(host) {
        var handler = this;
        this.loadEasyXDM();
        return new easyXDM.Rpc({
            remote: host + '/widget/xdm/index.html',
            onReady: function() {
                var iframe = document.getElementById('easyXDM_' + this.channel + '_provider');
                iframe.setAttribute('style', 'position:absolute!important;top:-2000px!important;left:0!important;');
                handler.channel[host] = this.channel;
            }
        },{
            remote: {
                request: {}
            },
            serializer: {
                stringify: function(obj) {
                    var clone = {
                        id: obj.id,
                        jsonrpc: obj.jsonrpc,
                        method: obj.method,
                        params: obj.params[0]
                    };
                    return handler.stringify(clone);
                },
                parse: function(string) {
                    return JSON.parse(string);
                }
            }
        });
    },

    //TODO: coz if loaded many times occurs error: undefined is not a function
    //TODO: check this behavior on production with loaded widget from 'a' and 'b'
    loadEasyXDM: function() {
        (function(N,d,p,K,k,H){var b=this;var n=Math.floor(Math.random()*10000);var q=Function.prototype;var Q=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/;var R=/[\-\w]+\/\.\.\//;var F=/([^:])\/\//g;var I="";var o={};var M=N.easyXDM;var U="easyXDM_";var E;var y=false;var i;var h;function C(X,Z){var Y=typeof X[Z];return Y=="function"||(!!(Y=="object"&&X[Z]))||Y=="unknown"}function u(X,Y){return !!(typeof(X[Y])=="object"&&X[Y])}function r(X){return Object.prototype.toString.call(X)==="[object Array]"}function c(){var Z="Shockwave Flash",ad="application/x-shockwave-flash";if(!t(navigator.plugins)&&typeof navigator.plugins[Z]=="object"){var ab=navigator.plugins[Z].description;if(ab&&!t(navigator.mimeTypes)&&navigator.mimeTypes[ad]&&navigator.mimeTypes[ad].enabledPlugin){i=ab.match(/\d+/g)}}if(!i){var Y;try{Y=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");i=Array.prototype.slice.call(Y.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1);Y=null}catch(ac){}}if(!i){return false}var X=parseInt(i[0],10),aa=parseInt(i[1],10);h=X>9&&aa>0;return true}var v,x;if(C(N,"addEventListener")){v=function(Z,X,Y){Z.addEventListener(X,Y,false)};x=function(Z,X,Y){Z.removeEventListener(X,Y,false)}}else{if(C(N,"attachEvent")){v=function(X,Z,Y){X.attachEvent("on"+Z,Y)};x=function(X,Z,Y){X.detachEvent("on"+Z,Y)}}else{throw new Error("Browser not supported")}}var W=false,J=[],L;if("readyState" in d){L=d.readyState;W=L=="complete"||(~navigator.userAgent.indexOf("AppleWebKit/")&&(L=="loaded"||L=="interactive"))}else{W=!!d.body}function s(){if(W){return}W=true;for(var X=0;X<J.length;X++){J[X]()}J.length=0}if(!W){if(C(N,"addEventListener")){v(d,"DOMContentLoaded",s)}else{v(d,"readystatechange",function(){if(d.readyState=="complete"){s()}});if(d.documentElement.doScroll&&N===top){var g=function(){if(W){return}try{d.documentElement.doScroll("left")}catch(X){K(g,1);return}s()};g()}}v(N,"load",s)}function G(Y,X){if(W){Y.call(X);return}J.push(function(){Y.call(X)})}function m(){var Z=parent;if(I!==""){for(var X=0,Y=I.split(".");X<Y.length;X++){Z=Z[Y[X]]}}return Z.easyXDM}function e(X){N.easyXDM=M;I=X;if(I){U="easyXDM_"+I.replace(".","_")+"_"}return o}function z(X){return X.match(Q)[3]}function f(X){return X.match(Q)[4]||""}function j(Z){var X=Z.toLowerCase().match(Q);var aa=X[2],ab=X[3],Y=X[4]||"";if((aa=="http:"&&Y==":80")||(aa=="https:"&&Y==":443")){Y=""}return aa+"//"+ab+Y}function B(X){X=X.replace(F,"$1/");if(!X.match(/^(http||https):\/\//)){var Y=(X.substring(0,1)==="/")?"":p.pathname;if(Y.substring(Y.length-1)!=="/"){Y=Y.substring(0,Y.lastIndexOf("/")+1)}X=p.protocol+"//"+p.host+Y+X}while(R.test(X)){X=X.replace(R,"")}return X}function P(X,aa){var ac="",Z=X.indexOf("#");if(Z!==-1){ac=X.substring(Z);X=X.substring(0,Z)}var ab=[];for(var Y in aa){if(aa.hasOwnProperty(Y)){ab.push(Y+"="+H(aa[Y]))}}return X+(y?"#":(X.indexOf("?")==-1?"?":"&"))+ab.join("&")+ac}var S=(function(X){X=X.substring(1).split("&");var Z={},aa,Y=X.length;while(Y--){aa=X[Y].split("=");Z[aa[0]]=k(aa[1])}return Z}(/xdm_e=/.test(p.search)?p.search:p.hash));function t(X){return typeof X==="undefined"}var O=function(){var Y={};var Z={a:[1,2,3]},X='{"a":[1,2,3]}';if(typeof JSON!="undefined"&&typeof JSON.stringify==="function"&&JSON.stringify(Z).replace((/\s/g),"")===X){return JSON}if(Object.toJSON){if(Object.toJSON(Z).replace((/\s/g),"")===X){Y.stringify=Object.toJSON}}if(typeof String.prototype.evalJSON==="function"){Z=X.evalJSON();if(Z.a&&Z.a.length===3&&Z.a[2]===3){Y.parse=function(aa){return aa.evalJSON()}}}if(Y.stringify&&Y.parse){O=function(){return Y};return Y}return null};function T(X,Y,Z){var ab;for(var aa in Y){if(Y.hasOwnProperty(aa)){if(aa in X){ab=Y[aa];if(typeof ab==="object"){T(X[aa],ab,Z)}else{if(!Z){X[aa]=Y[aa]}}}else{X[aa]=Y[aa]}}}return X}function a(){var Y=d.body.appendChild(d.createElement("form")),X=Y.appendChild(d.createElement("input"));X.name=U+"TEST"+n;E=X!==Y.elements[X.name];d.body.removeChild(Y)}function A(Y){if(t(E)){a()}var ac;if(E){ac=d.createElement('<iframe name="'+Y.props.name+'"/>')}else{ac=d.createElement("IFRAME");ac.name=Y.props.name}ac.id=ac.name=Y.props.name;delete Y.props.name;if(typeof Y.container=="string"){Y.container=d.getElementById(Y.container)}if(!Y.container){T(ac.style,{position:"absolute",top:"-2000px",left:"0px"});Y.container=d.body}var ab=Y.props.src;Y.props.src="javascript:false";T(ac,Y.props);ac.border=ac.frameBorder=0;ac.allowTransparency=true;Y.container.appendChild(ac);if(Y.onLoad){v(ac,"load",Y.onLoad)}if(Y.usePost){var aa=Y.container.appendChild(d.createElement("form")),X;aa.target=ac.name;aa.action=ab;aa.method="POST";if(typeof(Y.usePost)==="object"){for(var Z in Y.usePost){if(Y.usePost.hasOwnProperty(Z)){if(E){X=d.createElement('<input name="'+Z+'"/>')}else{X=d.createElement("INPUT");X.name=Z}X.value=Y.usePost[Z];aa.appendChild(X)}}}aa.submit();aa.parentNode.removeChild(aa)}else{ac.src=ab}Y.props.src=ab;return ac}function V(aa,Z){if(typeof aa=="string"){aa=[aa]}var Y,X=aa.length;while(X--){Y=aa[X];Y=new RegExp(Y.substr(0,1)=="^"?Y:("^"+Y.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"));if(Y.test(Z)){return true}}return false}function l(Z){var ae=Z.protocol,Y;Z.isHost=Z.isHost||t(S.xdm_p);y=Z.hash||false;if(!Z.props){Z.props={}}if(!Z.isHost){Z.channel=S.xdm_c.replace(/["'<>\\]/g,"");Z.secret=S.xdm_s;Z.remote=S.xdm_e.replace(/["'<>\\]/g,"");ae=S.xdm_p;if(Z.acl&&!V(Z.acl,Z.remote)){throw new Error("Access denied for "+Z.remote)}}else{Z.remote=B(Z.remote);Z.channel=Z.channel||"default"+n++;Z.secret=Math.random().toString(16).substring(2);if(t(ae)){if(j(p.href)==j(Z.remote)){ae="4"}else{if(C(N,"postMessage")||C(d,"postMessage")){ae="1"}else{if(Z.swf&&C(N,"ActiveXObject")&&c()){ae="6"}else{if(navigator.product==="Gecko"&&"frameElement" in N&&navigator.userAgent.indexOf("WebKit")==-1){ae="5"}else{if(Z.remoteHelper){ae="2"}else{ae="0"}}}}}}}Z.protocol=ae;switch(ae){case"0":T(Z,{interval:100,delay:2000,useResize:true,useParent:false,usePolling:false},true);if(Z.isHost){if(!Z.local){var ac=p.protocol+"//"+p.host,X=d.body.getElementsByTagName("img"),ad;var aa=X.length;while(aa--){ad=X[aa];if(ad.src.substring(0,ac.length)===ac){Z.local=ad.src;break}}if(!Z.local){Z.local=N}}var ab={xdm_c:Z.channel,xdm_p:0};if(Z.local===N){Z.usePolling=true;Z.useParent=true;Z.local=p.protocol+"//"+p.host+p.pathname+p.search;ab.xdm_e=Z.local;ab.xdm_pa=1}else{ab.xdm_e=B(Z.local)}if(Z.container){Z.useResize=false;ab.xdm_po=1}Z.remote=P(Z.remote,ab)}else{T(Z,{channel:S.xdm_c,remote:S.xdm_e,useParent:!t(S.xdm_pa),usePolling:!t(S.xdm_po),useResize:Z.useParent?false:Z.useResize})}Y=[new o.stack.HashTransport(Z),new o.stack.ReliableBehavior({}),new o.stack.QueueBehavior({encode:true,maxLength:4000-Z.remote.length}),new o.stack.VerifyBehavior({initiate:Z.isHost})];break;case"1":Y=[new o.stack.PostMessageTransport(Z)];break;case"2":if(Z.isHost){Z.remoteHelper=B(Z.remoteHelper)}Y=[new o.stack.NameTransport(Z),new o.stack.QueueBehavior(),new o.stack.VerifyBehavior({initiate:Z.isHost})];break;case"3":Y=[new o.stack.NixTransport(Z)];break;case"4":Y=[new o.stack.SameOriginTransport(Z)];break;case"5":Y=[new o.stack.FrameElementTransport(Z)];break;case"6":if(!i){c()}Y=[new o.stack.FlashTransport(Z)];break}Y.push(new o.stack.QueueBehavior({lazy:Z.lazy,remove:true}));return Y}function D(aa){var ab,Z={incoming:function(ad,ac){this.up.incoming(ad,ac)},outgoing:function(ac,ad){this.down.outgoing(ac,ad)},callback:function(ac){this.up.callback(ac)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}};for(var Y=0,X=aa.length;Y<X;Y++){ab=aa[Y];T(ab,Z,true);if(Y!==0){ab.down=aa[Y-1]}if(Y!==X-1){ab.up=aa[Y+1]}}return ab}function w(X){X.up.down=X.down;X.down.up=X.up;X.up=X.down=null}T(o,{version:"2.4.19.3",query:S,stack:{},apply:T,getJSONObject:O,whenReady:G,noConflict:e});o.DomHelper={on:v,un:x,requiresJSON:function(X){if(!u(N,"JSON")){d.write('<script type="text/javascript" src="'+X+'"><\/script>')}}};(function(){var X={};o.Fn={set:function(Y,Z){X[Y]=Z},get:function(Z,Y){if(!X.hasOwnProperty(Z)){return}var aa=X[Z];if(Y){delete X[Z]}return aa}}}());o.Socket=function(Y){var X=D(l(Y).concat([{incoming:function(ab,aa){Y.onMessage(ab,aa)},callback:function(aa){if(Y.onReady){Y.onReady(aa)}}}])),Z=j(Y.remote);this.origin=j(Y.remote);this.destroy=function(){X.destroy()};this.postMessage=function(aa){X.outgoing(aa,Z)};X.init()};o.Rpc=function(Z,Y){if(Y.local){for(var ab in Y.local){if(Y.local.hasOwnProperty(ab)){var aa=Y.local[ab];if(typeof aa==="function"){Y.local[ab]={method:aa}}}}}var X=D(l(Z).concat([new o.stack.RpcBehavior(this,Y),{callback:function(ac){if(Z.onReady){Z.onReady(ac)}}}]));this.origin=j(Z.remote);this.destroy=function(){X.destroy()};X.init()};o.stack.SameOriginTransport=function(Y){var Z,ab,aa,X;return(Z={outgoing:function(ad,ae,ac){aa(ad);if(ac){ac()}},destroy:function(){if(ab){ab.parentNode.removeChild(ab);ab=null}},onDOMReady:function(){X=j(Y.remote);if(Y.isHost){T(Y.props,{src:P(Y.remote,{xdm_e:p.protocol+"//"+p.host+p.pathname,xdm_c:Y.channel,xdm_p:4}),name:U+Y.channel+"_provider"});ab=A(Y);o.Fn.set(Y.channel,function(ac){aa=ac;K(function(){Z.up.callback(true)},0);return function(ad){Z.up.incoming(ad,X)}})}else{aa=m().Fn.get(Y.channel,true)(function(ac){Z.up.incoming(ac,X)});K(function(){Z.up.callback(true)},0)}},init:function(){G(Z.onDOMReady,Z)}})};o.stack.FlashTransport=function(aa){var ac,X,ab,ad,Y,ae;function af(ah,ag){K(function(){ac.up.incoming(ah,ad)},0)}function Z(ah){var ag=aa.swf+"?host="+aa.isHost;var aj="easyXDM_swf_"+Math.floor(Math.random()*10000);o.Fn.set("flash_loaded"+ah.replace(/[\-.]/g,"_"),function(){o.stack.FlashTransport[ah].swf=Y=ae.firstChild;var ak=o.stack.FlashTransport[ah].queue;for(var al=0;al<ak.length;al++){ak[al]()}ak.length=0});if(aa.swfContainer){ae=(typeof aa.swfContainer=="string")?d.getElementById(aa.swfContainer):aa.swfContainer}else{ae=d.createElement("div");T(ae.style,h&&aa.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0});d.body.appendChild(ae)}var ai="callback=flash_loaded"+H(ah.replace(/[\-.]/g,"_"))+"&proto="+b.location.protocol+"&domain="+H(z(b.location.href))+"&port="+H(f(b.location.href))+"&ns="+H(I);ae.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+aj+"' data='"+ag+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+ag+"'></param><param name='flashvars' value='"+ai+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+ai+"' allowScriptAccess='always' wmode='transparent' src='"+ag+"' height='1' width='1'></embed></object>"}return(ac={outgoing:function(ah,ai,ag){Y.postMessage(aa.channel,ah.toString());if(ag){ag()}},destroy:function(){try{Y.destroyChannel(aa.channel)}catch(ag){}Y=null;if(X){X.parentNode.removeChild(X);X=null}},onDOMReady:function(){ad=aa.remote;o.Fn.set("flash_"+aa.channel+"_init",function(){K(function(){ac.up.callback(true)})});o.Fn.set("flash_"+aa.channel+"_onMessage",af);aa.swf=B(aa.swf);var ah=z(aa.swf);var ag=function(){o.stack.FlashTransport[ah].init=true;Y=o.stack.FlashTransport[ah].swf;Y.createChannel(aa.channel,aa.secret,j(aa.remote),aa.isHost);if(aa.isHost){if(h&&aa.swfNoThrottle){T(aa.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"})}T(aa.props,{src:P(aa.remote,{xdm_e:j(p.href),xdm_c:aa.channel,xdm_p:6,xdm_s:aa.secret}),name:U+aa.channel+"_provider"});X=A(aa)}};if(o.stack.FlashTransport[ah]&&o.stack.FlashTransport[ah].init){ag()}else{if(!o.stack.FlashTransport[ah]){o.stack.FlashTransport[ah]={queue:[ag]};Z(ah)}else{o.stack.FlashTransport[ah].queue.push(ag)}}},init:function(){G(ac.onDOMReady,ac)}})};o.stack.PostMessageTransport=function(aa){var ac,ad,Y,Z;function X(ae){if(ae.origin){return j(ae.origin)}if(ae.uri){return j(ae.uri)}if(ae.domain){return p.protocol+"//"+ae.domain}throw"Unable to retrieve the origin of the event"}function ab(af){var ae=X(af);if(ae==Z&&af.data.substring(0,aa.channel.length+1)==aa.channel+" "){ac.up.incoming(af.data.substring(aa.channel.length+1),ae)}}return(ac={outgoing:function(af,ag,ae){Y.postMessage(aa.channel+" "+af,ag||Z);if(ae){ae()}},destroy:function(){x(N,"message",ab);if(ad){Y=null;ad.parentNode.removeChild(ad);ad=null}},onDOMReady:function(){Z=j(aa.remote);if(aa.isHost){var ae=function(af){if(af.data==aa.channel+"-ready"){Y=("postMessage" in ad.contentWindow)?ad.contentWindow:ad.contentWindow.document;x(N,"message",ae);v(N,"message",ab);K(function(){ac.up.callback(true)},0)}};v(N,"message",ae);T(aa.props,{src:P(aa.remote,{xdm_e:j(p.href),xdm_c:aa.channel,xdm_p:1}),name:U+aa.channel+"_provider"});ad=A(aa)}else{v(N,"message",ab);Y=("postMessage" in N.parent)?N.parent:N.parent.document;Y.postMessage(aa.channel+"-ready",Z);K(function(){ac.up.callback(true)},0)}},init:function(){G(ac.onDOMReady,ac)}})};o.stack.FrameElementTransport=function(Y){var Z,ab,aa,X;return(Z={outgoing:function(ad,ae,ac){aa.call(this,ad);if(ac){ac()}},destroy:function(){if(ab){ab.parentNode.removeChild(ab);ab=null}},onDOMReady:function(){X=j(Y.remote);if(Y.isHost){T(Y.props,{src:P(Y.remote,{xdm_e:j(p.href),xdm_c:Y.channel,xdm_p:5}),name:U+Y.channel+"_provider"});ab=A(Y);ab.fn=function(ac){delete ab.fn;aa=ac;K(function(){Z.up.callback(true)},0);return function(ad){Z.up.incoming(ad,X)}}}else{if(d.referrer&&j(d.referrer)!=S.xdm_e){N.top.location=S.xdm_e}aa=N.frameElement.fn(function(ac){Z.up.incoming(ac,X)});Z.up.callback(true)}},init:function(){G(Z.onDOMReady,Z)}})};o.stack.NameTransport=function(ab){var ac;var ae,ai,aa,ag,ah,Y,X;function af(al){var ak=ab.remoteHelper+(ae?"#_3":"#_2")+ab.channel;ai.contentWindow.sendMessage(al,ak)}function ad(){if(ae){if(++ag===2||!ae){ac.up.callback(true)}}else{af("ready");ac.up.callback(true)}}function aj(ak){ac.up.incoming(ak,Y)}function Z(){if(ah){K(function(){ah(true)},0)}}return(ac={outgoing:function(al,am,ak){ah=ak;af(al)},destroy:function(){ai.parentNode.removeChild(ai);ai=null;if(ae){aa.parentNode.removeChild(aa);aa=null}},onDOMReady:function(){ae=ab.isHost;ag=0;Y=j(ab.remote);ab.local=B(ab.local);if(ae){o.Fn.set(ab.channel,function(al){if(ae&&al==="ready"){o.Fn.set(ab.channel,aj);ad()}});X=P(ab.remote,{xdm_e:ab.local,xdm_c:ab.channel,xdm_p:2});T(ab.props,{src:X+"#"+ab.channel,name:U+ab.channel+"_provider"});aa=A(ab)}else{ab.remoteHelper=ab.remote;o.Fn.set(ab.channel,aj)}var ak=function(){var al=ai||this;x(al,"load",ak);o.Fn.set(ab.channel+"_load",Z);(function am(){if(typeof al.contentWindow.sendMessage=="function"){ad()}else{K(am,50)}}())};ai=A({props:{src:ab.local+"#_4"+ab.channel},onLoad:ak})},init:function(){G(ac.onDOMReady,ac)}})};o.stack.HashTransport=function(Z){var ac;var ah=this,af,aa,X,ad,am,ab,al;var ag,Y;function ak(ao){if(!al){return}var an=Z.remote+"#"+(am++)+"_"+ao;((af||!ag)?al.contentWindow:al).location=an}function ae(an){ad=an;ac.up.incoming(ad.substring(ad.indexOf("_")+1),Y)}function aj(){if(!ab){return}var an=ab.location.href,ap="",ao=an.indexOf("#");if(ao!=-1){ap=an.substring(ao)}if(ap&&ap!=ad){ae(ap)}}function ai(){aa=setInterval(aj,X)}return(ac={outgoing:function(an,ao){ak(an)},destroy:function(){N.clearInterval(aa);if(af||!ag){al.parentNode.removeChild(al)}al=null},onDOMReady:function(){af=Z.isHost;X=Z.interval;ad="#"+Z.channel;am=0;ag=Z.useParent;Y=j(Z.remote);if(af){T(Z.props,{src:Z.remote,name:U+Z.channel+"_provider"});if(ag){Z.onLoad=function(){ab=N;ai();ac.up.callback(true)}}else{var ap=0,an=Z.delay/50;(function ao(){if(++ap>an){throw new Error("Unable to reference listenerwindow")}try{ab=al.contentWindow.frames[U+Z.channel+"_consumer"]}catch(aq){}if(ab){ai();ac.up.callback(true)}else{K(ao,50)}}())}al=A(Z)}else{ab=N;ai();if(ag){al=parent;ac.up.callback(true)}else{T(Z,{props:{src:Z.remote+"#"+Z.channel+new Date(),name:U+Z.channel+"_consumer"},onLoad:function(){ac.up.callback(true)}});al=A(Z)}}},init:function(){G(ac.onDOMReady,ac)}})};o.stack.ReliableBehavior=function(Y){var aa,ac;var ab=0,X=0,Z="";return(aa={incoming:function(af,ad){var ae=af.indexOf("_"),ag=af.substring(0,ae).split(",");af=af.substring(ae+1);if(ag[0]==ab){Z="";if(ac){ac(true)}}if(af.length>0){aa.down.outgoing(ag[1]+","+ab+"_"+Z,ad);if(X!=ag[1]){X=ag[1];aa.up.incoming(af,ad)}}},outgoing:function(af,ad,ae){Z=af;ac=ae;aa.down.outgoing(X+","+(++ab)+"_"+af,ad)}})};o.stack.QueueBehavior=function(Z){var ac,ad=[],ag=true,aa="",af,X=0,Y=false,ab=false;function ae(){if(Z.remove&&ad.length===0){w(ac);return}if(ag||ad.length===0||af){return}ag=true;var ah=ad.shift();ac.down.outgoing(ah.data,ah.origin,function(ai){ag=false;if(ah.callback){K(function(){ah.callback(ai)},0)}ae()})}return(ac={init:function(){if(t(Z)){Z={}}if(Z.maxLength){X=Z.maxLength;ab=true}if(Z.lazy){Y=true}else{ac.down.init()}},callback:function(ai){ag=false;var ah=ac.up;ae();ah.callback(ai)},incoming:function(ak,ai){if(ab){var aj=ak.indexOf("_"),ah=parseInt(ak.substring(0,aj),10);aa+=ak.substring(aj+1);if(ah===0){if(Z.encode){aa=k(aa)}ac.up.incoming(aa,ai);aa=""}}else{ac.up.incoming(ak,ai)}},outgoing:function(al,ai,ak){if(Z.encode){al=H(al)}var ah=[],aj;if(ab){while(al.length!==0){aj=al.substring(0,X);al=al.substring(aj.length);ah.push(aj)}while((aj=ah.shift())){ad.push({data:ah.length+"_"+aj,origin:ai,callback:ah.length===0?ak:null})}}else{ad.push({data:al,origin:ai,callback:ak})}if(Y){ac.down.init()}else{ae()}},destroy:function(){af=true;ac.down.destroy()}})};o.stack.VerifyBehavior=function(ab){var ac,aa,Y,Z=false;function X(){aa=Math.random().toString(16).substring(2);ac.down.outgoing(aa)}return(ac={incoming:function(af,ad){var ae=af.indexOf("_");if(ae===-1){if(af===aa){ac.up.callback(true)}else{if(!Y){Y=af;if(!ab.initiate){X()}ac.down.outgoing(af)}}}else{if(af.substring(0,ae)===Y){ac.up.incoming(af.substring(ae+1),ad)}}},outgoing:function(af,ad,ae){ac.down.outgoing(aa+"_"+af,ad,ae)},callback:function(ad){if(ab.initiate){X()}}})};o.stack.RpcBehavior=function(ad,Y){var aa,af=Y.serializer||O();var ae=0,ac={};function X(ag){ag.jsonrpc="2.0";aa.down.outgoing(af.stringify(ag))}function ab(ag,ai){var ah=Array.prototype.slice;return function(){var aj=arguments.length,al,ak={method:ai};if(aj>0&&typeof arguments[aj-1]==="function"){if(aj>1&&typeof arguments[aj-2]==="function"){al={success:arguments[aj-2],error:arguments[aj-1]};ak.params=ah.call(arguments,0,aj-2)}else{al={success:arguments[aj-1]};ak.params=ah.call(arguments,0,aj-1)}ac[""+(++ae)]=al;ak.id=ae}else{ak.params=ah.call(arguments,0)}if(ag.namedParams&&ak.params.length===1){ak.params=ak.params[0]}X(ak)}}function Z(an,am,ai,al){if(!ai){if(am){X({id:am,error:{code:-32601,message:"Procedure not found."}})}return}var ak,ah;if(am){ak=function(ao){ak=q;X({id:am,result:ao})};ah=function(ao,ap){ah=q;var aq={id:am,error:{code:-32099,message:ao}};if(ap){aq.error.data=ap}X(aq)}}else{ak=ah=q}if(!r(al)){al=[al]}try{var ag=ai.method.apply(ai.scope,al.concat([ak,ah]));if(!t(ag)){ak(ag)}}catch(aj){ah(aj.message)}}return(aa={incoming:function(ah,ag){var ai=af.parse(ah);if(ai.method){if(Y.handle){Y.handle(ai,X)}else{Z(ai.method,ai.id,Y.local[ai.method],ai.params)}}else{var aj=ac[ai.id];if(ai.error){if(aj.error){aj.error(ai.error)}}else{if(aj.success){aj.success(ai.result)}}delete ac[ai.id]}},init:function(){if(Y.remote){for(var ag in Y.remote){if(Y.remote.hasOwnProperty(ag)){ad[ag]=ab(Y.remote[ag],ag)}}}aa.down.init()},destroy:function(){for(var ag in Y.remote){if(Y.remote.hasOwnProperty(ag)&&ad.hasOwnProperty(ag)){delete ad[ag]}}aa.down.destroy()}})};b.easyXDM=o})(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent);
    },

    get: function(xhrhost, url, data, success, complete) {
        this.send(WPac.origin_embed, url, 'GET', data, success, complete);
    },

    post: function(xhrhost, url, data, success, complete) {
        if (WPac.auth && WPac.auth.provider == 'sso' && /Safari/.test(navigator.userAgent) && /Apple/.test(navigator.vendor)) {
            var p3pCookie = WPac.getCookie('mc-sso-p3p');
            if (p3pCookie) {
                this.postP3P(p3pCookie, url, data, success, complete);
                return;
            }
        }
        this.doPost(url, data, success, complete);
    },

    //In iOS (Safari) SSO auth don't set cookie according P3P policy
    //This is workaround for set cookie into window.popup
    postP3P: function(p3pCookie, url, data, success, complete) {
        var handler = this,
            p3pJson = JSON.parse(p3pCookie),
            win = WPac.Fastjs.popup(p3pJson.url, 1, 1, p3pJson.params, 1000000, 1000000);

        function check() {
            if (!win || win.closed != false) {
                WPac.Cookie.erase('mc-sso-p3p');
                handler.doPost(url, data, success, complete);
            } else {
                setTimeout(check, 10);
            }
        }
        setTimeout(check, 10);
    },

    doPost: function(url, data, success, complete) {
        url = url.replace('https?.*' + WPac.app_host, WPac.origin);
        this.send(WPac.origin_embed, url, 'POST', data, success, complete);
    },

    send: function(xhrhost, url, type, data, success, complete) {
        if (data) {
            for (d in data) {
                if (data.hasOwnProperty(d)) {
                    var val = data[d];
                    if (typeof val == 'string') {
                        data[d] = this.escape(val);
                    } else if (typeof val == 'undefined') {
                        delete data[d];
                    }
                }
            }
        }
        this.xhr(xhrhost).request({url: url, method: type, headers: {'Accept': 'application/json;'}, data: data},
            function(res) {
                if (success) {
                    if (res.data) {
                        var json;
                        try { json = JSON.parse(res.data); } catch (e) {}
                        success(json || res.data);
                    } else {
                        success();
                    }
                }
                if (complete) complete();
            }, function(res) {
                if (complete) complete();
            }
        );
    },

    escape: function(str) {
        var escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
            meta = {'\b': '\\b', '\t': '\\t', '\n': '\\n', '\f': '\\f', '\r': '\\r', '"' : '\\"', '\\': '\\\\'};

        escapable.lastIndex = 0;
        return escapable.test(str) ?
            str.replace(escapable, function (a) {
                var c = meta[a];
                return typeof c === 'string' ? c : '\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
            }) : str;
    },

    stringify: function (obj) {
        var t = typeof (obj);
        if (t != "object" || obj === null) {
            if (t == "string"){obj = '"'+obj+'"';}
            return String(obj);
        }
        else {
            var n, v, json = [], arr = (obj && obj.constructor == Array);
            for (n in obj) {
                if (obj.hasOwnProperty(n)) {
                    v = obj[n]; t = typeof(v);
                    if (t == "string"){v = '"'+v+'"';}else if (t == "object" && v !== null){v = this.stringify(v);}
                    json.push((arr ? "" : '"' + n + '":') + String(v));
                }
            }
            return (arr ? "[" : "{") + String(json) + (arr ? "]" : "}");
        }
    }
};
/* Laura Doktorova https://github.com/olado/doT */
(function(){function o(){var a={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},b=/&(?!#?\w+;)|<|>|"|'|\//g;return function(){return this?this.replace(b,function(c){return a[c]||c}):this}}function p(a,b,c){return(typeof b==="string"?b:b.toString()).replace(a.define||i,function(l,e,f,g){if(e.indexOf("def.")===0)e=e.substring(4);if(!(e in c))if(f===":"){a.defineParams&&g.replace(a.defineParams,function(n,h,d){c[e]={arg:h,text:d}});e in c||(c[e]=g)}else(new Function("def","def['"+
e+"']="+g))(c);return""}).replace(a.use||i,function(l,e){if(a.useParams)e=e.replace(a.useParams,function(g,n,h,d){if(c[h]&&c[h].arg&&d){g=(h+":"+d).replace(/'|\\/g,"_");c.__exp=c.__exp||{};c.__exp[g]=c[h].text.replace(RegExp("(^|[^\\w$])"+c[h].arg+"([^\\w$])","g"),"$1"+d+"$2");return n+"def.__exp['"+g+"']"}});var f=(new Function("def","return "+e))(c);return f?p(a,f,c):f})}function m(a){return a.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var j={version:"1.0.1",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,
interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:true,append:true,selfcontained:false},template:undefined,
compile:undefined},q;q=function(){return this||(0,eval)("this")}();q.doT=j;String.prototype.encodeHTML=o();var r={append:{start:"'+(",end:")+'",endencode:"||'').toString().encodeHTML()+'"},split:{start:"';out+=(",end:");out+='",endencode:"||'').toString().encodeHTML();out+='"}},i=/$^/;j.template=function(a,b,c){b=b||j.templateSettings;var l=b.append?r.append:
r.split,e,f=0,g;a=b.use||b.define?p(b,a,c||{}):a;a=("var out='"+(b.strip?a.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):a).replace(/'|\\/g,"\\$&").replace(b.interpolate||i,function(h,d){return l.start+m(d)+l.end}).replace(b.encode||i,function(h,d){e=true;return l.start+m(d)+l.endencode}).replace(b.conditional||i,function(h,d,k){return d?k?"';}else if("+m(k)+"){out+='":"';}else{out+='":k?"';if("+m(k)+"){out+='":"';}out+='"}).replace(b.iterate||i,function(h,
d,k,s){if(!d)return"';} } out+='";f+=1;g=s||"i"+f;d=m(d);return"';var arr"+f+"="+d+";if(arr"+f+"){var "+k+","+g+"=-1,l"+f+"=arr"+f+".length-1;while("+g+"<l"+f+"){"+k+"=arr"+f+"["+g+"+=1];out+='"}).replace(b.evaluate||i,function(h,d){return"';"+m(d)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,"").replace(/(\s|;|\}|^|\{)out\+=''\+/g,"$1out+=");if(e&&b.selfcontained)a="String.prototype.encodeHTML=("+
o.toString()+"());"+a;try{return new Function(b.varname,a)}catch(n){typeof console!=="undefined"&&console.log("Could not create a template function: "+a);throw n;}};j.compile=function(a,b){return j.template(a,null,b)}})();

!function(a){"use strict";function b(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function c(a,b){return a<<b|a>>>32-b}function d(a,d,e,f,g,h){return b(c(b(b(d,a),b(f,h)),g),e)}function e(a,b,c,e,f,g,h){return d(b&c|~b&e,a,b,f,g,h)}function f(a,b,c,e,f,g,h){return d(b&e|c&~e,a,b,f,g,h)}function g(a,b,c,e,f,g,h){return d(b^c^e,a,b,f,g,h)}function h(a,b,c,e,f,g,h){return d(c^(b|~e),a,b,f,g,h)}function i(a,c){a[c>>5]|=128<<c%32,a[(c+64>>>9<<4)+14]=c;var d,i,j,k,l,m=1732584193,n=-271733879,o=-1732584194,p=271733878;for(d=0;d<a.length;d+=16)i=m,j=n,k=o,l=p,m=e(m,n,o,p,a[d],7,-680876936),p=e(p,m,n,o,a[d+1],12,-389564586),o=e(o,p,m,n,a[d+2],17,606105819),n=e(n,o,p,m,a[d+3],22,-1044525330),m=e(m,n,o,p,a[d+4],7,-176418897),p=e(p,m,n,o,a[d+5],12,1200080426),o=e(o,p,m,n,a[d+6],17,-1473231341),n=e(n,o,p,m,a[d+7],22,-45705983),m=e(m,n,o,p,a[d+8],7,1770035416),p=e(p,m,n,o,a[d+9],12,-1958414417),o=e(o,p,m,n,a[d+10],17,-42063),n=e(n,o,p,m,a[d+11],22,-1990404162),m=e(m,n,o,p,a[d+12],7,1804603682),p=e(p,m,n,o,a[d+13],12,-40341101),o=e(o,p,m,n,a[d+14],17,-1502002290),n=e(n,o,p,m,a[d+15],22,1236535329),m=f(m,n,o,p,a[d+1],5,-165796510),p=f(p,m,n,o,a[d+6],9,-1069501632),o=f(o,p,m,n,a[d+11],14,643717713),n=f(n,o,p,m,a[d],20,-373897302),m=f(m,n,o,p,a[d+5],5,-701558691),p=f(p,m,n,o,a[d+10],9,38016083),o=f(o,p,m,n,a[d+15],14,-660478335),n=f(n,o,p,m,a[d+4],20,-405537848),m=f(m,n,o,p,a[d+9],5,568446438),p=f(p,m,n,o,a[d+14],9,-1019803690),o=f(o,p,m,n,a[d+3],14,-187363961),n=f(n,o,p,m,a[d+8],20,1163531501),m=f(m,n,o,p,a[d+13],5,-1444681467),p=f(p,m,n,o,a[d+2],9,-51403784),o=f(o,p,m,n,a[d+7],14,1735328473),n=f(n,o,p,m,a[d+12],20,-1926607734),m=g(m,n,o,p,a[d+5],4,-378558),p=g(p,m,n,o,a[d+8],11,-2022574463),o=g(o,p,m,n,a[d+11],16,1839030562),n=g(n,o,p,m,a[d+14],23,-35309556),m=g(m,n,o,p,a[d+1],4,-1530992060),p=g(p,m,n,o,a[d+4],11,1272893353),o=g(o,p,m,n,a[d+7],16,-155497632),n=g(n,o,p,m,a[d+10],23,-1094730640),m=g(m,n,o,p,a[d+13],4,681279174),p=g(p,m,n,o,a[d],11,-358537222),o=g(o,p,m,n,a[d+3],16,-722521979),n=g(n,o,p,m,a[d+6],23,76029189),m=g(m,n,o,p,a[d+9],4,-640364487),p=g(p,m,n,o,a[d+12],11,-421815835),o=g(o,p,m,n,a[d+15],16,530742520),n=g(n,o,p,m,a[d+2],23,-995338651),m=h(m,n,o,p,a[d],6,-198630844),p=h(p,m,n,o,a[d+7],10,1126891415),o=h(o,p,m,n,a[d+14],15,-1416354905),n=h(n,o,p,m,a[d+5],21,-57434055),m=h(m,n,o,p,a[d+12],6,1700485571),p=h(p,m,n,o,a[d+3],10,-1894986606),o=h(o,p,m,n,a[d+10],15,-1051523),n=h(n,o,p,m,a[d+1],21,-2054922799),m=h(m,n,o,p,a[d+8],6,1873313359),p=h(p,m,n,o,a[d+15],10,-30611744),o=h(o,p,m,n,a[d+6],15,-1560198380),n=h(n,o,p,m,a[d+13],21,1309151649),m=h(m,n,o,p,a[d+4],6,-145523070),p=h(p,m,n,o,a[d+11],10,-1120210379),o=h(o,p,m,n,a[d+2],15,718787259),n=h(n,o,p,m,a[d+9],21,-343485551),m=b(m,i),n=b(n,j),o=b(o,k),p=b(p,l);return[m,n,o,p]}function j(a){var b,c="";for(b=0;b<32*a.length;b+=8)c+=String.fromCharCode(a[b>>5]>>>b%32&255);return c}function k(a){var b,c=[];for(c[(a.length>>2)-1]=void 0,b=0;b<c.length;b+=1)c[b]=0;for(b=0;b<8*a.length;b+=8)c[b>>5]|=(255&a.charCodeAt(b/8))<<b%32;return c}function l(a){return j(i(k(a),8*a.length))}function m(a,b){var c,d,e=k(a),f=[],g=[];for(f[15]=g[15]=void 0,e.length>16&&(e=i(e,8*a.length)),c=0;16>c;c+=1)f[c]=909522486^e[c],g[c]=1549556828^e[c];return d=i(f.concat(k(b)),512+8*b.length),j(i(g.concat(d),640))}function n(a){var b,c,d="0123456789abcdef",e="";for(c=0;c<a.length;c+=1)b=a.charCodeAt(c),e+=d.charAt(b>>>4&15)+d.charAt(15&b);return e}function o(a){return unescape(encodeURIComponent(a))}function p(a){return l(o(a))}function q(a){return n(p(a))}function r(a,b){return m(o(a),o(b))}function s(a,b){return n(r(a,b))}function t(a,b,c){return b?c?r(b,a):s(b,a):c?p(a):q(a)}"function"==typeof define&&define.amd?define(function(){return t}):a.md5=t}(this);
WPac.Fastjs=WPac.Fastjs||{emailRegex:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,get:function(a,b){return document.querySelector(a+" "+b)},extend:function(a,b){var c={},d;for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&(c[d]=b[d]);return c},create:function(a,b,c,d){a=document.createElement(a);b&&this.addcl(a,b);c&&a.setAttribute("title",
c);d&&a.setAttribute("style",d);return a},addcls:function(a,b){for(var c=0;c<b.length;c++){var d=b[c];0>a.className.indexOf(d)&&(a.className+=" "+d)}},addcl:function(a,b){a&&0>a.className.indexOf(b)&&(a.className+=" "+b,a.className=a.className.trim())},remcl:function(a,b){a&&(a.className=a.className.replace(b," "))},hascl:function(a,b){return a&&-1<a.className.indexOf(b)},on:function(a,b,c){if(a){var d=this;a.addEventListener?a.addEventListener(b,function(b){!1==c.call(a,b)&&d.stop(b)},!1):a.attachEvent("on"+
b,function(b){b.stopPropagation=b.stopPropagation||function(){this.cancelBubble=!0};b.preventDefault=b.preventDefault||function(){this.returnValue=!1};!1==c.call(a,b)&&d.stop(b)})}},on2:function(a,b,c,d){if(a&&(a=a.querySelector(b)))this.on(a,c,d)},onall:function(a,b,c){for(var d=0;d<a.length;d++)this.on(a[d],b,c)},onall2:function(a,b,c,d){this.onall(a.querySelectorAll(b),c,d)},stop:function(a){a.preventDefault();a.stopPropagation()},parents:function(a,b){var c=a.parentNode,d=!1;this.each(c.className.split(" "),
function(a){!d&&(d=a==b)});return d?c:this.parents(c,b)},parentsel:function(a,b){var c=a.parentNode;return 0>c.tagName.toLowerCase().indexOf(b)?this.parentsel(c,b):c},show:function(a,b){var c=b.querySelector(a);this.show2(c)},show2:function(a){a&&(a.style.display="")},hide:function(a,b){var c=b.querySelector(a);this.hide2(c)},hide2:function(a){a&&(a.style.display="none")},html:function(a,b){a&&(a.innerHTML="",this.isString(b)?a.innerHTML=b:a.appendChild(b))},prepend:function(a,b){a.insertBefore(b,
a.firstChild)},rm:function(a){a&&a.parentNode&&a.parentNode.removeChild(a)},rm2:function(a,b){var c=a.querySelector(b);this.rm(c)},each:function(a,b){if("undefined"==typeof a.length)b(a,0);else for(var c=0;c<a.length;c++)b(a[c],c)},css:function(a,b,c){this.isInteger(c)&&(c+="px");a.style[b]=c},child:function(a,b){for(var c=a.children.length;c--;){var d=a.children[c];if(8!=d.nodeType&&-1<d.className.indexOf(b))return d}},children:function(a){for(var b=[],c=a.children.length;c--;)8!=a.children[c].nodeType&&
b.unshift(a.children[c]);return b},icss:function(a,b){return a+":"+b+"px!important;"},transCss:function(a,b){var c="overflow-y:hidden!important;-webkit-transition:"+b+" .5s ease-in-out!important;-moz-transition:"+b+" .5s ease-in-out!important;-o-transition:"+b+" .5s ease-in-out!important;transition:"+b+" .5s ease-in-out!important;";a.setAttribute("style",c);return c},prependSlide:function(a,b){var c=this,d=this.transCss(a,"max-height");b.insertBefore(a,b.firstChild);var g=a.offsetHeight;a.setAttribute("style",
this.icss("max-height",0)+d);setTimeout(function(){a.setAttribute("style",c.icss("max-height",g)+d);setTimeout(function(){a.setAttribute("style","")},1E3)},1)},slidedwn:function(a){a.style.display="";var b=a.offsetHeight;a.setAttribute("style",this.transCss(a,"height"));a.style.height="0";setTimeout(function(){a.style.height=b+"px";setTimeout(function(){a.setAttribute("style","")},500)},5)},slideup:function(a,b){a.setAttribute("style",this.transCss(a,"height"));a.style.height=a.offsetHeight+"px";
setTimeout(function(){a.style.height="0";setTimeout(function(){a.setAttribute("style","display:none");b&&b()},500)},5)},title:function(){var a=document.getElementsByTagName("title")[0];return a&&a.textContent||""},nextES:function(a){do a=a.nextSibling;while(a&&1!==a.nodeType);return a},next:function(a){return a.nextElementSibling||this.nextES(a)},prevES:function(a){do a=a.previousSibling;while(a&&1!==a.nodeType);return a},prev:function(a){return a.previousElementSibling||this.prevES(a)},after:function(a,
b){a.parentNode.insertBefore(b,a.nextSibling)},before:function(a,b){a.parentNode.insertBefore(b,a)},isVisible:function(a){return 0<a.offsetWidth&&0<a.offsetHeight},isInteger:function(a){return a&&0===a%1},isString:function(a){return"string"==typeof a},afun:function(a){var b="wpac_"+Math.floor(1000001*Math.random());window[b]=function(c){window[b]=void 0;try{delete window[b]}catch(d){}a(c)};return b},params:function(a,b,c){var d=[];if(b)for(p in b)d.push(encodeURIComponent(p)+"="+encodeURIComponent(b[p]));
c&&d.push("callback="+this.afun(c));return 0<d.length?(b=0>a.indexOf("?")?"?":"&",a+(b+d.join("&"))):a},jsonp:function(a,b,c){var d=document.createElement("script");d.src=this.params(a,b,c);d.type="text/javascript";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(d)},popup:function(a,b,c,d,g,h){g=g||screen.height/2-c/2;h=h||screen.width/2-b/2;return window.open(this.params(a,d),"","location=1,status=1,resizable=yes,width="+b+",height="+c+",top="+g+",left="+
h)},inArray:function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},txt:function(a,b){"textContent"in a?a.textContent=b:a.innerText=b},cbs:function(a,b,c,d){if(a.callback&&(a=a.callback[b])&&0<a.length)for(b=0;b<a.length;b++)if(d)a[b].call(d,c);else a[b](c)},extendcbs:function(a,b){a.callback=a.callback||{};for(cb in b)Object.prototype.hasOwnProperty.call(b,cb)&&(Object.prototype.hasOwnProperty.call(a.callback,cb)||(a.callback[cb]=[]),a.callback[cb].push(b[cb]));return a.callback},
isemail:function(a){return this.emailRegex.test(a)},getParam:function(a){if(location.search&&-1<location.search.indexOf(a)){if(!this.urlparams){this.urlParams={};var b=this;location.search.substr(1).split("&").forEach(function(a){a=a.split("=");b.urlParams[a[0]]=decodeURIComponent(a[1])})}return this.urlParams[a]}},urlsToHyperlinks:function(a){return a.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,'<a href="$1" target="_blank">$1</a>').replace(/(^|[^\/])(www\.[\S]+(\b|$))/ig,
'$1<a href="http://$2" target="_blank" rel="nofollow">$2</a>')},escapeHtml:function(a){return a?document.createElement("div").appendChild(document.createTextNode(a)).parentNode.innerHTML:""},escapeHtmlWithLinks:function(a){return this.urlsToHyperlinks(this.escapeHtml(a))}};String.prototype.trim||(String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")});String.prototype.capitalize||(String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)});"object"!==typeof JSON&&(JSON={});
(function(){function a(a){return 10>a?"0"+a:a}function b(a){g.lastIndex=0;return g.test(a)?'"'+a.replace(g,function(a){var b=f[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,f){var d,g,r,u,n=h,x,t=f[a];t&&("object"===typeof t&&"function"===typeof t.toJSON)&&(t=t.toJSON(a));"function"===typeof k&&(t=k.call(f,a,t));switch(typeof t){case "string":return b(t);case "number":return isFinite(t)?String(t):"null";case "boolean":case "null":return String(t);
case "object":if(!t)return"null";h+=e;x=[];if("[object Array]"===Object.prototype.toString.apply(t)){u=t.length;for(d=0;d<u;d+=1)x[d]=c(d,t)||"null";r=0===x.length?"[]":h?"[\n"+h+x.join(",\n"+h)+"\n"+n+"]":"["+x.join(",")+"]";h=n;return r}if(k&&"object"===typeof k)for(u=k.length,d=0;d<u;d+=1)"string"===typeof k[d]&&(g=k[d],(r=c(g,t))&&x.push(b(g)+(h?": ":":")+r));else for(g in t)Object.prototype.hasOwnProperty.call(t,g)&&(r=c(g,t))&&x.push(b(g)+(h?": ":":")+r);r=0===x.length?"{}":h?"{\n"+h+x.join(",\n"+
h)+"\n"+n+"}":"{"+x.join(",")+"}";h=n;return r}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var d,g,h,e,f,k;"function"!==typeof JSON.stringify&&(g=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
f={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(a,b,f){var d;e=h="";if("number"===typeof f)for(d=0;d<f;d+=1)e+=" ";else"string"===typeof f&&(e=f);if((k=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return c("",{"":a})});"function"!==typeof JSON.parse&&(d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(a,
b){function e(a,c){var f,d,k=a[c];if(k&&"object"===typeof k)for(f in k)Object.prototype.hasOwnProperty.call(k,f)&&(d=e(k,f),void 0!==d?k[f]=d:delete k[f]);return b.call(a,c,k)}var c;a=String(a);d.lastIndex=0;d.test(a)&&(a=a.replace(d,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return c=
eval("("+a+")"),"function"===typeof b?e({"":c},""):c;throw new SyntaxError("JSON.parse");})})();WPac.Cookie=WPac.Cookie||{create:function(a,b,c){a=a+"="+encodeURIComponent(b);c&&(b=new Date,b.setTime(b.getTime()+864E5*c),a+=";expires="+b.toGMTString());window.mcXDCookie&&(a+=";domain="+this.getXDomain());document.cookie=a+";path=/"},getXDomain:function(){var a=window.location.hostname.split("."),b=a.length;return 1<b?"."+a[b-2]+"."+a[b-1]:""},read:function(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c+=1){for(var d=b[c];" "===d.charAt(0);)d=d.substring(1,d.length);if(0===d.indexOf(a))return decodeURIComponent(d.substring(a.length,
d.length))}return null},erase:function(a){this.create(a,"",-1)}};(function(a,b,c){if(!a.PushStream){var d={},g="Sun Mon Tue Wed Thu Fri Sat".split(" "),h="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),e=function(a){return(10>a?"0":"")+a};d.dateToUTCString=function(a){var b=e(a.getUTCHours())+":"+e(a.getUTCMinutes())+":"+e(a.getUTCSeconds());return g[a.getUTCDay()]+", "+e(a.getUTCDate())+" "+h[a.getUTCMonth()]+" "+a.getUTCFullYear()+" "+b+" GMT"};var f=function(){for(var a=arguments[0]||{},b=0;b<arguments.length;b++){var e=arguments[b],c;for(c in e)if(!e.hasOwnProperty||
e.hasOwnProperty(c))a[c]=e[c]}return a},k=/^[\],:{}\s]*$/,l=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,w=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,A=/(?:^|:|,)(?:\s*\[)+/g;d.parseJSON=function(b){if(!b||!t(b))return null;b=b.replace(/^\s*/,"").replace(/\s*$/,"");if(a.JSON&&a.JSON.parse)try{return a.JSON.parse(b)}catch(e){throw"Invalid JSON: "+b;}if(k.test(b.replace(l,"@").replace(w,"]").replace(A,"")))return(new Function("return "+b))();throw"Invalid JSON: "+b;};var s=function(a){var b=
{};b[a.tagArgument]="";b[a.timeArgument]="";b[a.eventIdArgument]="";a.messagesControlByArgument&&(b[a.tagArgument]=Number(a._etag),a._lastModified?b[a.timeArgument]=a._lastModified:a._lastEventId&&(b[a.eventIdArgument]=a._lastEventId));return b},r=function(){return(new Date).getTime()},u=function(b){var e=b;if("object"===typeof b){var e="",c;for(c in b)if(!b.hasOwnProperty||b.hasOwnProperty(c))e+="&"+c+"="+a.escape(b[c]);e=e.substring(1)}return e||""},n=function(a,b){return a+(0>a.indexOf("?")?"?":
"&")+u(b)},x=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},t=function(a){return"[object String]"===Object.prototype.toString.call(a)},m={logger:null,debug:function(){"debug"===q.LOG_LEVEL&&m._log.apply(m._log,arguments)},info:function(){"info"!==q.LOG_LEVEL&&"debug"!==q.LOG_LEVEL||m._log.apply(m._log,arguments)},error:function(){m._log.apply(m._log,arguments)},_initLogger:function(){var b=a.console;b&&b.log&&(b.log.apply?m.logger=b.log:"object"===typeof b.log&&
Function.prototype.bind?m.logger=Function.prototype.bind.call(b.log,b):"object"===typeof b.log&&Function.prototype.call&&(m.logger=function(){Function.prototype.call.call(b.log,b,Array.prototype.slice.call(arguments))}))},_log:function(){m.logger||m._initLogger();if(m.logger)try{m.logger.apply(a.console,arguments)}catch(e){m._initLogger(),m.logger&&m.logger.apply(a.console,arguments)}var c=b.getElementById(q.LOG_OUTPUT_ELEMENT_ID);if(c){for(var f="",d=0;d<arguments.length;d++)f+=arguments[d]+" ";
c.innerHTML+=f+"\n";f=c.innerHTML.split("\n");100<f.length&&(c.innerHTML=f.slice(-100).join("\n"))}}},y={_getXHRObject:function(){var b=!1;try{b=new a.XMLHttpRequest}catch(e){try{b=new a.XDomainRequest}catch(c){try{b=new a.ActiveXObject("Msxml2.XMLHTTP")}catch(f){try{b=new a.ActiveXObject("Microsoft.XMLHTTP")}catch(d){b=!1}}}}return b},_send:function(b,e){b=b||{};b.timeout=b.timeout||3E4;var c=y._getXHRObject();if(c&&b.url){y.clear(b);c.onreadystatechange=function(){4===c.readyState&&(y.clear(b),
b.afterReceive&&b.afterReceive(c),200===c.status?b.success&&b.success(c.responseText):b.error&&b.error(c.status))};b.beforeOpen&&b.beforeOpen(c);var d={},k=null,l="GET";e?(k=u(b.data),l="POST"):d=b.data||{};c.open(l,n(b.url,f({},d,{_:r()})),!0);b.beforeSend&&b.beforeSend(c);d=function(){try{c.abort()}catch(a){}y.clear(b);b.error(304)};e?(c.setRequestHeader("Accept","application/json"),c.setRequestHeader("Content-type","application/x-www-form-urlencoded")):b.timeoutId=a.setTimeout(d,b.timeout+2E3);
c.send(k);return c}},_clear_script:function(a){a&&(a.onerror=a.onload=a.onreadystatechange=null,a.parentNode&&a.parentNode.removeChild(a))},_clear_timeout:function(a){a.timeoutId=z(a.timeoutId)},clear:function(a){y._clear_timeout(a);y._clear_script(b.getElementById(a.scriptId))},jsonp:function(c){c.timeout=c.timeout||3E4;y.clear(c);var e=b.head||b.getElementsByTagName("head")[0],d=b.createElement("script"),k=r(),l=function(){y.clear(c);var b=c.data.callback;b&&(a[b]=function(){a[b]=null});var e=r();
c.error(e-k>c.timeout/2?304:0)};d.onerror=l;d.onload=d.onreadystatechange=function(a){if(!d.readyState||/loaded|complete/.test(d.readyState))y.clear(c),c.load()};c.beforeOpen&&c.beforeOpen({});c.beforeSend&&c.beforeSend({});c.timeoutId=a.setTimeout(l,c.timeout+2E3);c.scriptId=c.scriptId||r();var g=c.data.callback;g&&(a[g]=function(){a[g]=null});c.data.callback=c.scriptId+"_onmessage_"+r();a[c.data.callback]=c.success;d.setAttribute("src",n(c.url,f({},c.data,{_:r()})));d.setAttribute("async","async");
d.setAttribute("id",c.scriptId);e.insertBefore(d,e.firstChild);return c},load:function(a){return y._send(a,!1)},post:function(a){return y._send(a,!0)}};d.parseMessage=function(b,c){var e=b;t(b)&&(e=d.parseJSON(b));return{id:e[c.jsonIdKey],channel:e[c.jsonChannelKey],text:t(e[c.jsonTextKey])?e[c.jsonTextKey]?a.unescape(e[c.jsonTextKey]):"":e[c.jsonTextKey],tag:e[c.jsonTagKey],time:e[c.jsonTimeKey],eventid:e[c.jsonEventIdKey]||""}};var E=function(a,b,c,e){var d=a.useSSL,k=a.wrapper.type===C.TYPE?d?
"wss://":"ws://":d?"https://":"http://",k=k+a.host,k=k+(!d&&80===a.port||d&&443===a.port?"":":"+a.port),k=k+b;b=a.channels;var d="",l;for(l in b)if(!b.hasOwnProperty||b.hasOwnProperty(l))d+="/"+l+(e?b[l].backtrack?".b"+Number(b[l].backtrack):"":"");e=d;a.channelsByArgument?(l={},l[a.channelsArgument]=e.substring(1),c=f({},c,l)):k+=e;return n(k,c)},K=function(a){var b="",c=a.useSSL?"https://":"http://",c=c+a.host,c=c+(80!==a.port&&443!==a.port?":"+a.port:""),c=c+a.urlPrefixPublisher,e;for(e in a.channels)if(!a.channels.hasOwnProperty||
a.channels.hasOwnProperty(e)){b=e;break}return c+("?id="+b)};d.extract_xss_domain=function(a){if(a.match(/^(\d{1,3}\.){3}\d{1,3}$/))return a;var b=a.split(".");a=Math.max(b.length-1,a.match(/(\w{4,}\.\w{2}|\.\w{3,})$/)?2:3);return b.slice(-1*a).join(".")};var v=function(a,b){return function(){return a.apply(b,arguments)}},z=function(b){b&&a.clearTimeout(b);return null},J=function(a){m.info("["+this.type+"] message received",arguments);var b=d.parseMessage(a.data,this.pushstream);b.tag&&(this.pushstream._etag=
b.tag);b.time&&(this.pushstream._lastModified=b.time);b.eventid&&(this.pushstream._lastEventId=b.eventid);this.pushstream._onmessage(b.text,b.id,b.channel,b.eventid,!0)},I=function(){this.pushstream._onopen();m.info("["+this.type+"] connection opened")},B=function(b){m.info("["+this.type+"] error (disconnected by server):",b);if(this.pushstream.readyState!==q.OPEN||this.type!==F.TYPE||"error"!==b.type||this.connection.readyState!==a.EventSource.CONNECTING)this._closeCurrentConnection(),this.pushstream._onerror({type:b&&
("load"===b.type||"close"===b.type)||this.pushstream.readyState===q.CONNECTING?"load":"timeout"})},C=function(b){if(!a.WebSocket&&!a.MozWebSocket)throw"WebSocket not supported";this.type=C.TYPE;this.pushstream=b;this.connection=null};C.TYPE="WebSocket";C.prototype={connect:function(){this._closeCurrentConnection();var b=f({},this.pushstream.extraParams(),{_:r()},s(this.pushstream)),b=E(this.pushstream,this.pushstream.urlPrefixWebsocket,b,!this.pushstream._useControlArguments());this.connection=a.WebSocket?
new a.WebSocket(b):new a.MozWebSocket(b);this.connection.onerror=v(B,this);this.connection.onclose=v(B,this);this.connection.onopen=v(I,this);this.connection.onmessage=v(J,this);m.info("[WebSocket] connecting to:",b)},disconnect:function(){this.connection&&(m.debug("[WebSocket] closing connection to:",this.connection.URL),this.connection.onclose=null,this._closeCurrentConnection(),this.pushstream._onclose())},_closeCurrentConnection:function(){if(this.connection){try{this.connection.close()}catch(a){}this.connection=
null}},sendMessage:function(a){this.connection&&this.connection.send(a)}};var F=function(b){if(!a.EventSource)throw"EventSource not supported";this.type=F.TYPE;this.pushstream=b;this.connection=null};F.TYPE="EventSource";F.prototype={connect:function(){this._closeCurrentConnection();var b=f({},this.pushstream.extraParams(),{_:r()},s(this.pushstream)),b=E(this.pushstream,this.pushstream.urlPrefixEventsource,b,!this.pushstream._useControlArguments());this.connection=new a.EventSource(b);this.connection.onerror=
v(B,this);this.connection.onopen=v(I,this);this.connection.onmessage=v(J,this);m.info("[EventSource] connecting to:",b)},disconnect:function(){this.connection&&(m.debug("[EventSource] closing connection to:",this.connection.URL),this.connection.onclose=null,this._closeCurrentConnection(),this.pushstream._onclose())},_closeCurrentConnection:function(){if(this.connection){try{this.connection.close()}catch(a){}this.connection=null}}};var G=function(a){this.type=G.TYPE;this.pushstream=a;this.pingtimer=
this.frameloadtimer=this.url=this.connection=null;this.iframeId="PushStreamManager_"+a.id};G.TYPE="Stream";G.prototype={connect:function(){this._closeCurrentConnection();var a=d.extract_xss_domain(this.pushstream.host);try{b.domain=a}catch(c){m.error("[Stream] (warning) problem setting document.domain = "+a+" (OBS: IE8 does not support set IP numbers as domain)")}a=f({},this.pushstream.extraParams(),{_:r()},{streamid:this.pushstream.id},s(this.pushstream));this.url=E(this.pushstream,this.pushstream.urlPrefixStream,
a,!this.pushstream._useControlArguments());m.debug("[Stream] connecting to:",this.url);this.loadFrame(this.url)},disconnect:function(){this.connection&&(m.debug("[Stream] closing connection to:",this.url),this._closeCurrentConnection(),this.pushstream._onclose())},_clear_iframe:function(){var a=b.getElementById(this.iframeId);a&&(a.onload=null,a.src="about:blank",a.parentNode&&a.parentNode.removeChild(a))},_closeCurrentConnection:function(){this._clear_iframe();this.connection&&(this.pingtimer=z(this.pingtimer),
this.frameloadtimer=z(this.frameloadtimer),this.transferDoc=this.connection=null,"function"===typeof a.CollectGarbage&&a.CollectGarbage())},loadFrame:function(c){this._clear_iframe();try{var e=new a.ActiveXObject("htmlfile");e.open();e.write('<html><script>document.domain="'+b.domain+'";\x3c/script></html>');e.parentWindow.PushStream=q;e.close();var d=e.createElement("div");e.appendChild(d);d.innerHTML='<iframe src="'+c+'"></iframe>';this.connection=d.getElementsByTagName("IFRAME")[0];this.connection.onload=
v(B,this);this.transferDoc=e}catch(f){e=b.createElement("IFRAME"),e.style.width="1px",e.style.height="1px",e.style.border="none",e.style.position="absolute",e.style.top="-10px",e.style.marginTop="-10px",e.style.zIndex="-20",e.PushStream=q,b.body.appendChild(e),e.setAttribute("src",c),e.onload=v(B,this),this.connection=e}this.connection.setAttribute("id",this.iframeId);this.frameloadtimer=a.setTimeout(v(B,this),this.pushstream.timeout)},register:function(a){this.frameloadtimer=z(this.frameloadtimer);
a.p=v(this.process,this);this.connection.onload=v(this._onframeloaded,this);this.pushstream._onopen();this.setPingTimer();m.info("[Stream] frame registered")},process:function(b,c,e,d,f,k){this.pingtimer=z(this.pingtimer);m.info("[Stream] message received",arguments);-1!==b&&(k&&(this.pushstream._etag=k),f&&(this.pushstream._lastModified=f),d&&(this.pushstream._lastEventId=d));this.pushstream._onmessage(e?a.unescape(e):"",b,c,d||"",!0);this.setPingTimer()},_onframeloaded:function(){m.info("[Stream] frame loaded (disconnected by server)");
this.connection.onload=null;this.disconnect()},setPingTimer:function(){this.pingtimer&&z(this.pingtimer);this.pingtimer=a.setTimeout(v(B,this),this.pushstream.pingtimeout)}};var H=function(a){this.type=H.TYPE;this.pushstream=a;this.opentimer=this.connection=null;this.messagesQueue=[];this._linkedInternalListen=v(this._internalListen,this);this.xhrSettings={timeout:this.pushstream.timeout,data:{},url:null,success:v(this.onmessage,this),error:v(this.onerror,this),load:v(this.onload,this),beforeSend:v(this.beforeSend,
this),afterReceive:v(this.afterReceive,this)}};H.TYPE="LongPolling";H.prototype={connect:function(){this.messagesQueue=[];this._closeCurrentConnection();this.urlWithBacktrack=E(this.pushstream,this.pushstream.urlPrefixLongpolling,{},!0);this.urlWithoutBacktrack=E(this.pushstream,this.pushstream.urlPrefixLongpolling,{},!1);this.xhrSettings.url=this.urlWithBacktrack;d.extract_xss_domain(this.pushstream.host);d.extract_xss_domain(a.location.hostname);this.useJSONP=this.pushstream.useJSONP;this.xhrSettings.scriptId=
"PushStreamManager_"+this.pushstream.id;this.useJSONP&&(this.pushstream.messagesControlByArgument=!0);this._internalListen();this.opentimer=a.setTimeout(v(I,this),100);m.info("[LongPolling] connecting to:",this.xhrSettings.url)},_listen:function(){this._internalListenTimeout&&z(this._internalListenTimeout);this._internalListenTimeout=a.setTimeout(this._linkedInternalListen,100)},_internalListen:function(){this.pushstream._keepConnected&&(this.xhrSettings.url=this.pushstream._useControlArguments()?
this.urlWithoutBacktrack:this.urlWithBacktrack,this.xhrSettings.data=f({},this.pushstream.extraParams(),this.xhrSettings.data,s(this.pushstream)),this.useJSONP?this.connection=y.jsonp(this.xhrSettings):this.connection||(this.connection=y.load(this.xhrSettings)))},disconnect:function(){this.connection&&(m.debug("[LongPolling] closing connection to:",this.xhrSettings.url),this._closeCurrentConnection(),this.pushstream._onclose())},_closeCurrentConnection:function(){this.opentimer=z(this.opentimer);
if(this.connection){try{this.connection.abort()}catch(a){try{y.clear(this.connection)}catch(b){}}this.connection=null;this.xhrSettings.url=null}},beforeSend:function(a){this.pushstream.messagesControlByArgument||(a.setRequestHeader("If-None-Match",this.pushstream._etag),a.setRequestHeader("If-Modified-Since",this.pushstream._lastModified))},afterReceive:function(a){this.pushstream.messagesControlByArgument||(this.pushstream._etag=a.getResponseHeader("Etag"),this.pushstream._lastModified=a.getResponseHeader("Last-Modified"));
this.connection=null},onerror:function(a){this.pushstream._keepConnected&&(304===a?this._listen():(m.info("[LongPolling] error (disconnected by server):",a),this._closeCurrentConnection(),this.pushstream._onerror({type:403===a||this.pushstream.readyState===q.CONNECTING?"load":"timeout"})))},onload:function(){this._listen()},onmessage:function(a){this._internalListenTimeout&&z(this._internalListenTimeout);m.info("[LongPolling] message received",a);var b=null;a=x(a)?a:a.replace(/\}\{/g,"}\r\n{").split("\r\n");
for(var c=0;c<a.length;c++)a[c]&&(b=d.parseMessage(a[c],this.pushstream),this.messagesQueue.push(b),this.pushstream.messagesControlByArgument&&b.time&&(this.pushstream._etag=b.tag,this.pushstream._lastModified=b.time));for(this._listen();0<this.messagesQueue.length;)b=this.messagesQueue.shift(),this.pushstream._onmessage(b.text,b.id,b.channel,b.eventid,0===this.messagesQueue.length)}};var D=[],q=function(b){b=b||{};this.id=D.push(this)-1;this.useSSL=b.useSSL||!1;this.host=b.host||a.location.hostname;
this.port=Number(b.port||(this.useSSL?443:80));this.timeout=b.timeout||3E4;this.pingtimeout=b.pingtimeout||3E4;this.reconnectOnTimeoutInterval=b.reconnectOnTimeoutInterval||3E3;this.reconnectOnChannelUnavailableInterval=b.reconnectOnChannelUnavailableInterval||6E4;this.lastEventId=b.lastEventId||null;this.messagesPublishedAfter=b.messagesPublishedAfter;this.messagesControlByArgument=b.messagesControlByArgument||!1;this.tagArgument=b.tagArgument||"tag";this.timeArgument=b.timeArgument||"time";this.eventIdArgument=
b.eventIdArgument||"eventid";this.useJSONP=b.useJSONP||!1;this._reconnecttimer=null;this._etag=0;this._lastEventId=this._lastModified=null;this.urlPrefixPublisher=b.urlPrefixPublisher||"/pub";this.urlPrefixStream=b.urlPrefixStream||"/sub";this.urlPrefixEventsource=b.urlPrefixEventsource||"/ev";this.urlPrefixLongpolling=b.urlPrefixLongpolling||"/lp";this.urlPrefixWebsocket=b.urlPrefixWebsocket||"/ws";this.jsonIdKey=b.jsonIdKey||"id";this.jsonChannelKey=b.jsonChannelKey||"channel";this.jsonTextKey=
b.jsonTextKey||"text";this.jsonTagKey=b.jsonTagKey||"tag";this.jsonTimeKey=b.jsonTimeKey||"time";this.jsonEventIdKey=b.jsonEventIdKey||"eventid";this.modes=(b.modes||"eventsource|websocket|stream|longpolling").split("|");this.wrappers=[];this.wrapper=null;this.onchanneldeleted=b.onchanneldeleted||null;this.onmessage=b.onmessage||null;this.onerror=b.onerror||null;this.onstatuschange=b.onstatuschange||null;this.extraParams=b.extraParams||function(){return{}};this.channels={};this.channelsCount=0;this.channelsByArgument=
b.channelsByArgument||!1;this.channelsArgument=b.channelsArgument||"channels";for(b=0;b<this.modes.length;b++)try{var c=null;switch(this.modes[b]){case "websocket":c=new C(this);break;case "eventsource":c=new F(this);break;case "longpolling":c=new H(this);break;case "stream":c=new G(this)}this.wrappers[this.wrappers.length]=c}catch(e){m.info(e)}this.readyState=0};q.LOG_LEVEL="error";q.LOG_OUTPUT_ELEMENT_ID="Log4jsLogOutput";q.CLOSED=0;q.CONNECTING=1;q.OPEN=2;q.prototype={addChannel:function(b,c){if((b?
a.escape(b):"")!==b)throw"Invalid channel name! Channel has to be a set of [a-zA-Z0-9]";m.debug("entering addChannel");if("undefined"!==typeof this.channels[b])throw"Cannot add channel "+b+": already subscribed";c=c||{};m.info("adding channel",b,c);this.channels[b]=c;this.channelsCount++;this.readyState!==q.CLOSED&&this.connect();m.debug("leaving addChannel")},removeChannel:function(a){this.channels[a]&&(m.info("removing channel",a),delete this.channels[a],this.channelsCount--)},removeAllChannels:function(){m.info("removing all channels");
this.channels={};this.channelsCount=0},_setState:function(a){if(this.readyState!==a&&(m.info("status changed",a),this.readyState=a,this.onstatuschange))this.onstatuschange(this.readyState)},connect:function(){m.debug("entering connect");if(!this.host)throw"PushStream host not specified";if(isNaN(this.port))throw"PushStream port not specified";if(!this.channelsCount)throw"No channels specified";if(0===this.wrappers.length)throw"No available support for this browser";this._keepConnected=!0;this._lastUsedMode=
0;this._connect();m.debug("leaving connect")},disconnect:function(){m.debug("entering disconnect");this._keepConnected=!1;this._disconnect();this._setState(q.CLOSED);m.info("disconnected");m.debug("leaving disconnect")},_useControlArguments:function(){return this.messagesControlByArgument&&(null!==this._lastModified||null!==this._lastEventId)},_connect:function(){null===this._lastEventId&&(this._lastEventId=this.lastEventId);if(null===this._lastModified){var a=this.messagesPublishedAfter;if("[object Date]"!==
Object.prototype.toString.call(a)){var b=Number(this.messagesPublishedAfter);0<b?(a=new Date,a.setTime(a.getTime()-1E3*b)):0>b&&(a=new Date(0))}"[object Date]"===Object.prototype.toString.call(a)&&(this._lastModified=d.dateToUTCString(a))}this._disconnect();this._setState(q.CONNECTING);this.wrapper=this.wrappers[this._lastUsedMode++%this.wrappers.length];try{this.wrapper.connect()}catch(c){this.wrapper&&this.wrapper.disconnect()}},_disconnect:function(){this._reconnecttimer=z(this._reconnecttimer);
this.wrapper&&this.wrapper.disconnect()},_onopen:function(){this._reconnecttimer=z(this._reconnecttimer);this._setState(q.OPEN);0<this._lastUsedMode&&this._lastUsedMode--},_onclose:function(){this._reconnecttimer=z(this._reconnecttimer);this._setState(q.CLOSED);this._reconnect(this.reconnectOnTimeoutInterval)},_onmessage:function(a,b,c,e,d){m.debug("message",a,b,c,e,d);if(-2===b){if(this.onchanneldeleted)this.onchanneldeleted(c)}else if(0<b&&this.onmessage)this.onmessage(a,b,c,e,d)},_onerror:function(a){this._setState(q.CLOSED);
this._reconnect("timeout"===a.type?this.reconnectOnTimeoutInterval:this.reconnectOnChannelUnavailableInterval);if(this.onerror)this.onerror(a)},_reconnect:function(b){this._keepConnected&&(!this._reconnecttimer&&this.readyState!==q.CONNECTING)&&(m.info("trying to reconnect in",b),this._reconnecttimer=a.setTimeout(v(this._connect,this),b))},sendMessage:function(b,c,e){b=b?a.escape(b):"";this.wrapper.type===C.TYPE?(this.wrapper.sendMessage(b),c&&c()):y.post({url:K(this),data:b,success:c,error:e})}};
q.sendMessage=function(b,c,e,d){y.post({url:b,data:c?a.escape(c):"",success:e,error:d})};q.register=function(a){var b=a.window.location.href.match(/streamid=([0-9]*)&?/);b[1]&&D[b[1]]&&D[b[1]].wrapper.register(a)};q.unload=function(){for(var a=0;a<D.length;a++)try{D[a].disconnect()}catch(b){}};a.PushStream=q;a.PushStreamManager=D;a.attachEvent&&a.attachEvent("onunload",q.unload);a.addEventListener&&a.addEventListener.call(a,"unload",q.unload,!1)}})(window,document);WPac.Stream=WPac.Stream||{pushstreams:{},start:function(a,b,c){a+="";c=new PushStream({host:WPac.rt_host,modes:"websocket|eventsource|longpolling",messagesControlByArgument:!0,useSSL:"wss:"==WPac.protocolws?!0:!1,reconnectOnChannelUnavailableInterval:5E3});c.onmessage=b;c.addChannel(a);c.connect();this.pushstreams[a]=c},stop:function(a,b){var c=a+"",d=this.pushstreams[c];d&&(d.disconnect(),b&&d.removeChannel(c))},stopall:function(){for(chan in this.pushstreams)Object.prototype.hasOwnProperty.call(this.pushstreams,
chan)&&this.pushstreams[chan].disconnect()}};WPac.Time=WPac.Time||{getTime:function(a,b,c){return"chat"==c?this.getChatTime(a,b||"en"):c?this.getFormatTime(a,c,b||"en"):this.getDefaultTime(a,b||"en")},getChatTime:function(a,b){var c=((new Date).getTime()-a)/1E3/60/60,d=c/24;return 24>c?this.getFormatTime(a,"HH:mm",b):365>d?this.getFormatTime(a,"dd.MM HH:mm",b):this.getFormatTime(a,"yyyy.MM.dd HH:mm",b)},getDefaultTime:function(a,b){return this.getTimeAgo(a,b)},getTimeAgo:function(a,b){var c=((new Date).getTime()-a)/1E3,d=c/60,g=d/60,h=g/24,
e=h/365;b=WPac.Time.Messages[b]?b:"en";return 45>c?WPac.Time.Messages[b].second:90>c?WPac.Time.Messages[b].minute:45>d?WPac.Time.Messages[b].minutes(d):90>d?WPac.Time.Messages[b].hour:24>g?WPac.Time.Messages[b].hours(g):48>g?WPac.Time.Messages[b].day:30>h?WPac.Time.Messages[b].days(h):60>h?WPac.Time.Messages[b].month:365>h?WPac.Time.Messages[b].months(h):2>e?WPac.Time.Messages[b].year:WPac.Time.Messages[b].years(e)},getTime12:function(a,b){var c=new Date(a);return(c.getHours()%12?c.getHours()%12:
12)+":"+c.getMinutes()+(12<=c.getHours()?" PM":" AM")},getFormatTime:function(a,b,c){var d=new Date(a),g={SS:d.getMilliseconds(),ss:d.getSeconds(),mm:d.getMinutes(),HH:d.getHours(),hh:(d.getHours()%12?d.getHours()%12:12)+(12<=d.getHours()?"PM":"AM"),dd:d.getDate(),MM:d.getMonth()+1,yyyy:d.getFullYear(),yy:String(d.getFullYear()).toString().substr(2,2),ago:this.getTimeAgo(a,c),12:this.getTime12(a,c)};return b.replace(/(SS|ss|mm|HH|hh|DD|dd|MM|yyyy|yy|ago|12)/g,function(a,b){var c=g[b];return 10>c?
"0"+c:c})},declineNum:function(a,b,c,d){return a+" "+this.declineMsg(a,b,c,d)},declineMsg:function(a,b,c,d,g){var h=a%10;return 1==h&&(1==a||20<a)?b:1<h&&5>h&&(20<a||10>a)?c:a?d:g}};
WPac.Time.Messages={ru:{second:"\u0442\u043e\u043b\u044c\u043a\u043e \u0447\u0442\u043e",minute:"\u043c\u0438\u043d\u0443\u0442\u0443 \u043d\u0430\u0437\u0430\u0434",minutes:function(a){return WPac.Time.declineNum(Math.round(a),"\u043c\u0438\u043d\u0443\u0442\u0430 \u043d\u0430\u0437\u0430\u0434","\u043c\u0438\u043d\u0443\u0442\u044b \u043d\u0430\u0437\u0430\u0434","\u043c\u0438\u043d\u0443\u0442 \u043d\u0430\u0437\u0430\u0434")},hour:"\u0447\u0430\u0441 \u043d\u0430\u0437\u0430\u0434",hours:function(a){return WPac.Time.declineNum(Math.round(a),
"\u0447\u0430\u0441 \u043d\u0430\u0437\u0430\u0434","\u0447\u0430\u0441\u0430 \u043d\u0430\u0437\u0430\u0434","\u0447\u0430\u0441\u043e\u0432 \u043d\u0430\u0437\u0430\u0434")},day:"\u0434\u0435\u043d\u044c \u043d\u0430\u0437\u0430\u0434",days:function(a){return WPac.Time.declineNum(Math.round(a),"\u0434\u0435\u043d\u044c \u043d\u0430\u0437\u0430\u0434","\u0434\u043d\u044f \u043d\u0430\u0437\u0430\u0434","\u0434\u043d\u0435\u0439 \u043d\u0430\u0437\u0430\u0434")},month:"\u043c\u0435\u0441\u044f\u0446 \u043d\u0430\u0437\u0430\u0434",
months:function(a){return WPac.Time.declineNum(Math.round(a/30),"\u043c\u0435\u0441\u044f\u0446 \u043d\u0430\u0437\u0430\u0434","\u043c\u0435\u0441\u044f\u0446\u0430 \u043d\u0430\u0437\u0430\u0434","\u043c\u0435\u0441\u044f\u0446\u0435\u0432 \u043d\u0430\u0437\u0430\u0434")},year:"\u0433\u043e\u0434 \u043d\u0430\u0437\u0430\u0434",years:function(a){return WPac.Time.declineNum(Math.round(a),"\u0433\u043e\u0434 \u043d\u0430\u0437\u0430\u0434","\u0433\u043e\u0434\u0430 \u043d\u0430\u0437\u0430\u0434",
"\u043b\u0435\u0442 \u043d\u0430\u0437\u0430\u0434")}},en:{second:"just now",minute:"1m ago",minutes:function(a){return Math.round(a)+"m ago"},hour:"1h ago",hours:function(a){return Math.round(a)+"h ago"},day:"day ago",days:function(a){return Math.round(a)+" days ago"},month:"month ago",months:function(a){return Math.round(a/30)+" months ago"},year:"year ago",years:function(a){return Math.round(a)+" years ago"}},br:{second:"agora mesmo",minute:"h\u00e1 um minuto",minutes:function(a){return Math.round(a)+
" minutos atr\u00e1s"},hour:"hora atr\u00e1s",hours:function(a){return Math.round(a)+" horas atr\u00e1s"},day:"dia atr\u00e1s",days:function(a){return Math.round(a)+" dias atr\u00e1s"},month:"m\u00eas atr\u00e1s",months:function(a){return Math.round(a/30)+" meses atr\u00e1s"},year:"ano atr\u00e1s",years:function(a){return Math.round(a)+" anos atr\u00e1s"}},uk:{second:"\u0442\u0456\u043b\u044c\u043a\u0438 \u0449\u043e",minute:"\u0445\u0432\u0438\u043b\u0438\u043d\u0443 \u0442\u043e\u043c\u0443",minutes:function(a){return WPac.Time.declineNum(Math.round(a),
"\u0445\u0432\u0438\u043b\u0438\u043d\u0443 \u0442\u043e\u043c\u0443","\u0445\u0432\u0438\u043b\u0438\u043d\u0438 \u0442\u043e\u043c\u0443","\u0445\u0432\u0438\u043b\u0438\u043d \u0442\u043e\u043c\u0443")},hour:"\u0433\u043e\u0434\u0438\u043d\u0443 \u0442\u043e\u043c\u0443",hours:function(a){return WPac.Time.declineNum(Math.round(a),"\u0433\u043e\u0434\u0438\u043d\u0443 \u0442\u043e\u043c\u0443","\u0433\u043e\u0434\u0438\u043d\u0438 \u0442\u043e\u043c\u0443","\u0433\u043e\u0434\u0438\u043d \u0442\u043e\u043c\u0443")},
day:"\u0434\u0435\u043d\u044c \u0442\u043e\u043c\u0443",days:function(a){return WPac.Time.declineNum(Math.round(a),"\u0434\u0435\u043d\u044c \u0442\u043e\u043c\u0443","\u0434\u043d\u0456 \u0442\u043e\u043c\u0443","\u0434\u043d\u0456\u0432 \u0442\u043e\u043c\u0443")},month:"\u043c\u0456\u0441\u044f\u0446\u044c \u0442\u043e\u043c\u0443",months:function(a){return WPac.Time.declineNum(Math.round(a/30),"\u043c\u0456\u0441\u044f\u0446\u044c \u0442\u043e\u043c\u0443","\u043c\u0456\u0441\u044f\u0446\u0456 \u0442\u043e\u043c\u0443",
"\u043c\u0456\u0441\u044f\u0446\u0456\u0432 \u0442\u043e\u043c\u0443")},year:"\u0440\u0456\u043a \u0442\u043e\u043c\u0443",years:function(a){return WPac.Time.declineNum(Math.round(a),"\u0440\u0456\u043a \u0442\u043e\u043c\u0443","\u0440\u043e\u043a\u0438 \u0442\u043e\u043c\u0443","\u0440\u043e\u043a\u0456\u0432 \u0442\u043e\u043c\u0443")}},ro:{second:"chiar acum",minute:"\u00een urm\u0103 minut",minutes:function(a){return WPac.Time.declineNum(Math.round(a),"o minuta in urma","minute in urma","de minute in urma")},
hour:"acum o ora",hours:function(a){return WPac.Time.declineNum(Math.round(a),"acum o ora","ore in urma","de ore in urma")},day:"o zi in urma",days:function(a){return WPac.Time.declineNum(Math.round(a),"o zi in urma","zile in urma","de zile in urma")},month:"o luna in urma",months:function(a){return WPac.Time.declineNum(Math.round(a/30),"o luna in urma","luni in urma","de luni in urma")},year:"un an in urma",years:function(a){return WPac.Time.declineNum(Math.round(a),"un an in urma","ani in urma",
"de ani in urma")}},lv:{second:"Maz\u0101k par min\u016bti",minute:"Pirms min\u016btes",minutes:function(a){return WPac.Time.declineNum(Math.round(a),"pirms min\u016btes","pirms min\u016bt\u0113m","pirms min\u016bt\u0113m")},hour:"pirms stundas",hours:function(a){return WPac.Time.declineNum(Math.round(a),"pirms stundas","pirms stund\u0101m","pirms stund\u0101m")},day:"pirms dienas",days:function(a){return WPac.Time.declineNum(Math.round(a),"pirms dienas","pirms dien\u0101m","pirms dien\u0101m")},
month:"pirms m\u0113ne\u0161a",months:function(a){return WPac.Time.declineNum(Math.round(a/30),"pirms m\u0113ne\u0161a","pirms m\u0113ne\u0161iem","pirms m\u0113ne\u0161iem")},year:"pirms gada",years:function(a){return WPac.Time.declineNum(Math.round(a),"pirms gada","pirms gadiem","pirms gadiem")}},lt:{second:"k\u0105 tik",minute:"prie\u0161 minut\u0119",minutes:function(a){return WPac.Time.declineNum(Math.round(a),"minut\u0117 prie\u0161","minut\u0117s prie\u0161","minu\u010di\u0173 prie\u0161")},
hour:"prie\u0161 valand\u0105",hours:function(a){return WPac.Time.declineNum(Math.round(a),"valanda prie\u0161","valandos prie\u0161","valand\u0173 prie\u0161")},day:"prie\u0161 dien\u0105",days:function(a){return WPac.Time.declineNum(Math.round(a),"diena prie\u0161","dienos prie\u0161","dien\u0173 prie\u0161")},month:"prie\u0161 m\u0117nes\u012f",months:function(a){return WPac.Time.declineNum(Math.round(a/30),"m\u0117nes\u012f prie\u0161","m\u0117nesiai prie\u0161","m\u0117nesi\u0173 prie\u0161")},
year:"prie\u0161 metus",years:function(a){return WPac.Time.declineNum(Math.round(a),"metai prie\u0161","metai prie\u0161","met\u0173 prie\u0161")}},kk:{second:"\u0431\u0456\u0440 \u043c\u0438\u043d\u0443\u0442\u0442\u0430\u043d \u0430\u0437 \u0443\u0430\u049b\u044b\u0442 \u0431\u04b1\u0440\u044b\u043d",minute:"\u0431\u0456\u0440 \u043c\u0438\u043d\u0443\u0442 \u0431\u04b1\u0440\u044b\u043d",minutes:function(a){return WPac.Time.declineNum(Math.round(a),"\u043c\u0438\u043d\u0443\u0442 \u0431\u04b1\u0440\u044b\u043d",
"\u043c\u0438\u043d\u0443\u0442 \u0431\u04b1\u0440\u044b\u043d","\u043c\u0438\u043d\u0443\u0442 \u0431\u04b1\u0440\u044b\u043d")},hour:"\u0431\u0456\u0440 \u0441\u0430\u0493\u0430\u0442 \u0431\u04b1\u0440\u044b\u043d",hours:function(a){return WPac.Time.declineNum(Math.round(a),"\u0441\u0430\u0493\u0430\u0442 \u0431\u04b1\u0440\u044b\u043d","\u0441\u0430\u0493\u0430\u0442 \u0431\u04b1\u0440\u044b\u043d","\u0441\u0430\u0493\u0430\u0442 \u0431\u04b1\u0440\u044b\u043d")},day:"\u0431\u0456\u0440 \u043a\u04af\u043d \u0431\u04b1\u0440\u044b\u043d",
days:function(a){return WPac.Time.declineNum(Math.round(a),"\u043a\u04af\u043d \u0431\u04b1\u0440\u044b\u043d","\u043a\u04af\u043d \u0431\u04b1\u0440\u044b\u043d","\u043a\u04af\u043d \u0431\u04b1\u0440\u044b\u043d")},month:"\u0431\u0456\u0440 \u0430\u0439 \u0431\u04b1\u0440\u044b\u043d",months:function(a){return WPac.Time.declineNum(Math.round(a/30),"\u0430\u0439 \u0431\u04b1\u0440\u044b\u043d","\u0430\u0439 \u0431\u04b1\u0440\u044b\u043d","\u0430\u0439 \u0431\u04b1\u0440\u044b\u043d")},year:"\u0431\u0456\u0440 \u0436\u044b\u043b \u0431\u04b1\u0440\u044b\u043d",
years:function(a){return WPac.Time.declineNum(Math.round(a),"\u0436\u044b\u043b \u0431\u04b1\u0440\u044b\u043d","\u0436\u044b\u043b \u0431\u04b1\u0440\u044b\u043d","\u0436\u044b\u043b \u0431\u04b1\u0440\u044b\u043d")}},ka:{second:"\u10ec\u10d0\u10db\u10d8\u10e1 \u10ec\u10d8\u10dc",minute:"\u10ec\u10e3\u10d7\u10d8\u10e1 \u10ec\u10d8\u10dc",minutes:function(a){return WPac.Time.declineNum(Math.round(a),"\u10ec\u10e3\u10d7\u10d8\u10e1 \u10ec\u10d8\u10dc","\u10ec\u10e3\u10d7\u10d8\u10e1 \u10ec\u10d8\u10dc",
"\u10ec\u10e3\u10d7\u10d8\u10e1 \u10ec\u10d8\u10dc")},hour:"\u10e1\u10d0\u10d0\u10d7\u10d8\u10e1 \u10ec\u10d8\u10dc",hours:function(a){return WPac.Time.declineNum(Math.round(a),"\u10e1\u10d0\u10d0\u10d7\u10d8\u10e1 \u10ec\u10d8\u10dc","\u10e1\u10d0\u10d0\u10d7\u10d8\u10e1 \u10ec\u10d8\u10dc","\u10e1\u10d0\u10d0\u10d7\u10d8\u10e1 \u10ec\u10d8\u10dc")},day:"\u10d3\u10e6\u10d8\u10e1 \u10ec\u10d8\u10dc",days:function(a){return WPac.Time.declineNum(Math.round(a),"\u10d3\u10e6\u10d8\u10e1 \u10ec\u10d8\u10dc",
"\u10d3\u10e6\u10d8\u10e1 \u10ec\u10d8\u10dc","\u10d3\u10e6\u10d8\u10e1 \u10ec\u10d8\u10dc")},month:"\u10d7\u10d5\u10d8\u10e1 \u10ec\u10d8\u10dc",months:function(a){return WPac.Time.declineNum(Math.round(a/30),"\u10d7\u10d5\u10d8\u10e1 \u10ec\u10d8\u10dc","\u10d7\u10d5\u10d8\u10e1 \u10ec\u10d8\u10dc","\u10d7\u10d5\u10d8\u10e1 \u10ec\u10d8\u10dc")},year:"\u10ec\u10da\u10d8\u10e1 \u10ec\u10d8\u10dc",years:function(a){return WPac.Time.declineNum(Math.round(a),"\u10ec\u10da\u10d8\u10e1 \u10ec\u10d8\u10dc",
"\u10ec\u10da\u10d8\u10e1 \u10ec\u10d8\u10dc","\u10ec\u10da\u10d8\u10e1 \u10ec\u10d8\u10dc")}},hy:{second:"\u0574\u056b \u0584\u0576\u056b \u057e\u0561\u0575\u0580\u056f\u0575\u0561\u0576 \u0561\u057c\u0561\u057b",minute:"\u0574\u0565\u056f \u0580\u0578\u057a\u0565 \u0561\u057c\u0561\u057b",minutes:function(a){return WPac.Time.declineNum(Math.round(a),"\u0580\u0578\u057a\u0565 \u0561\u057c\u0561\u057b","\u0580\u0578\u057a\u0565 \u0561\u057c\u0561\u057b","\u0580\u0578\u057a\u0565 \u0561\u057c\u0561\u057b")},
hour:"\u0574\u0565\u056f \u056a\u0561\u0574 \u0561\u057c\u0561\u057b",hours:function(a){return WPac.Time.declineNum(Math.round(a),"\u056a\u0561\u0574 \u0561\u057c\u0561\u057b","\u056a\u0561\u0574 \u0561\u057c\u0561\u057b","\u056a\u0561\u0574 \u0561\u057c\u0561\u057b")},day:"\u0574\u0565\u056f \u0585\u0580 \u0561\u057c\u0561\u057b",days:function(a){return WPac.Time.declineNum(Math.round(a),"\u0585\u0580 \u0561\u057c\u0561\u057b","\u0585\u0580 \u0561\u057c\u0561\u057b","\u0585\u0580 \u0561\u057c\u0561\u057b")},
month:"\u0574\u0565\u056f \u0561\u0574\u056b\u057d \u0561\u057c\u0561\u057b",months:function(a){return WPac.Time.declineNum(Math.round(a/30),"\u0561\u0574\u056b\u057d \u0561\u057c\u0561\u057b","\u0561\u0574\u056b\u057d \u0561\u057c\u0561\u057b","\u0561\u0574\u056b\u057d \u0561\u057c\u0561\u057b")},year:"\u0574\u0565\u056f \u057f\u0561\u0580\u056b \u0561\u057c\u0561\u057b",years:function(a){return WPac.Time.declineNum(Math.round(a),"\u057f\u0561\u0580\u056b \u0561\u057c\u0561\u057b","\u057f\u0561\u0580\u056b \u0561\u057c\u0561\u057b",
"\u057f\u0561\u0580\u056b \u0561\u057c\u0561\u057b")}},fr:{second:"tout \u00e0 l'heure",minute:"environ une minute",minutes:function(a){return Math.round(a)+" minutes"},hour:"environ une heure",hours:function(a){return"environ "+Math.round(a)+" heures"},day:"un jour",days:function(a){return Math.round(a)+" jours"},month:"environ un mois",months:function(a){return Math.round(a/30)+" mois"},year:"environ un an",years:function(a){return Math.round(a)+" ans"}},es:{second:"en este momento",minute:"hace un minuto",
minutes:function(a){return WPac.Time.declineNum(Math.round(a),"hace un minuto","minutos atr\u00e1s","minutos atr\u00e1s")},hour:"una hora atr\u00e1s",hours:function(a){return WPac.Time.declineNum(Math.round(a),"una hora atr\u00e1s","horas atr\u00e1s","horas atr\u00e1s")},day:"hace un d\u00eda",days:function(a){return WPac.Time.declineNum(Math.round(a),"un d\u00eda atr\u00e1s","d\u00edas atr\u00e1s","d\u00edas atr\u00e1s")},month:"Hace un mes",months:function(a){return WPac.Time.declineNum(Math.round(a/
30),"un mes atr\u00e1s","meses atr\u00e1s","meses atr\u00e1s")},year:"Hace un a\u00f1o",years:function(a){return WPac.Time.declineNum(Math.round(a),"hace un a\u00f1o","a\u00f1os atr\u00e1s","a\u00f1os atr\u00e1s")}},el:{second:"\u03bb\u03b9\u03b3\u03cc\u03c4\u03b5\u03c1\u03bf \u03b1\u03c0\u03cc \u03ad\u03bd\u03b1 \u03bb\u03b5\u03c0\u03c4\u03cc",minute:"\u03b3\u03cd\u03c1\u03c9 \u03c3\u03c4\u03bf \u03ad\u03bd\u03b1 \u03bb\u03b5\u03c0\u03c4\u03cc",minutes:function(a){return Math.round(a)+" minutes"},
hour:"\u03b3\u03cd\u03c1\u03c9 \u03c3\u03c4\u03b7\u03bd \u03bc\u03b9\u03b1 \u03ce\u03c1\u03b1",hours:function(a){return"about "+Math.round(a)+" hours"},day:"\u03bc\u03b9\u03b1 \u03bc\u03ad\u03c1\u03b1",days:function(a){return Math.round(a)+" days"},month:"\u03b3\u03cd\u03c1\u03c9 \u03c3\u03c4\u03bf\u03bd \u03ad\u03bd\u03b1 \u03bc\u03ae\u03bd\u03b1",months:function(a){return Math.round(a/30)+" months"},year:"\u03b3\u03cd\u03c1\u03c9 \u03c3\u03c4\u03bf\u03bd \u03ad\u03bd\u03b1 \u03c7\u03c1\u03cc\u03bd\u03bf",
years:function(a){return Math.round(a)+" years"}},de:{second:"soeben",minute:"vor einer Minute",minutes:function(a){return"vor "+Math.round(a)+" Minuten"},hour:"vor einer Stunde",hours:function(a){return"vor "+Math.round(a)+" Stunden"},day:"vor einem Tag",days:function(a){return"vor "+Math.round(a)+" Tagen"},month:"vor einem Monat",months:function(a){return"vor "+Math.round(a/30)+" Monaten"},year:"vor einem Jahr",years:function(a){return"vor "+Math.round(a)+" Jahren"}},be:{second:"\u043c\u0435\u043d\u0448 \u0437\u0430 \u0445\u0432\u0456\u043b\u0456\u043d\u0443 \u0442\u0430\u043c\u0443",
minute:"\u0445\u0432\u0456\u043b\u0456\u043d\u0443 \u0442\u0430\u043c\u0443",minutes:function(a){return WPac.Time.declineNum(Math.round(a),"\u0445\u0432\u0456\u043b\u0456\u043d\u0430 \u0442\u0430\u043c\u0443","\u0445\u0432\u0456\u043b\u0456\u043d\u044b \u0442\u0430\u043c\u0443","\u0445\u0432\u0456\u043b\u0456\u043d \u0442\u0430\u043c\u0443")},hour:"\u0433\u0430\u0434\u0437\u0456\u043d\u0443 \u0442\u0430\u043c\u0443",hours:function(a){return WPac.Time.declineNum(Math.round(a),"\u0433\u0430\u0434\u0437\u0456\u043d\u0443 \u0442\u0430\u043c\u0443",
"\u0433\u0430\u0434\u0437\u0456\u043d\u044b \u0442\u0430\u043c\u0443","\u0433\u0430\u0434\u0437\u0456\u043d \u0442\u0430\u043c\u0443")},day:"\u0434\u0437\u0435\u043d\u044c \u0442\u0430\u043c\u0443",days:function(a){return WPac.Time.declineNum(Math.round(a),"\u0434\u0437\u0435\u043d\u044c \u0442\u0430\u043c\u0443","\u0434\u043d\u0456 \u0442\u0430\u043c\u0443","\u0434\u0437\u0451\u043d \u0442\u0430\u043c\u0443")},month:"\u043c\u0435\u0441\u044f\u0446 \u0442\u0430\u043c\u0443",months:function(a){return WPac.Time.declineNum(Math.round(a/
30),"\u043c\u0435\u0441\u044f\u0446 \u0442\u0430\u043c\u0443","\u043c\u0435\u0441\u044f\u0446\u0430 \u0442\u0430\u043c\u0443","\u043c\u0435\u0441\u044f\u0446\u0430\u045e \u0442\u0430\u043c\u0443")},year:"\u0433\u043e\u0434 \u0442\u0430\u043c\u0443",years:function(a){return WPac.Time.declineNum(Math.round(a),"\u0433\u043e\u0434 \u0442\u0430\u043c\u0443","\u0433\u0430\u0434\u044b \u0442\u0430\u043c\u0443","\u0433\u043e\u0434 \u0442\u0430\u043c\u0443")}},it:{second:"proprio ora",minute:"un minuto fa",
minutes:function(a){return WPac.Time.declineNum(Math.round(a),"un minuto fa","minuti fa","minuti fa")},hour:"un'ora fa",hours:function(a){return WPac.Time.declineNum(Math.round(a),"un'ora fa","ore fa","ore fa")},day:"un giorno fa",days:function(a){return WPac.Time.declineNum(Math.round(a),"un giorno fa","giorni fa","giorni fa")},month:"un mese fa",months:function(a){return WPac.Time.declineNum(Math.round(a/30),"un mese fa","mesi fa","mesi fa")},year:"un anno fa",years:function(a){return WPac.Time.declineNum(Math.round(a),
"un anno fa","anni fa","anni fa")}},tr:{second:"az \u00f6nce",minute:"dakika \u00f6nce",minutes:function(a){return Math.round(a)+" dakika \u00f6nce"},hour:"saat \u00f6nce",hours:function(a){return Math.round(a)+" saat \u00f6nce"},day:"g\u00fcn \u00f6nce",days:function(a){return Math.round(a)+" g\u00fcn \u00f6nce"},month:"ay \u00f6nce",months:function(a){return Math.round(a/30)+" ay \u00f6nce"},year:"y\u0131l \u00f6nce",years:function(a){return Math.round(a)+" y\u0131l \u00f6nce"}},sr:{second:"nedavno",
minute:"pre jednog minut",minutes:function(a){return"pre "+Math.round(a)+" minuta"},hour:"pre sat vremena",hours:function(a){return"pre "+Math.round(a)+" sati"},day:"pre jednog dana",days:function(a){return"pre "+Math.round(a)+" dana"},month:"pre mesec dana",months:function(a){return"pre "+Math.round(a/30)+" meseci"},year:"pre godinu dana",years:function(a){return"pre "+Math.round(a)+" godina"}}};WPac.SVGIcon=WPac.SVGIcon||function(){var a=function(a,b,c,e,f){return'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+a+'" height="'+b+'" viewBox="'+(f||"0 0 1792 1792")+'"><path d="'+e+'"'+(c?' fill="'+c+'"':"")+"/></svg>"},b=function(a,b,c,e,f){return'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+a+'" height="'+b+'" viewBox="'+c+'"><g transform="translate('+e+') scale(0.05,-0.05)"><path fill="#fff" d="'+f+'"></path></g></svg>'},c={star_o:"M1201 1004l306-297-422-62-189-382-189 382-422 62 306 297-73 421 378-199 377 199zm527-357q0 22-26 48l-363 354 86 500q1 7 1 20 0 50-41 50-19 0-40-12l-449-236-449 236q-22 12-40 12-21 0-31.5-14.5t-10.5-35.5q0-6 2-20l86-500-364-354q-25-27-25-48 0-37 56-46l502-73 225-455q19-41 49-41t49 41l225 455 502 73q56 9 56 46z",
star_half:"M1250 957l257-250-356-52-66-10-30-60-159-322v963l59 31 318 168-60-355-12-66zm452-262l-363 354 86 500q5 33-6 51.5t-34 18.5q-17 0-40-12l-449-236-449 236q-23 12-40 12-23 0-34-18.5t-6-51.5l86-500-364-354q-32-32-23-59.5t54-34.5l502-73 225-455q20-41 49-41 28 0 49 41l225 455 502 73q45 7 54 34.5t-24 59.5z",star:"M1728 647q0 22-26 48l-363 354 86 500q1 7 1 20 0 21-10.5 35.5t-30.5 14.5q-19 0-40-12l-449-236-449 236q-22 12-40 12-21 0-31.5-14.5t-10.5-35.5q0-6 2-20l86-500-364-354q-25-27-25-48 0-37 56-46l502-73 225-455q19-41 49-41t49 41l225 455 502 73q56 9 56 46z"};
return{path:c,star_o:a(22,22,"#ccc",c.star_o),star_half:a(22,22,"#ff9800",c.star_half),star:a(22,22,"#ff9800",c.star),pencil:a(14,14,"#666","M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z"),caret:a(14,14,"#666","M1408 704q0 26-19 45l-448 448q-19 19-45 19t-45-19l-448-448q-19-19-19-45t19-45 45-19h896q26 0 45 19t19 45z"),
check:a(14,14,"#666","M1671 566q0 40-28 68l-724 724-136 136q-28 28-68 28t-68-28l-136-136-362-362q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 295 656-657q28-28 68-28t68 28l136 136q28 28 28 68z"),reply:a(14,14,"#666","M1792 640q0 26-19 45l-512 512q-19 19-45 19t-45-19-19-45v-256h-224q-98 0-175.5 6t-154 21.5-133 42.5-105.5 69.5-80 101-48.5 138.5-17.5 181q0 55 5 123 0 6 2.5 23.5t2.5 26.5q0 15-8.5 25t-23.5 10q-16 0-28-17-7-9-13-22t-13.5-30-10.5-24q-127-285-127-451 0-199 53-333 162-403 875-403h224v-256q0-26 19-45t45-19 45 19l512 512q19 19 19 45z"),
reply_sm:a(14,14,"#666","M7 0v3.675a11.411 11.411 0 0 1-2.135-.244 10.511 10.511 0 0 1-1.983-.635 5.92 5.92 0 0 1-1.715-1.13A4.975 4.975 0 0 1 0 .012c.047 1.075.206 2.045.479 2.912A7.68 7.68 0 0 0 1.686 5.28c.533.704 1.248 1.266 2.147 1.685.898.42 1.954.66 3.167.726V11l7-5.53L7 0","0 0 14 11"),edit:a(14,14,"#666","M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z"),
trash:a(14,14,"#666","M704 1376v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm256 0v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm256 0v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm-544-992h448l-48-117q-7-9-17-11h-317q-10 2-17 11zm928 32v64q0 14-9 23t-23 9h-96v948q0 83-47 143.5t-113 60.5h-832q-66 0-113-58.5t-47-141.5v-952h-96q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h309l70-167q15-37 54-63t79-26h320q40 0 79 26t54 63l70 167h309q14 0 23 9t9 23z"),
like:a(14,14,"#666","M0,535.5h102v-306H0V535.5z M561,255c0-28.05-22.95-51-51-51H349.35l25.5-117.3c0-2.55,0-5.1,0-7.65    c0-10.2-5.1-20.4-10.199-28.05L336.6,25.5L168.3,193.8c-10.2,7.65-15.3,20.4-15.3,35.7v255c0,28.05,22.95,51,51,51h229.5    c20.4,0,38.25-12.75,45.9-30.6l76.5-181.051c2.55-5.1,2.55-12.75,2.55-17.85v-51H561C561,257.55,561,255,561,255z","0 0 561 561"),unlike:a(14,14,"#666","M357,25.5H127.5c-20.4,0-38.25,12.75-45.9,30.6L5.1,237.15C2.55,242.25,0,247.35,0,255v48.45l0,0V306    c0,28.05,22.95,51,51,51h160.65l-25.5,117.3c0,2.55,0,5.101,0,7.65c0,10.2,5.1,20.399,10.2,28.05l28.05,25.5l168.3-168.3    c10.2-10.2,15.3-22.95,15.3-35.7v-255C408,48.45,385.05,25.5,357,25.5z M459,25.5v306h102v-306H459z",
"0 0 561 561"),paperclip:a(14,14,"#666","M1596 1385q0 117-79 196t-196 79q-135 0-235-100l-777-776q-113-115-113-271 0-159 110-270t269-111q158 0 273 113l605 606q10 10 10 22 0 16-30.5 46.5t-46.5 30.5q-13 0-23-10l-606-607q-79-77-181-77-106 0-179 75t-73 181q0 105 76 181l776 777q63 63 145 63 64 0 106-42t42-106q0-82-63-145l-581-581q-26-24-60-24-29 0-48 19t-19 48q0 32 25 59l410 410q10 10 10 22 0 16-31 47t-47 31q-12 0-22-10l-410-410q-63-61-63-149 0-82 57-139t139-57q88 0 149 63l581 581q100 98 100 235z","0 0 1792 1792"),
clock:a(14,14,"#666","M1024 544v448q0 14-9 23t-23 9h-320q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h224v-352q0-14 9-23t23-9h64q14 0 23 9t9 23zm416 352q0-148-73-273t-198-198-273-73-273 73-198 198-73 273 73 273 198 198 273 73 273-73 198-198 73-273zm224 0q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z","0 0 1792 1792"),menu:a(14,14,"#666","M1664 1344v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45z",
"0 0 1792 1792"),link:a(14,14,"#666","M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z",
"0 0 1792 1792"),share:a(14,14,"#666","M1344 1024q133 0 226.5 93.5t93.5 226.5-93.5 226.5-226.5 93.5-226.5-93.5-93.5-226.5q0-12 2-34l-360-180q-92 86-218 86-133 0-226.5-93.5t-93.5-226.5 93.5-226.5 226.5-93.5q126 0 218 86l360-180q-2-22-2-34 0-133 93.5-226.5t226.5-93.5 226.5 93.5 93.5 226.5-93.5 226.5-226.5 93.5q-126 0-218-86l-360 180q2 22 2 34t-2 34l360 180q92-86 218-86z","0 0 1792 1792"),smile:a(14,14,"#666","M1262 1075q-37 121-138 195t-228 74-228-74-138-195q-8-25 4-48.5t38-31.5q25-8 48.5 4t31.5 38q25 80 92.5 129.5t151.5 49.5 151.5-49.5 92.5-129.5q8-26 32-38t49-4 37 31.5 4 48.5zm-494-435q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm512 0q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm256 256q0-130-51-248.5t-136.5-204-204-136.5-248.5-51-248.5 51-204 136.5-136.5 204-51 248.5 51 248.5 136.5 204 204 136.5 248.5 51 248.5-51 204-136.5 136.5-204 51-248.5zm128 0q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z",
"0 0 1792 1792"),image:a(14,14,"#666","M576 576q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm1024 384v448h-1408v-192l320-320 160 160 512-512zm96-704h-1600q-13 0-22.5 9.5t-9.5 22.5v1216q0 13 9.5 22.5t22.5 9.5h1600q13 0 22.5-9.5t9.5-22.5v-1216q0-13-9.5-22.5t-22.5-9.5zm160 32v1216q0 66-47 113t-113 47h-1600q-66 0-113-47t-47-113v-1216q0-66 47-113t113-47h1600q66 0 113 47t47 113z","0 0 1792 1792"),search:a(14,14,"#666","M1216 832q0-185-131.5-316.5t-316.5-131.5-316.5 131.5-131.5 316.5 131.5 316.5 316.5 131.5 316.5-131.5 131.5-316.5zm512 832q0 52-38 90t-90 38q-54 0-90-38l-343-342q-179 124-399 124-143 0-273.5-55.5t-225-150-150-225-55.5-273.5 55.5-273.5 150-225 225-150 273.5-55.5 273.5 55.5 225 150 150 225 55.5 273.5q0 220-124 399l343 343q37 37 37 90z",
"0 0 1792 1792"),signin:a(14,14,"#666","M1312 896q0 26-19 45l-544 544q-19 19-45 19t-45-19-19-45v-288h-448q-26 0-45-19t-19-45v-384q0-26 19-45t45-19h448v-288q0-26 19-45t45-19 45 19l544 544q19 19 19 45zm352-352v704q0 119-84.5 203.5t-203.5 84.5h-320q-13 0-22.5-9.5t-9.5-22.5q0-4-1-20t-.5-26.5 3-23.5 10-19.5 20.5-6.5h320q66 0 113-47t47-113v-704q0-66-47-113t-113-47h-312l-11.5-1-11.5-3-8-5.5-7-9-2-13.5q0-4-1-20t-.5-26.5 3-23.5 10-19.5 20.5-6.5h320q119 0 203.5 84.5t84.5 203.5z","0 0 1792 1792"),comments:a(14,
14,"#666","M1408 768q0 139-94 257t-256.5 186.5-353.5 68.5q-86 0-176-16-124 88-278 128-36 9-86 16h-3q-11 0-20.5-8t-11.5-21q-1-3-1-6.5t.5-6.5 2-6l2.5-5 3.5-5.5 4-5 4.5-5 4-4.5q5-6 23-25t26-29.5 22.5-29 25-38.5 20.5-44q-124-72-195-177t-71-224q0-139 94-257t256.5-186.5 353.5-68.5 353.5 68.5 256.5 186.5 94 257zm384 256q0 120-71 224.5t-195 176.5q10 24 20.5 44t25 38.5 22.5 29 26 29.5 23 25q1 1 4 4.5t4.5 5 4 5 3.5 5.5l2.5 5 2 6 .5 6.5-1 6.5q-3 14-13 22t-22 7q-50-7-86-16-154-40-278-128-90 16-176 16-271 0-472-132 58 4 88 4 161 0 309-45t264-129q125-92 192-212t67-254q0-77-23-152 129 71 204 178t75 230z",
"0 0 1792 1792"),angle_down:a(14,14,"#666","M1395 736q0 13-10 23l-466 466q-10 10-23 10t-23-10l-466-466q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l393 393 393-393q10-10 23-10t23 10l50 50q10 10 10 23z","0 0 1792 1792"),code:a(14,14,null,"M553 1399l-50 50q-10 10-23 10t-23-10l-466-466q-10-10-10-23t10-23l466-466q10-10 23-10t23 10l50 50q10 10 10 23t-10 23l-393 393 393 393q10 10 10 23t-10 23zm591-1067l-373 1291q-4 13-15.5 19.5t-23.5 2.5l-62-17q-13-4-19.5-15.5t-2.5-24.5l373-1291q4-13 15.5-19.5t23.5-2.5l62 17q13 4 19.5 15.5t2.5 24.5zm657 651l-466 466q-10 10-23 10t-23-10l-50-50q-10-10-10-23t10-23l393-393-393-393q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l466 466q10 10 10 23t-10 23z"),
wordpress:a(14,14,null,"M127 896q0-163 67-313l367 1005q-196-95-315-281t-119-411zm1288-39q0 19-2.5 38.5t-10 49.5-11.5 44-17.5 59-17.5 58l-76 256-278-826q46-3 88-8 19-2 26-18.5t-2.5-31-28.5-13.5l-205 10q-75-1-202-10-12-1-20.5 5t-11.5 15-1.5 18.5 9 16.5 19.5 8l80 8 120 328-168 504-280-832q46-3 88-8 19-2 26-18.5t-2.5-31-28.5-13.5l-205 10q-7 0-23-.5t-26-.5q105-160 274.5-253.5t367.5-93.5q147 0 280.5 53t238.5 149h-10q-55 0-92 40.5t-37 95.5q0 12 2 24t4 21.5 8 23 9 21 12 22.5 12.5 21 14.5 24 14 23q63 107 63 212zm-506 106l237 647q1 6 5 11-126 44-255 44-112 0-217-32zm661-436q95 174 95 369 0 209-104 385.5t-279 278.5l235-678q59-169 59-276 0-42-6-79zm-674-527q182 0 348 71t286 191 191 286 71 348-71 348-191 286-286 191-348 71-348-71-286-191-191-286-71-348 71-348 191-286 286-191 348-71zm0 1751q173 0 331.5-68t273-182.5 182.5-273 68-331.5-68-331.5-182.5-273-273-182.5-331.5-68-331.5 68-273 182.5-182.5 273-68 331.5 68 331.5 182.5 273 273 182.5 331.5 68z"),
joomla:a(14,14,null,"M1198 1073l-160 160-151 152-30 30q-65 64-151.5 87t-171.5 2q-16 70-72 115t-129 45q-85 0-145-60.5t-60-145.5q0-72 44.5-128t113.5-72q-22-86 1-173t88-152l12-12 151 152-11 11q-37 37-37 89t37 90q37 37 89 37t89-37l30-30 151-152 161-160zm-341-682l12 12-152 152-12-12q-37-37-89-37t-89 37-37 89.5 37 89.5l29 29 152 152 160 160-151 152-161-160-151-152-30-30q-68-67-90-159.5t5-179.5q-70-15-115-71t-45-129q0-85 60-145.5t145-60.5q76 0 133.5 49t69.5 123q84-20 169.5 3.5t149.5 87.5zm807 1067q0 85-60 145.5t-145 60.5q-74 0-131-47t-71-118q-86 28-179.5 6t-161.5-90l-11-12 151-152 12 12q37 37 89 37t89-37 37-89-37-89l-30-30-152-152-160-160 152-152 160 160 152 152 29 30q64 64 87.5 150.5t2.5 171.5q76 11 126.5 68.5t50.5 134.5zm-2-1124q0 77-51 135t-127 69q26 85 3 176.5t-90 158.5l-12 12-151-152 12-12q37-37 37-89t-37-89-89-37-89 37l-30 30-152 152-160 160-152-152 161-160 152-152 29-30q67-67 159-89.5t178 3.5q11-75 68.5-126t135.5-51q85 0 145 60.5t60 145.5z"),
drupal:a(14,14,null,"M1295 1586q-5-19-24-5-30 22-87 39t-131 17q-129 0-193-49-5-4-13-4-11 0-26 12-7 6-7.5 16t7.5 20q34 32 87.5 46t102.5 12.5 99-4.5q41-4 84.5-20.5t65-30 28.5-20.5q12-12 7-29zm-39-115q-19-47-39-61-23-15-76-15-47 0-71 10-29 12-78 56-26 24-12 44 9 8 17.5 4.5t31.5-23.5q3-2 10.5-8.5t10.5-8.5 10-7 11.5-7 12.5-5 15-4.5 16.5-2.5 20.5-1q27 0 44.5 7.5t23 14.5 13.5 22q10 17 12.5 20t12.5-1q23-12 14-34zm355-281q0-22-5-44.5t-16.5-45-34-36.5-52.5-14q-33 0-97 41.5t-129 83.5-101 42q-27 1-63.5-19t-76-49-83.5-58-100-49-111-19q-115 1-197 78.5t-84 178.5q-2 112 74 164 29 20 62.5 28.5t103.5 8.5q57 0 132-32.5t134-71 120-70.5 93-31q26 1 65 31.5t71.5 67 68 67.5 55.5 32q35 3 58.5-14t55.5-63q28-41 42.5-101t14.5-106zm53-160q0 164-62 304.5t-166 236-242.5 149.5-290.5 54-293-57.5-247.5-157-170.5-241.5-64-302q0-89 19.5-172.5t49-145.5 70.5-118.5 78.5-94 78.5-69.5 64.5-46.5 42.5-24.5q14-8 51-26.5t54.5-28.5 48-30 60.5-44q36-28 58-72.5t30-125.5q129 155 186 193 44 29 130 68t129 66q21 13 39 25t60.5 46.5 76 70.5 75 95 69 122 47 148.5 19.5 177.5z"),
facebook:b(64,64,"0 0 100 100","23,85","M959 1524v-264h-157q-86 0 -116 -36t-30 -108v-189h293l-39 -296h-254v-759h-306v759h-255v296h255v218q0 186 104 288.5t277 102.5q147 0 228 -12z"),twitter:b(64,64,"0 0 100 100","9,80","M1620 1128q-67 -98 -162 -167q1 -14 1 -42q0 -130 -38 -259.5t-115.5 -248.5t-184.5 -210.5t-258 -146t-323 -54.5q-271 0 -496 145q35 -4 78 -4q225 0 401 138q-105 2 -188 64.5t-114 159.5q33 -5 61 -5q43 0 85 11q-112 23 -185.5 111.5t-73.5 205.5v4q68 -38 146 -41 q-66 44 -105 115t-39 154q0 88 44 163q121 -149 294.5 -238.5t371.5 -99.5q-8 38 -8 74q0 134 94.5 228.5t228.5 94.5q140 0 236 -102q109 21 205 78q-37 -115 -142 -178q93 10 186 50z"),
google:b(64,64,"0 0 125 125","5,95","M1437 623q0 -208 -87 -370.5t-248 -254t-369 -91.5q-149 0 -285 58t-234 156t-156 234t-58 285t58 285t156 234t234 156t285 58q286 0 491 -192l-199 -191q-117 113 -292 113q-123 0 -227.5 -62t-165.5 -168.5t-61 -232.5t61 -232.5t165.5 -168.5t227.5 -62 q83 0 152.5 23t114.5 57.5t78.5 78.5t49 83t21.5 74h-416v252h692q12 -63 12 -122zM2304 745v-210h-209v-209h-210v209h-209v210h209v209h210v-209h209z"),linkedin:b(64,64,"0 0 105 105","14,83","M349 911v-991h-330v991h330zM370 1217q1 -73 -50.5 -122t-135.5 -49h-2q-82 0 -132 49t-50 122q0 74 51.5 122.5t134.5 48.5t133 -48.5t51 -122.5zM1536 488v-568h-329v530q0 105 -40.5 164.5t-126.5 59.5q-63 0 -105.5 -34.5t-63.5 -85.5q-11 -30 -11 -81v-553h-329 q2 399 2 647t-1 296l-1 48h329v-144h-2q20 32 41 56t56.5 52t87 43.5t114.5 15.5q171 0 275 -113.5t104 -332.5z"),
tumblr:b(64,64,"0 0 100 100","22,85","M944 207l80 -237q-23 -35 -111 -66t-177 -32q-104 -2 -190.5 26t-142.5 74t-95 106t-55.5 120t-16.5 118v544h-168v215q72 26 129 69.5t91 90t58 102t34 99t15 88.5q1 5 4.5 8.5t7.5 3.5h244v-424h333v-252h-334v-518q0 -30 6.5 -56t22.5 -52.5t49.5 -41.5t81.5 -14 q78 2 134 29z"),instagram:b(64,64,"0 0 105 105","14,84.5","M1362 110v648h-135q20 -63 20 -131q0 -126 -64 -232.5t-174 -168.5t-240 -62q-197 0 -337 135.5t-140 327.5q0 68 20 131h-141v-648q0 -26 17.5 -43.5t43.5 -17.5h1069q25 0 43 17.5t18 43.5zM1078 643q0 124 -90.5 211.5t-218.5 87.5q-127 0 -217.5 -87.5t-90.5 -211.5 t90.5 -211.5t217.5 -87.5q128 0 218.5 87.5t90.5 211.5zM1362 1003v165q0 28 -20 48.5t-49 20.5h-174q-29 0 -49 -20.5t-20 -48.5v-165q0 -29 20 -49t49 -20h174q29 0 49 20t20 49zM1536 1211v-1142q0 -81 -58 -139t-139 -58h-1142q-81 0 -139 58t-58 139v1142q0 81 58 139 t139 58h1142q81 0 139 -58t58 -139z"),
soundcloud:a(64,64,"#fff","M26.791,154.715c-0.067,0.478-0.411,0.81-0.833,0.81c-0.436,0-0.781-0.334-0.837-0.814l-1.527-11.399  l1.527-11.598c0.056-0.482,0.401-0.817,0.837-0.817c0.42,0,0.768,0.335,0.833,0.814l1.811,11.601L26.791,154.715z M39.128,161.653  c-0.071,0.496-0.429,0.843-0.866,0.843c-0.445,0-0.812-0.355-0.869-0.848l-2.053-18.338c0,0,2.053-18.749,2.053-18.754  c0.061-0.488,0.428-0.842,0.869-0.842c0.44,0,0.797,0.343,0.87,0.842l2.333,18.754L39.128,161.653z M51.378,165.435  c-0.057,0.687-0.584,1.202-1.225,1.202c-0.646,0-1.177-0.516-1.227-1.202l-1.841-22.117l1.841-22.859  c0.052-0.69,0.579-1.207,1.227-1.207c0.64,0,1.168,0.517,1.225,1.201l2.093,22.865L51.378,165.435z M63.373,165.619  c-0.054,0.785-0.657,1.379-1.4,1.379c-0.754,0-1.354-0.594-1.404-1.383l-1.735-22.299l1.735-21.206  c0.048-0.788,0.649-1.384,1.404-1.384c0.746,0,1.349,0.591,1.4,1.374l1.973,21.216L63.373,165.619z M75.374,165.626v-0.007  c-0.05,0.872-0.743,1.562-1.582,1.562c-0.842,0-1.536-0.687-1.579-1.558l-1.636-22.298l1.636-34.501  c0.041-0.876,0.736-1.566,1.579-1.566c0.838,0,1.532,0.69,1.582,1.566l1.848,34.501L75.374,165.626z M87.372,165.482  c-0.044,0.977-0.819,1.743-1.758,1.743c-0.947,0-1.719-0.767-1.757-1.734l-1.529-22.158c0,0,1.526-42.393,1.526-42.396  c0.042-0.976,0.814-1.741,1.761-1.741c0.939,0,1.712,0.764,1.758,1.741l1.726,42.396L87.372,165.482z M99.617,165.123v0.003  c-0.038,1.174-0.964,2.097-2.114,2.097c-1.151,0-2.08-0.923-2.112-2.091l-1.318-21.794l1.315-47.481  c0.031-1.181,0.962-2.104,2.115-2.104c1.148,0,2.079,0.926,2.114,2.104l1.481,47.482L99.617,165.123z M111.869,164.799v-0.017  c-0.032,1.384-1.114,2.462-2.471,2.462c-1.361,0-2.448-1.082-2.475-2.446l-1.104-21.45l1.104-44.58  c0.027-1.383,1.116-2.463,2.475-2.463c1.356,0,2.438,1.081,2.471,2.459l1.239,44.585L111.869,164.799z M124.383,164.359v-0.025  c-0.022,1.558-1.289,2.822-2.827,2.822c-1.542,0-2.809-1.265-2.829-2.799l-1.161-21l1.159-57.859  c0.023-1.557,1.29-2.822,2.832-2.822c1.539,0,2.806,1.266,2.827,2.817l1.26,57.864L124.383,164.359z M206.723,167.344  c-0.458,0-71.129-0.035-71.194-0.044c-1.534-0.154-2.753-1.464-2.773-3.035V82.747c0.019-1.498,0.535-2.271,2.474-3.021  c4.986-1.928,10.635-3.069,16.43-3.069c23.678,0,43.09,18.16,45.133,41.306c3.057-1.282,6.415-1.994,9.936-1.994  c14.183,0,25.681,11.502,25.681,25.688C232.406,155.845,220.906,167.344,206.723,167.344z",
"0 0 256 256"),yahoo:'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="300" height="300" viewBox="130.35156 177.43359 300 300"><path id="path2217" d="m 420.92643,272.27045 c -5.2009,0.51386 -26.85186,5.3644 -34.12897,6.92416 -7.79227,2.0736 -78.98414,57.07497 -83.66081,70.5807 -1.03681,4.67406 -1.5565,11.86553 -1.5565,18.62359 l -0.52165,10.91566 c 0,7.78838 2.1638,20.34945 3.19995,27.10231 4.68055,1.04329 38.55454,0.13235 44.78836,1.16786 l -0.7669,13.9703 c -6.09108,-0.4438 -49.10557,-0.33998 -73.68009,-0.33998 -12.47476,0 -52.57608,1.37548 -64.89707,1.00436 l 2.32924,-13.28514 c 6.75611,-0.52424 34.72913,1.2068 40.8786,-5.28394 3.05461,-3.22072 2.08139,-6.67242 2.08139,-25.37646 v -8.83167 c 0,-4.15761 0,-11.95637 -1.04265,-19.23347 -2.59656,-7.79617 -65.30129,-86.09 -81.40942,-98.55763 -4.68055,-1.55715 -33.99013,-4.4885 -41.26399,-6.05084 l -0.36204,-11.96805 c 3.62883,-1.81928 36.22075,0.44249 67.8492,-0.72797 20.78673,-0.76819 68.21511,0 74.06677,0.69684 l -1.49941,10.54713 c -6.23382,1.56105 -36.26552,2.13849 -44.06168,4.2147 20.26768,30.13876 52.31202,68.94049 62.70668,84.01118 5.71931,-8.31262 55.95445,-42.8737 57.51162,-54.82488 -7.79747,-1.56495 -33.60668,-5.27876 -37.76559,-5.27876 l -2.46874,-13.60696 c 7.07534,-1.10687 44.27838,0 62.77416,0 15.96214,0 50.07036,0 59.76235,0.79416 l -8.86281,12.8128" style="fill:#fff"/></svg>',
livejournal:'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="100" height="100" viewBox="0 0 600 600"><path fill="#fff" d="M464.526,314.746l-0.063,0.031L245.193,22.29l-0.031,0.031C233.037,7.353,213.757,0.008,191.508,0.008  c-27.03,0-58.372,10.844-86.402,32.093c-51.154,38.749-72.278,97.59-47.966,132.62l-0.031,0.031l219.272,292.458l0.063-0.031  l188.491,54.813L464.526,314.746z M401.279,427.055c-7.25,5.5-12.063,13.031-14.281,21.221l-80.496-23.406  c19.344-29.623,25.719-66.061,17.844-100.371c30.654,17.063,67.246,20.969,100.935,10.404l0.219,84.217  C417.06,418.992,408.528,421.555,401.279,427.055z M233.068,71.693l20.624,27.53c-24.093,2.625-50.591,13.187-74.652,31.405  c-24.124,18.28-41.561,40.999-50.716,63.591l-20.593-27.499c0.75-3.5,1.718-6.625,2.593-9.218  c3.531-10.125,9.094-20.187,16.5-29.999c7.875-10.437,17.53-19.968,28.592-28.374c11.062-8.375,22.843-15.031,34.998-19.781  c11.406-4.468,22.593-7.062,33.249-7.656C226.381,71.538,229.568,71.475,233.068,71.693z M301.754,275.811L201.476,142.035  c8.344-5.406,17.031-9.906,25.936-13.375c11.375-4.469,22.593-7.031,33.25-7.688c2.688-0.125,5.874-0.156,9.374,0.031  l145.212,193.679c-13.874,3.814-28.499,4.814-43.153,2.75C343.876,313.434,318.908,298.652,301.754,275.811z M144.698,216.032  c0.75-3.468,1.719-6.593,2.594-9.188c3.562-10.125,9.093-20.218,16.53-29.999c5.75-7.656,12.468-14.812,19.937-21.374  l100.245,133.746l-0.031,0.031c17.156,22.842,24.438,51.061,20.47,79.402c-2.063,14.781-7.095,28.656-14.563,41L144.698,216.032z   M128.73,63.601c10.593-8,21.811-14.218,33.342-18.437c10.25-3.719,20.437-5.687,29.436-5.687c10.75,0,19.218,2.812,23.187,7.75  l2.031,2.656c-24.093,2.656-50.591,13.218-74.653,31.436c-24.124,18.25-41.561,40.999-50.685,63.592l-2.063-2.75  C80.294,129.161,91.137,92.067,128.73,63.601z"/></svg>',
vkontakte:b(64,64,"0 0 110 110","7,82","M1917 1016q23 -64 -150 -294q-24 -32 -65 -85q-78 -100 -90 -131q-17 -41 14 -81q17 -21 81 -82h1l1 -1l1 -1l2 -2q141 -131 191 -221q3 -5 6.5 -12.5t7 -26.5t-0.5 -34t-25 -27.5t-59 -12.5l-256 -4q-24 -5 -56 5t-52 22l-20 12q-30 21 -70 64t-68.5 77.5t-61 58 t-56.5 15.5q-3 -1 -8 -3.5t-17 -14.5t-21.5 -29.5t-17 -52t-6.5 -77.5q0 -15 -3.5 -27.5t-7.5 -18.5l-4 -5q-18 -19 -53 -22h-115q-71 -4 -146 16.5t-131.5 53t-103 66t-70.5 57.5l-25 24q-10 10 -27.5 30t-71.5 91t-106 151t-122.5 211t-130.5 272q-6 16 -6 27t3 16l4 6 q15 19 57 19l274 2q12 -2 23 -6.5t16 -8.5l5 -3q16 -11 24 -32q20 -50 46 -103.5t41 -81.5l16 -29q29 -60 56 -104t48.5 -68.5t41.5 -38.5t34 -14t27 5q2 1 5 5t12 22t13.5 47t9.5 81t0 125q-2 40 -9 73t-14 46l-6 12q-25 34 -85 43q-13 2 5 24q17 19 38 30q53 26 239 24 q82 -1 135 -13q20 -5 33.5 -13.5t20.5 -24t10.5 -32t3.5 -45.5t-1 -55t-2.5 -70.5t-1.5 -82.5q0 -11 -1 -42t-0.5 -48t3.5 -40.5t11.5 -39t22.5 -24.5q8 -2 17 -4t26 11t38 34.5t52 67t68 107.5q60 104 107 225q4 10 10 17.5t11 10.5l4 3l5 2.5t13 3t20 0.5l288 2 q39 5 64 -2.5t31 -16.5z"),
odnoklassniki:b(64,64,"0 0 105 105","20,84","M640 629q-188 0 -321 133t-133 320q0 188 133 321t321 133t321 -133t133 -321q0 -187 -133 -320t-321 -133zM640 1306q-92 0 -157.5 -65.5t-65.5 -158.5q0 -92 65.5 -157.5t157.5 -65.5t157.5 65.5t65.5 157.5q0 93 -65.5 158.5t-157.5 65.5zM1163 574q13 -27 15 -49.5 t-4.5 -40.5t-26.5 -38.5t-42.5 -37t-61.5 -41.5q-115 -73 -315 -94l73 -72l267 -267q30 -31 30 -74t-30 -73l-12 -13q-31 -30 -74 -30t-74 30q-67 68 -267 268l-267 -268q-31 -30 -74 -30t-73 30l-12 13q-31 30 -31 73t31 74l267 267l72 72q-203 21 -317 94 q-39 25 -61.5 41.5t-42.5 37t-26.5 38.5t-4.5 40.5t15 49.5q10 20 28 35t42 22t56 -2t65 -35q5 -4 15 -11t43 -24.5t69 -30.5t92 -24t113 -11q91 0 174 25.5t120 50.5l38 25q33 26 65 35t56 2t42 -22t28 -35z"),
mailru:'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="114" height="114" viewBox="0 0 114 114"><path fill="#fff" d="M41.93,30.296c-3.896,0-7.066,3.169-7.066,7.065s3.17,7.067,7.066,7.067s7.064-3.171,7.064-7.067  S45.825,30.296,41.93,30.296z"></path><path fill="#fff" d="M72.223,30.296c-3.896,0-7.065,3.169-7.065,7.065s3.17,7.067,7.065,7.067s7.064-3.171,7.064-7.067  S76.117,30.296,72.223,30.296z"></path><path fill="#fff" d="M96.324,77.49c0.299-1.112,0.146-2.273-0.428-3.271l-8.785-15.268c-0.769-1.332-2.199-2.16-3.738-2.16  c-0.75,0-1.492,0.199-2.146,0.576c-0.998,0.574-1.711,1.502-2.012,2.613c-0.299,1.111-0.146,2.272,0.428,3.271l0.703,1.226  l-0.342,0.494c-4.232,6.111-13.26,10.061-22.994,10.061c-9.67,0-18.668-3.911-22.926-9.965l-0.352-0.5l0.754-1.289  c1.199-2.049,0.507-4.694-1.543-5.896c-0.66-0.385-1.41-0.589-2.17-0.589c-1.528,0-2.955,0.816-3.725,2.133l-8.935,15.27  c-1.199,2.05-0.507,4.695,1.543,5.895c0.659,0.387,1.411,0.59,2.172,0.59c1.527,0,2.954-0.815,3.724-2.132l3.496-5.974l0.871,0.876  c6.447,6.481,16.32,10.2,27.09,10.2c10.778,0,20.658-3.725,27.104-10.215l0.879-0.885l3.436,5.969  c0.768,1.332,2.2,2.159,3.739,2.159c0.751,0,1.492-0.198,2.144-0.573C95.311,79.529,96.023,78.602,96.324,77.49z"></path></svg>',
yandex:'<svg xmlns="http://www.w3.org/2000/svg" version="1.0" width="300" height="300" viewBox="0 0 30 46"><path style="fill:#FF0303" d="M 21.0607,0 L 14.1613,0 C 7.38301,0 1.63391,5.1601 1.63391,15.1777 C 1.63391,21.1875 4.41811,25.6191 9.38002,27.8047 L 0.121216,44.5605 C -0.181488,45.1074 0.121216,45.5312 0.604614,45.5312 L 4.9015,45.5312 C 5.26482,45.5312 5.507,45.4101 5.62813,45.1074 L 14.0402,28.6543 L 17.0666,28.6543 L 17.0666,45.1074 C 17.0666,45.289 17.2482,45.5312 17.4894,45.5312 L 21.2423,45.5312 C 21.6056,45.5312 21.7267,45.3496 21.7267,45.0468 L 21.7267,0.607361 C 21.7267,0.18158 21.4845,0 21.0607,0 z M 17.0666,24.7695 L 14.5246,24.7695 C 10.5304,24.7695 6.65742,21.8553 6.65742,14.5703 C 6.65742,6.98035 10.2882,3.88464 13.9796,3.88464 L 17.0666,3.88464 L 17.0666,24.7695 z"/></svg>',
icon:function(b,g,h){return a(g,g,h||"#666",c[b])}}}();WPac.AutoSize=WPac.AutoSize||{css:"position:absolute!important;top:-999px!important;left:0!important;right:auto!important;bottom:auto!important;border:0!important;padding: 0!important;-moz-box-sizing:content-box!important;-webkit-box-sizing:content-box!important;box-sizing:content-box!important;word-wrap:break-word!important;height:0!important;min-height:0!important;overflow:hidden!important;transition:none!important;-webkit-transition:none!important;-moz-transition:none!important;"};
WPac.AutoSize.mainall=function(a){WPac.Fastjs.each(a,function(a){WPac.AutoSize.main(a)})};
WPac.AutoSize.main=function(a,b){function c(){var b=WPac.AutoSize.css;A=a;e=getComputedStyle(a,null);WPac.Fastjs.each(r,function(a){b+=a+":"+e.getPropertyValue(a)+";"});h.setAttribute("style",b)}function d(){var e,d,k;A!==a&&c();s||(s=!0,h.value=a.value+"",h.style.overflowY=a.style.overflowY,e=""===a.style.height?"auto":parseInt(a.style.height,10),d=getComputedStyle(a,null).getPropertyValue("width"),"px"===d.substr(d.length-2,2)&&(d=parseInt(d,10)-f.width,h.style.width=d+"px"),d=h.scrollHeight,d>
w?(d=w,k="scroll"):d<l&&(d=l),d+=f.height,a.style.overflowY=k||"hidden",e!==d&&(a.style.height=d+"px",b&&b.call(a,d)),setTimeout(function(){s=!1},1))}if(a&&window.getComputedStyle){a.setAttribute("style","overflow:hidden!important;overflow-y:hidden!important;word-wrap:break-word!important;");var g=a.value;a.value="";a.value=g;var h=WPac.Fastjs.create("textarea",!1,!1,this.css),e=getComputedStyle(a,null);e.getPropertyValue("resize");var f="border-box"!==e.getPropertyValue("box-sizing")&&"border-box"!==
e.getPropertyValue("-moz-box-sizing")&&"border-box"!==e.getPropertyValue("-webkit-box-sizing")?{width:0,height:0}:{width:parseInt(e.getPropertyValue("border-right-width"),10)+parseInt(e.getPropertyValue("padding-right"),10)+parseInt(e.getPropertyValue("padding-left"),10)+parseInt(e.getPropertyValue("border-left-width"),10),height:parseInt(e.getPropertyValue("border-top-width"),10)+parseInt(e.getPropertyValue("padding-top"),10)+parseInt(e.getPropertyValue("padding-bottom"),10)+parseInt(e.getPropertyValue("border-bottom-width"),
10)},g=parseInt(e.getPropertyValue("min-height"),10),k=parseInt(e.getPropertyValue("height"),10),l=Math.max(g,k)-f.height,w=parseInt(e.getPropertyValue("max-height"),10),A,s,r="font-family font-size font-weight font-style letter-spacing line-height text-transform word-spacing text-indent".split(" "),w=w&&0<w?w:9E4;h.parentNode!==document.body&&document.body.appendChild(h);if("onpropertychange"in a&&"oninput"in a)a.oninput=a.onkeyup=d;else if("oninput"in a)a.oninput=d;else WPac.Fastjs.on(a,"keyup",
d);d()}};var WPac=WPac||{};
WPac.Media=WPac.Media||{srv:"https://media.cackle.me/",xhr:null,html:'<a href="#" class="wp-attachimg"><i class="mcicon-picture"></i></a><input type="file" tabindex="-1" accept="image/*" style="display:none!important">',pthumb:WPac.origin_embed+"/widget/img/presen_thumbl.png",uploadImage:function(a){WPac.Fastjs.next(this).click();return!1},uploadFiles:function(a,b,c,d){if(window.FormData){var g=WPac.Fastjs.prev(b);WPac.Fastjs.addcl(g,"wp-spin");b=new FormData;for(var h=0,e;e=a[h];++h)b.append("file",e);
var f=this;this.xhr||(this.xhr=new XMLHttpRequest);this.xhr.open("POST",this.srv+"upload2",!0);this.xhr.onload=function(a){4===f.xhr.readyState&&(200===f.xhr.status&&0<f.xhr.responseText.length)&&(a=f.srv+f.xhr.responseText,c&&f.attachImage(a,c),d&&d(a),WPac.Fastjs.remcl(g,"wp-spin"))};this.xhr.send(b)}},attachImage:function(a,b){if(a){var c=this.makePreview(a.split(" "),!0),d=WPac.Fastjs.next(b);if(d&&WPac.Fastjs.hascl(d,"wp-media-preview")){var g=d.querySelector("ul");WPac.Fastjs.each(c.querySelectorAll("li"),
function(a){g.appendChild(a)})}else d=WPac.Fastjs.create("div","wp-media-preview"),d.appendChild(c),WPac.Fastjs.after(b,d)}},makeContent:function(a,b,c){if((a=this.findLinks(a))&&0<a.length)return b=this.makePreview(a,b,c),c=WPac.Fastjs.create("div","wp-comment-media"),c.appendChild(b),c;c&&c();return""},makeContentHtml:function(a,b){var c=this.makeContent(a,b);return c?c.outerHTML:""},findLinks:function(a){return a.match(/(((\bhttps?:)?(\/\/)?(((www\.)?youtube\.com\/watch\?[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])|((www\.)?youtu\.be\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])|(vimeo\.com\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*\/?(\d)*)|([-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|]\.(png|jpg|jpeg|gif))|(docs\.google\.com\/present\/view?[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])|(www\.slideshare\.net\/slideshow\/embed_code\/(\d)+)|((www\.)?soundcloud\.com\/[-A-Z0-9+&@#\/%?=~_|!:,.;]+)|((www\.)?twitter\.com\/[-A-Z0-9+&@#\/%?=~_|!:,.;]+))))/ig)},
makePreview:function(a,b,c){var d=this,g=WPac.Fastjs.create("ul");WPac.Fastjs.each(a,function(a){var e=a.toString().trim();if(e){var f=WPac.Fastjs.create("li"),k=!1,l="img";-1<e.indexOf("youtube.com")?(a=d.youtubeThumbl(e),l="youtube",k=!0):-1<e.indexOf("youtu.be")?(a=d.youtubeShortThumbl(e),l="youtube",k=!0):-1<e.indexOf("vimeo.com")?(a=d.vimeoThumbl(e),l="vimeo",k=!0):a=-1<e.indexOf("docs.google.com")?d.imgThumbl(d.pthumb):-1<e.indexOf("slideshare.net")?d.imgThumbl(d.pthumb):-1<e.indexOf("soundcloud.com")?
d.soundcloud(e):-1<e.indexOf("twitter.com")?d.twitter(e):d.imgThumbl(e);if(a){var w;b?(w=WPac.Fastjs.create("div","wp-media-surface"),w.setAttribute("data-media",e),e=WPac.Fastjs.create("span"),e.innerHTML="\u00d7",f.appendChild(e),WPac.Fastjs.on(e,"click",function(a){f.parentNode.removeChild(f);return!1})):(w=WPac.Fastjs.create("a"),w.href=e,w.target="_blank",w.setAttribute("data-type",l),WPac.Fastjs.on(w,"click",d.mediaClick),k&&(e=WPac.Fastjs.create("img","wp-media-play"),e.src=WPac.origin_embed+
"/widget/img/ytplay.png",w.appendChild(e)));a.onload=function(){c&&c()};w.appendChild(a);f.appendChild(w);g.appendChild(f)}}});return g},mediaClick:function(a){a=this.getAttribute("href");var b=this.getAttribute("data-type");if("img"!=b)WPac.Fastjs.addcl(this.parentNode,"wp-block"),this.outerHTML=WPac.Media[b+"Video"](a);else if(WPac.Modal)WPac.Media.lightbox(a,this);else return;return!1},lightbox:function(a,b){var c=WPac.Modal.show("wp-modal-lightbox","",null,'<img src="'+a+'"><div class="wp-media-nav"><span class="wp-media-prev" data-dir="prev"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTc5MiIgaGVpZ2h0PSIxNzkyIiB2aWV3Qm94PSIwIDAgMTc5MiAxNzkyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0xNDI3IDMwMWwtNTMxIDUzMSA1MzEgNTMxcTE5IDE5IDE5IDQ1dC0xOSA0NWwtMTY2IDE2NnEtMTkgMTktNDUgMTl0LTQ1LTE5bC03NDItNzQycS0xOS0xOS0xOS00NXQxOS00NWw3NDItNzQycTE5LTE5IDQ1LTE5dDQ1IDE5bDE2NiAxNjZxMTkgMTkgMTkgNDV0LTE5IDQ1eiIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg=="></span><span class="wp-media-next" data-dir="next"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTc5MiIgaGVpZ2h0PSIxNzkyIiB2aWV3Qm94PSIwIDAgMTc5MiAxNzkyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0xMzYzIDg3N2wtNzQyIDc0MnEtMTkgMTktNDUgMTl0LTQ1LTE5bC0xNjYtMTY2cS0xOS0xOS0xOS00NXQxOS00NWw1MzEtNTMxLTUzMS01MzFxLTE5LTE5LTE5LTQ1dDE5LTQ1bDE2Ni0xNjZxMTktMTkgNDUtMTl0NDUgMTlsNzQyIDc0MnExOSAxOSAxOSA0NXQtMTkgNDV6IiBmaWxsPSIjZmZmIi8+PC9zdmc+"></span></div>',
!0),d=c.querySelector("img");WPac.Fastjs.on(window,"resize",function(a){WPac.Media.imgResize(d)},!1);WPac.Fastjs.onall2(c,".wp-modal, .wp-modal-backdrop","click",function(a){WPac.Fastjs.rm(c)},!1);WPac.Fastjs.onall2(c,".wp-media-prev, .wp-media-prev img, .wp-media-next, .wp-media-next img","click",function(){WPac.Fastjs.rm(c);var a=this.getAttribute("data-dir")||this.parentNode.getAttribute("data-dir"),d=function(c){(c=WPac.Fastjs[a]((c||b).parentNode))?(c=WPac.Fastjs.children(c)[0])&&"img"==c.getAttribute("data-type")?
WPac.Media.mediaClick.call(c):d(c):(c=WPac.Fastjs.parents(b,"wp-comment-media"),WPac.Media.mediaClick.call(c.querySelector(("prev"==a?"li:last-child ":"")+'a[data-type="img"]')))};d()});WPac.Media.ratio=!1;WPac.Media.imgOriginWidth=0;WPac.Media.imgOriginHeight=0;WPac.Media.imgResize(d)},youtubeVideo:function(a){if(-1<a.indexOf("youtu.be")){var b=this.youtubeShortRegex(a);if(b&&1<b.length)return this.youtubeEmbed(a,b[2])}else if((b=this.youtubeRegex(a))&&0<b.length)return this.youtubeEmbed(a,b[1])},
youtubeEmbed:function(a,b){return'<object><param name="movie" value="'+a+'"/><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="never"/><embed src="//www.youtube.com/v/'+b+'?f=videos&amp;app=youtube_gdata&amp;autoplay=1&amp;fs=1" type="application/x-shockwave-flash" allowscriptaccess="never" allowfullscreen="true"/></object>'},vimeoVideo:function(a){if((a=/vimeo\.com\/?.*\/(\d+)/.exec(a))&&0<a.length)return this.vimeoEmbed(a[1])},vimeoEmbed:function(a){return'<object><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="//vimeo.com/moogaloop.swf?clip_id='+
a+'&amp;server=vimeo.com&amp;color=00adef&amp;fullscreen=1&amp;autoplay=1" /><embed src="//vimeo.com/moogaloop.swf?clip_id='+a+'&amp;server=vimeo.com&amp;color=00adef&amp;fullscreen=1&amp;autoplay=1" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always"></embed></object>'},youtubeThumbl:function(a){if((a=this.youtubeRegex(a))&&0<a.length)return this.imgThumbl(this.youtubeThumbSrc(a[1]))},youtubeShortThumbl:function(a){if((a=this.youtubeShortRegex(a))&&1<a.length)return this.imgThumbl(this.youtubeThumbSrc(a[2]))},
youtubeThumbSrc:function(a){return"//i.ytimg.com/vi/"+a+"/0.jpg"},youtubeRegex:function(a){return/v=([^\?\&]+)/.exec(a)},youtubeShortRegex:function(a){return/([^\/]+)\/([^\/]+)/.exec(a)},vimeoThumbl:function(a){if((a=/vimeo\.com\/?.*\/(\d+)/.exec(a))&&0<a.length){var b=WPac.Fastjs.create("img");WPac.Fastjs.jsonp("//vimeo.com/api/v2/video/"+a[1]+".json",null,function(a){b.src=a[0].thumbnail_large});return b}},soundcloud:function(a){var b=WPac.Fastjs.create("iframe");a="https://api.soundcloud.com/resolve.json?url="+
encodeURIComponent(a)+"&client_id=5d9b41695017f4d7b9400454eb1208db";WPac.Fastjs.jsonp(a,null,function(a){b.setAttribute("width","100%");b.setAttribute("height","200");b.setAttribute("scrolling","no");b.setAttribute("frameborder","no");b.src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/"+a.id+"&amp;auto_play=false&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false&amp;visual=true"});return b},twitter:function(a){var b=WPac.Fastjs.create("div");
WPac.Fastjs.jsonp("https://api.twitter.com/1/statuses/oembed.json?url="+encodeURIComponent(a),null,function(a){b.innerHTML=a.html;WPac.twttr_load?window.twttr.widgets.load():(WPac.twttr_load=!0,WPac.Lib.loadJs("//platform.twitter.com/widgets.js"))});return b},imgThumbl:function(a){var b=WPac.Fastjs.create("img");b.src=a;return b},imgResize:function(a){var b,c;c=window.innerWidth||document.documentElement.offsetWidth;var d=window.innerHeight||document.documentElement.offsetHeight;!this.ratio&&(a&&
a.offsetWidth&&a.offsetHeight)&&(this.ratio=a.offsetWidth/a.offsetHeight);Math.floor(c/this.ratio)>d?(b=d*this.ratio,c=d):(b=c,c/=this.ratio);b=Math.floor(0.8*b);c=Math.floor(0.8*c);this.imgOriginWidth=this.imgOriginWidth||a.naturalWidth||a.width;this.imgOriginHeight=this.imgOriginHeight||a.naturalHeight||a.height;if(b>this.imgOriginWidth||c>this.imgOriginHeight)b=this.imgOriginWidth,c=this.imgOriginHeight;a.parentNode.setAttribute("style","width:"+b+"px!important;height:"+c+"px!important;margin-top:"+
((window.innerHeight||document.documentElement.offsetHeight)-c)/2+"px!important")}};WPac.Media.attach=function(a,b){if(b){var c=b.trim().split(/\s+/);WPac.Fastjs.each(c,function(b){WPac.Media.attachImage(b,a)})}};
WPac.Media.main=function(a,b){if(a){var c=WPac.Fastjs.create("div","wp-attachimg-cnt");c.innerHTML=WPac.Media.html;a.appendChild(c);WPac.Fastjs.on2(a,".wp-attachimg","click",WPac.Media.uploadImage);WPac.Fastjs.on2(a,'input[type="file"]',"change",function(){WPac.Media.uploadFiles(this.files,this,a);this.value=""});WPac.Media.attach(a,b)}};
WPac.Media.event=function(a,b){WPac.Fastjs.on2(a,".wp-attachimg","click",WPac.Media.uploadImage);WPac.Fastjs.on2(a,'input[type="file"]',"change",function(){WPac.Media.uploadFiles(this.files,this,b);this.value=""})};WPac.Modal=WPac.Modal||{temp:'<div class="wp-modal" style="display:none;top:{{=it.top}}!important"><div class="wp-modal-dialog"><div class="wp-modal-content"><div class="wp-modal-header"><button type="button" class="wp-close">\u00d7</button>{{?it.img}}<img src="{{=it.img}}"/>{{?}}<div class="wp-modal-title">{{=it.title}}</div></div>{{?it.title}}<div class="wp-clear"></div>{{?}}<div class="wp-modal-body">{{=it.body}}</div></div></div></div>',create:function(a,b,c,d,g,h){var e=this,f=document.querySelector("."+
a.split(" ").join(".")+".wp-modal-cnt");if(!f||h)f=WPac.Fastjs.create("div",a+" wp-modal-cnt wpac"),f.innerHTML=doT.template(this.temp)({top:document.documentElement.scrollTop||document.body.scrollTop,img:c,title:b,body:d}),document.body.appendChild(f),WPac.Fastjs.on2(f,".wp-close","click",function(){g?WPac.Fastjs.rm(f):e.hide(f)});return f},show:function(a,b,c,d,g){a=this.create(a,b,c,d,g);this.show2(a);return a},show2:function(a){a.querySelector(".wp-modal-backdrop")||WPac.Fastjs.prepend(a,WPac.Fastjs.create("div",
"wp-modal-backdrop"));a.querySelector(".wp-modal").setAttribute("style","display:block;top:"+(document.documentElement.scrollTop||document.body.scrollTop)+"px!important;")},hide:function(a){var b=a.querySelector(".wp-modal");a=a.querySelector(".wp-modal-backdrop");WPac.Fastjs.rm(a);WPac.Fastjs.hide2(b)}};WPac.Stars=WPac.Stars||{html:'<span class="wp-stars">{{~it.stars :c}}{{?it.rating >= c}}<span class="wp-star" data-origin="star" data-color="{{=it.color}}" data-star="{{=c}}" style="display:inline-block;vertical-align:middle;padding:0 4px 0 0;line-height:20px;cursor:pointer;">{{=it.svg.icon("star", it.size || 24, it.color)}}</span>{{??}}{{?c - it.rating < 1}}<span class="wp-star" data-origin="star_half" data-color="{{=it.color}}" data-star="{{=c}}" style="display:inline-block;vertical-align:middle;padding:0 4px 0 0;line-height:20px;cursor:pointer;">{{=it.svg.icon("star_half", it.size || 24, it.color)}}</span>{{??}}<span class="wp-star" data-origin="star_o" data-color="#ccc" data-star="{{=c}}" style="display:inline-block;vertical-align:middle;padding:0 4px 0 0;line-height:20px;cursor:pointer;">{{=it.svg.icon("star_o", it.size || 24, "#ccc")}}</span>{{?}}{{?}}{{~}}</span>',
main:function(a){var b=this,c=(a.cnt||document).querySelector(a.el);c.innerHTML=this.stars_render(a.size,a.color,a.stars,a.sum,a.count);if(!a.readonly){var c=c.querySelector(".wp-stars"),d=c.querySelectorAll(".wp-star");WPac.Fastjs.on(c,"mouseleave",function(a){WPac.Fastjs.each(d,function(a){var b=a.querySelector("path");a.setAttribute("data-hover","");b.setAttribute("d",WPac.SVGIcon.path[a.getAttribute("data-origin")]);b.setAttribute("fill",a.getAttribute("data-color"))})});WPac.Fastjs.onall(d,"mouseout",
function(){b.prevHover(a,this);b.nextHover(a,this)});WPac.Fastjs.onall(d,"click",function(){var c=parseInt(this.getAttribute("data-star"));a.clickable&&(this.parentNode.setAttribute("data-star",c),WPac.Fastjs.each(d,function(d){d.getAttribute("data-star")<=c?(d.setAttribute("data-origin","star"),d.setAttribute("data-color",b.color(a.color))):(d.setAttribute("data-origin","star_o"),d.setAttribute("data-color","#ccc"))}));a.cb&&a.cb(c)})}},stars_render:function(a,b,c,d,g){return this.render("html",
{size:a,color:this.color(b),stars:this.stars(c||5),rating:this.rating(d,g)})},rating_render:function(a,b,c,d){return this.render("html",{size:b,color:this.color(c),stars:this.stars(d||5),rating:a})},color:function(a){return a?a.match(/^#[0-9a-zA-Z]+$/)?a:"#"+a:"#ff9800"},render:function(a,b){b.svg=WPac.SVGIcon;return doT.template(this[a]||a)(b)},stars:function(a){for(var b=[],c=1;c<=a;c++)b.push(c);return b},rating:function(a,b){b=b||0;return 0<b?((a||0)/b).toFixed(1):0},prevHover:function(a,b){if(b){var c=
b.getAttribute("data-hover");c&&"off"!=c||(c=b.querySelector("path"),c.setAttribute("d",WPac.SVGIcon.path.star),c.setAttribute("fill",this.color(a.color)),b.setAttribute("data-hover","on"));this.prevHover(a,WPac.Fastjs.prev(b))}},nextHover:function(a,b){var c=WPac.Fastjs.next(b);if(c){var d=c.getAttribute("data-hover");d&&"on"!=d||(d=c.querySelector("path"),d.setAttribute("d",WPac.SVGIcon.path.star_o),d.setAttribute("fill","#ccc"),c.setAttribute("data-hover","off"));this.nextHover(a,c)}}};WPac.ErrorLang={en:{e1:"Site not found",e2:"Wrong referrer",e3:"Wrong Captcha",e4:"Guest name is missing or incorrect email",e5:"Your social provider is disabled, please log out and log in again by another",e6:"Too much media links",e7:"Wrong media links",e8:"You are banned",e9:"Your IP address is banned",e10:"until",e11:"due to",e12:"Admin note: ",e13:"Please wait, the minimum interval between comments 5 seconds",e34:"Please wait for moderator approval",e35:"This post cannot be published"}};WPac.LoginLang=WPac.LoginLang||{en:{l1:"Please",l2:"log in with social",l3:"or",l4:"sign up",l5:"Sign In",l6:"Sign Up",l7:"This picture will show whenever you leave a comment. Click to customize it.",l8:"Name",l9:"Email",l10:"Password",l11:"I'd rather post as a guest"}};WPac.CommentErrorLang={en:WPac.Fastjs.extend(WPac.ErrorLang.en,{e14:"Comment can not be blank",e15:"Comment is too large"})};WPac.CommentListLang={en:{c8:"Reply",c9:"Edit",c10:"Remove",c11:"Rating",c12:"Link",c13:"Share",c14:"See more",c15:"Save",c16:"Cancel",c17:"Post comment",c18:"Comment deleted",c19:"Leave your comment...",c20:"Do you really want to delete comment?"}};WPac.CommentLang={en:{c1:function(a){return(0<a?a+" ":"")+"Comment"+(1==a?"":"s")},sort_desc:"Sort by Newest",sort_best:"Sort by Best",sort_asc:"Sort by Oldest",c5:"New comments",c6:"Replies",c7:"Be the first to comment!",c21:"Sign Out",c22:"Next comments",c23:"Login",desc:"Newest",best:"Best",asc:"Oldest",c24:"Add WidgetPack to your site",c25:"Avatar",c26:"Upload",c27:"Gravatar",c28:"Name",c29:"Website",c30:"Verification email has been sent to",c31:"Comments",c32:"You have no comment yet",stat_0:"Pending approval",
stat_2:"Deleted",stat_3:"Spam"}};WPac.Alert=WPac.Alert||{_CLOSE:'<button type="button" class="wp-close">\u00d7</button>',success:function(a,b){return this.alert(a,"success",b)},alert:function(a,b,c){var d=this,g=document.querySelectorAll(".wpac-alert-fixed");if(g)for(var h=0;h<g.length;h++)3<g.length-h?this.remove(g[h]):this.slideUp(g[h]);var e=WPac.Fastjs.create("div","wp-alert wpac-alert-fixed wp-alert-"+b);e.innerHTML=this._CLOSE+a;document.body.appendChild(e);WPac.Fastjs.on2(e,".wp-close","click",function(){d.group(d.bottom(e));
d.remove(e)});WPac.Fastjs.on2(e,".wp-admin-action","click",function(){c&&c();d.group(d.bottom(e));d.remove(e);return!1});setTimeout(function(){d.slideUp(e)},1);return e},group:function(a){var b=this,c=document.querySelectorAll(".wpac-alert-fixed");WPac.Fastjs.each(c,function(c){b.bottom(c)<a?b.slideUp(c):b.slideDown(c)})},slideUp:function(a){this.slide(a,!0)},slideDown:function(a){this.slide(a,!1)},slide:function(a,b){a.setAttribute("style","bottom:"+(this.bottom(a)+(b?60:-60))+"px!important")},bottom:function(a){return parseInt(getComputedStyle(a).getPropertyValue("bottom").replace("px",
""))},remove:function(a){a.setAttribute("style","opacity:0!important");setTimeout(function(){WPac.Fastjs.rm(a)},300)}};WPac.EmbedAdmin=WPac.EmbedAdmin||{_MENU:'<a href="#" data-action="2">Delete</a><a href="#" data-action="delete-all">Delete All</a><a href="#" data-action="delete-all-ban">Delete All and Ban</a><a href="#" data-action="3">Mark as Spam</a><a href="#" data-action="edit">Edit</a><a href="#" data-action="ban">Ban User</a><a href="#" data-action="mod">Moderation</a>',_ALERT:'<button type="button" class="wp-close">\u00d7</button>Comment marked as spam. <a href="#" class="wp-admin-undo">Undo?</a>',_render:function(a,
b){b.svg=WPac.SVGIcon;return doT.template(this[a]||a)(b)},main:function(a){var b=this;return{menu:function(c,d,g){var h=this;d.innerHTML=b._render(b._MENU,{});WPac.Fastjs.onall2(d,"a[data-action]","click",function(){var b=this.getAttribute("data-action");"delete-all"==b?h.mod({site_id:g.site_id,user_id:g.user.id,status:2},function(a){WPac.Alert.success('Comments deleted. <a href="#" class="wp-admin-action">Undo?</a>',function(){var b=[];WPac.Fastjs.each(a,function(a){b.push(a.id)});h.mod({site_id:g.site_id,
id:b,status:1})})}):"delete-all-ban"==b?h.mod({site_id:g.site_id,user_id:g.user.id,status:2},function(a){h.ban({site_id:g.site_id,user_id:g.user.id},function(){WPac.Alert.success('Comments deleted, user banned. <a href="#" class="wp-admin-action">Undo?</a>',function(){var b=[];WPac.Fastjs.each(a,function(a){b.push(a.id)});h.mod({site_id:g.site_id,id:b,status:1},function(){h.unban({site_id:g.site_id,user_id:g.user.id})})})})}):"edit"==b?WPac.Fastjs.cbs(a,"edit",{root:c,comment:g}):"ban"==b?h.ban({site_id:g.site_id,
user_id:g.user.id},function(){WPac.Alert.success('User banned. <a href="#" class="wp-admin-action">Undo?</a>',function(){h.unban({site_id:g.site_id,user_id:g.user.id})})}):"mod"==b?window.open(WPac.admin_host+"#/site/"+g.site_id+"/menu/"+a.widget+"/submenu/moderation/id/"+g.id,"_blank"):h.mod({site_id:g.site_id,id:g.id,status:b},function(){WPac.Alert.success("Comment "+(2==b?"deleted":"marked as spam")+'. <a href="#" class="wp-admin-action">Undo?</a>',function(){h.mod({site_id:g.site_id,id:g.id,status:1})})});
var d=WPac.Fastjs.parents(this,"wp-dropdown-menu");d&&WPac.Fastjs.hide2(d);return!1})},mod:function(b,d){WPac.Fastjs.cbs(a,"status",{params:b,cb:d})},ban:function(b,d){WPac.Fastjs.cbs(a,"ban",{params:b,cb:d})},unban:function(b,d){WPac.Fastjs.cbs(a,"unban",{params:b,cb:d})}}}};WPac.Login=WPac.Login||{prov:{facebook:{name:"Facebook",url:"/auth/facebook"},twitter:{name:"Twitter",url:"/auth/twitter"},google:{name:"Google+",url:"/auth/google"},linkedin:{name:"Linkedin",url:"/auth/linkedin"},tumblr:{name:"Tumblr",url:"/auth/tumblr"},instagram:{name:"Instagram",url:"/auth/instagram"},soundcloud:{name:"SoundCloud",url:"/auth/soundcloud"},yahoo:{name:"Yahoo",url:"/auth/yahoo"},livejournal:{name:"LiveJournal",url:"/auth/livejournal"},vkontakte:{name:"\u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435",
url:"/auth/vkontakte"},odnoklassniki:{name:"OK",url:"/auth/odnoklassniki"},mailru:{name:"\u041c\u043e\u0439 \u041c\u0438\u0440",url:"/auth/mailru"},yandex:{name:"\u042f\u043d\u0434\u0435\u043a\u0441",url:"/auth/yandex"}},timeout:100,popupSize:{width:670,height:520},temp:'<div class="wp-authbox">{{?it.anonym}}{{?it.first_auth == "guest"}}<div class="wp-leftrow wp-auth-anonym">{{=it.anonym}}</div><div class="wp-rightrow">{{=it.social}}</div>{{??}}<div class="wp-leftrow">{{=it.social}}</div><div class="wp-rightrow wp-auth-anonym">{{=it.anonym}}</div>{{?}}<div class="wp-clear"></div>{{??}}{{=it.social}}{{?}}</div>',
social:'<div class="wp-auth-sso"></div><div class="wp-auth-social">{{~it.provs :p}}{{?p && WPac.Login.prov[p]}}<a href="#" class="wp-social wp-{{=p}}" title="{{=WPac.Login.prov[p].name}}" data-provider="{{=p}}">{{=it.svg[p]}}</a>{{?}}{{~}}</div>',anonym:'<div class="wp-p"><a href="//gravatar.com" class="wp-avatar-wrap" target="_blank" title="{{=it.msg.l7}}"><img src="{{=it.avatar}}" class="wp-anonym-avatar" onerror="if(this.src!=\'{{=it.defava}}\')this.src=\'{{=it.defava}}\';"></a><input type="text" class="wp-anonym-name" placeholder="{{=it.msg.l8}}"/></div>{{?it.anonymExpand}}<div class="wp-hide">{{?}}{{?it.anonymHideEmail != true}}<div class="wp-p"><input type="text" class="wp-anonym-email" placeholder="{{=it.msg.l9}}"/></div>{{?}}{{?it.anonymHidePasswd != true}}<div class="wp-p"><input type="password" class="wp-anonym-passwd" placeholder="{{=it.msg.l10}}"/></div>{{?}}<div class="wp-p wp-captcha"></div><div class="wp-p"><label><input type="checkbox" class="wp-anonym-only"> {{=it.msg.l11}}</label></div><div class="wp-p"><button class="wp-btn wp-btn-sm wp-btn-block wp-anonym-submit">{{=it.msg.l6}}</button></div>{{?it.anonymExpand}}</div>{{?}}',
captcha:'<div class="g-recaptcha" data-sitekey="{{=it.key}}" data-callback="{{=it.cb}}" data-theme="{{=it.tm}}" data-size="normal"></div>',sso:'<button type="button" title="{{=it.sso.name}}" class="wp-btn-sso"><img src="{{=it.sso.button}}" alt="{{=it.sso.name}}"></button>',dlg:function(a){this.modal=WPac.Modal.create("wp-modal-login",this.head_title(a),null,'<div class="wp-l"></div>');this.init(this.modal.querySelector(".wp-l"),a)},init:function(a,b){a.innerHTML=this.renderContent(b,{provs:b.provs,
avatar:b.avatar,defava:WPac.origin_embed+"/widget/img/avatar.png",first_auth:b.first_auth,anonymExpand:b.anonymExpand,anonymHideEmail:b.anonymHideEmail,msg:WPac.Fastjs.extend(WPac.LoginLang[b.lang]||WPac.LoginLang.en,b.msg)});if(b.sso){var c=this,d=a.querySelector(".wp-auth-sso");d.innerHTML=this.render("sso",{sso:b.sso});WPac.Fastjs.on2(d,"button","click",function(a){a=WPac.Fastjs.popup(b.sso.url,b.sso.width||WPac.Login.popupSize.width,b.sso.height||WPac.Login.popupSize.height);c.checkConnection(b,
a,function(){var a=WPac.getCookie("wpac-sso-token");a?("cancel"!=a&&(b.sso_auth=a,c.sso_auth(b)),WPac.Cookie.erase("wpac-sso-token")):window.location.reload()})})}for(var c=this,d=a.querySelectorAll(".wp-social"),g=0;g<d.length;g++)WPac.Fastjs.on(d[g],"click",function(a){c.login(b,this.getAttribute("data-provider"));return!1});b.anonym&&WPac.Login.ANONYM.init(a.querySelector(".wp-auth-anonym"),b);b.sso_auth?this.sso_auth(b):b.auth&&this.auth(b);return{logout:function(){c.logout(b)}}},head_title:function(a){var b=
[],c=WPac.Fastjs.extend(WPac.LoginLang[a.lang]||WPac.LoginLang.en,a.msg);b.push(c.l1);"guest"==a.first_auth?b.push(c.l4):b.push(c.l2);b.push(c.l3);"guest"==a.first_auth?b.push(c.l2):b.push(c.l4);return b.join(" ")},show:function(){WPac.Modal.show2(this.modal)},hide:function(){WPac.Modal.hide(this.modal)},renderContent:function(a,b){return this.render("temp",{social:this.render("social",b),anonym:a.anonym?this.render("anonym",b):!1})},render:function(a,b){b.svg=WPac.SVGIcon;return doT.template(this[a])(b)},
sso_auth:function(a){var b=this;WPac.XDM.post(WPac.origin_embed,WPac.origin+"/widget/sso_auth",{id:a.id,sso_auth:a.sso_auth},function(c){b.auth_cb(a,c)})},auth:function(a){var b=this;WPac.XDM.get(WPac.origin_embed,WPac.origin+"/widget/auth",{site_id:a.id},function(c){b.auth_cb(a,c)})},auth_cb:function(a,b){WPac.user=b;WPac.Login.modal&&WPac.Login.hide();WPac.Login.socialcb&&(WPac.Login.socialcb(b),WPac.Login.socialcb=null);WPac.Fastjs.cbs(a,"login",b)},login:function(a,b){var c=WPac.Fastjs.popup(WPac.origin+
WPac.Login.prov[b].url,WPac.Login.popupSize.width,WPac.Login.popupSize.height,{siteId:a.id});this.checkConnection(a,c)},logout:function(a){var b=a.sso;WPac.user&&("sso"==WPac.user.provider&&b&&b.logout)&&WPac.Fastjs.popup(b.logout,b.width||800,b.height||400);WPac.XDM.get(WPac.origin_embed,WPac.origin+"/widget/logout",null,function(){WPac.user=null;a&&WPac.Fastjs.cbs(a,"logout")})},checkConnection:function(a,b,c){function d(){if(b&&!1==b.closed)setTimeout(d,g.timeout);else return c?c():g.auth(a)}var g=
this;setTimeout(d,g.timeout)},ANONYM:{init:function(a,b){var c=this,d=a.querySelector(".wp-anonym-email"),g=a.querySelector(".wp-anonym-submit"),h=a.querySelector(".wp-anonym-only"),e=a.querySelector(".wp-captcha");if(b.captchaPub&&!e.innerHTML){var f=document.querySelector(".wp-captcha .g-recaptcha");f?(e.innerHTML="",e.appendChild(f)):WPac.Lib.loadJs("https://www.google.com/recaptcha/api.js",function(){var a=WPac.Fastjs.afun(function(a){c.captcha=a});e.innerHTML=doT.template(WPac.Login.captcha)({key:b.captchaPub,
cb:a,tm:"black"==b.theme?"dark":"light"})})}b.anonymExpand&&(f=a.querySelector(".wp-anonym-name"),WPac.Fastjs.on(f,"click",function(){var b=document.querySelector(".wp-captcha .g-recaptcha");b&&!c.captcha&&(e.innerHTML="",e.appendChild(b));WPac.Fastjs.addcl(a,"wp-expanded")}));WPac.Fastjs.on(d,"keyup",function(){c.setav(a,b,this.value)});WPac.Fastjs.on(g,"click",function(){c.login(a,b)});WPac.Fastjs.on(h,"click",function(){var c=a.querySelector(".wp-anonym-passwd"),e=WPac.Fastjs.extend(WPac.LoginLang[b.lang]||
WPac.LoginLang.en,b.msg);this.checked?(WPac.Fastjs.hide2(c),g.textContent=e.l5):(WPac.Fastjs.show2(c),g.textContent=e.l6)})},setav:function(a,b,c){a=a.querySelector(".wp-anonym-avatar");var d=b.avatar;window.md5&&(d="//gravatar.com/avatar/"+md5(c)+"?d="+b.avatar+"&r=PG&s=30");a.setAttribute("src",WPac.Fastjs.isemail(c)?d:b.avatar)},login:function(a,b){var c=!1,d=a.querySelector(".wp-anonym-name"),g=a.querySelector(".wp-anonym-email"),h=a.querySelector(".wp-anonym-only"),e=a.querySelector(".wp-anonym-passwd");
WPac.Fastjs.remcl(d,"wp-error");WPac.Fastjs.remcl(g,"wp-error");WPac.Fastjs.remcl(e,"wp-error");d&&!d.value&&(WPac.Fastjs.addcl(d,"wp-error"),c=!0);if(!h.checked&&!g.value||g&&g.value&&!WPac.Fastjs.isemail(g.value))WPac.Fastjs.addcl(g,"wp-error"),c=!0;h.checked||e.value&&!(8>e.value.length||64<e.value.length)||(WPac.Fastjs.addcl(e,"wp-error"),c=!0);b.captchaPub&&!this.captcha&&(c=!0);c||(h.checked?(WPac.Login.modal&&WPac.Login.hide(),WPac.Login.anonymcb&&(WPac.Login.anonymcb(d.value,g.value,this.captcha),
WPac.Login.anonymcb=null),this.captcha=""):(c=WPac.Fastjs.popup(WPac.origin+"/widget/sign/up",WPac.Login.popupSize.width,WPac.Login.popupSize.height,{site_id:b.id,name:d.value,email:g.value,password:e.value,captcha:this.captcha}),WPac.Login.checkConnection(b,c)),window.grecaptcha&&grecaptcha.reset())}}};WPac.CommentList=WPac.CommentList||{main:function(a){var b=null,c=WPac.Fastjs.extend(WPac.CommentListLang[a.lang]||WPac.CommentListLang.en,a.msg),d={comment:'<div class="wp-comment-wrap wp-comment-{{=it.c.status}}{{?it.rt && !it.admin}} wp-comment-new{{?}}">{{?it.checkbox}}<label for="wp-select-{{=it.c.id}}"><input id="wp-select-{{=it.c.id}}" type="checkbox" class="wp-select-item" data-id="{{=it.c.id}}" data-site-id="{{=it.c.site_id}}"></label>{{?}}{{?it.admin}}<div class="wp-item-title"><a href="{{!it.c.site_chan.url}}#wpc-{{=it.c.id}}" target="_blank">{{!it.c.site_chan.title}}</a></div>{{?it.c.spam}}<div class="wp-spam-protect">spam filter</div>{{?}}{{?}}<div class="wp-comment-light"></div><div class="wp-comment-user"><a href="javascript:void(0)" class="wp-comment-author">{{=it.avatar}}</a></div><div class="wp-comment-info"><div class="wp-comment-head">{{?it.u.www}}<a href="{{!it.u.www}}" class="wp-comment-username" data-author-id="{{=it.u.id}}" target="_blank"><span itemprop="author">{{!it.u.name}}</span></a>{{??}}<span class="wp-comment-username" data-author-id="{{=it.u.id}}" itemprop="author">{{!it.u.name}}</span>{{?}}{{?it.c.admin && !it.badge_hide}}<span class="wp-comment-badge">{{=it.badge}}</span>{{?}}{{?it.parentUsername}}<a href="{{!it.url}}#wpc-{{=it.c.parent_id}}" class="wp-comment-parent"><span class="wp-svg">{{=it.svg.reply}}</span> {{!it.parentUsername}}</a>{{?}}<meta itemprop="dateCreated" content="{{=it.dateCreated}}"><a href="{{!it.url}}#wpc-{{=it.c.id}}" class="wp-comment-time" timestamp="{{=it.c.created}}">{{=it.time}}</a></div><div class="wp-comment-body">{{=it.commentBody}}</div><div class="wp-comment-footer">{{?it.admin}}<a class="wp-item-approve" href="#">Approve</a><a class="wp-item-spam" href="#">Spam</a><a class="wp-item-del" href="#">Delete</a><a class="wp-comment-edit" href="#">Edit</a><a class="wp-comment-reply" href="#">Reply</a>{{??}}{{?!it.close}}<a class="wp-comment-reply" data-id="{{=it.c.id}}" href="#">{{=it.msg.c8}}</a><a class="wp-comment-edit" data-id="{{=it.c.id}}" href="#" style="display:none"><span class="wp-svg">{{=it.svg.edit}}</span> <span class="wp-commentlabel">{{=it.msg.c9}}</span></a><a class="wp-comment-remove" data-id="{{=it.c.id}}" href="#" style="display:none"><span class="wp-svg">{{=it.svg.trash}}</span> <span class="wp-commentlabel">{{=it.msg.c10}}</span></a>{{?}}{{?}}<span class="wp-comment-vote"><span class="wp-comment-rating wp-comment-{{?it.c.rating > 0}}up{{??it.c.rating < 0}}down{{?}}" title="{{=it.msg.c11}}">{{=it.c.rating > 0 ? "+" + it.c.rating : it.c.rating || ""}}</span><a href="#" class="wp-comment-like" data-vote="1" data-id="{{=it.c.id}}"><span class="wp-svg">{{=it.svg.like}}</span></a><a href="#" class="wp-comment-unlike" data-vote="-1" data-id="{{=it.c.id}}"><span class="wp-svg">{{=it.svg.unlike}}</span></a></span></div><div class="wp-comment-menu"><a href="#" class="wp-menu-toggle">{{=it.svg.menu}}</a><ul class="wp-dropdown-menu" style="display:none"><li><a href="#" data-act="link">{{=it.svg.link}} {{=it.msg.c12}}</a></li><li><a href="#" data-act="share">{{=it.svg.share}} {{=it.msg.c13}}</a></li><li class="wp-admin-menu"></li></ul></div></div></div>{{?it.admin}}<div class="wp-item-extacts"><hr><div>IP: {{=it.c.ip}}</div><br>{{?it.u.email}}<div>Email: {{!it.u.email}} {{?it.u.verify == true}}<span class="wp-comment-badge wp-comment-badge-green">Verified</span>{{??}}<span class="wp-comment-badge">Not verified</span>{{?}}</div><br>{{?}}<div><span class="wp-item-extacts-text">Delete all comments:</span><div class="wp-btn-group wp-actions-group">{{?it.c.user}}<button class="wp-btn wp-btn-sm wp-delbyuser">From user</button>{{?}}<button class="wp-btn wp-btn-sm wp-delbyip">From IP</button></div></div><br><div><span class="wp-item-extacts-text">Find all comments:</span><div class="wp-btn-group wp-actions-group"><button class="wp-btn wp-btn-sm wp-findchan">On page</button>{{?it.c.user}}<button class="wp-btn wp-btn-sm wp-finduser">From user</button>{{?}}<button class="wp-btn wp-btn-sm wp-findip">From IP</button></div></div><br><div><span class="wp-item-extacts-text">Ban control:</span><div class="wp-btn-group wp-actions-group" style="margin-right:10px!important">{{?it.c.user}}<button class="wp-btn wp-btn-sm wp-ban">Ban user</button>{{?}}<button class="wp-btn wp-btn-sm wp-banip">Ban IP</button>{{?it.c.user}}<button class="wp-btn wp-btn-sm wp-unban">Unban user</button>{{?}}<button class="wp-btn wp-btn-sm wp-unbanip">Unban IP</button></div></div></div>{{?}}',
commentBody:'<div class="wp-comment-inner" data-msg="{{!it.dataMsg}}" data-media="{{!it.dataMedia}}"><div class="wp-comment-msgcnt"><div class="wp-comment-msg" itemprop="text">{{=it.message}}</div></div><a class="wp-comment-seemore" style="display:none">{{=it.msg.c14}}</a></div>',edit:'{{=it.textarea}}<button class="wp-btn wp-btn-sm wp-comment-save">{{=it.msg.c15}}</button><button class="wp-btn wp-btn-sm wp-comment-cancel">{{=it.msg.c16}}</button><span class="wp-attach-cnt"><a href="#" class="wp-attachimg"><span class="wp-svg">{{=it.svg.paperclip}}</span></a><input type="file" tabindex="-1" accept="image/*" style="display:none!important"></span>',
postbox:'<div class="wp-postbox"><div class="wp-avatar-cnt">{{=it.avatar}}</div><div class="wp-text-cnt">{{=it.textarea}}</div><div class="wp-auth-cnt"></div><div class="wp-clear"></div></div>',textarea:'<div class="wp-text-wrap"><div class="wp-textarea-wrap"><textarea class="wp-textarea" placeholder="{{=it.msg.c19}}">{{!it.text}}</textarea></div><div class="wp-submit-cnt"><div class="wp-submit-left"></div><button class="wp-btn wp-submit{{?it.submit == "reply"}} wp-btn-sm{{?}}">{{=it.msg[it.submit == "reply" ? "c8" : "c17"]}}</button><span class="wp-attach-cnt"><a href="#" class="wp-attachimg"><span class="wp-svg">{{=it.svg.image}}</span></a><input type="file" tabindex="-1" accept="image/*" style="display:none!important"></span></div></div>',
avatar:'<div class="wp-avatar-wrap"><img src="{{!it.avatar}}" class="wp-avatar" onerror="if(this.src!=\'{{=it.defava}}\')this.src=\'{{=it.defava}}\';"></div>{{?it.social && it.social != "sso" && it.svg[it.social]}}<div class="wp-social-wrap"><div class="wp-social wp-social-sm wp-{{=it.social}}">{{=it.svg[it.social]}}</div></div>{{?}}',error:"{{=it.msg[it.code]}} {{?it.ban}}{{?it.ban.expired}} {{=it.msg.e10}} {{=new Date(it.ban.expired).toLocaleString()}}{{?}}{{?it.ban.reason}} {{=it.msg.e11}} {{=it.ban.reason}}{{?}}{{?it.ban.comment}}<br><b>{{=it.msg.e12}}</b> {{=it.ban.comment}}{{?}}{{?}}",
renderComment:function(b,c,d,l,g){return this.render("comment",{host:a.host,rt:l,u:c,c:b,checkbox:g,close:a.close,badge_hide:a.badge_hide,badge:a.badge||"Admin",parentUsername:d,avatar:this.renderAvatar(c.avatar,c.provider),time:WPac.Time.getTime(parseInt(b.created),a.lang,a.time_format),dateCreated:WPac.Time.getTime(parseInt(b.created),a.lang,"yyyy-MM-ddTHH:mm:ss"),url:WPac.getUrl(a),admin:a.admin})},renderCommentBody:function(b,c){return this.render("commentBody",{dataMsg:b,dataMedia:c,message:WPac.Fastjs[a.comment_link?
"escapeHtmlWithLinks":"escapeHtml"](b)})},renderPostbox:function(a,b,c){return this.render("postbox",{avatar:this.renderAvatar(a,b),textarea:this.render("textarea",{}),submit:c})},renderAvatar:function(a,b){return this.render("avatar",{avatar:a,defava:WPac.origin_embed+"/widget/img/avatar.png",social:b})},renderEdit:function(a){return this.render("edit",{textarea:this.render("textarea",{text:a})})},renderError:function(b){return doT.template(this.error)({code:b.message,ban:b.data,msg:WPac.CommentErrorLang[a.lang]||
WPac.CommentErrorLang.en})},render:function(a,b){b.msg=c;b.svg=WPac.SVGIcon;return doT.template(this[a]||a)(b)}},g={count:0,usernames:{},firstComment:0,load:function(c,f,k){var l=this;b=b||WPac.EmbedAdmin.main({host:a.host,widget:"comment",root_el:c,callback:{ban:[function(b){WPac.XDM.post(a.host,a.host+"/widget/site/ban/user",b.params,function(){b.cb&&b.cb()})}],unban:[function(b){WPac.XDM.post(a.host,a.host+"/widget/site/ban/del",b.params,function(){b.cb&&b.cb()})}],status:[function(b){WPac.XDM.post(a.host,
a.host+"/widget/comment/mod",b.params,function(a){if(a instanceof Array)WPac.Fastjs.each(a,function(a){var b=c.querySelector("#wpc-"+a.id);l.changeStatus(b,a.status)});else{var d=c.querySelector("#wpc-"+a.id);l.changeStatus(d,a.status)}b.cb&&b.cb(a)})}],edit:[function(b){var c=b.comment,e=b.root.querySelector(".wp-comment-inner"),f=e.getAttribute("data-msg");b=e.getAttribute("data-media");var k=WPac.Fastjs.next(e),g=WPac.Fastjs.hascl(k,"wp-comment-editbox"),h=function(){WPac.Fastjs.hide2(k);WPac.Fastjs.show2(e)};
g&&WPac.Fastjs.isVisible(k)?h():g?(WPac.Fastjs.hide2(e),WPac.Fastjs.show2(k)):(k=WPac.Fastjs.create("div","wp-comment-editbox"),k.innerHTML=d.renderEdit(f),WPac.Fastjs.hide2(e),WPac.Fastjs.after(e,k),f=k.querySelector("textarea"),f.style.height=f.scrollHeight+"px",f.focus(),WPac.AutoSize.main(k.querySelector("textarea")),f=k.querySelector(".wp-textarea-wrap"),WPac.Media.event(k,f),WPac.Media.attach(f,b),WPac.Fastjs.on(k,"click",function(a){a.stopPropagation();return!0}),WPac.Fastjs.on2(k,".wp-comment-save",
"click",function(){var b=k.querySelector("textarea").value,b={id:c.site_id,chan:WPac.getChan(a),comment_id:c.id,msg:b,media:l.getMedia(k),sso_auth:a.sso_auth};WPac.XDM.post(a.host,a.host+"/widget/comment/edit",b,function(a){if(a.errors)l.alert(k,a.errors[0]);else{var b=document.querySelectorAll('.wpac .wp-comment[data-id="'+a.id+'"]');WPac.Fastjs.each(b,function(b){l.changeMessage(b,a.msg,a.media)});h()}});return!1}),WPac.Fastjs.on2(k,".wp-comment-cancel","click",function(a){h();return!1}));return!1}]}});
f&&(WPac.Fastjs.each(f,function(a){l.add(c,a)}),k&&k())},add:function(c,f,k,l,g,h){var s=c.querySelector('.wp-comment[data-id="'+f.id+'"]'),r=null;if(s&&(r=WPac.Fastjs.child(s,"wp-comment-wrap"),!WPac.Fastjs.hascl(r,"wp-comment-2"))){r.setAttribute("class","wp-comment-wrap wp-comment-"+f.status);return}/wpc-([0-9]+)/.test(window.location.hash)&&(this.firstComment=this.firstComment||f,0<this.firstComment.parent_id&&(f.id>this.firstComment.id?f.path.splice(0,f.path.map(function(a){return a}).indexOf(this.firstComment.id)):
f.path=[]));var u=c;if(0<f.parent_id&&!a.admin){if(!(u=this.getParentCnt(c,f)))return;a.level<f.path.length+1&&WPac.Fastjs.addcl(u,"wp-lastlvl")}var n=WPac.Fastjs.create("div","wp-comment"),x=this.getUser(f),t=h?a.checkbox:!1;a.admin||(this.usernames[f.id]=x.name);n.setAttribute("id","wpc-"+f.id);n.setAttribute("data-id",f.id);n.setAttribute("data-status",f.status);n.setAttribute("data-author-id",x.id);n.setAttribute("itemtype","http://schema.org/Comment");n.setAttribute("itemscope","itemscope");
n.innerHTML=d.renderComment(f,x,this.usernames[f.parent_id],g,t);this.actions(c,n,f);this.changeMessage(n,f.msg,f.media);a.admin||(this.updateUserBtn(n,x.id,parseInt(f.created)),c=n.querySelector(".wp-admin-menu"),b.menu(n,c,f));var m=n.querySelector(".wp-comment-wrap");s?(WPac.Fastjs.rm(r),WPac.Fastjs.prependSlide(m,s)):k?l?WPac.Fastjs.prependSlide(n,u):WPac.Fastjs.prepend(u,n):u.appendChild(n);g&&(a.admin?WPac.Fastjs.addcl(n,"wp-blink"):(setTimeout(function(){WPac.Fastjs.addcl(m,"wp-comment-seen")},
1),setTimeout(function(){WPac.Fastjs.remcl(m,"wp-comment-new");WPac.Fastjs.remcl(m,"wp-comment-seen")},1E4)));k=n.querySelector(".wp-comment-footer");300>k.offsetWidth&&WPac.Fastjs.addcl(k,"wp-footer-sm");a.cb&&a.cb(n,f,h);return n},getUser:function(b){var c=0<b.parent_id?a.AVATAR_CHILD_SIZE:a.AVATAR_SIZE;return b.user?(b=b.user,b.avatar||(b.avatar=this.getGravatar(b.hash,c)),a.user_link||(b.www=""),b):{id:0,name:b.name,hash:b.hash,email:b.email,avatar:this.getGravatar(b.hash,c)}},getAvatar:function(a,
b){return a.avatar?a.avatar:this.getGravatar(a.hash,b)},getGravatar:function(b,c){return"//gravatar.com/avatar/"+b+"?d="+a.avatar+"&r=PG&s="+c},actions:function(b,f,k){var l=this;WPac.Fastjs.on(f.querySelector(".wp-comment-parent"),"click",function(){l.gotoID(b,this.getAttribute("href"));return!1});WPac.Fastjs.on(f.querySelector(".wp-comment-reply"),"click",function(){var a=WPac.Fastjs.parents(this,"wp-comment").querySelector(".wp-comment-wrap"),b=WPac.Fastjs.next(a),c=WPac.Fastjs.hascl(b,"wp-comment-replybox");
c&&WPac.Fastjs.isVisible(b)?WPac.Fastjs.hide2(b):(c||(b=WPac.Fastjs.create("div","wp-comment-replybox"),l.postbox(b,k,"reply"),WPac.Fastjs.after(a,b),WPac.Fastjs.on(b,"click",function(a){a.stopPropagation();return!0})),b.style.display="",b.querySelector("textarea").focus());return!1});WPac.Fastjs.on(f.querySelector(".wp-comment-edit"),"click",function(){var b=WPac.Fastjs.parents(this,"wp-comment").querySelector(".wp-comment-inner"),c=b.getAttribute("data-msg"),e=b.getAttribute("data-media"),f=WPac.Fastjs.next(b),
g=WPac.Fastjs.hascl(f,"wp-comment-editbox"),h=function(){WPac.Fastjs.hide2(f);WPac.Fastjs.show2(b)};g&&WPac.Fastjs.isVisible(f)?h():g?(WPac.Fastjs.hide2(b),WPac.Fastjs.show2(f)):(f=WPac.Fastjs.create("div","wp-comment-editbox"),f.innerHTML=d.renderEdit(c),WPac.Fastjs.hide2(b),WPac.Fastjs.after(b,f),c=f.querySelector("textarea"),c.style.height=c.scrollHeight+"px",c.focus(),WPac.AutoSize.main(f.querySelector("textarea")),c=f.querySelector(".wp-textarea-wrap"),WPac.Media.event(f,c),WPac.Media.attach(c,
e),WPac.Fastjs.on(f,"click",function(a){a.stopPropagation();return!0}),WPac.Fastjs.on2(f,".wp-comment-save","click",function(){var b=f.querySelector("textarea").value,b={id:k.site_id,chan:WPac.getChan(a),comment_id:k.id,msg:b,media:l.getMedia(f),sso_auth:a.sso_auth};WPac.XDM.post(a.host,a.host+"/widget/comment/edit",b,function(a){if(a.errors)l.alert(f,a.errors[0]);else{var b=document.querySelectorAll('.wpac .wp-comment[data-id="'+a.id+'"]');WPac.Fastjs.each(b,function(b){l.changeMessage(b,a.msg,a.media)});
h()}});return!1}),WPac.Fastjs.on2(f,".wp-comment-cancel","click",function(a){h();return!1}));return!1});WPac.Fastjs.on(f.querySelector(".wp-comment-remove"),"click",function(){confirm(c.c20)&&WPac.XDM.post(a.host,a.host+"/widget/comment/del",{id:k.site_id,chan:WPac.getChan(a),comment_id:k.id,sso_auth:a.sso_auth},function(a){var b=document.querySelectorAll('.wpac .wp-comment[data-id="'+a.id+'"]');WPac.Fastjs.each(b,function(b){l.changeStatus(b,a.status)})});return!1});WPac.Fastjs.onall2(f,".wp-comment-vote a",
"click",function(){if(!WPac.user)return WPac.Login.show(),!1;WPac.XDM.post(a.host,a.host+"/widget/comment/vote",{id:k.site_id,chan:WPac.getChan(a),comment_id:k.id,flag:this.getAttribute("data-vote"),sso_auth:a.sso_auth},function(a){if(a.errors)l.alert(null,a.errors[0]);else{var b=document.querySelectorAll('.wpac .wp-comment[data-id="'+a.id+'"]');WPac.Fastjs.each(b,function(b){l.changeRating(b,a.rating)})}});return!1});WPac.Fastjs.on2(f,".wp-menu-toggle","click",function(){var a=WPac.Fastjs.next(this);
WPac.Fastjs.isVisible(a)?WPac.Fastjs.hide2(a):WPac.Fastjs.show2(a);return!1});WPac.Fastjs.onall2(f,".wp-comment-menu .wp-dropdown-menu a","click",function(){return!1})},gotoID:function(a,b){var c=b.substring(b.indexOf("#")),d=a.querySelector(c).querySelector(".wp-comment-wrap");WPac.Fastjs.remcl(a.querySelector(".wp-comment-target"),"wp-comment-target");setTimeout(function(){WPac.Fastjs.addcl(d,"wp-comment-target");document.location.replace(b)},100)},postbox:function(b,c,k){var l=this,g=WPac.user||
{},h=this.getAvatar(g,36);b.innerHTML=d.renderPostbox(h,g.provider,k);var s=b.querySelector("textarea");setTimeout(function(){WPac.AutoSize.main(s)},100);WPac.Media.event(b,b.querySelector(".wp-textarea-wrap"));WPac.Fastjs.on2(b,".wp-submit","click",function(){if(s.value){var d=a.host+"/widget/comment/post",k={msg:s.value,media:l.getMedia(b),sso_auth:a.sso_auth};c?(k.id=c.site_id,k.site_chan_id=c.site_chan_id,k.parent_id=c.id):(k.id=a.id,k.chan=WPac.getChan(a),k.url=WPac.getUrl(a),k.title=WPac.Fastjs.title(),
k.parent_id=0);var g=function(c){if(c.errors){var d=b.querySelector(".wp-postbox");l.alert(d,c.errors[0])}else 0<c.parent_id&&WPac.Fastjs.hide2(b),s.value="",(d=s.getAttribute("style"))&&s.setAttribute("style",d.replace(/height: *?[0-9]+px;/,"")),WPac.Fastjs.rm2(b,".wp-media-preview"),l.add(document.querySelector(a.el),c,1,1,!1,1)};WPac.user?WPac.XDM.post(a.host,d,k,g):(WPac.Login.show(),WPac.Login.anonymcb=function(b,c,e){k.name=b;k.email=c;k.captcha=e;WPac.XDM.post(a.host,d,k,g)});return!1}s.focus()})},
alert:function(a,b){var c,l=d.renderError(b);null==a?((c=document.querySelector(".wpac-alert-fixed"))?WPac.Fastjs.show2(c):(c=WPac.Fastjs.create("div","wp-alert wp-alert-error wpac-alert-fixed"),c.innerHTML=l,document.body.appendChild(c)),setTimeout(function(){c.setAttribute("style","opacity:0!important");setTimeout(function(){WPac.Fastjs.rm(c)},510)},1E4)):(c=WPac.Fastjs.next(a))&&WPac.Fastjs.hascl(c,"wp-alert-error")?c.querySelector(".wp-alert-text").innerHTML=l:(c=WPac.Fastjs.create("div","wp-alert wp-alert-error"),
c.innerHTML='<div class="wp-alert-text">'+l+"</div>",WPac.Fastjs.after(a,c),setTimeout(function(){WPac.Fastjs.rm(c)},1E4))},updateAppearance:function(a){a=a.querySelectorAll(".wp-comment-1");for(var b=0;b<a.length;b++){var c=a[b].querySelector(".wp-comment-username"),c=parseInt(c.getAttribute("data-author-id")),d=a[b].querySelector(".wp-comment-time"),d=parseInt(d.getAttribute("timestamp"));this.updateUserBtn(a[b],c,d)}},updateUserBtn:function(b,c,d){this.updateUserBtnState(b,a.edit_time,".wp-comment-edit",
c,d);this.updateUserBtnState(b,a.remove_time,".wp-comment-remove",c,d)},updateUserBtnState:function(a,b,c,d,g){var h=WPac.user;h?null==b&&h.id==d?WPac.Fastjs.show(c,a):0==b||h.id!=d?WPac.Fastjs.hide(c,a):0<b&&h.id==d?(d=(new Date).getTime(),g+6E4*b<d?WPac.Fastjs.hide(c,a):WPac.Fastjs.show(c,a)):WPac.Fastjs.hide(c,a):WPac.Fastjs.hide(c,a)},getParentCnt:function(a,b){var c=document.getElementById("wpc-"+b.parent_id);if(c)return this.getChildCnt(c);if(!b.path)return null;for(var c=a,d=0;d<b.path.length;d++){var g=
b.path[d],h=document.getElementById("wpc-"+g);h?c=this.getChildCnt(h):(g=this.makeCommentRoot(g,"deleted"),c.appendChild(g),c=this.getChildCnt(g))}return c},getChildCnt:function(a){var b=WPac.Fastjs.child(a,"wp-comment-child");b||(b=WPac.Fastjs.create("div","wp-comment-child"),a.appendChild(b));return b},makeCommentRoot:function(a,b){var c=WPac.Fastjs.create("div");c.setAttribute("id","wpc-"+a);c.innerHTML=this.makeCommentWrap(b);return c},makeCommentWrap:function(a){return'<div class="wp-comment-wrap wp-comment-'+
a+'">'+c.c18+"</div>"},getMedia:function(a){var b="";(a=a.querySelectorAll(".wp-media-surface"))&&WPac.Fastjs.each(a,function(a){b+=" "+a.getAttribute("data-media")});return b.trim()},changeMessage:function(b,c,k){var g=this;b.querySelector(".wp-comment-body").innerHTML=d.renderCommentBody(c,k);var h=b.querySelector(".wp-comment-msgcnt");a.media&&(c||k)?(b=WPac.Media.makeContent(c+" "+k,!1,function(){g.setTextHigh(h)}))&&h.appendChild(b):this.setTextHigh(h)},setTextHigh:function(b){if(0!=a.textHigh){var c=
a.textHigh||374;if(b.offsetHeight>1.5*c){WPac.Fastjs.css(b,"height",c);var d=WPac.Fastjs.next(b);WPac.Fastjs.on(d,"click",function(){b.style.height="";var a=b.offsetHeight;WPac.Fastjs.css(b,"height",c);setTimeout(function(){WPac.Fastjs.transCss(b,"height",a);WPac.Fastjs.css(b,"height",a)},1);setTimeout(function(){d.style.display="none";b.setAttribute("style","")},500)});d.style.display=""}}},changeRating:function(a,b){var c=a.querySelector(".wp-comment-rating");if(c){var d="wp-comment-rating";0<b?
(b="+"+b,d+=" wp-comment-up"):0>b?d+=" wp-comment-down":b="";c.setAttribute("class",d);c.innerHTML=b}},changeStatus:function(a,b){a&&(WPac.user&&WPac.user.admin&&"deleted"!=b?WPac.Fastjs.child(a,"wp-comment-wrap").setAttribute("class","wp-comment-wrap wp-comment-"+b):this.remove(a))},remove:function(a){a.querySelector(".wp-comment-child")?(a=a.querySelector(".wp-comment-wrap"),a.innerHTML=c.c18,a.className="wp-comment-wrap wp-comment-2"):WPac.Fastjs.rm(a)},avatar:function(a){a.avatar=this.getAvatar(a,
48);return d.renderAvatar(a.avatar,a.provider)},addcb:function(b){a.cb=b}},h={rtcomments:{0:[]},dispatcher:function(a,b){if("post"==b.rt)g.add(a,b,1,1,1);else{var c=a.querySelector("#wpc-"+b.id);c&&("edit"==b.rt?g.changeMessage(c,b.msg,b.media):"status"==b.rt?g.changeStatus(c,b.status):"vote"==b.rt&&g.changeRating(c,b.rating))}}};return{firstComment:function(){return g.firstComment},load:function(a,b,c){g.firstComment=null;g.load(a,b,c)},add:function(a,b,c,d,h,A){return g.add(a,b,c,d,h,A)},postbox:function(a,
b,c){g.postbox(a,b,c)},avatar:function(a){return g.avatar(a)},updateAppearance:function(a){g.updateAppearance(a)},gotoID:function(a,b){g.gotoID(a,b)},addcb:function(a){g.addcb(a)},rt:function(a,b){h.dispatcher(a,b)},logout:function(){a.sso_auth=""}}}};WPac.Comment=WPac.Comment||{};
WPac.Comment.main=function(a){var b=WPac.origin_embed+"/widget/img/avatar.png",c=WPac.Fastjs.extend(WPac.CommentLang[a.lang]||WPac.CommentLang.en,WPac.CommentListLang[a.lang]||WPac.CommentListLang.en),d=WPac.Fastjs.extend(c,a.msg),g={content:'<div class="wp-c wpac"><div class="wp-head"><div class="wp-leftrow"><table class="wp-comment-rate"><tbody><tr><td><div class="wp-comment-score" style="display:none"></div></td><td><div class="wp-comment-stars"></div></td><td><div class="wp-comment-voted"></div></td></tr></tbody></table><span class="wp-comment-mdata"></span></div><div class="wp-rightrow"><a href="#" class="wp-login"><span>{{=it.msg.c23}}</span> {{=it.svg.signin}}</a><a href="#" class="wp-user-menu wp-menu-toggle"></a><ul class="wp-login-menu wp-dropdown-menu" style="display:none"><li><a href="#" class="wp-profile">User Profile</a></li>{{?!it.cfg.data.whitelabel}}<li><a href="https://widgetpack.com/comment-system" target="_blank">Get WidgetPack</a></li><li><a href="https://widgetpack.com/" target="_blank">About WidgetPack</a></li>{{?}}<li><a href="#" class="wp-logout">{{=it.msg.c21}}</a></li></ul></div></div><div class="wp-clear"></div><div class="wp-form"></div><div class="wp-middle"><div class="wp-leftrow"><div class="wp-comment-count">{{=it.msg.c1()}}</div></div><div class="wp-rightrow"><a href="#" class="wp-comment-sort wp-menu-toggle">{{=it.msg["sort_" + it.order]}}</a><ul class="wp-sort wp-dropdown-menu" style="display:none"><li {{?it.order == "desc"}}class="wp-active"{{?}}><a href="#" data-sort="desc">{{=it.msg.desc}} {{=it.svg.check}}</a></li><li {{?it.order == "best"}}class="wp-active"{{?}}><a href="#" data-sort="best">{{=it.msg.best}} {{=it.svg.check}}</a></li><li {{?it.order == "asc"}}class="wp-active"{{?}}><a href="#" data-sort="asc">{{=it.msg.asc}} {{=it.svg.check}}</a></li></ul></div></div><div class="wp-hr wp-clear"></div><button class="wp-rt" style="display:none">{{=it.msg.c5}} (<span class="wp-rt-count"></span>)</button><div class="wp-nocomments">{{=it.msg.c7}}</div><div class="wp-comments"></div><div class="wp-pagination" style="display:none"><button class="wp-btn wp-btn-block wp-comment-next" data-page="0">{{=it.msg.c22}}</button></div>{{?!it.cfg.data.whitelabel}}<div class="wp-hr wp-clear"></div><div class="wp-copyright" style="display:block!important"><div class="wp-leftrow" style="display:block!important"><a href="https://widgetpack.com/comment-system" target="_blank" style="display:block!important">{{=it.svg.comments}} {{=it.msg.c24}}</a></div><div class="wp-rightrow" style="display:block!important"><a href="https://widgetpack.com" class="wp-logo" target="_blank" style="display:block!important">Powered by <span>Widget Pack&trade;</span></a></div></div>{{?}}</div>',mdata:'<span itemscope itemtype="http://schema.org/Product"><meta itemprop="name" content="{{=it.title}}"><meta itemprop="url" content="{{=it.url}}"><span itemprop="aggregateRating" itemscope itemtype="http://schema.org/AggregateRating"><meta itemprop="ratingValue" content="{{=it.rating}}"/><meta itemprop="ratingCount" content="{{=it.count}}"/><meta itemprop="bestRating" content="5"/></span></span>',
profile:'<div class="wp-profile-cnt"><div class="wp-user-img"><div class="wp-avatar-wrap"><img src="{{!it.user.avatar}}" class="wp-avatar" onerror="if(this.src!=\'{{=it.defava}}\')this.src=\'{{=it.defava}}\';"></div></div><div class="wp-user-info"><select><option>{{=it.msg.c25}}</option><option value="computer">{{=it.msg.c26}}</option><option value="gravatar">{{=it.msg.c27}}</option>{{?it.user.provider}}<option value="social">{{=it.user.provider}}</option>{{?}}</select><input type="file" tabindex="-1" accept="image/*" style="display:none"><input data-param="name" type="text" placeholder="{{=it.msg.c28}}" value="{{!it.user.name}}"><input data-param="email" type="text" placeholder="Email" value="{{!it.user.email}}"><small class="wp-email-verify" {{?it.user.verify}}style="display:none"{{?}}>{{=it.msg.c30}} <span>{{!it.user.email}}</span></small><input data-param="www" type="text" placeholder="{{=it.msg.c29}}" value="{{!it.user.www}}"><input data-param="avatar" type="hidden" value="{{!it.user.avatar}}"><div class="wp-user-btn"><button class="wp-btn wp-profile-cancel">{{=it.msg.c16}}</button><button class="wp-btn wp-profile-save">{{=it.msg.c15}}</button></div></div><div class="wp-ucmt"><div class="wp-ucmt-title">{{=it.msg.c31}}</div><div class="wp-ucmt-cnt">{{=it.msg.c32}}</div></div></div>',
userCommentCount:'{{~it.counts :count}}<div class="wp-ucmt-site"><a href="#" data-siteid="{{=count.id}}">{{!count.name}} ({{=count.count}})</a><div class="wp-ucmt-expand" style="display:none"><div class="wp-ucmt-list"></div><button class="wp-btn wp-btn-sm wp-btn-block wp-ucmt-next" data-siteid="{{=count.id}}">{{=it.msg.c22}}</button></div></div>{{~}}',userComment:'<a href="{{!it.comment.site_chan.url}}#wpc-{{=it.comment.id}}" target="_blank">{{!it.comment.site_chan.title}}</a><span class="wp-comment-time">{{=it.time}}</span>{{?it.comment.status != 1}}<div class="wp-comment-badge">{{=it.msg["stat_" + it.comment.status]}}</div>{{?}}<div class="wp-comment-msg">{{!it.comment.msg}}</div>{{?it.comment.rating > 0}}{{=it.svg.like}} <span class="wp-comment-rating wp-comment-up">+{{=it.comment.rating}}</span>{{?}}{{?it.comment.rating < 0}}{{=it.svg.unlike}} <span class="wp-comment-rating wp-comment-down">{{=it.comment.rating}}</span>{{?}}',
renderContent:function(){return this.render("content",{cfg:a,order:f.sort()||"desc"})},render:function(a,b){b.msg=d;b.svg=WPac.SVGIcon;return doT.template(this[a]||a)(b)}},h={init:function(){var a=this;WPac.Fastjs.onall2(f.cnt,".wp-menu-toggle","click",this.toggle);WPac.Fastjs.onall2(f.cnt,".wp-dropdown-menu a","click",this.click);WPac.Fastjs.on2(f.cnt,".wp-login","click",this.login);WPac.Fastjs.on2(f.cnt,".wp-profile","click",function(){a.profile()});WPac.Fastjs.onall2(f.cnt,".wp-sort a[data-sort]",
"click",this.sort)},toggle:function(){var a=WPac.Fastjs.next(this);a.style.display=WPac.Fastjs.isVisible(a)?"none":"block";return!1},click:function(){var a=WPac.Fastjs.parents(this,"wp-dropdown-menu");WPac.Fastjs.hide2(a);return this.getAttribute("target")?!0:!1},login:function(){WPac.Login.show();return!1},profile:function(){if(this.profileModal)WPac.Modal.show2(this.profileModal);else{this.profileModal=WPac.Modal.show("wp-profile-modal","User Profile","",g.render("profile",{user:WPac.user,defava:b}));
var c=this,d=this.profileModal.querySelector("img"),h=this.profileModal.querySelector("select"),A=this.profileModal.querySelector('input[type="file"]'),s=this.profileModal.querySelector('input[data-param="avatar"]'),r=this.profileModal.querySelector(".wp-profile-cancel"),u=this.profileModal.querySelector(".wp-profile-save");WPac.Fastjs.on(s,"input",function(){d.src=s.value});WPac.Fastjs.on(h,"change",function(){"computer"==this.value?WPac.Fastjs.next(this).click():"gravatar"==this.value?window.open("https://gravatar.com",
"_blank"):"social"==this.value&&WPac.Login.login({id:a.id,callback:{login:[function(a){s.value=a.photo;d.src=a.photo}]}},WPac.user.provider);return!1});WPac.Fastjs.on(A,"change",function(){WPac.Media.uploadFiles(this.files,this,null,function(a){s.value=a;d.src=a});this.value=""});WPac.Fastjs.on(r,"click",function(){WPac.Modal.hide(c.profileModal);return!1});WPac.Fastjs.on(u,"click",function(){var b=!1,d={},g=c.profileModal.querySelectorAll("input[data-param]"),l=c.profileModal.querySelector('input[data-param="name"]');
l.value?WPac.Fastjs.remcl(l,"wp-error"):(WPac.Fastjs.addcl(l,"wp-error"),b=!0);l=c.profileModal.querySelector('input[data-param="email"]');l.value&&WPac.Fastjs.isemail(l.value)?WPac.Fastjs.remcl(l,"wp-error"):(WPac.Fastjs.addcl(l,"wp-error"),b=!0);if(b)return!1;WPac.Fastjs.each(g,function(a){var b=a.getAttribute("data-param");d[b]=a["checkbox"==a.getAttribute("type")?"checked":"value"]});WPac.XDM.post(a.host,a.host+"/widget/user/edit",d,function(a){WPac.user=a;f.login(a);if(a){var b=f.cnt.querySelectorAll(".wp-avatar-cnt");
WPac.Fastjs.each(b,function(b){b.innerHTML=e.CommentList.avatar(a)});f.userMenu.innerHTML=a.name;a.verify||(b=c.profileModal.querySelector(".wp-email-verify"),b.querySelector("span").innerHTML=a.email,WPac.Fastjs.show2(b))}WPac.Modal.hide(c.profileModal)});return!1});var n=[];WPac.XDM.get(a.host,a.host+"/widget/user/commentCount",{},function(b){var d=c.profileModal.querySelector(".wp-ucmt-cnt");d.innerHTML=g.render("userCommentCount",{counts:b});WPac.Fastjs.onall2(d,".wp-ucmt-site > a","click",function(){var b=
this.getAttribute("data-siteid"),c=WPac.Fastjs.next(this);WPac.Fastjs.isVisible(c)?WPac.Fastjs.hide2(c):WPac.Fastjs.show2(c);n[b]||WPac.XDM.get(a.host,a.host+"/widget/user/comment",{id:b},function(d){for(var e=c.querySelector(".wp-ucmt-list"),f=0;f<d.length;f++){var k=WPac.Fastjs.create("div","wp-ucmt");k.setAttribute("data-status",d[f].status);k.innerHTML=g.render("userComment",{comment:d[f],time:WPac.Time.getTime(parseInt(d[f].created),a.lang,a.time_format)});e.appendChild(k)}e=c.querySelector(".wp-ucmt-next");
10>d.length&&WPac.Fastjs.rm(e);n[b]=n[b]?n[b]+1:1});return!1});WPac.Fastjs.onall2(d,".wp-ucmt-next","click",function(){var b=this.getAttribute("data-siteid"),c=WPac.Fastjs.prev(this);WPac.XDM.get(a.host,a.host+"/widget/user/comment",{id:b,page:n[b]},function(e){for(var f=0;f<e.length;f++){var k=WPac.Fastjs.create("div","wp-ucmt");k.innerHTML=g.render("userComment",{comment:e[f],time:WPac.Time.getTime(parseInt(e[f].created),a.lang,a.time_format)});c.appendChild(k)}f=d.querySelector(".wp-ucmt-next");
10>e.length&&WPac.Fastjs.rm(f);n[b]=n[b]?n[b]+1:1})})})}return!1},sort:function(){var a=this.getAttribute("data-sort"),b=f.sortMenu.querySelector('a[data-sort="'+a+'"]');f.sortToggle.innerHTML=d["sort_"+a];WPac.Cookie.create("wp-comment-sort",a,365);WPac.Fastjs.remcl(f.sortMenu.querySelector(".wp-active"),"wp-active");WPac.Fastjs.addcl(b.parentNode,"wp-active");f.comments=WPac.Fastjs.create("div","wp-comments");f.nextbtn.setAttribute("data-page",0);e.tree(0);var c=f.cnt.querySelector(".wp-comments");
WPac.Fastjs.before(c,f.comments);setTimeout(function(){WPac.Fastjs.rm(c)},120);return!1}},e={rtcomments:{0:[]},init:function(){var c=this,d=a.data,e=d.widget.social,e=e?e.split(";"):[];WPac.Login.dlg({id:a.id,msg:a.msg,lang:a.lang,provs:e,auth:!0,anonym:d.widget.anonym,first_auth:a.first_auth,anonymExpand:!0,anonymHideEmail:!1,anonymHidePasswd:!1,avatar:d.widget.avatar||b,captchaPub:d.captcha_pub,sso_auth:a.sso_auth,sso:a.sso,callback:WPac.Fastjs.extendcbs(a,{login:function(a){f.login(a);c.CommentList.updateAppearance(f.comments);
if(a){var b=f.cnt.querySelectorAll(".wp-avatar-cnt");WPac.Fastjs.each(b,function(b){b.innerHTML=c.CommentList.avatar(a)});f.userMenu.innerHTML=a.name}},logout:function(){}})});0<d.count&&(f.setCount(d.count),f.setPagination());c.CommentList=WPac.CommentList.main({el:".wp-comments",id:a.id,host:a.host,msg:a.msg,lang:a.lang,chan:WPac.getChan(a),url:WPac.getUrl(a),close:c.close(d),anonym:d.widget.anonym,captcha_pub:d.captcha_pub,edit_time:d.widget.edit_time,remove_time:d.widget.remove_time,level:d.widget.level,
media:d.widget.media,badge_hide:a.badge_hide,badge:a.badge||d.widget.badge||"Admin",comment_link:d.widget.comment_link,user_link:d.widget.user_link,comment_link:!0,AVATAR_SIZE:42,AVATAR_CHILD_SIZE:36,avatar:d.widget.avatar||b,stream:a.stream||d.widget.stream,sso_auth:a.sso_auth});e=d.chan&&0<WPac.getCookie("wpcmt-star-"+d.chan.id);c.stars(d.star_sum,d.star_count,e);c.postbox(d);c.CommentList.load(f.comments,d.comments);0<window.location.href.indexOf("#wpc")&&c.CommentList.gotoID(f.comments,window.location.href);
WPac.Stream.start("wpc"+d.rt,function(b){"post"==b.rt?(a.stream||d.widget.stream?c.CommentList.add(f.comments,b,1,1,1):c.rt_comment(b),f.addCount(1)):"status"==b.rt?(c.CommentList.rt(f.comments,b),f.subCount(1)):c.CommentList.rt(f.comments,b)})},close:function(a){return 0<a.widget.days_alive?parseInt(a.chan.created)+864E5*a.widget.days_alive<(new Date).getTime():!1},stars:function(b,c,d){var e=this;WPac.Stars.main({cnt:this.cnt,el:".wp-comment-stars",color:a.color||a.data.widget.color,size:a.size||
18,stars:5,sum:b,count:c,readonly:d,cb:function(d){WPac.XDM.post(a.host,a.host+"/widget/comment/star",{site_id:a.id,star:d,chan:WPac.getChan(a),url:WPac.getUrl(a),title:WPac.Fastjs.title()},function(a){a&&(0<a.star_count?e.stars(a.star_sum,a.star_count,!0):e.stars(b,c,!0),a.chan_id&&WPac.Cookie.create("wpcmt-star-"+a.chan_id,d,365))})}});d=WPac.Stars.rating(b,c);0<d&&(f.score.innerHTML=d,WPac.Fastjs.show2(f.score),f.cnt.querySelector(".wp-comment-voted").innerHTML=" ("+c+")",f.mdata.innerHTML=g.render("mdata",
{title:WPac.Fastjs.title(),url:WPac.getUrl(a),rating:d,count:c}))},postbox:function(a){a.widget.color&&WPac.Fastjs.addcl(f.cnt,"wp-"+a.widget.color);this.close(a)?f.form.innerHTML='<div class="wp-alert wp-alert-black">Comments for this discussion is now closed.</div>':(this.CommentList.postbox(f.form,null,"submit"),WPac.Fastjs.on(f.form.querySelector(".wp-textarea"),"mousedown",function(){WPac.Fastjs.addcl(f.form,"wp-expanded");this.focus()}))},tree:function(b,c){var d=this,e={id:a.id,chan:WPac.getChan(a),
page:b,size:a.data.widget.size,sort:f.sort()},g=window.location.hash.match(/wpc-([0-9]+)/);g&&1<g.length&&(e.commentId=g[1]);WPac.XDM.get(a.host,a.host+"/widget/comment/tree",e,function(a){a.comments&&("0"==f.nextbtn.getAttribute("data-page")?(f.comments.setAttribute("style","height: "+f.comments.offsetHeight+"px!important"),f.comments.innerHTML="",setTimeout(function(){d.CommentList.load(f.comments,a.comments,function(){f.comments.setAttribute("style","");c&&c()})},10)):WPac.Fastjs.each(a.comments,
function(a){d.CommentList.add(f.comments,a)}),f.setPagination())})},rt_comment:function(a){document.getElementById("wpc-"+a.id)||!(1>a.parent_id)&&this.rt_reply(a)||(this.rtcomments[0].push(a),f.rtcount.innerHTML=this.rtcomments[0].length,WPac.Fastjs.show2(f.rt))},rt_reply:function(a){for(var b=this,c=a.path.reverse(),e=0;e<c.length;e++){var g=c[e],h=document.getElementById("wpc-"+g);if(h){this.rtcomments[g]=this.rtcomments[g]||[];this.rtcomments[g].push(a);var u=h.querySelector(".wp-comment-rtreply");
u||(u=WPac.Fastjs.create("a","wp-comment-rtreply"),u.setAttribute("href","#"),a=h.querySelector(".wp-comment-reply"),WPac.Fastjs.after(a,u),WPac.Fastjs.on(u,"click",function(a){WPac.Fastjs.each(b.rtcomments[g],function(a){b.CommentList.add(f.comments,a,1,!1,1)});b.rtcomments[g]=[];WPac.Fastjs.rm(u);return!1}));u.innerHTML=d.c6+" ("+this.rtcomments[g].length+")";return!0}}return!1}},f={count:0,init:function(){var b=document.getElementById(a.el||"wpac-comment");b.innerHTML=g.renderContent();this.cnt=
b.querySelector(".wp-c");this.score=this.cnt.querySelector(".wp-comment-score");this.mdata=this.cnt.querySelector(".wp-comment-mdata");this.nocomments=this.cnt.querySelector(".wp-nocomments");this.comments=this.cnt.querySelector(".wp-comments");this.userMenu=this.cnt.querySelector(".wp-user-menu");this.sortToggle=this.cnt.querySelector(".wp-comment-sort");this.sortMenu=this.cnt.querySelector(".wp-sort.wp-dropdown-menu");this.form=this.cnt.querySelector(".wp-form");this.rt=this.cnt.querySelector(".wp-rt");
this.rtcount=this.rt.querySelector(".wp-rt-count");this.nextbtn=this.cnt.querySelector(".wp-comment-next");this.actions();h.init();e.init()},actions:function(){var b=this;WPac.Fastjs.on2(this.cnt,".wp-logout","click",function(){WPac.Fastjs.hide2(b.sortMenu);var c=a.sso;WPac.user&&("sso"==WPac.user.provider&&c&&c.logout)&&WPac.Fastjs.popup(c.logout,c.width||800,c.height||400);WPac.XDM.get(a.host,a.host+"/widget/logout",{},function(){b.logout();WPac.Fastjs.cbs(a,"logout")});WPac.Fastjs.rm(h.profileModal);
h.profileModal=null;return!1});WPac.Fastjs.on(this.nextbtn,"click",function(){var a=parseInt(this.getAttribute("data-page"))+1;this.setAttribute("data-page",a);e.tree(a)});WPac.Fastjs.on(this.rt,"click",function(){WPac.Fastjs.each(e.rtcomments[0],function(a){e.CommentList.add(b.comments,a,1,!1,1)});e.rtcomments[0]=[];WPac.Fastjs.hide2(b.rt);return!1})},addCount:function(a){this.count+=a;this.setCount(this.count)},subCount:function(a){this.count-=a;this.setCount(this.count)},setCount:function(b){b=
parseInt(b);0<b?WPac.Fastjs.hide2(this.nocomments):WPac.Fastjs.show2(this.nocomments);this.count=b;this.cnt.querySelector(".wp-comment-count").innerHTML=d.c1(b);if(a.count_cnt){var c=document.getElementById(a.count_cnt);c&&(c.innerHTML=b)}},setPagination:function(){if(a.data&&0<a.data.count){var b=parseInt(this.nextbtn.getAttribute("data-page"))+1;a.data.count>b*a.data.widget.size?WPac.Fastjs.show2(this.nextbtn.parentNode):WPac.Fastjs.hide2(this.nextbtn.parentNode)}},sort:function(){return WPac.getCookie("wp-comment-sort")||
a.data&&a.data.widget.sort||a.sort},login:function(a){a&&(WPac.Fastjs.addcl(this.cnt,"wp-loggedin"),a.admin&&WPac.Fastjs.addcl(this.cnt,"wp-admin"))},logout:function(){WPac.user=null;WPac.Fastjs.remcl(this.cnt,"wp-loggedin");WPac.Fastjs.remcl(this.cnt,"wp-admin");WPac.Fastjs.remcl(this.form,"wp-expanded");e.CommentList.logout();e.CommentList.updateAppearance(this.comments);var a=this.cnt.querySelectorAll(".wp-avatar-cnt");WPac.Fastjs.each(a,function(a){a.innerHTML=e.CommentList.avatar({})});this.userMenu.innerHTML=
""}};f.init()};
