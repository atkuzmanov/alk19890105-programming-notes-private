!function(g,p,o){"use strict";var c=0;g.widget("ri.responsiveCarousel",{options:{arrowLeft:".arrow-left span",arrowRight:".arrow-right span",mask:".slider-mask",target:".slider-target",unitElement:".slider-slide",unitWidth:"inherit",responsiveUnitSize:null,onRedraw:null,ondragstart:null,ondragend:null,dragEvents:!1,easing:"linear",speed:100,slideSpeed:1500,step:-1,responsiveStep:null,onShift:null,cssAnimations:Modernizr.csstransitions,nudgeThreshold:10,infinite:!1,delta:1,dragVertical:!1,dragPreventDefault:!1,lazyload:!1},_getPrefix:function(i){for(var t=["Moz","Webkit","Khtml","0","ms"],e=o.createElement("div"),n=i.charAt(0).toUpperCase()+i.slice(1),s="",r=t.length;-1<r;)void 0!==e.style[t[r]+n]&&(s=t[r]),r-=1;return s=e.style[i]?i.toLowerCase():"-"+s.toLowerCase()+"-"},_round:function(i){return"compute"!==this.options.unitWidth&&"inherit"!==this.options.unitWidth&&"integer"!==this.options.unitWidth||(i=Math.round(i/this.internal.unitWidth)*this.internal.unitWidth),i},_animate:function(t,e,n,s){var i,r,o=this.options,a=this.internal,l=a.prefix+"transition",d=this._round(Math.floor(t.position().left)),u=e.left,h=d+u;t.css(l,""),(r=g('<div class="redraw-'+c+'"> </div>')).appendTo(t),r.hide(),r.get(0).offsetHeight,r.show(),p.setTimeout(function(){r.remove()},1),!0===o.infinite&&void 0!==u&&(u<d?d===(i=a.unitWidth*(a.numUnits-a.numVisibleUnits)*-1)&&(t.css("left",0),e.left=-a.unitWidth):d<u&&0===d&&(i=-1*Math.floor(t.find(".clone:first").position().left),t.css("left",i),e.left=i+h)),p.setTimeout(function(){var i;o.cssAnimations?(t.css(l,"left "+n/1e3+"s "+o.easing),i=e,t.css(i),p.setTimeout(function(){t.css(l,""),g.isFunction(s)&&s()},n)):t.animate(e,n,function(){g.isFunction(s)&&s()})},1)},_requestAnimationFrameShim:function(){var i,s=0,t=["ms","moz","webkit","o"];if(!p.requestAnimationFrame||!p.cancelAnimationFrame){for(i=0;i<t.length&&!p.requestAnimationFrame;i+=1)p.requestAnimationFrame=p[t[i]+"RequestAnimationFrame"],p.cancelAnimationFrame=p[t[i]+"CancelAnimationFrame"]||p[t[i]+"CancelRequestAnimationFrame"];p.requestAnimationFrame||(p.requestAnimationFrame=function(i){var t=(new Date).getTime(),e=Math.max(0,16-(t-s)),n=p.setTimeout(function(){i(t+e)},e);return s=t+e,n}),p.cancelAnimationFrame||(p.cancelAnimationFrame=function(i){clearTimeout(i)})}},_setTargetWidth:function(){var i,t,e,n,s=this.internal,r=this.options,o=g(r.unitElement);if(s.numUnits=g(r.unitElement).length,i=s.numUnits,"individual"===r.unitWidth)for(s.targetWidth=0;i--;)t=o[i],n=e=void 0,(n=g(t)).css("width",""),e=Math.ceil(n.width())+1,n.width(e),s.targetWidth=s.targetWidth+e,n.data("responsiveCarousel",{width:e,top:Math.floor(n.position().top),right:Math.floor(n.position().left)+n.width(),bottom:Math.floor(n.position().top)+n.height(),left:Math.floor(n.position().left)});else s.targetWidth=s.numUnits*s.unitWidth;g(r.target).width(s.targetWidth),s.targetHeight=g(r.target).height(),s.maskWidth=g(r.mask).width(),s.maskHeight=g(r.mask).height()},_setArrowVisibility:function(){var i,t=this.options,e=this.internal,n=g(t.target),s=g(t.arrowLeft),r=g(t.arrowRight),o=e.maskWidth,a=this._round(Math.floor(n.position().left)),l=e.targetWidth+a;if(r.length&&(!0!==t.infinite&&l<=o?(r.addClass("disabled"),!0===e.isArrowBeingClicked&&this._clearInterval(),e.arrowRightVisible=e.isArrowBeingClicked=!1):(r.removeClass("disabled"),e.arrowRightVisible=!0)),s.length&&(!0!==t.infinite&&0<=a?(s.addClass("disabled"),!0===e.isArrowBeingClicked&&this._clearInterval(),e.arrowLeftVisible=e.isArrowBeingClicked=!1):(s.removeClass("disabled"),e.arrowLeftVisible=!0)),"individual"!==t.unitWidth&&(e.currentSlide=g(t.unitElement).eq([Math.abs(a/e.unitWidth)]).data("slide"),i=e.currentSlide),g.isFunction(t.onShift))"number"==typeof i&&t.onShift(i);else if(null!==t.onShift)throw new Error("The onShift option must be a function or null if not in use.")},_clearInterval:function(){var i=this.internal;"number"==typeof i.timer&&(i.isArrowBeingClicked=!1,p.clearInterval(i.timer))},_doArrowBeingClicked:function(i){var t,e,n,s,r,o,a=this,l=this.internal,d=this.options,u=g(d.target),h=Math.floor(u.position().left),c=d.speed,m=l.currentSlide;if(!0!==l.busy){if("individual"===d.unitWidth)if("right"===i)if("right"===l.lastArrowClicked)m<l.numUnits-1&&(m+=1,t=h-(r=g(d.unitElement).eq(m).data("responsiveCarousel")).width,l.currentSlide=m);else for(l.lastArrowClicked="right",s=-1*h+l.maskWidth,o=l.numUnits;m<o;){if(s>=(r=g(d.unitElement).eq(m).data("responsiveCarousel")).left&&s<=r.right){t=h-(r.right-s),c=d.speed-d.speed*((s-r.left)/r.width),l.currentSlide=m;break}r.width,m+=1}else{if("left"!==i)throw new Error("unknown direction");if("left"===l.lastArrowClicked)0<m&&(m-=1,t=h+(r=g(d.unitElement).eq(m).data("responsiveCarousel")).width,l.currentSlide=m);else if(l.lastArrowClicked="left",g(d.unitElement).eq(l.currentSlide).length)for(n=Math.abs(h);0<=m;){if(n>=(r=g(d.unitElement).eq(m).data("responsiveCarousel")).left&&n<=r.right){t=h+r.width,r.right>n&&(t-=r.right+h),c=d.speed*((n-r.left)/r.width),l.currentSlide=m;break}r.width,m-=1}}else if("left"===i)t=h+l.unitWidth;else{if("right"!==i)throw new Error("unknown direction");t=h-l.unitWidth}0<(t=this._round(t))&&(t=0),t<(e=l.maskWidth<l.targetWidth?l.maskWidth-l.targetWidth:0)&&(t=e),c=100<=c?c:100,l.busy=!0,this._animate(u,{left:t},c,function(){a._setArrowVisibility("_doArrowBeingClicked"),l.busy=!1})}},_setArrowEvents:function(){var t=this,i=this.options,e=this.internal,n=g(i.arrowLeft),s=g(i.arrowRight),r="",o="";n.on("click"+this.instanceId,function(i){i.preventDefault()}),s.on("click"+this.instanceId,function(i){i.preventDefault()}),!0===i.dragEvents?(r="mousedown"+this.instanceId+" touchstart"+this.instanceId+" gesturestart"+this.instanceId+" gesturechange"+this.instanceId,o="mouseup"+this.instanceId+" mouseout"+this.instanceId+" mouseleave"+this.instanceId+" touchend"+this.instanceId+" touchleave"+this.instanceId+" gestureend"+this.instanceId):(r="mousedown"+this.instanceId,o="mouseup"+this.instanceId+" mouseout"+this.instanceId+" mouseleave"+this.instanceId),n.on(r,function(i){!0===e.ios6Device&&(e.busy=!1),i.preventDefault(),i.stopPropagation(),!1!==e.busy||n.hasClass("disabled")||(e.isArrowBeingClicked=e.firstMouseClick=!0,e.timer=p.setInterval(function(){t._doArrowBeingClicked("left")},10),e.slideTimer&&(p.clearInterval(e.slideTimer),e.slideShowActive=!1))}),s.on(r,function(i){!0===e.ios6Device&&(e.busy=!1),i.preventDefault(),i.stopPropagation(),!1!==e.busy||s.hasClass("disabled")||(e.isArrowBeingClicked=e.firstMouseClick=!0,e.timer=p.setInterval(function(){t._doArrowBeingClicked("right")},10),e.slideTimer&&(p.clearInterval(e.slideTimer),e.slideShowActive=!1))}),g.each([n,s],function(){g(this).on(o,function(){!0===e.isArrowBeingClicked&&t._clearInterval()})}),g(p).on("scroll"+this.instanceId,function(){"individual"!==i.unitWidth&&(p.clearTimeout(e.scrollTimer),e.scrollTimer=p.setTimeout(function(){t._clearInterval()},100))}),g(p).on(" resize"+this.instanceId+" onorientationchange"+this.instanceId,function(){p.clearTimeout(e.resizeTimer),e.resizeTimer=p.setTimeout(function(){t._setTargetWidth(),t._clearInterval()},100)})},_setUnitWidth:function(){var i,t,e,n,s,r,o=this,a=this.internal,l=this.options,d=g(l.target),u=g(this.element),h=g(l.unitElement+":not(.clone)"),c=h.eq(0),m=function(){a.unitWidth=c.width()},f=function(){if(a.maskWidth=g(l.mask).width(),"number"!=typeof(t=l.responsiveUnitSize(u,a,l))||t<1)throw new Error("The responsiveUnitSize callback must return a whole number greater than 0");i=a.maskWidth/t,i=Math.floor(i),g(l.unitElement).css("width",i),!0===l.infinite&&0<t&&t!==a.numVisibleUnits&&(a.numVisibleUnits=t,d.find(".clone").remove(),h.slice(0,a.numVisibleUnits).clone(!0).addClass("clone").appendTo(d)),a.unitWidth=i,a.numVisibleUnits=t};if("inherit"===l.unitWidth)m(),d.find("img").one("load"+o.instanceId,function(){m(),o._setTargetWidth(),o._setArrowVisibility(),g.isFunction(l.onRedraw)&&l.onRedraw(u,a,l)});else if("individual"===l.unitWidth)!1!==d.is(":hidden")&&!0!==d.is(":visible")||(o._setTargetWidth(),o._setArrowVisibility()),g.isFunction(l.onRedraw)&&l.onRedraw(u,a,l),d.find("img").one("load"+o.instanceId,function(){!1!==d.is(":hidden")&&!0!==d.is(":visible")||(p.clearTimeout(a.imageLoadTimer),a.imageLoadTimer=p.setTimeout(function(){o._setTargetWidth(),o._setArrowVisibility(),g.isFunction(l.onRedraw)&&l.onRedraw(u,a,l)}))}),g(p).on("resize"+o.instanceId,function(){var s=a.currentSlide;clearTimeout(a.setWidthTimer),a.setWidthTimer=setTimeout(function(){var i,t,e,n;!1!==d.is(":hidden")&&!0!==d.is(":visible")||(o._setTargetWidth(),t=g(l.unitElement).eq(s).data("responsiveCarousel"),"right"===a.lastArrowClicked?i=a.maskWidth-t.right:"left"===a.lastArrowClicked&&0<s?i=-1*g(l.unitElement).eq(s-1).data("responsiveCarousel").right:(i=0,a.currentSlide=0),(n=a.left+i)<(e=a.maskWidth-a.targetWidth)&&(i=e,a.currentSlide=a.numUnits-1),0<n&&(i=0,a.currentSlide=0),d.css({left:i}),p.requestAnimationFrame(function(){o._setArrowVisibility("_setUnitWidth individual resize"),g.isFunction(l.onRedraw)&&l.onRedraw(u,a,l)}))},400)});else if("compute"===l.unitWidth){for(m(),g.isFunction(l.responsiveUnitSize)&&(f(),m()),g.isFunction(l.onRedraw)&&l.onRedraw(u,a,l),s=(n=d.find("img")).length,e=0;e<s;++e)r=n[e],g(r).one("load"+o.instanceId,function(){!1!==d.is(":hidden")&&!0!==d.is(":visible")||(p.clearTimeout(a.imageLoadTimer),a.imageLoadTimer=p.setTimeout(function(){g.isFunction(l.responsiveUnitSize)&&f(),m(),o._setTargetWidth(),o._setArrowVisibility(),g.isFunction(l.onRedraw)&&l.onRedraw(u,a,l)},400))});g(p).on("resize"+o.instanceId,function(){var e=a.currentSlide;p.clearTimeout(a.setWidthTimer),!1!==d.is(":hidden")&&!0!==d.is(":visible")||(a.setWidthTimer=setTimeout(function(){var i,t=-1*a.numUnits*a.unitWidth+a.maskWidth;g.isFunction(l.responsiveUnitSize)&&(f(),m()),m(),o._setTargetWidth(),(i=-1*e*a.unitWidth)<t&&(i=a.maskWidth-a.targetWidth),d.css({left:i}),o._setArrowVisibility(),g.isFunction(l.onRedraw)&&l.onRedraw(u,a,l)},500))})}else a.unitWidth=l.unitWidth},_dragEvents:function(){var o,i=this,a=this.options,l=this.internal,t=g(a.target),e=g(a.mask),d=t,n=new Hammer(e.get(0),{prevent_default:a.dragPreventDefault,css_hacks:!0,drag:!0,drag_vertical:a.dragVertical,drag_horizontal:!0,drag_min_distance:0,swipe:!1,transform:!1,tap:!1,tap_double:!1,hold:!1}),u={};(l.touchObject=n).ondragstart=function(){if(i.stopSlideShow(),p.cancelAnimationFrame(l.dragTimer),"individual"===a.unitWidth||(o=l.unitWidth*(l.numUnits-l.numVisibleUnits)*-1),!0===l.isArrowBeingClicked||!0===l.busy)return{};!0===l.ios6Device?l.busy=!1:l.busy=!0,(u={top:parseInt(d.css("top"),10),left:parseInt(d.css("left"),10)}).time=(new Date).getTime(),l.scrollStart=u,g.isFunction(a.ondragstart)&&a.ondragstart(a,l)},n.ondrag=function(r){l.dragTimer=p.requestAnimationFrame(function(){var i,t,e,n,s;i=r,n=a.delta,s=i.direction,!0!==l.isArrowBeingClicked&&("up"!==s&&"left"!==s||(i.distance=-1*i.distance),t=u.left+i.distance*n,e=Math.abs(l.scrollStart.left-t),"individual"===a.unitWidth?e>a.nudgeThreshold&&("up"===i.direction||"left"===i.direction?l.nudgeDirection="left":l.nudgeDirection="right"):e>a.nudgeThreshold&&e<l.unitWidth/2?l.nudgeDirection="up"===s||"left"===s?"left":"right":e<=a.nudgeThreshold?l.nudgeDirection="abort":l.nudgeDirection=null,!0===a.infinite&&(t<=o&&(t=i.distance*n,l.scrollStart.left=0),0<=t&&(t=o+i.distance*n,l.scrollStart.left=o)),l.left=t,d.css("left",t))})},n.ondragend=function(){p.cancelAnimationFrame(l.dragTimer),t.stop(!0,!1),p.requestAnimationFrame(function(){i._animate(t,{left:i.computeAdjust(t)},a.speed,function(){i._setArrowVisibility(),l.busy=!1,g.isFunction(a.ondragend)&&a.ondragend(a,l)})})}},_create:function(){c+=1;var i=this.options,t=g(this.element),e=g(i.target);this.instanceId=".carousel_"+c.toString(10),this.internal={busy:!1,currentSlide:0,left:0,targetWidth:0,targetHeight:0,maskWidth:0,maskHeight:0,unitWidth:0,targetBackupCopy:null,isArrowBeingClicked:!1,lastArrowClicked:null,arrowLeftVisible:!0,arrowRightVisible:!0,targetLeft:0,timer:null,dragTimer:null,dragEndTimer:null,scrollTimer:null,resizeTimer:null,firstMouseClick:!1,prefix:null,slideShowActive:!1,slideTimer:null,slideBumped:!1,nudgeDirection:null,infinite:!1,numUnits:null,numVisibleUnits:null,scrollStart:0,touchObject:null,setWidthTimer:null,lazyloaded:!1,ios6Device:!1},this.internal.backup=e.clone(!0,!0),this.options.cssAnimations&&(this.internal.prefix=this._getPrefix("transition")),/(iPhone|iPod|iPad)/i.test(navigator.userAgent)&&/OS 6_/i.test(navigator.userAgent)&&(this.internal.ios6Device=!0),this._requestAnimationFrameShim(),e.css({position:"relative",left:0}),e.addClass("instance-"+c),g(i.unitElement).each(function(i){g(this).attr({"data-slide":i})}),!0===i.dragEvents&&this._dragEvents(),this._setArrowEvents(),!0===i.lazyload&&g(i.target).find("img.lazy-slider").lazyload({effect:"fadeIn",skip_invisible:!1}),!0!==e.is(":visible")&&!1!==e.is(":hidden")||(this._setUnitWidth(),this._setTargetWidth(),this._setArrowVisibility(),!0===i.lazyload&&this._lazyLoad()),g.isFunction(i.onRedraw)&&i.onRedraw(t,this.internal,i)},_lazyLoad:function(){var e,n=this.internal,i=this.instanceId,s=this.options,r=n.currentSlide+2*n.numVisibleUnits;function t(){var i,t=g(s.unitElement);for(e=n.currentSlide;e<r;e+=1)(i=t.eq(e)).length&&i.find('img.lazy-slider:not([loaded="true"])').each(function(){g(this).trigger("appear")})}function o(){g(s.target).find('img.lazy-slider:not([loaded="true"])').each(function(){g(this).trigger("appear"),1})}function a(){var i=!1;return g(s.target).offset().top<g(p).scrollTop()+g(p).height()+600&&(o(),i=!0),i}!0===g.browser.msie&&"8."===g.browser.version.substring(0,2)?o():!1===n.lazyloaded&&(t(),g(p).on("load",function(){t()}),!0===s.dragEvents?!1===a()&&g(p).on("scroll.tempevent"+i,function(){!0===a()&&g(p).unbind("scroll.tempevent"+i)}):g.each([g(s.target),g(s.arrowLeft),g(s.arrowRight)],function(){var i=this;i.on("mouseover.tempevent",function(){o(),i.unbind(".tempevent")})}),n.lazyloaded=!0)},redraw:function(){var i=this.internal,t=this.options,e=g(this.element);(g(t.target).is(":visible")||g(t.target).not(":hidden"))&&(void 0===this.unitWidth&&this._setUnitWidth(),this._setTargetWidth(),this._setArrowVisibility(),g.isFunction(this.options.onRedraw)&&this.options.onRedraw(e,i,t),!0===t.lazyload&&this._lazyLoad())},getCurrentSlide:function(){return this.internal.currentSlide},goToSlide:function(i,t){var e,n=this,s=this.internal,r=this.options,o=g(r.target);t=void 0===t||t,o.not(":hidden")&&(void 0===this.unitWidth&&this._setUnitWidth(),e="individual"===r.unitWidth?g(r.unitElement).eq(i).data("responsiveCarousel").left:i*s.unitWidth*-1,(s.busy=!0)===t?this._animate(o,{left:e},r.speed,function(){s.busy=!1,n._setArrowVisibility("goto slide")}):o.css("left",e))},toggleSlideShow:function(){!1===this.internal.slideShowActive?this.startSlideShow():this.stopSlideShow()},_step:function(i){var t=this,e=this.internal,n=this.options,s=g(n.target),r=e.maskWidth,o=this._round(Math.floor(s.position().left)),a=o+i*e.unitWidth,l=o+e.targetWidth,d=l+i*e.unitWidth,u=a;!1===e.slideBumped?!1===n.infinite&&(d<=r&&(u=a+r-d,e.slideBumped="left"),0<=a&&(e.slideBumped="right",u=0)):("left"===e.slideBumped&&(u=0),"right"===e.slideBumped&&(u=o+r-l),e.slideBumped=!1),e.busy=!0,this._animate(s,{left:u},n.speed,function(){e.busy=!1,t._setArrowVisibility("_step")})},startSlideShow:function(){var i=this,t=this.internal,e=this.options;!1===t.slideShowActive&&(t.slideShowActive=!0,t.slideTimer=p.setInterval(function(){i._step(e.step)},e.slideSpeed))},stopSlideShow:function(){var i=this.internal;!0===i.slideShowActive&&(i.slideShowActive=!1,p.clearInterval(i.slideTimer))},_destroy:function(){var i=g(this.options.target),t=g(this.options.mask);p.clearTimeout(this.internal.setWidthTimer),p.clearInterval(this.internal.slideTimer),p.clearTimeout(this.internal.scrollTimer),p.clearTimeout(this.internal.resizeTimer),p.cancelAnimationFrame(this.internal.dragTimer),g(p).unbind(this.instanceId),g(o).unbind(this.instanceId),g(this.options.arrowLeft).unbind(this.instanceId),g(this.options.arrowRight).unbind(this.instanceId),i.removeClass("instance-"+c),i.find("img").unbind(this.instanceId),null!==this.internal.touchObject&&this.internal.touchObject.destroy(),t.css({"-webkit-user-select":"","-webkit-user-drag":"","-webkit-tap-highlight-color":""}),i.replaceWith(this.internal.backup)},computeAdjust:function(i){var t,r=this.internal,o=this.options,e=r.scrollStart.left,a=i.position().left,n=r.maskWidth,l=0,s=r.nudgeDirection,d=r.unitWidth;return"individual"===o.unitWidth?null!==s&&("left"===s&&function(){var i,t,e,n=r.currentSlide,s=g(o.unitElement);for(i=-1*a+r.maskWidth,t=r.numUnits;n<t;){if(i>=(e=s.eq(n).data("responsiveCarousel")).left&&i<=e.right)return l=a-(e.right-i),r.currentSlide=n;e.width,n+=1}l=a}(),"right"===s&&function(){var i,t,e=r.currentSlide,n=g(o.unitElement);for(i=Math.abs(a);0<=e;){if(i>=(t=n.eq(e).data("responsiveCarousel")).left&&i<=t.right)return l=a+t.width,t.right>i&&(l-=t.right+a),r.currentSlide=e;t.width,e-=1}l=a}(),"abort"===s&&(l=a),a=l,r.nudgeDirection=null):null!==s&&("left"===s&&(l=e-d),"right"===s&&(l=e+d),"abort"===s&&(l=a),a=l,r.nudgeDirection=null),(t=a+r.targetWidth)<n&&(a=l=a+n-t),0<a&&(a=l=0),"individual"!==o.unitWidth&&(l=this._round(a)),!0===isNaN(l)&&(l=0),l},getNumVisibleUnits:function(){return this.internal.numVisibleUnits}})}(jQuery,window,document);