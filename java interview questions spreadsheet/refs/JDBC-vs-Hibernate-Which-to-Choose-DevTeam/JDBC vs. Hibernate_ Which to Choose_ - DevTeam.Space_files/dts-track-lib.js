var DTSTrackLibTraffic={bakeCookie:function(a,d,c,b,e,i){var j=new Date;j.setTime(j.getTime());c&&(c*=864E5);j=new Date(j.getTime()+c);document.cookie=a+"="+escape(d)+(c?";expires="+j.toGMTString():"")+(b?";path="+b:"")+(e?";domain="+e:"")+(i?";secure":"")},writeLogic:function(n){var a=DTSTrackLibTraffic.getTrafficSource();a='source='+a.source+
'&medium='+a.medium+
'&campaign='+a.campaign+
'&term='+a.term+
'&content='+a.content+
'&date='+a.date;a=a.replace(/\|{2,}/g,"|");a=a.replace(/^\|/,"");a=unescape(a);DTSTrackLibTraffic.bakeCookie(n,a,182,"/","","")},getParam:function(s,q){try{var match=s.match('[?&]'+q+'=([^&]+)');return match?match[1]:'';}catch(e){return '';}},calculateTrafficSource:function(){var source='',medium='',campaign='',term='',content='';var search_engines=[['bing','q'],['google','q'],['yahoo','q'],['baidu','q'],['yandex','q'],['ask','q']];var social_medias=['vk.com','facebook.com','twitter.com','telegram.org','instagram.com','youtube.com','linkedin.com'];var ref=document.referrer;ref=ref.substr(ref.indexOf('//')+2);ref_domain=ref;ref_path='/';ref_search='';var url_search=document.location.search;if(url_search.indexOf('utm_source')>-1){source=DTSTrackLibTraffic.getParam(url_search,'utm_source');medium=DTSTrackLibTraffic.getParam(url_search,'utm_medium');campaign=DTSTrackLibTraffic.getParam(url_search,'utm_campaign');term=DTSTrackLibTraffic.getParam(url_search,'utm_term');content=DTSTrackLibTraffic.getParam(url_search,'utm_content');}else if(DTSTrackLibTraffic.getParam(url_search,'gclid')){source='google';medium='cpc';campaign='(not set)';}else if(ref){if(ref.indexOf('/')>-1){ref_domain=ref.substr(0,ref.indexOf('/'));ref_path=ref.substr(ref.indexOf('/'));if(ref_path.indexOf('?')>-1){ref_search=ref_path.substr(ref_path.indexOf('?')+1);ref_path=ref_path.substr(0,ref_path.indexOf('?'));}}
medium='referral';source=ref_domain;for(var i=0;i<search_engines.length;i++){if(ref_domain.indexOf(search_engines[i][0])>-1){medium='organic';source=search_engines[i][0];term=DTSTrackLibTraffic.getParam(ref_search,search_engines[i][1])||'(not provided)';break;}}
for(var i=0;i<social_medias.length;i++){if(ref_domain.indexOf(social_medias[i])>-1){medium='social';source=social_medias[i];term='(not provided)';break;}}}
return{'source':source,'medium':medium,'campaign':campaign,'term':term,'content':content};},getTrafficSource:function(){var trafficSources=DTSTrackLibTraffic.calculateTrafficSource();var source=trafficSources.source.length===0?'direct':trafficSources.source;var medium=trafficSources.medium.length===0?'none':trafficSources.medium;var campaign=trafficSources.campaign.length===0?'direct':trafficSources.campaign;if(medium==='referral'){campaign='';}
var rightNow=new Date();return{source:source,medium:medium,campaign:campaign,term:trafficSources.term,content:trafficSources.content,date:rightNow.toISOString().slice(0,10).replace(/-/g,"")};}};var DTSTrackLib={url:typeof window.dtstrackBackendUrl!=='undefined'?window.dtstrackBackendUrl:'https://www.devteam.space/wp-admin/admin-ajax.php',trackId:null,sessionId:null,init:async function(){await DTSTrackLib.setTrackId();await DTSTrackLib.setSessionId(DTSTrackLib.trackId);},trackInfo:function(meta){var data=meta;data.trackId=DTSTrackLib.trackId;DTSTrackLib.request('set_track_meta',data);},goal:function(goal){var data={sessionId:DTSTrackLib.sessionId,goal:goal};DTSTrackLib.request('set_session_goal',data);},trackUserInfo:function(){var data={trackId:DTSTrackLib.trackId};DTSTrackLib.request('set_user_track_meta',data);},sessionInfo:function(meta){var data=meta;data.sessionId=DTSTrackLib.sessionId;DTSTrackLib.request('set_session_meta',data);},visit:function(){data={};data.trackId=DTSTrackLib.trackId;data.sessionId=DTSTrackLib.sessionId;data.url=window.location.href;if(document.referrer!==''){data.referrer=document.referrer;var referrerUrl=DTSTrackLib.parseUrl(document.referrer);if(typeof referrerUrl.searchObject.q!=='undefined'&&referrerUrl.searchObject.q!==undefined){data.searchQuery=referrerUrl.searchObject.q;}else if(referrerUrl.searchObject.text!=='undefined'&&referrerUrl.searchObject.text!==undefined){data.searchQuery=referrerUrl.searchObject.text;}}
DTSTrackLib.request('create_entry',data);},setTrackId:async function(){var trackId=DTSTrackLib.readCookie('trackId');if(trackId===null){var trackId=await DTSTrackLib.request('create_track',null);DTSTrackLib.saveTrackId(trackId);}
DTSTrackLib.trackId=trackId;},setSessionId:async function(trackId){var sessionId=DTSTrackLib.readCookie('sessionId');if(sessionId===null){var sessionId=await DTSTrackLib.request('create_session',{trackId:trackId});DTSTrackLib.saveSessionId(sessionId);DTSTrackLib.sessionId=sessionId;dtstrack('session_info',{key:'device',value:DTSTrackLib.detectIsMobile()?'mobile':'desktop'});var trafficSource=DTSTrackLibTraffic.getTrafficSource();dtstrack('session_info',{key:'traffic_source',value:trafficSource.medium+' ('+trafficSource.source+')'});dtstrack('session_info',{key:'landing_page',value:window.location.href});}else{DTSTrackLib.sessionId=sessionId;}},readCookie:function(name){var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length);}
return null;},parseUrl:function(url){var parser=document.createElement('a'),searchObject={},queries,split,i;parser.href=url;queries=parser.search.replace(/^\?/,'').split('&');for(i=0;i<queries.length;i++){split=queries[i].split('=');searchObject[split[0]]=split[1];}
return{protocol:parser.protocol,host:parser.host,hostname:parser.hostname,port:parser.port,pathname:parser.pathname,search:parser.search,searchObject:searchObject,hash:parser.hash};},request:function(action,data){var requestPromise=new Promise(function(resolve,reject){var url=DTSTrackLib.url;var body='action='+action;var xhReq=new XMLHttpRequest();if(typeof data!=='undefined'&&data!==null){var encodedData=Object.keys(data).map((key)=>{return encodeURIComponent(key)+'='+encodeURIComponent(data[key])}).join('&');body=body+'&'+encodedData;}
xhReq.open('POST',url,true);xhReq.setRequestHeader('Content-type','application/x-www-form-urlencoded');xhReq.onload=function(){if(this.status>=200&&this.status<300){resolve(JSON.parse(xhReq.response).data);}else{reject(xhReq.response);}};xhReq.send(body);});return requestPromise;},saveTrackId:function(trackId){var expires=new Date(new Date().setTime(new Date().getTime()+(7*24*60*60*1000))).toUTCString();document.cookie='trackId='+trackId+'; expires='+expires+'; domain=devteam.space; path=/';},saveSessionId:function(sessionId){document.cookie='sessionId='+sessionId+'; domain=devteam.space; path=/';},detectIsMobile:function(){if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)){return true;}else{return false;}}};var dtstrack=async function(action,params){switch(action){case 'init':return DTSTrackLib.init();case 'track_info':return DTSTrackLib.trackInfo(params);case 'track_user_info':return DTSTrackLib.trackUserInfo();case 'session_info':return DTSTrackLib.sessionInfo(params);case 'visit':return DTSTrackLib.visit(params);case 'goal':return DTSTrackLib.goal(params);default:console.log('action must be specified');break;}};(async()=>{await dtstrack('init');await dtstrack('track_user_info');await dtstrack('visit');})();