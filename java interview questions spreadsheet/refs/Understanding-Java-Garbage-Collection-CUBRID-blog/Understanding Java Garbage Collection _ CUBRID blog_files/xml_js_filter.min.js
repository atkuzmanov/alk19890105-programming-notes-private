(function(g){var e=[];var k=[];var a={};var j=[];var d={};var b=xe.createApp("Validator",{init:function(){var q=/^[\w-]+((?:\.|\+|\~)[\w-]+)*@[\w-]+(\.[\w-]+)+$/;this.cast("ADD_RULE",["email",q]);this.cast("ADD_RULE",["email_address",q]);var t=/^[a-z]+[\w-]*[a-z0-9_]+$/i;this.cast("ADD_RULE",["userid",t]);this.cast("ADD_RULE",["user_id",t]);var s=/^(https?|ftp|mms):\/\/[0-9a-z-]+(\.[_0-9a-z-]+)+(:\d+)?/;this.cast("ADD_RULE",["url",s]);this.cast("ADD_RULE",["homepage",s]);var o=new RegExp("^[\uAC00-\uD7A3]*$");this.cast("ADD_RULE",["korean",o]);var p=new RegExp("^[\uAC00-\uD7A30-9]*$");this.cast("ADD_RULE",["korean_number",p]);var m=/^[a-z]*$/i;this.cast("ADD_RULE",["alpha",m]);var n=/^[a-z][a-z0-9_]*$/i;this.cast("ADD_RULE",["alpha_number",n]);var r=/^[0-9]*$/;this.cast("ADD_RULE",["number",r])},run:function(p){var n="";if(p._filter){n=p._filter.value}var o=[p,n];var m=this.cast("VALIDATE",o);if(typeof m=="undefined"){m=false}return m},API_ONREADY:function(){var m=this;g("form").each(function(){if(this.onsubmit){this["xe:onsubmit"]=this.onsubmit;this.onsubmit=null}}).submit(function(q){var p=this["xe:onsubmit"];var o=g.isFunction(p);var n=o?p.apply(this):m.run(this);if(!n){q.stopImmediatePropagation()}return n})},API_VALIDATE:function(o,M){var w=true,n=M[0],N=n.elements,x,p,F,q;var A,y,Q,m,P,O,J,s,H,E,B,D,u,C,v,G,L,z,I,t;if(N.ruleset){x=n.elements.ruleset.value}else{if(N._filter){x=n.elements._filter.value}}if(!x){return true}if(g.isFunction(j[x])){q=j[x]}x=g.extend({},a[x.toLowerCase()]||{},d);function K(r){return r.replace(/([\.\+\-\[\]\{\}\(\)\\])/g,"\\$1")}A=[];for(G=0,L=n.elements.length;G<L;G++){m=N[G];Q=m.name;if(!Q||!N[Q]){continue}if(!N[Q].length||N[Q][0]===m){A.push(Q)}}A=A.join("\n");p={};for(Q in x){if(!x.hasOwnProperty(Q)){continue}y=[];if(Q.substr(0,1)=="^"){y=A.match((new RegExp("^"+K(Q.substr(1))+".*$","gm")))}else{continue}if(!y){y=[]}for(G=0,L=y.length;G<L;G++){p[y[G]]=x[Q]}x[Q]=null;delete x[Q]}x=g.extend(x,p);for(Q in x){if(!x.hasOwnProperty(Q)){continue}f=x[Q];m=N[Q];if(!m){m=N[Q+"[]"]}P=m?g.trim(c(g(m))):"";O=(f.modifier||"")+",";if(!m||m.disabled){continue}if(f["if"]){if(!g.isArray(f["if"])){f["if"]=[f["if"]]}for(G=0;G<f["if"].length;G++){I=f["if"][G];t=new Function("el","return !!("+(I.test.replace(/\$(\w+)/g,"(jQuery('[name=$1]').is(':radio, :checkbox') ? jQuery('[name=$1]:checked').val() : jQuery('[name=$1]').val())"))+")");if(t(N)){f[I.attr]=I.value}else{delete f[I.attr]}}}if(!P){if(f["default"]){P=f["default"]}if(f.required){return this.cast("ALERT",[n,Q,"isnull"])&&false}else{continue}}E=parseInt(f.minlength)||0;H=parseInt(f.maxlength)||0;D=/b$/.test(f.minlength||"");B=/b$/.test(f.maxlength||"");J=P.length;if(D||B){s=h(P)}if((E&&E>(D?s:J))||(H&&H<(B?s:J))){return this.cast("ALERT",[n,Q,"outofrange",E,H])&&false}if(f.equalto){C=N[f.equalto];v=C?g.trim(c(g(C))):"";if(C&&v!==P){return this.cast("ALERT",[n,Q,"equalto"])&&false}}u=(f.rule||"").split(",");for(G=0,L=u.length;G<L;G++){if(!(z=u[G])){continue}w=this.cast("APPLY_RULE",[z,P]);if(O.indexOf("not,")>-1){w=!w}if(!w){return this.cast("ALERT",[n,Q,"invalid_"+z])&&false}}}if(g.isFunction(q)){return q(n)}return true},API_ADD_RULE:function(n,o){var m=o[0].toLowerCase();k[m]=o[1]},API_DEL_RULE:function(n,o){var m=o[0].toLowerCase();delete k[m]},API_GET_RULE:function(n,o){var m=o[0].toLowerCase();if(k[m]){return k[m]}else{return null}},API_ADD_FILTER:function(n,p){var m=p[0].toLowerCase();var o=p[1];a[m]=o},API_DEL_FILTER:function(n,o){var m=o[0].toLowerCase();delete a[m]},API_GET_FILTER:function(n,o){var m=o[0].toLowerCase();if(a[m]){return a[m]}else{return null}},API_ADD_EXTRA_FIELD:function(n,o){var m=o[0].toLowerCase();var p=o[1];d[m]=p},API_GET_EXTRA_FIELD:function(n,o){var m=o[0].toLowerCase();return d[m]},API_DEL_EXTRA_FIELD:function(n,o){var m=o[0].toLowerCase();delete d[m]},API_APPLY_RULE:function(n,p){var m=p[0];var o=p[1];if(typeof(k[m])=="undefined"){return true}if(g.isFunction(k[m])){return k[m](o)}if(k[m] instanceof RegExp){return k[m].test(o)}if(g.isArray(k[m])){return(g.inArray(o,k[m])>-1)}return true},API_ALERT:function(t,r){var m=r[0];var s=r[1];var q=r[2];var n=r[3];var p=r[4];var u=this.cast("GET_MESSAGE",[s]);var o=this.cast("GET_MESSAGE",[q]);if(o!=q){o=(o.indexOf("%s")<0)?(u+o):(o.replace("%s",u))}if(n||p){o+="("+(n||"")+"~"+(p||"")+")"}this.cast("SHOW_ALERT",[o]);g(m.elements[s]).focus()},API_SHOW_ALERT:function(m,n){alert(n[0])},API_ADD_MESSAGE:function(n,p){var m=p[0];var o=p[1];e[m]=o},API_GET_MESSAGE:function(n,o){var m=o[0];return e[m]||m},API_ADD_CALLBACK:function(n,p){var m=p[0];var o=p[1];j[m]=o},API_REMOVE_CALLBACK:function(n,o){var m=o[0];delete j[m]}});var l=new b;xe.registerApp(l);var i=xe.createPlugin("editor_stub",{API_BEFORE_VALIDATE:function(n,q){var o=q[0];var m=o.getAttribute("editor_sequence");if(m&&typeof m=="object"){m=m.value}if(m){try{editorRelKeys[m].content.value=editorRelKeys[m].func(m)||""}catch(p){}}}});l.registerPlugin(new i);function c(m){var n=[];if(m.is(":radio")){return m.filter(":checked").val()}else{if(m.is(":checkbox")){m.filter(":checked").each(function(){n.push(this.value)});return n.join("|@|")}else{return m.val()}}}function h(m){m+="";if(!m.length){return 0}m=encodeURI(m);var n=m.split("%").length-1;return m.length-n*2}})(jQuery);function filterAlertMessage(e){var d=e.error;var g=e.message;var b=e.act;var a=e.redirect_url;var c=location.href;if(typeof(g)!="undefined"&&g&&g!="success"){alert(g)}if(typeof(b)!="undefined"&&b){c=current_url.setQuery("act",b)}else{if(typeof(a)!="undefined"&&a){c=a}}if(c==location.href){c=c.replace(/#(.*)$/,"")}location.href=c}function procFilter(b,a){a(b);return false}function legacy_filter(k,a,b,e,j,d,l,h){var i=xe.getApp("Validator")[0],c=jQuery,g=[];if(!i){return false}if(!a.elements._filter){c(a).prepend('<input type="hidden" name="_filter" />')}a.elements._filter.value=k;g[0]=k;g[1]=function(p){var q={},m=[],n=p.elements,o=c(p).serializeArray();c.each(o,function(s,t){var r=c.trim(t.value),u=t.name;if(!r||!u){return true}if(h[u]){u=h[u]}if(/\[\]$/.test(u)){u=u.replace(/\[\]$/,"")}if(q[u]){q[u]+="|@|"+r}else{q[u]=t.value}});if(l&&!confirm(l)){return false}exec_xml(b,e,q,j,d,q,a)};i.cast("ADD_CALLBACK",g);i.cast("VALIDATE",[a,k]);return false};