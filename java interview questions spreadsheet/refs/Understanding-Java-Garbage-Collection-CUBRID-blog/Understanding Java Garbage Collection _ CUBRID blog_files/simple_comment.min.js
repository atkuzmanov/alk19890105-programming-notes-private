jQuery(document).ready(function(){jQuery(document).on("click",".reply-comment",function(c){c.preventDefault();jQuery(this).closest(".row").children(".reply-form").removeClass("hidden");jQuery(this).addClass("hidden")});jQuery(".clear-form").click(function(d){d.preventDefault();var c=jQuery(this).closest("form");c.find('input[name="username"]').val("");c.find('input[name="email"]').val("");clearContentInFormEditor(c)});jQuery(document).on("click",".hidden-form",function(d){d.preventDefault();var c=jQuery(this).closest("form");c.find('input[name="username"]').val("");c.find('input[name="email"]').val("");clearContentInFormEditor(c);c.closest("div.reply-form").addClass("hidden");c.closest("div.reply-form").closest(".row").find(".reply .reply-comment").removeClass("hidden")});jQuery(document).on("click",".view-child-comment",function(g){g.preventDefault();var f=jQuery(this);var c=jQuery(this).data("container");var d=f.children("span.opt").text();if(d.toLowerCase()=="view"){f.children("i").removeClass("fa-angle-down");f.children("i").addClass("fa-circle-o-notch fa-spin");jQuery.getJSON(request_uri,{module:"simple_comment",act:"dispSimple_commentReplied",comment_srl:c},function(e){if(e.error==0){f.parent().next().html(e.variables.data);f.parent().next().removeClass("hidden");f.children("span.count").text(e.variables.count)}f.children("span.opt").text("Hide");f.children("i").removeClass("fa-circle-o-notch fa-spin");f.children("i").addClass("fa-angle-up")})}else{f.parent().next().addClass("hidden");f.children("span.opt").text("View");f.children("i").removeClass("fa-angle-up");f.children("i").addClass("fa-angle-down")}});jQuery(document).on("click",".load-more-comments .load-more-btn",function(h){h.preventDefault();var g=jQuery(this);var f=g.data("container").split("_");var c=f[0];var d=f[1];if(typeof d=="undefined"){d=2}g.children("i").removeClass("fa-chevron-circle-down");g.children("i").addClass("fa-circle-o-notch fa-spin");jQuery.getJSON(request_uri,{module:"simple_comment",act:"dispSimple_commentReplied",comment_srl:c,page:d},function(e){if(e.error==0){g.closest(".replied-comment").append(e.variables.data);g.parent().remove()}})});jQuery(document).on("click",".load-more-article-comment .load-more-btn",function(g){g.preventDefault();var f=jQuery(this);var d=f.data("container").split("_");var h=d[0];var c=d[1];if(typeof c=="undefined"){c=2}f.children("i").removeClass("fa-chevron-circle-down");f.children("i").addClass("fa-circle-o-notch fa-spin");jQuery.getJSON(request_uri,{module:"simple_comment",act:"dispSimple_commentArticleComment",document_srl:h,page:c},function(i){if(i.error==0){f.closest(".comment-list-container").append(i.variables.data);f.parent().remove();captchaLoad();for(var j in CKEDITOR.instances){var e=CKEDITOR.instances[j];e.on("change",function(){validateCommentForm(jQuery(this.element.$).closest("form"))})}}})});jQuery(document).on("keyup",'input[name="username"]',function(){validateCommentForm(jQuery(this).closest("form"))});for(var b in CKEDITOR.instances){var a=CKEDITOR.instances[b];a.on("change",function(){validateCommentForm(jQuery(this.element.$).closest("form"))})}});function captchaLoad(){var a=jQuery(".g-recaptcha").data("sitekey");jQuery("form .g-recaptcha").each(function(b,c){if(jQuery(this).children().length==0){var d=grecaptcha.render(c,{sitekey:a});jQuery(c).attr("id",d)}})}function enableSubmitButton(a){var b;jQuery("form .g-recaptcha").each(function(c,d){var g=jQuery(this).attr("id");var f=grecaptcha.getResponse(g);if(f==a){var e=jQuery(this).closest("form");validateCommentForm(e)}})}function disableSubmitButton(){jQuery("form").find('input[type="submit"]').prop("disabled",true)}function clearContentInFormEditor(c){c.find(".comment-content-container").find('input[type="hidden"]').val("");var a=c.find(".comment-content-container .ckeditor textarea").attr("id");var b=CKEDITOR.instances[a];var d=new CKEDITOR.dom.range(b.document);d.selectNodeContents(b.document.getBody());d.deleteContents()}function stripHtml(b){var a=document.createElement("div");a.innerHTML=b;return a.innerText.trim()}function validateCommentForm(c){var d=c.find(".g-recaptcha").attr("id");var a=c.find(".comment-content-container .ckeditor textarea").attr("id");var b=CKEDITOR.instances[a];if(c.find('input[name="username"]').val().trim()==""||stripHtml(b.getData()).trim()==""||grecaptcha.getResponse(d).trim()==""){c.find('input[type="submit"]').prop("disabled",true)}else{c.find('input[type="submit"]').prop("disabled",false)}};