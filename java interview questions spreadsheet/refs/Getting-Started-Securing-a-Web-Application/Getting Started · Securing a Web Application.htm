<!DOCTYPE html>
<!-- saved from url=(0041)https://spring.io/guides/gs/securing-web/ -->
<html data-clipboard-buttons="" data-code-prettify="" data-code-sidebar="" data-hide-show-guide="" data-sts-import="" data-mobile-support="" data-search=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Getting Started · Securing a Web Application</title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="Viewport" name="viewport">
<link rel="shortcut icon" type="image/x-icon" href="https://spring.io/img/favicon-ca31b78daf0dd9a106bbf3c6d87d4ec7.png">
<link href="./Getting Started · Securing a Web Application_files/css" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="./Getting Started · Securing a Web Application_files/main-53aae281f2b85dc52022f2a72dfc2a71.css">
<script async="" src="./Getting Started · Securing a Web Application_files/gtm.js"></script><script src="./Getting Started · Securing a Web Application_files/system-eccc019329febb5a1b06bde008ca5614.js"></script>
<script>
    System.config({baseURL: "/c56e6ed"});
  </script>
<script src="./Getting Started · Securing a Web Application_files/config-5a675c9cddea3a5f55b71416e67d47d6.js"></script>
<script>
      System.import('app/main.js')
  </script>
<meta content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M" name="google-site-verification">

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZM7GF6');</script>

<link rel="stylesheet" type="text/css" href="./Getting Started · Securing a Web Application_files/gsguide-fbdda8805eddb55e78ea10c7a1bf1f0f.css">

<meta property="og:title" content="Securing a Web Application">
<meta property="og:image" content="/img/spring-by-pivotal-9066b55828deb3c10e27e609af322c40.png">
<meta property="og:description" content="this guide is designed to get you productive as quickly as possible and using the latest Spring project releases and techniques as recommended by the Spring team">
</head>
<body class="show-maven">

<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-KZM7GF6" style="display:none;visibility:hidden" width="0"></iframe></noscript>

<script type="text/javascript">
    // Work around Google font rendering issues in webkit browsers on Windows 7
    if (navigator.userAgent.indexOf("NT 6.1") != -1) {
      document.body.style.WebkitTextStroke = "0.5px";
    }
  </script>
<div class="viewport">
<header class="navbar header--navbar desktop-only">
<div class="navbar-inner">
<div class="container-fluid">
<div class="spring-logo--container">
<a class="spring-logo" href="https://spring.io/"><span></span></a>
</div>
<ul class="nav pull-right">
<li class="navbar-link">
<a href="https://spring.io/projects">Projects</a>
</li>
<li class="navbar-link active">
<a href="https://spring.io/guides">Guides</a>
</li>
<li class="navbar-link">
<a href="https://spring.io/blog">Blog</a>
</li>
<li class="navbar-link">
<a href="https://spring.io/services">Training &amp; Certification</a>
</li>
<li class="navbar-link nav-search js-nav-search">
<a>
<i class="icon-search navbar-search--icon js-search-input-open"></i>
<span class="search-input-close js-search-input-close">
<i class="icon-remove"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<div class="search-dropdown--container js-search-dropdown">
<div class="container-fluid">
<div class="search-form--container">
<form action="https://spring.io/search" class="form-inline form-search" method="get">
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search for documentation, guides, and posts..." type="text" value="">
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
</form>
</div>
</div>
</div>
</header>
<div>
<div class="mobile-navigation--wrapper mobile-only">
<div class="navigation-drawer--container">
<div class="mobile-search--container">
<form action="https://spring.io/search" class="form-inline form-search" method="get">
<button class="search-form--submit" type="submit"><i class="icon-search"></i></button>
<input class="search-query search-form--form js-search-input" name="q" placeholder="Search..." type="text" value="">
</form>
</div>
<div class="navigation-item-list">
<div class="navbar-link">
<a href="https://spring.io/">
Home
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="https://spring.io/projects">
Projects
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link active">
<a href="https://spring.io/guides">
Guides
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="https://spring.io/blog">
Blog
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
<div class="navbar-link">
<a href="https://spring.io/services">
Training &amp; Certification
<i class="icon-chevron-right pull-right"></i>
</a>
</div>
</div>
</div>
<div class="mobile-nav">
<div class="nav-icon js-open-nav-drawer">
<i class="icon-reorder"></i>
</div>
<div class="header-center-icon">
<a href="https://spring.io/">
<div class="icon icon-spring-logo-mobile"></div>
</a>
</div>
</div>
</div>
</div>
<div class="header--container"></div>
<div class="container-fluid"></div>
<div></div>
<div class="container-fluid">
<main class="main-body--wrapper">
<div class="row-fluid">
<div class="span8 mobile-left-pane">
<div class="content--title desktop-only">Getting Started</div>
<article class="content--container">
<h1 class="title">Securing a Web Application</h1>
<div class="article-body"><div class="paragraph">
<p>This guide walks you through the process of creating a simple web application with resources that are protected by Spring Security.</p>
</div>
<div class="sect1">
<h2 id="_what_you_will_build">What You Will Build</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You will build a Spring MVC application that secures the page with a login form that is backed by a fixed list of users.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_you_need">What You Need</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li> <p>About 15 minutes</p> </li>
<li> <p>A favorite text editor or IDE</p> </li>
<li> <p><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">JDK 1.8</a> or later</p> </li>
<li> <p><a href="http://www.gradle.org/downloads">Gradle 4+</a> or <a href="https://maven.apache.org/download.cgi">Maven 3.2+</a></p> </li>
<li> <p>You can also import the code straight into your IDE:</p>
<div class="ulist">
<ul>
<li> <p><a href="https://spring.io/guides/gs/sts">Spring Tool Suite (STS)</a></p> </li>
<li> <p><a href="https://spring.io/guides/gs/intellij-idea/">IntelliJ IDEA</a></p> </li>
</ul>
</div> </li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_complete_this_guide">How to complete this guide</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Like most Spring <a href="https://spring.io/guides">Getting Started guides</a>, you can start from scratch and complete each step or you can bypass basic setup steps that are already familiar to you. Either way, you end up with working code.</p>
</div>
<div class="paragraph">
<p>To <strong>start from scratch</strong>, move on to <a href="https://spring.io/guides/gs/securing-web/#scratch">Starting with Spring Initializr</a>.</p>
</div>
<div class="paragraph">
<p>To <strong>skip the basics</strong>, do the following:</p>
</div>
<div class="ulist">
<ul>
<li> <p><a href="https://github.com/spring-guides/gs-securing-web/archive/master.zip">Download</a> and unzip the source repository for this guide, or clone it using <a href="https://spring.io/understanding/Git">Git</a>: <code>git clone <a href="https://github.com/spring-guides/gs-securing-web.git" class="bare">https://github.com/spring-guides/gs-securing-web.git</a></code></p> </li>
<li> <p>cd into <code>gs-securing-web/initial</code></p> </li>
<li> <p>Jump ahead to <a href="https://spring.io/guides/gs/securing-web/#initial">Create an Unsecured Web Application</a>.</p> </li>
</ul>
</div>
<div class="paragraph">
<p><strong>When you finish</strong>, you can check your results against the code in <code>gs-securing-web/complete</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="scratch">Starting with Spring Initializr</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For all Spring applications, you should start with the <a href="https://start.spring.io/">Spring Initializr</a>. The Initializr offers a fast way to pull in all the dependencies you need for an application and does a lot of the setup for you. This example needs the Spring Web and Thymeleaf dependencies. The following image shows the Initializr set up for this sample project:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Getting Started · Securing a Web Application_files/initializr.png" alt="initializr">
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody>
<tr>
<td class="icon"> <i class="fa icon-note" title="Note"></i> </td>
<td class="content"> The preceding image shows the Initializr with Maven chosen as the build tool. You can also use Gradle. It also shows values of <code>com.example</code> and <code>securing-web</code> as the Group and Artifact, respectively. You will use those values throughout the rest of this sample. </td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph">
<p>The following listing shows the <code>pom.xml</code> file that is created when you choose Maven:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<button class="copy-button snippet" id="copy-button-0" data-clipboard-target="#code-block-0"></button><pre class="prettyprint highlight" id="code-block-0"><code class="language-xml" data-lang="xml"><span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">"UTF-8"</span><span class="pun">?&gt;</span><span class="pln">
</span><span class="tag">&lt;project</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://maven.apache.org/POM/4.0.0"</span><span class="pln"> </span><span class="atn">xmlns:xsi</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln">
	</span><span class="atn">xsi:schemaLocation</span><span class="pun">=</span><span class="atv">"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span class="tag">&gt;</span><span class="pln">
	</span><span class="tag">&lt;modelVersion&gt;</span><span class="pln">4.0.0</span><span class="tag">&lt;/modelVersion&gt;</span><span class="pln">
	</span><span class="tag">&lt;parent&gt;</span><span class="pln">
		</span><span class="tag">&lt;groupId&gt;</span><span class="pln">org.springframework.boot</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
		</span><span class="tag">&lt;artifactId&gt;</span><span class="pln">spring-boot-starter-parent</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
		</span><span class="tag">&lt;version&gt;</span><span class="pln">2.2.2.RELEASE</span><span class="tag">&lt;/version&gt;</span><span class="pln">
		</span><span class="tag">&lt;relativePath/&gt;</span><span class="pln"> </span><span class="com">&lt;!-- lookup parent from repository --&gt;</span><span class="pln">
	</span><span class="tag">&lt;/parent&gt;</span><span class="pln">
	</span><span class="tag">&lt;groupId&gt;</span><span class="pln">com.example</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
	</span><span class="tag">&lt;artifactId&gt;</span><span class="pln">securing-web</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
	</span><span class="tag">&lt;version&gt;</span><span class="pln">0.0.1-SNAPSHOT</span><span class="tag">&lt;/version&gt;</span><span class="pln">
	</span><span class="tag">&lt;name&gt;</span><span class="pln">securing-web</span><span class="tag">&lt;/name&gt;</span><span class="pln">
	</span><span class="tag">&lt;description&gt;</span><span class="pln">Demo project for Spring Boot</span><span class="tag">&lt;/description&gt;</span><span class="pln">

	</span><span class="tag">&lt;properties&gt;</span><span class="pln">
		</span><span class="tag">&lt;java.version&gt;</span><span class="pln">1.8</span><span class="tag">&lt;/java.version&gt;</span><span class="pln">
	</span><span class="tag">&lt;/properties&gt;</span><span class="pln">

	</span><span class="tag">&lt;dependencies&gt;</span><span class="pln">
		</span><span class="tag">&lt;dependency&gt;</span><span class="pln">
			</span><span class="tag">&lt;groupId&gt;</span><span class="pln">org.springframework.boot</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
			</span><span class="tag">&lt;artifactId&gt;</span><span class="pln">spring-boot-starter-thymeleaf</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
		</span><span class="tag">&lt;/dependency&gt;</span><span class="pln">
		</span><span class="tag">&lt;dependency&gt;</span><span class="pln">
			</span><span class="tag">&lt;groupId&gt;</span><span class="pln">org.springframework.boot</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
			</span><span class="tag">&lt;artifactId&gt;</span><span class="pln">spring-boot-starter-web</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
		</span><span class="tag">&lt;/dependency&gt;</span><span class="pln">

		</span><span class="tag">&lt;dependency&gt;</span><span class="pln">
			</span><span class="tag">&lt;groupId&gt;</span><span class="pln">org.springframework.boot</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
			</span><span class="tag">&lt;artifactId&gt;</span><span class="pln">spring-boot-starter-test</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
			</span><span class="tag">&lt;scope&gt;</span><span class="pln">test</span><span class="tag">&lt;/scope&gt;</span><span class="pln">
			</span><span class="tag">&lt;exclusions&gt;</span><span class="pln">
				</span><span class="tag">&lt;exclusion&gt;</span><span class="pln">
					</span><span class="tag">&lt;groupId&gt;</span><span class="pln">org.junit.vintage</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
					</span><span class="tag">&lt;artifactId&gt;</span><span class="pln">junit-vintage-engine</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
				</span><span class="tag">&lt;/exclusion&gt;</span><span class="pln">
			</span><span class="tag">&lt;/exclusions&gt;</span><span class="pln">
		</span><span class="tag">&lt;/dependency&gt;</span><span class="pln">
	</span><span class="tag">&lt;/dependencies&gt;</span><span class="pln">

	</span><span class="tag">&lt;build&gt;</span><span class="pln">
		</span><span class="tag">&lt;plugins&gt;</span><span class="pln">
			</span><span class="tag">&lt;plugin&gt;</span><span class="pln">
				</span><span class="tag">&lt;groupId&gt;</span><span class="pln">org.springframework.boot</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
				</span><span class="tag">&lt;artifactId&gt;</span><span class="pln">spring-boot-maven-plugin</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
			</span><span class="tag">&lt;/plugin&gt;</span><span class="pln">
		</span><span class="tag">&lt;/plugins&gt;</span><span class="pln">
	</span><span class="tag">&lt;/build&gt;</span><span class="pln">

</span><span class="tag">&lt;/project&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following listing shows the <code>build.gradle</code> file that is created when you choose Gradle:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<button class="copy-button snippet" id="copy-button-1" data-clipboard-target="#code-block-1"></button><pre class="prettyprint highlight" id="code-block-1"><code class="language-text" data-lang="text"><span class="pln">plugins </span><span class="pun">{</span><span class="pln">
	id </span><span class="str">'org.springframework.boot'</span><span class="pln"> version </span><span class="str">'2.2.2.RELEASE'</span><span class="pln">
	id </span><span class="str">'io.spring.dependency-management'</span><span class="pln"> version </span><span class="str">'1.0.8.RELEASE'</span><span class="pln">
	id </span><span class="str">'java'</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">group</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">'com.example'</span><span class="pln">
version </span><span class="pun">=</span><span class="pln"> </span><span class="str">'0.0.1-SNAPSHOT'</span><span class="pln">
sourceCompatibility </span><span class="pun">=</span><span class="pln"> </span><span class="str">'1.8'</span><span class="pln">

repositories </span><span class="pun">{</span><span class="pln">
	mavenCentral</span><span class="pun">()</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

dependencies </span><span class="pun">{</span><span class="pln">
	implementation </span><span class="str">'org.springframework.boot:spring-boot-starter-thymeleaf'</span><span class="pln">
	implementation </span><span class="str">'org.springframework.boot:spring-boot-starter-web'</span><span class="pln">
	testImplementation</span><span class="pun">(</span><span class="str">'org.springframework.boot:spring-boot-starter-test'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
		exclude </span><span class="kwd">group</span><span class="pun">:</span><span class="pln"> </span><span class="str">'org.junit.vintage'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">module</span><span class="pun">:</span><span class="pln"> </span><span class="str">'junit-vintage-engine'</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

test </span><span class="pun">{</span><span class="pln">
	useJUnitPlatform</span><span class="pun">()</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="initial">Create an Unsecured Web Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before you can apply security to a web application, you need a web application to secure. This section walks you through creating a simple web application. Then you will secure it with Spring Security in the next section.</p>
</div>
<div class="paragraph">
<p>The web application includes two simple views: a home page and a “Hello, World” page. The home page is defined in the following Thymeleaf template (from <code>src/main/resources/templates/home.html</code>):</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<button class="copy-button snippet" id="copy-button-2" data-clipboard-target="#code-block-2"></button><pre class="prettyprint highlight" id="code-block-2"><code class="language-html" data-lang="html"><span class="dec">&lt;!DOCTYPE html&gt;</span><span class="pln">
</span><span class="tag">&lt;html</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://www.w3.org/1999/xhtml"</span><span class="pln"> </span><span class="atn">xmlns:th</span><span class="pun">=</span><span class="atv">"https://www.thymeleaf.org"</span><span class="pln"> </span><span class="atn">xmlns:sec</span><span class="pun">=</span><span class="atv">"https://www.thymeleaf.org/thymeleaf-extras-springsecurity3"</span><span class="tag">&gt;</span><span class="pln">
    </span><span class="tag">&lt;head&gt;</span><span class="pln">
        </span><span class="tag">&lt;title&gt;</span><span class="pln">Spring Security Example</span><span class="tag">&lt;/title&gt;</span><span class="pln">
    </span><span class="tag">&lt;/head&gt;</span><span class="pln">
    </span><span class="tag">&lt;body&gt;</span><span class="pln">
        </span><span class="tag">&lt;h1&gt;</span><span class="pln">Welcome!</span><span class="tag">&lt;/h1&gt;</span><span class="pln">

        </span><span class="tag">&lt;p&gt;</span><span class="pln">Click </span><span class="tag">&lt;a</span><span class="pln"> </span><span class="atn">th:href</span><span class="pun">=</span><span class="atv">"@{/hello}"</span><span class="tag">&gt;</span><span class="pln">here</span><span class="tag">&lt;/a&gt;</span><span class="pln"> to see a greeting.</span><span class="tag">&lt;/p&gt;</span><span class="pln">
    </span><span class="tag">&lt;/body&gt;</span><span class="pln">
</span><span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This simple view includes a link to the <code>/hello</code> page, which is defined in the following Thymeleaf template (from <code>src/main/resources/templates/hello.html</code>):</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<button class="copy-button snippet" id="copy-button-3" data-clipboard-target="#code-block-3"></button><pre class="prettyprint highlight" id="code-block-3"><code class="language-html" data-lang="html"><span class="dec">&lt;!DOCTYPE html&gt;</span><span class="pln">
</span><span class="tag">&lt;html</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://www.w3.org/1999/xhtml"</span><span class="pln"> </span><span class="atn">xmlns:th</span><span class="pun">=</span><span class="atv">"https://www.thymeleaf.org"</span><span class="pln">
      </span><span class="atn">xmlns:sec</span><span class="pun">=</span><span class="atv">"https://www.thymeleaf.org/thymeleaf-extras-springsecurity3"</span><span class="tag">&gt;</span><span class="pln">
    </span><span class="tag">&lt;head&gt;</span><span class="pln">
        </span><span class="tag">&lt;title&gt;</span><span class="pln">Hello World!</span><span class="tag">&lt;/title&gt;</span><span class="pln">
    </span><span class="tag">&lt;/head&gt;</span><span class="pln">
    </span><span class="tag">&lt;body&gt;</span><span class="pln">
        </span><span class="tag">&lt;h1&gt;</span><span class="pln">Hello world!</span><span class="tag">&lt;/h1&gt;</span><span class="pln">
    </span><span class="tag">&lt;/body&gt;</span><span class="pln">
</span><span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The web application is based on Spring MVC. As a result, you need to configure Spring MVC and set up view controllers to expose these templates. The following listing (from <code>src/main/java/com/example/securingweb/MvcConfig.java</code>) shows a class that configures Spring MVC in the application:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<button class="copy-button snippet" id="copy-button-4" data-clipboard-target="#code-block-4"></button><pre class="prettyprint highlight" id="code-block-4"><code class="language-java" data-lang="java"><span class="kwd">package</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">example</span><span class="pun">.</span><span class="pln">securingweb</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">springframework</span><span class="pun">.</span><span class="pln">context</span><span class="pun">.</span><span class="pln">annotation</span><span class="pun">.</span><span class="typ">Configuration</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">springframework</span><span class="pun">.</span><span class="pln">web</span><span class="pun">.</span><span class="pln">servlet</span><span class="pun">.</span><span class="pln">config</span><span class="pun">.</span><span class="pln">annotation</span><span class="pun">.</span><span class="typ">ViewControllerRegistry</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">springframework</span><span class="pun">.</span><span class="pln">web</span><span class="pun">.</span><span class="pln">servlet</span><span class="pun">.</span><span class="pln">config</span><span class="pun">.</span><span class="pln">annotation</span><span class="pun">.</span><span class="typ">WebMvcConfigurer</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@Configuration</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MvcConfig</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">WebMvcConfigurer</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

	</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> addViewControllers</span><span class="pun">(</span><span class="typ">ViewControllerRegistry</span><span class="pln"> registry</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
		registry</span><span class="pun">.</span><span class="pln">addViewController</span><span class="pun">(</span><span class="str">"/home"</span><span class="pun">).</span><span class="pln">setViewName</span><span class="pun">(</span><span class="str">"home"</span><span class="pun">);</span><span class="pln">
		registry</span><span class="pun">.</span><span class="pln">addViewController</span><span class="pun">(</span><span class="str">"/"</span><span class="pun">).</span><span class="pln">setViewName</span><span class="pun">(</span><span class="str">"home"</span><span class="pun">);</span><span class="pln">
		registry</span><span class="pun">.</span><span class="pln">addViewController</span><span class="pun">(</span><span class="str">"/hello"</span><span class="pun">).</span><span class="pln">setViewName</span><span class="pun">(</span><span class="str">"hello"</span><span class="pun">);</span><span class="pln">
		registry</span><span class="pun">.</span><span class="pln">addViewController</span><span class="pun">(</span><span class="str">"/login"</span><span class="pun">).</span><span class="pln">setViewName</span><span class="pun">(</span><span class="str">"login"</span><span class="pun">);</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">

</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>addViewControllers()</code> method (which overrides the method of the same name in <code>WebMvcConfigurer</code>) adds four view controllers. Two of the view controllers reference the view whose name is <code>home</code> (defined in <code>home.html</code>), and another references the view named <code>hello</code> (defined in <code>hello.html</code>). The fourth view controller references another view named <code>login</code>. You will create that view in the next section.</p>
</div>
<div class="paragraph">
<p>At this point, you could jump ahead to “<a href="https://spring.io/guides/gs/securing-web/#run_the_app">Run the Application</a>” and run the application without having to log in to anything.</p>
</div>
<div class="paragraph">
<p>Now that you have an unsecured web application, you can add security to it.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="initial">Set up Spring Security</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Suppose that you want to prevent unauthorized users from viewing the greeting page at <code>/hello</code>. As it is now, if visitors click the link on the home page, they see the greeting with no barriers to stop them. You need to add a barrier that forces the visitor to sign in before they can see that page.</p>
</div>
<div class="paragraph">
<p>You do that by configuring Spring Security in the application. If Spring Security is on the classpath, Spring Boot <a href="https://docs.spring.io/spring-boot/docs/2.2.2.RELEASE/reference/htmlsingle/#boot-features-security">automatically secures all HTTP endpoints</a> with “basic” authentication. However, you can further customize the security settings. The first thing you need to do is add Spring Security to the classpath.</p>
</div>
<div class="paragraph">
<p>With Gradle, you need to add two lines (one for the application and one for testing) in the <code>dependencies</code> closure in <code>build.gradle</code>, as the following listing shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<button class="copy-button snippet" id="copy-button-5" data-clipboard-target="#code-block-5"></button><pre class="prettyprint highlight" id="code-block-5"><code class="language-java" data-lang="java"><span class="pln">implementation </span><span class="str">'org.springframework.boot:spring-boot-starter-security'</span><span class="pln">
implementation </span><span class="str">'org.springframework.security:spring-security-test'</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following listing shows the finished <code>build.gradle</code> file:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<button class="copy-button snippet" id="copy-button-6" data-clipboard-target="#code-block-6"></button><pre class="prettyprint highlight" id="code-block-6"><code class="language-text" data-lang="text"><span class="pln">plugins </span><span class="pun">{</span><span class="pln">
	id </span><span class="str">'org.springframework.boot'</span><span class="pln"> version </span><span class="str">'2.2.2.RELEASE'</span><span class="pln">
	id </span><span class="str">'io.spring.dependency-management'</span><span class="pln"> version </span><span class="str">'1.0.8.RELEASE'</span><span class="pln">
	id </span><span class="str">'java'</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">group</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">'com.example'</span><span class="pln">
version </span><span class="pun">=</span><span class="pln"> </span><span class="str">'0.0.1-SNAPSHOT'</span><span class="pln">
sourceCompatibility </span><span class="pun">=</span><span class="pln"> </span><span class="str">'1.8'</span><span class="pln">

repositories </span><span class="pun">{</span><span class="pln">
	mavenCentral</span><span class="pun">()</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

dependencies </span><span class="pun">{</span><span class="pln">
	implementation </span><span class="str">'org.springframework.boot:spring-boot-starter-thymeleaf'</span><span class="pln">
	implementation </span><span class="str">'org.springframework.boot:spring-boot-starter-web'</span><span class="pln">
	implementation </span><span class="str">'org.springframework.boot:spring-boot-starter-security'</span><span class="pln">
	implementation </span><span class="str">'org.springframework.security:spring-security-test'</span><span class="pln">
	testImplementation</span><span class="pun">(</span><span class="str">'org.springframework.boot:spring-boot-starter-test'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
		exclude </span><span class="kwd">group</span><span class="pun">:</span><span class="pln"> </span><span class="str">'org.junit.vintage'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">module</span><span class="pun">:</span><span class="pln"> </span><span class="str">'junit-vintage-engine'</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

test </span><span class="pun">{</span><span class="pln">
	useJUnitPlatform</span><span class="pun">()</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>With Maven, you need to add two extra entries (one for the application and one for testing) to the <code>&lt;dependencies&gt;</code> element in <code>pom.xml</code>, as the following listing shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<button class="copy-button snippet" id="copy-button-7" data-clipboard-target="#code-block-7"></button><pre class="prettyprint highlight" id="code-block-7"><code class="language-zml" data-lang="zml"><span class="tag">&lt;dependency&gt;</span><span class="pln">
  </span><span class="tag">&lt;groupId&gt;</span><span class="pln">org.springframework.boot</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
  </span><span class="tag">&lt;artifactId&gt;</span><span class="pln">spring-boot-starter-security</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
</span><span class="tag">&lt;/dependency&gt;</span><span class="pln">
</span><span class="tag">&lt;dependency&gt;</span><span class="pln">
  </span><span class="tag">&lt;groupId&gt;</span><span class="pln">org.springframework.security</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
  </span><span class="tag">&lt;artifactId&gt;</span><span class="pln">spring-security-test</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
  </span><span class="tag">&lt;scope&gt;</span><span class="pln">test</span><span class="tag">&lt;/scope&gt;</span><span class="pln">
</span><span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following listing shows the finished <code>pom.xml</code> file:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<button class="copy-button snippet" id="copy-button-8" data-clipboard-target="#code-block-8"></button><pre class="prettyprint highlight" id="code-block-8"><code class="language-text" data-lang="text"><span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">"UTF-8"</span><span class="pun">?&gt;</span><span class="pln">
</span><span class="tag">&lt;project</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://maven.apache.org/POM/4.0.0"</span><span class="pln"> </span><span class="atn">xmlns:xsi</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln">
	</span><span class="atn">xsi:schemaLocation</span><span class="pun">=</span><span class="atv">"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span class="tag">&gt;</span><span class="pln">
	</span><span class="tag">&lt;modelVersion&gt;</span><span class="pln">4.0.0</span><span class="tag">&lt;/modelVersion&gt;</span><span class="pln">
	</span><span class="tag">&lt;parent&gt;</span><span class="pln">
		</span><span class="tag">&lt;groupId&gt;</span><span class="pln">org.springframework.boot</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
		</span><span class="tag">&lt;artifactId&gt;</span><span class="pln">spring-boot-starter-parent</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
		</span><span class="tag">&lt;version&gt;</span><span class="pln">2.2.2.RELEASE</span><span class="tag">&lt;/version&gt;</span><span class="pln">
		</span><span class="tag">&lt;relativePath/&gt;</span><span class="pln"> </span><span class="com">&lt;!-- lookup parent from repository --&gt;</span><span class="pln">
	</span><span class="tag">&lt;/parent&gt;</span><span class="pln">
	</span><span class="tag">&lt;groupId&gt;</span><span class="pln">com.example</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
	</span><span class="tag">&lt;artifactId&gt;</span><span class="pln">securing-web</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
	</span><span class="tag">&lt;version&gt;</span><span class="pln">0.0.1-SNAPSHOT</span><span class="tag">&lt;/version&gt;</span><span class="pln">
	</span><span class="tag">&lt;name&gt;</span><span class="pln">securing-web</span><span class="tag">&lt;/name&gt;</span><span class="pln">
	</span><span class="tag">&lt;description&gt;</span><span class="pln">Demo project for Spring Boot</span><span class="tag">&lt;/description&gt;</span><span class="pln">

	</span><span class="tag">&lt;properties&gt;</span><span class="pln">
		</span><span class="tag">&lt;java.version&gt;</span><span class="pln">1.8</span><span class="tag">&lt;/java.version&gt;</span><span class="pln">
	</span><span class="tag">&lt;/properties&gt;</span><span class="pln">

	</span><span class="tag">&lt;dependencies&gt;</span><span class="pln">
		</span><span class="tag">&lt;dependency&gt;</span><span class="pln">
			</span><span class="tag">&lt;groupId&gt;</span><span class="pln">org.springframework.boot</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
			</span><span class="tag">&lt;artifactId&gt;</span><span class="pln">spring-boot-starter-thymeleaf</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
		</span><span class="tag">&lt;/dependency&gt;</span><span class="pln">
		</span><span class="tag">&lt;dependency&gt;</span><span class="pln">
			</span><span class="tag">&lt;groupId&gt;</span><span class="pln">org.springframework.boot</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
			</span><span class="tag">&lt;artifactId&gt;</span><span class="pln">spring-boot-starter-web</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
		</span><span class="tag">&lt;/dependency&gt;</span><span class="pln">
		</span><span class="tag">&lt;dependency&gt;</span><span class="pln">
			</span><span class="tag">&lt;groupId&gt;</span><span class="pln">org.springframework.boot</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
			</span><span class="tag">&lt;artifactId&gt;</span><span class="pln">spring-boot-starter-security</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
		</span><span class="tag">&lt;/dependency&gt;</span><span class="pln">
		</span><span class="tag">&lt;dependency&gt;</span><span class="pln">
			</span><span class="tag">&lt;groupId&gt;</span><span class="pln">org.springframework.security</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
			</span><span class="tag">&lt;artifactId&gt;</span><span class="pln">spring-security-test</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
			</span><span class="tag">&lt;scope&gt;</span><span class="pln">test</span><span class="tag">&lt;/scope&gt;</span><span class="pln">
		</span><span class="tag">&lt;/dependency&gt;</span><span class="pln">

		</span><span class="tag">&lt;dependency&gt;</span><span class="pln">
			</span><span class="tag">&lt;groupId&gt;</span><span class="pln">org.springframework.boot</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
			</span><span class="tag">&lt;artifactId&gt;</span><span class="pln">spring-boot-starter-test</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
			</span><span class="tag">&lt;scope&gt;</span><span class="pln">test</span><span class="tag">&lt;/scope&gt;</span><span class="pln">
			</span><span class="tag">&lt;exclusions&gt;</span><span class="pln">
				</span><span class="tag">&lt;exclusion&gt;</span><span class="pln">
					</span><span class="tag">&lt;groupId&gt;</span><span class="pln">org.junit.vintage</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
					</span><span class="tag">&lt;artifactId&gt;</span><span class="pln">junit-vintage-engine</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
				</span><span class="tag">&lt;/exclusion&gt;</span><span class="pln">
			</span><span class="tag">&lt;/exclusions&gt;</span><span class="pln">
		</span><span class="tag">&lt;/dependency&gt;</span><span class="pln">
	</span><span class="tag">&lt;/dependencies&gt;</span><span class="pln">

	</span><span class="tag">&lt;build&gt;</span><span class="pln">
		</span><span class="tag">&lt;plugins&gt;</span><span class="pln">
			</span><span class="tag">&lt;plugin&gt;</span><span class="pln">
				</span><span class="tag">&lt;groupId&gt;</span><span class="pln">org.springframework.boot</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
				</span><span class="tag">&lt;artifactId&gt;</span><span class="pln">spring-boot-maven-plugin</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
			</span><span class="tag">&lt;/plugin&gt;</span><span class="pln">
		</span><span class="tag">&lt;/plugins&gt;</span><span class="pln">
	</span><span class="tag">&lt;/build&gt;</span><span class="pln">

</span><span class="tag">&lt;/project&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following security configuration (from <code>src/main/java/com/example/securingweb/WebSecurityConfig.java</code>) ensures that only authenticated users can see the secret greeting:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<button class="copy-button snippet" id="copy-button-9" data-clipboard-target="#code-block-9"></button><pre class="prettyprint highlight" id="code-block-9"><code class="language-java" data-lang="java"><span class="kwd">package</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">example</span><span class="pun">.</span><span class="pln">securingweb</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">springframework</span><span class="pun">.</span><span class="pln">context</span><span class="pun">.</span><span class="pln">annotation</span><span class="pun">.</span><span class="typ">Bean</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">springframework</span><span class="pun">.</span><span class="pln">context</span><span class="pun">.</span><span class="pln">annotation</span><span class="pun">.</span><span class="typ">Configuration</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">springframework</span><span class="pun">.</span><span class="pln">security</span><span class="pun">.</span><span class="pln">config</span><span class="pun">.</span><span class="pln">annotation</span><span class="pun">.</span><span class="pln">web</span><span class="pun">.</span><span class="pln">builders</span><span class="pun">.</span><span class="typ">HttpSecurity</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">springframework</span><span class="pun">.</span><span class="pln">security</span><span class="pun">.</span><span class="pln">config</span><span class="pun">.</span><span class="pln">annotation</span><span class="pun">.</span><span class="pln">web</span><span class="pun">.</span><span class="pln">configuration</span><span class="pun">.</span><span class="typ">EnableWebSecurity</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">springframework</span><span class="pun">.</span><span class="pln">security</span><span class="pun">.</span><span class="pln">config</span><span class="pun">.</span><span class="pln">annotation</span><span class="pun">.</span><span class="pln">web</span><span class="pun">.</span><span class="pln">configuration</span><span class="pun">.</span><span class="typ">WebSecurityConfigurerAdapter</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">springframework</span><span class="pun">.</span><span class="pln">security</span><span class="pun">.</span><span class="pln">core</span><span class="pun">.</span><span class="pln">userdetails</span><span class="pun">.</span><span class="typ">User</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">springframework</span><span class="pun">.</span><span class="pln">security</span><span class="pun">.</span><span class="pln">core</span><span class="pun">.</span><span class="pln">userdetails</span><span class="pun">.</span><span class="typ">UserDetails</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">springframework</span><span class="pun">.</span><span class="pln">security</span><span class="pun">.</span><span class="pln">core</span><span class="pun">.</span><span class="pln">userdetails</span><span class="pun">.</span><span class="typ">UserDetailsService</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">springframework</span><span class="pun">.</span><span class="pln">security</span><span class="pun">.</span><span class="pln">provisioning</span><span class="pun">.</span><span class="typ">InMemoryUserDetailsManager</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@Configuration</span><span class="pln">
</span><span class="lit">@EnableWebSecurity</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">WebSecurityConfig</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">WebSecurityConfigurerAdapter</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
	</span><span class="lit">@Override</span><span class="pln">
	</span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> configure</span><span class="pun">(</span><span class="typ">HttpSecurity</span><span class="pln"> http</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">Exception</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
		http
			</span><span class="pun">.</span><span class="pln">authorizeRequests</span><span class="pun">()</span><span class="pln">
				</span><span class="pun">.</span><span class="pln">antMatchers</span><span class="pun">(</span><span class="str">"/"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"/home"</span><span class="pun">).</span><span class="pln">permitAll</span><span class="pun">()</span><span class="pln">
				</span><span class="pun">.</span><span class="pln">anyRequest</span><span class="pun">().</span><span class="pln">authenticated</span><span class="pun">()</span><span class="pln">
				</span><span class="pun">.</span><span class="kwd">and</span><span class="pun">()</span><span class="pln">
			</span><span class="pun">.</span><span class="pln">formLogin</span><span class="pun">()</span><span class="pln">
				</span><span class="pun">.</span><span class="pln">loginPage</span><span class="pun">(</span><span class="str">"/login"</span><span class="pun">)</span><span class="pln">
				</span><span class="pun">.</span><span class="pln">permitAll</span><span class="pun">()</span><span class="pln">
				</span><span class="pun">.</span><span class="kwd">and</span><span class="pun">()</span><span class="pln">
			</span><span class="pun">.</span><span class="pln">logout</span><span class="pun">()</span><span class="pln">
				</span><span class="pun">.</span><span class="pln">permitAll</span><span class="pun">();</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">

	</span><span class="lit">@Bean</span><span class="pln">
	</span><span class="lit">@Override</span><span class="pln">
	</span><span class="kwd">public</span><span class="pln"> </span><span class="typ">UserDetailsService</span><span class="pln"> userDetailsService</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
		</span><span class="typ">UserDetails</span><span class="pln"> user </span><span class="pun">=</span><span class="pln">
			 </span><span class="typ">User</span><span class="pun">.</span><span class="pln">withDefaultPasswordEncoder</span><span class="pun">()</span><span class="pln">
				</span><span class="pun">.</span><span class="pln">username</span><span class="pun">(</span><span class="str">"user"</span><span class="pun">)</span><span class="pln">
				</span><span class="pun">.</span><span class="pln">password</span><span class="pun">(</span><span class="str">"password"</span><span class="pun">)</span><span class="pln">
				</span><span class="pun">.</span><span class="pln">roles</span><span class="pun">(</span><span class="str">"USER"</span><span class="pun">)</span><span class="pln">
				</span><span class="pun">.</span><span class="pln">build</span><span class="pun">();</span><span class="pln">

		</span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">InMemoryUserDetailsManager</span><span class="pun">(</span><span class="pln">user</span><span class="pun">);</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>WebSecurityConfig</code> class is annotated with <code>@EnableWebSecurity</code> to enable Spring Security’s web security support and provide the Spring MVC integration. It also extends <code>WebSecurityConfigurerAdapter</code> and overrides a couple of its methods to set some specifics of the web security configuration.</p>
</div>
<div class="paragraph">
<p>The <code>configure(HttpSecurity)</code> method defines which URL paths should be secured and which should not. Specifically, the <code>/</code> and <code>/home</code> paths are configured to not require any authentication. All other paths must be authenticated.</p>
</div>
<div class="paragraph">
<p>When a user successfully logs in, they are redirected to the previously requested page that required authentication. There is a custom <code>/login</code> page (which is specified by <code>loginPage()</code>), and everyone is allowed to view it.</p>
</div>
<div class="paragraph">
<p>The <code>userDetailsService()</code> method sets up an in-memory user store with a single user. That user is given a user name of <code>user</code>, a password of <code>password</code>, and a role of <code>USER</code>.</p>
</div>
<div class="paragraph">
<p>Now you need to create the login page. There is already a view controller for the <code>login</code> view, so you need only to create the login view itself, as the following listing (from <code>src/main/resources/templates/login.html</code>) shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<button class="copy-button snippet" id="copy-button-10" data-clipboard-target="#code-block-10"></button><pre class="prettyprint highlight" id="code-block-10"><code class="language-html" data-lang="html"><span class="dec">&lt;!DOCTYPE html&gt;</span><span class="pln">
</span><span class="tag">&lt;html</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://www.w3.org/1999/xhtml"</span><span class="pln"> </span><span class="atn">xmlns:th</span><span class="pun">=</span><span class="atv">"https://www.thymeleaf.org"</span><span class="pln">
      </span><span class="atn">xmlns:sec</span><span class="pun">=</span><span class="atv">"https://www.thymeleaf.org/thymeleaf-extras-springsecurity3"</span><span class="tag">&gt;</span><span class="pln">
    </span><span class="tag">&lt;head&gt;</span><span class="pln">
        </span><span class="tag">&lt;title&gt;</span><span class="pln">Spring Security Example </span><span class="tag">&lt;/title&gt;</span><span class="pln">
    </span><span class="tag">&lt;/head&gt;</span><span class="pln">
    </span><span class="tag">&lt;body&gt;</span><span class="pln">
        </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">th:if</span><span class="pun">=</span><span class="atv">"${param.error}"</span><span class="tag">&gt;</span><span class="pln">
            Invalid username and password.
        </span><span class="tag">&lt;/div&gt;</span><span class="pln">
        </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">th:if</span><span class="pun">=</span><span class="atv">"${param.logout}"</span><span class="tag">&gt;</span><span class="pln">
            You have been logged out.
        </span><span class="tag">&lt;/div&gt;</span><span class="pln">
        </span><span class="tag">&lt;form</span><span class="pln"> </span><span class="atn">th:action</span><span class="pun">=</span><span class="atv">"@{/login}"</span><span class="pln"> </span><span class="atn">method</span><span class="pun">=</span><span class="atv">"post"</span><span class="tag">&gt;</span><span class="pln">
            </span><span class="tag">&lt;div&gt;&lt;label&gt;</span><span class="pln"> User Name : </span><span class="tag">&lt;input</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"text"</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"username"</span><span class="tag">/&gt;</span><span class="pln"> </span><span class="tag">&lt;/label&gt;&lt;/div&gt;</span><span class="pln">
            </span><span class="tag">&lt;div&gt;&lt;label&gt;</span><span class="pln"> Password: </span><span class="tag">&lt;input</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"password"</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"password"</span><span class="tag">/&gt;</span><span class="pln"> </span><span class="tag">&lt;/label&gt;&lt;/div&gt;</span><span class="pln">
            </span><span class="tag">&lt;div&gt;&lt;input</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"submit"</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"Sign In"</span><span class="tag">/&gt;&lt;/div&gt;</span><span class="pln">
        </span><span class="tag">&lt;/form&gt;</span><span class="pln">
    </span><span class="tag">&lt;/body&gt;</span><span class="pln">
</span><span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This Thymeleaf template presents a form that captures a username and password and posts them to <code>/login</code>. As configured, Spring Security provides a filter that intercepts that request and authenticates the user. If the user fails to authenticate, the page is redirected to <code>/login?error</code>, and your page displays the appropriate error message. Upon successfully signing out, your application is sent to <code>/login?logout</code>, and your page displays the appropriate success message.</p>
</div>
<div class="paragraph">
<p>Last, you need to provide the visitor a way to display the current user name and sign out. To do so, update the <code>hello.html</code> to say hello to the current user and contain a <code>Sign Out</code> form, as the following listing (from <code>src/main/resources/templates/hello.html</code>) shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<button class="copy-button snippet" id="copy-button-11" data-clipboard-target="#code-block-11"></button><pre class="prettyprint highlight" id="code-block-11"><code class="language-html" data-lang="html"><span class="dec">&lt;!DOCTYPE html&gt;</span><span class="pln">
</span><span class="tag">&lt;html</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://www.w3.org/1999/xhtml"</span><span class="pln"> </span><span class="atn">xmlns:th</span><span class="pun">=</span><span class="atv">"https://www.thymeleaf.org"</span><span class="pln">
      </span><span class="atn">xmlns:sec</span><span class="pun">=</span><span class="atv">"https://www.thymeleaf.org/thymeleaf-extras-springsecurity3"</span><span class="tag">&gt;</span><span class="pln">
    </span><span class="tag">&lt;head&gt;</span><span class="pln">
        </span><span class="tag">&lt;title&gt;</span><span class="pln">Hello World!</span><span class="tag">&lt;/title&gt;</span><span class="pln">
    </span><span class="tag">&lt;/head&gt;</span><span class="pln">
    </span><span class="tag">&lt;body&gt;</span><span class="pln">
        </span><span class="tag">&lt;h1</span><span class="pln"> </span><span class="atn">th:inline</span><span class="pun">=</span><span class="atv">"text"</span><span class="tag">&gt;</span><span class="pln">Hello [[${#httpServletRequest.remoteUser}]]!</span><span class="tag">&lt;/h1&gt;</span><span class="pln">
        </span><span class="tag">&lt;form</span><span class="pln"> </span><span class="atn">th:action</span><span class="pun">=</span><span class="atv">"@{/logout}"</span><span class="pln"> </span><span class="atn">method</span><span class="pun">=</span><span class="atv">"post"</span><span class="tag">&gt;</span><span class="pln">
            </span><span class="tag">&lt;input</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"submit"</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"Sign Out"</span><span class="tag">/&gt;</span><span class="pln">
        </span><span class="tag">&lt;/form&gt;</span><span class="pln">
    </span><span class="tag">&lt;/body&gt;</span><span class="pln">
</span><span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>We display the username by using Spring Security’s integration with <code>HttpServletRequest#getRemoteUser()</code>. The “Sign Out” form submits a POST to <code>/logout</code>. Upon successfully logging out, it redirects the user to <code>/login?logout</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="run_the_app">Run the Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Spring Initializr creates an application class for you. In this case, you need not modify the class. The following listing (from <code>src/main/java/com/example/securingweb/SecuringWebApplication.java</code>) shows the application class:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<button class="copy-button snippet" id="copy-button-12" data-clipboard-target="#code-block-12"></button><pre class="prettyprint highlight" id="code-block-12"><code class="language-java" data-lang="java"><span class="kwd">package</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">example</span><span class="pun">.</span><span class="pln">securingweb</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">springframework</span><span class="pun">.</span><span class="pln">boot</span><span class="pun">.</span><span class="typ">SpringApplication</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">springframework</span><span class="pun">.</span><span class="pln">boot</span><span class="pun">.</span><span class="pln">autoconfigure</span><span class="pun">.</span><span class="typ">SpringBootApplication</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@SpringBootApplication</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">SecuringWebApplication</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

	</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">Throwable</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
		</span><span class="typ">SpringApplication</span><span class="pun">.</span><span class="pln">run</span><span class="pun">(</span><span class="typ">SecuringWebApplication</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> args</span><span class="pun">);</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">

</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_build_an_executable_jar">Build an executable JAR</h3>
<div class="paragraph">
<p>You can run the application from the command line with Gradle or Maven. You can also build a single executable JAR file that contains all the necessary dependencies, classes, and resources and run that. Building an executable jar so makes it easy to ship, version, and deploy the service as an application throughout the development lifecycle, across different environments, and so forth.</p>
</div>
<div class="paragraph">
<p>If you use Gradle, you can run the application by using <code>./gradlew bootRun</code>. Alternatively, you can build the JAR file by using <code>./gradlew build</code> and then run the JAR file, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock has-copy-button">
<div class="content">
<button class="copy-button snippet" id="copy-button-13" data-clipboard-target="#code-block-13"></button><pre id="code-block-13" class="prettyprint">java -jar build/libs/gs-securing-web-0.1.0.jar</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If you use Maven, you can run the application by using <code>./mvnw spring-boot:run</code>. Alternatively, you can build the JAR file with <code>./mvnw clean package</code> and then run the JAR file, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock has-copy-button">
<div class="content">
<button class="copy-button snippet" id="copy-button-14" data-clipboard-target="#code-block-14"></button><pre id="code-block-14" class="prettyprint">java -jar target/gs-securing-web-0.1.0.jar</pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody>
<tr>
<td class="icon"> <i class="fa icon-note" title="Note"></i> </td>
<td class="content"> The steps described here create a runnable JAR. You can also <a href="https://spring.io/guides/gs/convert-jar-to-war/">build a classic WAR file</a>. </td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph">
<p>Once the application starts up, point your browser to <code><a href="http://localhost:8080/" class="bare">http://localhost:8080</a></code>. You should see the home page, as the following image shows:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Getting Started · Securing a Web Application_files/home.png" alt="The application’s home page">
</div>
</div>
<div class="paragraph">
<p>When you click on the link, it attempts to take you to the greeting page at <code>/hello</code>. However, because that page is secured and you have not yet logged in, it takes you to the login page, as the following image shows:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Getting Started · Securing a Web Application_files/login.png" alt="The login page">
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody>
<tr>
<td class="icon"> <i class="fa icon-note" title="Note"></i> </td>
<td class="content"> If you jumped down here with the unsecured version, you do not see the login page. You should back up and write the rest of the security-based code. </td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph">
<p>At the login page, sign in as the test user by entering <code>user</code> and <code>password</code> for the username and password fields, respectively. Once you submit the login form, you are authenticated and then taken to the greeting page, as the following image shows:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Getting Started · Securing a Web Application_files/greeting.png" alt="The secured greeting page">
</div>
</div>
<div class="paragraph">
<p>If you click on the <strong>Sign Out</strong> button, your authentication is revoked, and you are returned to the login page with a message indicating that you are logged out.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_summary">Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Congratulations! You have developed a simple web application that is secured with Spring Security.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see_also">See Also</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following guides may also be helpful:</p>
</div>
<div class="ulist">
<ul>
<li> <p><a href="https://spring.io/guides/gs/spring-boot/">Building an Application with Spring Boot</a></p> </li>
<li> <p><a href="https://spring.io/guides/gs/serving-web-content/">Serving Web Content with Spring MVC</a></p> </li>
<li> <p><a href="https://spring.io/guides/topicals/spring-security-architecture/">Spring Security Architecture</a> (Reference guide)</p> </li>
<li> <p><a href="https://spring.io/guides/tutorials/spring-security-and-angular-js/">Spring Security and Angular JS</a> (Tutorial)</p> </li>
</ul>
</div>
<div class="paragraph">
<p>Want to write a new guide or contribute to an existing one? Check out our <a href="https://github.com/spring-guides/getting-started-guides/wiki">contribution guidelines</a>.</p>
</div>
<div class="admonitionblock important">
<table>
<tbody>
<tr>
<td class="icon"> <i class="fa icon-important" title="Important"></i> </td>
<td class="content"> All guides are released with an ASLv2 license for the code, and an <a href="https://creativecommons.org/licenses/by-nd/3.0/">Attribution, NoDerivatives creative commons license</a> for the writing. </td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</article>
</div>
<aside class="span4 content-right-pane--container mobile-left-pane" id="sidebar">
<a class="ci-status desktop-only" href="https://travis-ci.org/spring-guides/gs-securing-web">
<img src="./Getting Started · Securing a Web Application_files/passing.svg">
</a>
<div class="right-pane-widget--container desktop-only">
<div class="github-actions https">
<h2>Get the Code</h2>
<div class="btn-group">
<button class="btn" data-protocol="https">HTTPS</button>
<button class="btn" data-protocol="ssh">SSH</button>
</div>
<div class="clone-url https">
<input id="clone-url-https" readonly="readonly" type="text" value="https://github.com/spring-guides/gs-securing-web.git">
<button class="copy-button github" data-toggle="tooltip" data-clipboard-text="https://github.com/spring-guides/gs-securing-web.git"></button>
</div>
<div class="clone-url ssh">
<input id="clone-url-ssh" readonly="readonly" type="text" value="git@github.com:spring-guides/gs-securing-web.git">
<button class="copy-button github" data-toggle="tooltip" data-clipboard-text="git@github.com:spring-guides/gs-securing-web.git"></button>
</div>
<a class="github_download btn btn-black uppercase" href="https://github.com/spring-guides/gs-securing-web/archive/master.zip">Download ZIP</a>
<a class="gs-guide-import" href="https://github.com/spring-guides/gs-securing-web.git">Import into STS</a>
<div class="go-to-repo--container">
<a href="https://github.com/spring-guides/gs-securing-web"><i class="icon-github"></i>Go To Repo</a>
</div>
<div class="go-to-repo--container">
</div>
</div>
</div>
<div class="right-pane-widget--container">
<div class="related_resources">
<h3><a class="anchor" href="https://spring.io/guides/gs/securing-web/#projects" name="projects"></a>Projects</h3>
<ul>
<li><a href="https://spring.io/projects/spring-security">Spring Security</a></li>
</ul>
</div>
</div>
<div class="right-pane-widget--container">
<div>
<h3><a class="anchor" href="https://spring.io/guides/gs/securing-web/#table-of-contents" name="table-of-contents"></a>Table of contents</h3>
<div><ul class="sectlevel1">
<li><a href="https://spring.io/guides/gs/securing-web/#_what_you_will_build">What You Will Build</a></li>
<li><a href="https://spring.io/guides/gs/securing-web/#_what_you_need">What You Need</a></li>
<li><a href="https://spring.io/guides/gs/securing-web/#_how_to_complete_this_guide">How to complete this guide</a></li>
<li><a href="https://spring.io/guides/gs/securing-web/#scratch">Starting with Spring Initializr</a></li>
<li><a href="https://spring.io/guides/gs/securing-web/#initial">Create an Unsecured Web Application</a></li>
<li><a href="https://spring.io/guides/gs/securing-web/#initial">Set up Spring Security</a></li>
<li><a href="https://spring.io/guides/gs/securing-web/#run_the_app">Run the Application</a> </li>
<li><a href="https://spring.io/guides/gs/securing-web/#_summary">Summary</a></li>
<li><a href="https://spring.io/guides/gs/securing-web/#_see_also">See Also</a></li>
</ul></div>
</div>
</div>
</aside>
</div>
</main>
</div>
<footer class="footer">
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="navbar">
<div class="container">
<ul class="nav">
<li><a href="https://spring.io/team">Team</a></li>
<li><a href="https://spring.io/tools">Tools</a></li>
<li><a href="https://store.pivotal.io/">Store</a></li>
<li><a href="https://spring.io/blog">Newsletter</a></li>
</ul>
</div>
</div>
© <span>2020</span> <a href="https://www.pivotal.io/">Pivotal Software</a>, Inc. All Rights Reserved.
<a href="https://pivotal.io/terms-of-use">Terms of Use</a> •
<a href="https://pivotal.io/privacy-policy">Privacy</a> •
<a href="https://spring.io/trademarks">Trademark Guidelines</a>
<div id="teconsent" style="display:inline-block;" consent="0,1,2"><script src="./Getting Started · Securing a Web Application_files/v1.7-30" async="async" crossorigin=""></script><a id="icon-id02495219716318171" tabindex="0" role="button" lang="en" style="cursor: pointer;">Cookie Preferences</a></div>
</div>
</div>
</div>
</footer>
<div id="scrim"></div>
</div>
<script type="text/javascript" id="truste_0.6078394003111642" src="./Getting Started · Securing a Web Application_files/notice"></script><script type="text/javascript" id="">var imgur=document.querySelectorAll(".gravatar-wrapper-32 img");console.log(imgur);for(var i=0;i<imgur.length;++i){var src=imgur[i].src;src&&-1<src.indexOf("imgur")?imgur[i].parentNode.removeChild(imgur[i]):src&&-1<src.indexOf("gravatar")&&imgur[i].parentNode.removeChild(imgur[i])};</script></body></html>