var tbw_parameters;function tbw_set_cookie(e,t,r){var o="";if(r){var _=new Date;_.setTime(_.getTime()+24*r*60*60*1e3),o="; expires="+_.toUTCString()}document.cookie=e+"="+t+o+"; path=/"}function tbw_get_all_cookies(){for(var e=document.cookie.split(";"),t={},r=0;r<e.length;r++){var o=e[r],_=o.indexOf("="),a=decodeURI(o.slice(0,_)).trim(),i=decodeURI(o.slice(_+1));t[a]=i}return t}function tbw_get_cookie(e,t){var r,o=tbw_get_all_cookies();for(var _ in o)if(t){if(0===_.indexOf(e)&&_.endsWith(t))return r=o[_]}else if(0===_.indexOf(e))return r=o[_];if(!r)return null}function tbw_get_part_of_cookie(e,t){if(!e)return null;for(var r=e.split("|"),o=0;o<r.length;o++)if(0===r[o].indexOf(t))return r[o+1]}function tbw_check_cookie(e,t){return e?[t,e].join("|"):[t,"NONE"].join("|")}function tbw_get_host_name(e){var t=new RegExp("^(?:(?:https?|ftp):)/*(?:[^@]+@)?([^:/#]+)");return host=t.exec(e),host?host[1]:e}function tbw_collector(e,t,r,o,_,a,i,s){e||(e="DEFAULT"),t||(t="DEFAULT"),r&&!_&&(_="segment");var n,c,l,w,b,p,d="";if("DOMAIN"===r&&(r=(d=(d=tbw_get_host_name(window.location.href)).replace(/^www\./g,""))||"domain could not be set"),"URL"===r&&(r=(d=window.location.href)?d.replace(/\./g,"_"):"url could not be set"),"FILENAME"===r){var m=window.location.pathname,g=m.substring(m.lastIndexOf("/")+1);r=(g=g.split(".")[0])||"filename could not be set"}if(r||(r="DEFAULT"),o||(o="DEFAULT"),_||(_="DEFAULT"),a||(a="0.0"),i||(i="DEFAULT"),s||(s="DEFAULT"),n=window,c=document,l="script",n[w="snowplow"]||(n.GlobalSnowplowNamespace=n.GlobalSnowplowNamespace||[],n.GlobalSnowplowNamespace.push(w),n[w]=function(){(n[w].q=n[w].q||[]).push(arguments)},n[w].q=n[w].q||[],b=c.createElement(l),p=c.getElementsByTagName(l)[0],b.async=1,b.src="//d26x5ounzdjojj.cloudfront.net/2.5.3/sp.js",p.parentNode.insertBefore(b,p)),window.snowplow("newTracker","co","drvizd1lyevz4.cloudfront.net",{appId:e,platform:"web",contexts:{webPage:!0}}),window.snowplow("setUserId",t),window.snowplow("enableActivityTracking",30,30),window.snowplow("enableLinkClickTracking"),window.snowplow("trackPageView"),window.snowplow("trackStructEvent",r,_,i,o,a),"1"===s){var u={app_id:e,cookie_id:t,segment:r,parent_segment:o,user_action:_,tbw_version:a,type:i};console.log("tbwlog: %c The following parameters were sent to the collector","color: green"),console.log(u)}}function tbw_get_first_party_cookie(e){for(var t="",r=e.split(","),o=0;o<r.length;o++){var _,a;if(r[o].indexOf(":")>-1){var i,s=r[o].split(":")[0],n=r[o].split(":")[1];i=s.indexOf("*")>-1?tbw_get_cookie(_=s.split("*")[0],a=s.split("*")[1]):tbw_get_cookie(from_collect);for(var c=n.split("|"),l=0;l<c.length;l++)t=t.concat(tbw_check_cookie(tbw_get_part_of_cookie(i,c[l]),c[l]),";")}else r[o].indexOf("*")>-1?(_=r[o].split("*")[0],a=r[o].split("*")[1],t=t.concat(tbw_check_cookie(tbw_get_cookie(_,a),r[o]),";")):t=t.concat(tbw_check_cookie(tbw_get_cookie(r[o],""),r[o]),";")}t.lastIndexOf(";")===t.length-1&&(t=t.substring(0,t.length-1)),tbw_parameters.first_party_cookie_id=t}function tbw_get_parameters(e){var t,r=document.getElementById(e).getAttribute("tbw_local_id"),o=document.getElementById(e).getAttribute("tbw_remote_id"),_=document.getElementById(e).getAttribute("tbw_segment"),a=document.getElementById(e).getAttribute("tbw_parent_segment"),i=document.getElementById(e).getAttribute("tbw_site_id"),s=document.getElementById(e).getAttribute("tbw_track_item"),n=document.getElementById(e).getAttribute("tbw_user_action"),c=document.getElementById(e).getAttribute("tbw_log"),l=document.getElementById(e).getAttribute("src");l&&(t=l.slice(l.indexOf("_v")+2,l.indexOf(".js"))),r||(r=""),o||(o=""),_||(_=""),a||(a=""),i||(i=""),s||(s=""),n||(n=""),c||(c="0"),t||(t="0.0");var w={first_party_cookie:r,third_party_cookie:o,segment:_,parent_segment:a,site_id:i,tbw_track_item:s,user_action:n,tbw_version:t,log_level:c};"1"===c&&(console.log("tbwlog: %c The following parameters were collected from the page","color:green"),console.log(w)),tbw_parameters=w}function tbw_callback_other(e){tbw_parameters.third_party_cookie_id="",e&&e.uid?tbw_parameters.third_party_cookie_id=e.uid:"1"===tbw_parameters.log_level&&console.log("tbwlog: %c No response from third-party '"+tbw_parameters.third_party_cookie+"'","color: red"),"1"===tbw_parameters.log_level&&tbw_parameters.third_party_cookie_id&&console.log("tbwlog: %c Third-party cookie '"+tbw_parameters.third_party_cookie+"' was collected","color: green"),tbw_parameters.first_party_cookie_id?tbw_parameters.first_party_cookie_id=[tbw_parameters.first_party_cookie_id,tbw_check_cookie(tbw_parameters.third_party_cookie_id,tbw_parameters.third_party_cookie)].join(";"):tbw_parameters.first_party_cookie_id=tbw_check_cookie(tbw_parameters.third_party_cookie_id,tbw_parameters.third_party_cookie),tbw_make_bw_call()}function tbw_callback(e){var t,r="tbw_bw_uid";e&&e.uid?("1"===tbw_parameters.log_level&&console.log("tbwlog: %c Got response from Beeswax. Setting tbw_bw_uid","color: green"),tbw_set_cookie(r,t="bito."+e.uid,36500)):("1"===tbw_parameters.log_level&&console.log("tbwlog: %c No response from Beeswax","color: red"),t=tbw_get_cookie(r)),t&&tbw_set_cookie("tbw_bw_sd",Math.round((new Date).getTime()/1e3),36500),tbw_parameters.first_party_cookie_id?(tbw_parameters.first_party_cookie_id.includes(";tbw_bw_uid|")&&(tbw_parameters.first_party_cookie_id=tbw_parameters.first_party_cookie_id.split(";tbw_bw_uid|")[0]),tbw_parameters.first_party_cookie_id.includes("tbw_bw_uid|")&&(tbw_parameters.first_party_cookie_id=tbw_parameters.first_party_cookie_id.split("tbw_bw_uid|")[0]),tbw_parameters.first_party_cookie_id=[tbw_parameters.first_party_cookie_id,tbw_check_cookie(t,r)].join(";")):tbw_parameters.first_party_cookie_id=tbw_check_cookie(t,r),tbw_collector(tbw_parameters.site_id,tbw_parameters.first_party_cookie_id,tbw_parameters.segment,tbw_parameters.parent_segment,null,tbw_parameters.tbw_version,null,tbw_parameters.log_level)}function tbw_bw_call(){var e=document.createElement("script");e.src="https://match.prod.bidr.io/cookie-sync/tbw",document.querySelector("head").appendChild(e)}function tbw_make_bw_call(){var e="tbw_bw_uid",t=tbw_get_cookie(e);t?Math.round((new Date).getTime()/1e3)-parseInt(tbw_get_cookie("tbw_bw_sd"))>=259200?tbw_bw_call():(tbw_parameters.first_party_cookie_id?(tbw_parameters.first_party_cookie_id.includes(";tbw_bw_uid|")&&(tbw_parameters.first_party_cookie_id=tbw_parameters.first_party_cookie_id.split(";tbw_bw_uid|")[0]),tbw_parameters.first_party_cookie_id.includes("tbw_bw_uid|")&&(tbw_parameters.first_party_cookie_id=tbw_parameters.first_party_cookie_id.split("tbw_bw_uid|")[0]),tbw_parameters.first_party_cookie_id=[tbw_parameters.first_party_cookie_id,tbw_check_cookie(t,e)].join(";")):tbw_parameters.first_party_cookie_id=tbw_check_cookie(t,e),tbw_collector(tbw_parameters.site_id,tbw_parameters.first_party_cookie_id,tbw_parameters.segment,tbw_parameters.parent_segment,null,tbw_parameters.tbw_version,null,tbw_parameters.log_level)):tbw_bw_call()}function tbw_event_tracker(e){tbw_collector(tbw_parameters.site_id,tbw_parameters.first_party_cookie_id,tbw_parameters.segment,tbw_parameters.parent_segment,e,tbw_parameters.tbw_version,"CONV",tbw_parameters.log_level)}function tbw_form_event_tracker(e){if(e in tbw_parameters&&!1===tbw_parameters[e]){tbw_collector(tbw_parameters.site_id,tbw_parameters.first_party_cookie_id,tbw_parameters.segment,tbw_parameters.parent_segment,e,tbw_parameters.tbw_version,"CONV",tbw_parameters.log_level),tbw_parameters[e]=!0}}function tbw_set_event_listeners(e,t,r,o){if("FORM"===t.tagName){var _=e+"_formstart",a=e+"_formsubmit";t.addEventListener("input",tbw_form_event_tracker.bind(this,_)),t.addEventListener("submit",tbw_form_event_tracker.bind(this,a)),tbw_parameters[_]=!1,tbw_parameters[a]=!1}else r||(r=e+"_click"),t.addEventListener("click",tbw_event_tracker.bind(this,r));var i=document.createElement("input");i.setAttribute("id",o),i.setAttribute("type","hidden"),document.body.appendChild(i),"1"===tbw_parameters.log_level&&console.log("tbwlog: %c EventListener added to '"+e+"'","color: green")}function tbw_get_bwid_from_url(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[null,""])[1].replace(/\+/g,"%20"))||""}function tbw_get_current_utc_time(){return now=new Date,year=""+now.getUTCFullYear(),month=""+(now.getUTCMonth()+1),1==month.length&&(month="0"+month),day=""+now.getUTCDate(),1==day.length&&(day="0"+day),hour=""+now.getUTCHours(),1==hour.length&&(hour="0"+hour),minute=""+now.getUTCMinutes(),1==minute.length&&(minute="0"+minute),second=""+now.getUTCSeconds(),1==second.length&&(second="0"+second),year+"-"+month+"-"+day+" "+hour+":"+minute+":"+second}function tbw_send_data(e){tbw_collector(tbw_parameters.site_id,tbw_parameters.first_party_cookie_id,e,tbw_parameters.parent_segment,"client_data",tbw_parameters.tbw_version,null,tbw_parameters.log_level)}function tbw_parse(e){if(e){tbw_get_parameters(e.id);for(var t=tbw_parameters.tbw_track_item.split(","),r=tbw_parameters.user_action.split(","),o=0;o<t.length;o++)if(t[o]){var _=t[o]+"_tbw_el_add";if(null===document.getElementById(_)){var a=document.getElementById(t[o]);if(a)tbw_set_event_listeners(t[o],a,r[o],_);else{var i=document.getElementsByName(t[o]);if(i&&1===i.length)tbw_set_event_listeners(t[o],i[0],r[o],_);else{var s=document.querySelectorAll('a[href="'+t[o]+'"]');if(s.length>0)for(var n=0;n<s.length;n++)tbw_set_event_listeners(t[o],s[n],r[o],_);else if("SUBMIT"===t[o]||"IMAGE"===t[o]||"BUTTON"===t[o]){var c=document.getElementsByTagName("INPUT");if(c.length>0)for(n=0;n<c.length;n++)c[n].type===t[o].toLowerCase()&&tbw_set_event_listeners(t[o],c[n],r[o],_)}else if("FORM"===t[o]){var l=document.getElementsByTagName(t[o]);for(n=0;n<l.length;n++)tbw_set_event_listeners(t[o],l[n],r[o],_)}else"1"===tbw_parameters.log_level&&console.log("tbwlog: %c Couldn't find element with id '"+t[o]+"' on the page","color: red")}}}else"1"===tbw_parameters.log_level&&console.log("tbwlog: %c EventListener already added to '"+t[o]+"'","color: orange")}if(tbw_parameters.first_party_cookie&&tbw_get_first_party_cookie(tbw_parameters.first_party_cookie),"1"===tbw_parameters.log_level&&tbw_parameters.first_party_cookie_id&&console.log("tbwlog: %c First-party cookie '"+tbw_parameters.first_party_cookie+"' was collected","color: green"),tbw_parameters.third_party_cookie){var w={exalate:"http://loadus.exelator.com/load/?p=763&g=206&j=jf&callback=tbw_callback_other"};if(tbw_parameters.third_party_cookie in w){var b=document.createElement("script");b.src=w[tbw_parameters.third_party_cookie],document.querySelector("head").appendChild(b)}else"1"===tbw_parameters.log_level&&console.log("tbwlog: %c No URL for third-party '"+tbw_parameters.third_party_cookie+"'","color: red")}var p=tbw_get_bwid_from_url("bwid");if("1"===tbw_parameters.log_level&&p&&console.log("tbwlog: %c Beeswax ID '"+p+"' was collected from the URL.","color: green"),p){var d="tbw_bw_uid";tbw_set_cookie(d,p,36500),tbw_set_cookie("tbw_bw_sd",Math.round((new Date).getTime()/1e3),36500),tbw_parameters.first_party_cookie_id?(tbw_parameters.first_party_cookie_id.includes(";tbw_bw_uid|")&&(tbw_parameters.first_party_cookie_id=tbw_parameters.first_party_cookie_id.split(";tbw_bw_uid|")[0]),tbw_parameters.first_party_cookie_id.includes("tbw_bw_uid|")&&(tbw_parameters.first_party_cookie_id=tbw_parameters.first_party_cookie_id.split("tbw_bw_uid|")[0]),tbw_parameters.first_party_cookie_id=[tbw_parameters.first_party_cookie_id,tbw_check_cookie(p,d)].join(";")):tbw_parameters.first_party_cookie_id=tbw_check_cookie(p,d),tbw_collector(tbw_parameters.site_id,tbw_parameters.first_party_cookie_id,tbw_parameters.segment,tbw_parameters.parent_segment,null,tbw_parameters.tbw_version,null,tbw_parameters.log_level)}else tbw_make_bw_call()}else console.log("tbwlog: %c No ID was passed to tbw_parse()","color: red")}
