(function(){var Q=[];var K=null;var d="schemaapp.com";var M="https://cdn."+d;var v="https://data."+d;var p="schemahighlight";var R=new Set(["img","video","audio","source","embed"]);var J=new Set(["meta"]);var a=document.createElement("textarea");var n=document.createElement("div");var S=document.createElement("a");var B={reserved_words:{baseURL:function(){return window.location.origin},currentURL:function(){return window.location.href}}};var o="X-API-KEY";var A="https://0yl6pcjbij.execute-api.us-east-1.amazonaws.com/prod";var h="BiQcqdttWn7eunp8jvxM5oZl3DIx08J42LtTmaaj";var c=[];var z={attributes:false,childList:true,subtree:true,characterData:false};var y=null;var O={high:"http://schemaapp.com/ontology/highlight#",schema:"http://schema.org/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",gist:"http://ontologies.semanticarts.com/gist#",rdfs:"http://www.w3.org/2000/01/rdf-schema#"};var C={};var k=[];var i=null;var x={convertToNumeric:function(U){var T=Number(U.trim());return(T===NaN||T.toString()==="NaN")?U:T},encodeHtmlEntities:function(T){a.textContent=T;return a.innerHTML}};var G={tagTypes:Object.freeze({TagXPath:1,TagDefined:2,TagStoredResource:3,TagYouTube:4,TagLookup:5}),construct:function(T,U){return[T,[],U]},extract:function(U,T,W){var V=U[2];if(T===undefined){T=document}switch(V){case G.tagTypes.TagXPath:return G.xpathExtract(U,T);case G.tagTypes.TagDefined:return G.tagDefined(U);case G.tagTypes.TagStoredResource:return G.storedResource(U);case G.tagTypes.TagYouTube:return G.videoResource(U,T);case G.tagTypes.TagLookup:return G.tagLookup(U,T,W)}},getContentFromElement:function(V,Z){if(V==undefined){return null}if(V.localName==undefined){if(V.value!==undefined){return V.value}else{if(V.nodeType===3){return V.wholeText}}}var U=V.localName.toLowerCase();if(U==="href"||U=="@href"){S.href=V.textContent;return S.href}if(V.nodeType===3){return V.wholeText}if(V.constructor===Attr){return V.value}if(R.has(U)){if(V.hasAttribute("src")){var Y=V.getAttribute("src");if(!Y.startsWith("http")&&!Y.startsWith("//")){Y=window.location.protocol+"//"+window.location.host+Y}else{if(Y.startsWith("//")){Y=window.location.protocol+Y}}return Y}else{return G.getContentFromElement(V.getElementsByTagName("source")[0])}}else{if(J.has(U)){var X=V.getAttribute("content");return X}}var T=V.cloneNode(true);u(T);if(Z){var W=T.innerHTML}else{var W=T.innerText}return W},tagDefined:function(U){var T=U[0];if(T[O.high+"value"]){return T[O.high+"value"][0].value}return null},videoResource:function(V,U){var W=V[0];var Z=W[O.high+"xPath"][0].value;var Y=document.evaluate(Z,U,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotItem(0);if(!Y){return null}var X=new URL(Y.src);var T=X.pathname.replace("/","").replace("embed/","");var aa=X.origin+X.pathname;if(c.indexOf(aa)!==-1){return[{"@id":aa}]}c.push(aa);var ab=new XMLHttpRequest();ab.onreadystatechange=function(){if(this.readyState==4&&this.status==200){var ac=JSON.parse(ab.responseText);ac["@id"]=X.origin+X.pathname;L(JSON.stringify(ac),X)}};ab.open("GET","https://api.hunchmanifest.com/schemaorg/video.json?ids="+T,true);ab.send();return[{"@id":aa}]},xpathExtract:function(W,V){var X=W[0];var ad,aa,U="",ad="",Y=null;if(X[O.high+"xPath"]==undefined||X[O.high+"xPath"][0]==undefined){return null}var af=X[O.high+"xPath"][0].value;var ae=af.match(/\/node\(\)/)!==null;aa=X[O.high+"xPath"][0].value.replace(/(\/node\(\))/g,"");if(X[O.high+"filter"]!==undefined){U=X[O.high+"filter"][0].value}try{var T=document.evaluate(aa,V,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE);for(var ac=0;ac<T.snapshotLength;ac++){var Z=T.snapshotItem(ac);ad+=G.getContentFromElement(Z,ae)+"\n"}}catch(ab){return""}if(ad!=null&&ad!=""){ad=I(ad,U);if(ae==false){ad=ad.replace(/\s\s+/g," ");ad=x.convertToNumeric(x.encodeHtmlEntities(ad))}return[ad,Y]}return null},storedResource:function(X){var U=X[0];if(!U[O.high+"value"]){return}var W=U[O.high+"value"][0].value;var T=btoa(unescape(W)).replace(/=/g,"");var Y=g();if(Y===null){return}var V=v+"/"+Y+"/"+T;if(c.indexOf(W)!==-1){return[{"@id":W}]}c.push(W);G.makeExternalRequest(V);return[{"@id":W}]},tagLookup:function(V,U,X){var W=V[0];var af,ab;var T="";if(W[O.high+"xPath-input"]){ab=W[O.high+"xPath-input"][0].value;var ai=document.evaluate(ab,U,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE);if(ai.snapshotLength>0){af=G.getContentFromElement(ai.snapshotItem(0))}}if(W[O.high+"filter"]!==undefined){T=W[O.high+"filter"][0].value}af=I(af,T);var ac=W[O.schema+"target"][0]["value"];var ad=ac.match(/{([a-zA-Z-]+)}/gm);var ah={};for(var Y=0;Y<ad.length;Y++){var ae=ad[Y].replace(/{|}/gm,"");if(B.reserved_words[ae]){ah[ae]=B.reserved_words[ae]}if(ae=="xPath-input"){ah[ae]=af}}for(var ag in ah){if(typeof ah[ag]=="function"){ac=ac.replace(ag,ah[ag]())}else{ac=ac.replace(ag,ah[ag])}}ac=ac.replace(/{|}/gm,"");var aa={"@context":"http://schema.org/","@type":X["@type"],"@id":X["@id"]};var Z=W[O.high+"propertyPath"][0]["value"];if(c.indexOf(ac)!==-1){return}c.push(ac);G.makeExternalRequest(encodeURI(ac),aa,Z)},makeExternalRequest:function(U,T,V){var W=new XMLHttpRequest();W.onreadystatechange=function(){if(this.readyState===4&&this.status===200){if(W.responseText===""){return}if(T){r(V,JSON.parse(W.responseText),T);L(JSON.stringify(T),U)}else{L(W.responseText,U)}}};W.open("GET",U,true);W.send()}};function N(T){if(document.readyState==="complete"||document.readyState==="interactive"){setTimeout(T,1)}else{document.addEventListener("DOMContentLoaded",T)}}function j(){if(y===null){return}var T=Date.now();if(i!=null){var V=T-i;if(V<500){return}}i=T;for(var U=0;U<Q.length;U++){if(k.indexOf(Q[U])===-1){k.push(Q[U])}}b(k)}var y=function(U,T){j()};function F(){if(typeof y.disconnect==="function"){w();y.disconnect()}y=null}function I(T,V){if(typeof T!=="string"){return T}var X=T.trim();var U=[];if(V){var W=V.split('");');W.splice(W.length-1,1);W.forEach(function(Z){var Y={optionSelected:null,filterText:""};var aa=Z.split('("');Y.optionSelected=aa[0];if(aa[1]){Y.filterText=aa[1]}U.push(Y)})}U.forEach(function(ab){if(X==null){return T}var af=X.toLowerCase();var ae=ab.filterText.toLowerCase();switch(ab.optionSelected){case"BEFORE":if(ab.filterText){var Y=af.indexOf(ae);if(Y>=0){X=X.slice(0,Y)}else{X=""}}break;case"AFTER":if(ab.filterText){var Y=af.indexOf(ae);if(Y>=0){X=X.slice(Y+ae.length)}else{X=""}}break;case"OMIT":X=X.split(ab.filterText).join("");break;case"NUMBER":var aa=T;n.innerHTML=aa;T=n.innerText;var ac=/(\+|-)*((\d+[.]\d*)|(\d*[.]\d+)|\d+)/mi;var ad=new RegExp(ac);var Z=ad.exec(X);Z?X=Z[0]:X=null;break;case"NONNUMBER":X=X.replace(/\d+/gm,"");break}});return X?X:T}function r(Y,Z,V){if(Z==null||Z.length===0){return}var ab=Y.split("~");var U=V;for(var X=1;X<=ab.length;X++){var ac=ab[X-1];if(X%2===0){if(U.length==0){var aa=ab.slice(0,X).join("_");U.push({"@type":ac,"@id":V["@id"]+"_"+aa});U=U[0];continue}if(U[0]["@type"]===undefined){U[0]["@type"]=ac;U=U[0];continue}var T=false;for(var W=0;W<U.length;W++){if(U[W]["@type"]==ac){U=U[W];T=true;break}}if(T==false){var aa=ab.slice(0,X).join("_");U.push({"@type":ac,"@id":V["@id"]+"_"+aa});U=U[U.length-1]}}else{if(X===ab.length){if(U[ac]!==undefined&&U[ac].constructor==Array){U[ac]=U[ac].concat(Z)}else{if(Z.constructor===Object){U[ac]=[Z]}else{if(U[ac]!=null){U[ac]=[Z,U[ac]]}else{U[ac]=Z}}}}else{if(U[ac]===undefined){U[ac]=[]}}U=U[ac]}}}function t(T){try{var V=window[T];V.setItem("test","test");V.removeItem("test")}catch(U){return false}return true}function L(V,U){var T=C[U];if(T==null||T==undefined){var T=document.createElement("script");T.type="application/ld+json";if(window.schema_highlighter.output){document.getElementsByTagName("head")[0].appendChild(T)}C[U]=T}T.innerHTML=V}function q(T){if(t("sessionStorage")){window.sessionStorage.setItem(p,JSON.stringify(T))}}var g=function(){var U=l(K,"Organization",O.gist).pop();var T=m(K,U,O.gist+"describedIn").pop();if(T==null){return null}return T.replace("http://schemaapp.com/db/","")};function w(){var T=window.location.origin+window.location.pathname;var Y=g();if(Y===null){return}var aa=Y.split("/");var V=[];try{for(var U in C){var Z=C[U].innerHTML;V.push(Z)}if(V.length==1){V=V[0]}for(var U in C){if(U.indexOf("https://data.schemaapp.com")!=-1){continue}var W={AccountId:aa[0],SubAccount:aa[1]!==undefined?aa[1]:"",DateSeen:"2019-12-17",Source:"HighlightJS:"+U,Domain:window.location.origin,URL:T,Json:V};var ac=new XMLHttpRequest();ac.open("POST",A,true);ac.setRequestHeader(o,h);ac.setRequestHeader("content-type","application/json");var ab=JSON.stringify(W);ac.send(ab)}}catch(X){}}function s(){var V=window.location.protocol+"//"+window.location.host;var U=btoa(unescape(V)).replace(/=/g,"");var T=M+"/highlighter/prod/"+U;var W=new XMLHttpRequest();W.onreadystatechange=function(){if(this.readyState==4&&this.status==200){K=JSON.parse(W.responseText);N(D);q(K)}};W.open("GET",T,true);W.send()}function D(){var U=l(K,"HighlightTemplate");var T=[location.protocol,"//",location.host,location.pathname].join("");U.forEach(function(am){var ae=true;var ad=K[am];if(ad[O.high+"pattern"]===undefined){return}for(var aj=0;aj<ad[O.high+"pattern"].length;aj++){var V=ad[O.high+"pattern"][aj];var ak=K[V.value];var ah=ak[O.gist+"categorizedBy"];var al=ak[O.gist+"hasMember"];for(var ai=0;ai<al.length;ai++){var Z=ah[0];var ag=Z.value.replace(O.high,"");var aa=ak[O.gist+"hasMember"][ai];var ac=aa.value;if(ag==="GlobCollection"){if(H(T,ac)){ae=false}}else{if(ag==="XPathCollection"){var an=document.evaluate(ac,document);if(an.resultType===3&&an.booleanValue){ae=false;continue}if(an.resultType==4){var X=document.evaluate(ac,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE);if(X.snapshotLength>0){ae=false}}}else{if(ac.toLowerCase().trim()==T.toLowerCase()){ae=false}}}}}if(!ae){var Y="";if(ad[O.rdfs+"label"]!==undefined){var ab=ad[O.rdfs+"label"].pop();if(ab!==undefined){Y=ab.value}}var af=false;for(var aj=0;aj<Q.length;aj++){var W=Q[aj];if(W==am){af=true}}if(af===false){console.log("Pushing Template ("+Y+") with uri: "+am);Q.push(am)}}});if(Q.length>0){b(Q,true)}}function e(aa,V){var T=[];for(var X=0;X<aa.length;X++){var Z=aa[X];var U=m(K,Z,O.rdf+"type");var W=K[Z];if(W==undefined){return}var ad=P(U[0],W);var ac=ad[0];var Y=ac[O.high+"propertyPath"][0].value;var ab=G.extract(ad,document,V);if(ab!=null&&ab.constructor===Array){T.push(ab[1]);ab=ab[0]}r(Y,ab,V)}return T}function f(ad,Y,ah,W){if(ah==undefined||ah[O.high+"xPath"]==undefined){return}var X=ah[O.high+"xPath"][0]["value"];var ac=[];var Z=ah[O.high+"propertyPath"][0]["value"].split("~");var af=ah[O.high+"propertyPath"][0]["value"];var ae=undefined;var ag=af;if(Z.length>1){ae=Z.pop();ag=Z.join("~")}var T=document.evaluate(X,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE);if(T.snapshotLength==0){window.setTimeout(function(){j()},100)}for(var ab=0;ab<T.snapshotLength;ab++){var aa=T.snapshotItem(ab);if(ae){var V={"@type":ae,"@id":window.location.href+"#"+ae.replace("http://schema.org/","")+"_"+W};if(ae==="ListItem"){V.position=ab}}ad.forEach(function(aq){var al=m(K,aq,O.rdf+"type");var ao=K[aq];var ar=null;var au=P(al[0],ao);var at=au[0];if(ao[O.rdf+"type"][0]["value"]===O.high+"TagXPath"){if(!ao[O.high+"xPath"]){ar="text()";ao[O.high+"xPath"]=[{value:ar}]}else{ar=ao[O.high+"xPath"][0]["value"]}if(ar.indexOf("|")===-1&&ar.indexOf("(")===0){ar=ar.slice(2,-1)}else{if(ar!="text()"){var ak=ar.replace(/^\(|\)$/gm,"").trim().split("|");var aj=[];for(var an=0;an<ak.length;an++){var ai=ak[an].trim();if(ai.indexOf("//")===0){ai=ai.slice(2)}if(ai.indexOf("/")===0){ai=ai.slice(1)}aj.push(ai)}ar="( "+aj.join(" | ")+" )"}}if(ar.indexOf("//")===0){ao[O.high+"xPath"][0]["value"]=ar.slice(2)}else{if(ar.indexOf("contains")===-1){ao[O.high+"xPath"][0]["value"]=ar.indexOf("/")==0?ar.slice(1):ar}else{ao[O.high+"xPath"][0]["value"]=ar}}if(ar===""){ao[O.high+"xPath"][0]["value"]="."}}var au=P(al[0],ao);var at=au[0];var ap="";if(at[O.high+"propertyPath"]===undefined){ap=af}else{ap=at[O.high+"propertyPath"][0].value}if(at[O.high+"useDocumentContext"]&&at[O.high+"useDocumentContext"][0].value==="true"){var am=G.extract(au)}else{var am=G.extract(au,aa,V)}if(am!=null&&am.constructor===Array){am=am[0]}if(ae){r(ap,am,V)}else{V=am}});W++;ac.push(V)}r(ag,ac,Y);var U=null;if(T.snapshotLength>0){U=T.snapshotItem(0).parentNode.parentNode}return{resource:Y,objectCount:T.snapshotLength,nodes:U}}function b(ak,U){var am=[];for(var ad=0;ad<ak.length;ad++){var an=ak[ad];try{var Z=m(K,an,O.gist+"categorizedBy");var ac={"@context":"http://schema.org/","@type":Z,"@id":window.location.href+"#"+Z[0].replace("http://schema.org/",""),url:window.location.href};var al=[];var T=[];var X=m(K,an,O.high+"hasHighlight");for(var V=0;V<X.length;V++){var ai=X[V];var ab=m(K,ai,O.rdf+"type");if(ab==O.high+"TagList"){T.push(ai)}else{al.push(ai)}}var af=e(al,ac);var ae=0;for(var W=0;W<T.length;W++){var ai=T[W];var Y=K[ai];var ag=m(K,ai,O.high+"hasTemplate");var X=m(K,ag,O.high+"hasHighlight");res=f(X,ac,Y,ae);if(res){ac=res.resource;ae+=res.objectCount;af=af.concat(res.nodes)}}L(JSON.stringify(ac),an);am.push(JSON.parse(JSON.stringify(ac)));if(U){y=new MutationObserver(y);for(var ah=0;ah<af.length;ah++){if(af[ah]!=null){y.observe(af[ah],z)}}}}catch(aj){}finally{var aa=k.indexOf(an);if(aa>-1){k.splice(aa,1)}if(U){window.setTimeout(F,10000)}}}if(U){try{w(am,ak)}catch(aj){}}}function m(U,V,T){var X=[];for(var W in U[V]){if(W===T){for(var Y in U[V][W]){if(U[V][W][Y].type==="uri"){X.push(U[V][W][Y].value)}else{if(U[V][W][Y].type==="literal"){X.push(U[V][W][Y].value)}}}}}return X}function l(T,V,X){if(X===undefined){X=O.high}var Y=[];for(var U in T){for(var W in T[U]){if(W===O.rdf+"type"){if(T[U][W][0].value===(X+V)){Y.push(U)}}}}return Y}function P(U,T){if(U===(O.high+"TagXPath")||U===(O.high+"TagXPathDefined")){return G.construct(T,G.tagTypes.TagXPath)}else{if(U===(O.high+"TagDefined")){return G.construct(T,G.tagTypes.TagDefined)}else{if(U===(O.high+"TagStoredResource")){return G.construct(T,G.tagTypes.TagStoredResource)}else{if(U===(O.high+"TagYouTube")){return G.construct(T,G.tagTypes.TagYouTube)}else{if(U===(O.high+"TagLookup")){return G.construct(T,G.tagTypes.TagLookup)}}}}}throw new TypeError("Tag Factory unable to create class "+U)}function u(U){var V=[];if(U.children){for(var T=0;T<U.children.length;T++){var W=U.children[T];u(W);if(W.localName.toLowerCase()==="script"){V.push(W)}}}for(var T=0;T<V.length;T++){U.removeChild(V[T])}}function H(aa,Z){if(Z.charAt(0)!=="/"){Z="/"+Z}aa=aa.replace(new RegExp(".+://"),"");var U=aa.split("/");var V=Z.split("/");for(var W=1;W<U.length;W++){var T=U[W].toLowerCase();if(V.length>W){var Y=V[W].toLowerCase();if(Y.length===0){continue}if(Y==="*"){continue}else{if(Y==="**"){return true}else{var X=Y;completeMatch=false;if(Y.includes("**")){X=Y.replace("**","*");completeMatch=true}X=X.replace("*",".*");X="^"+X+"$";if(T.match(new RegExp(X))){if(completeMatch){return true}continue}}}if(T!==Y){return false}}else{return false}}return(W>=V.length)}window.schema_highlighter=window.schema_highlighter||{output:true,key:null};if(typeof document.evaluate==="function"){if(t("sessionStorage")){var E=window.sessionStorage.getItem(p);if(E!==null){K=JSON.parse(E);N(D)}}if(K==null){s()}}})();