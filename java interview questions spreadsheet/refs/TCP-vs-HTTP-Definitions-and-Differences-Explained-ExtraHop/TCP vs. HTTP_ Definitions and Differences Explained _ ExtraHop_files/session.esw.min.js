window.esw.defineFeature("Session",function(b){function f(){b.addMessageHandler("session.set",this.setSessionData.bind(this));b.addMessageHandler("session.get",function(h,g){parent.postMessage({method:"session.sessionData",data:this.getSessionData(h,g)},b.parentOrigin);}.bind(this));b.addMessageHandler("session.delete",this.deleteSessionData.bind(this));}f.prototype.getKeyName=function d(h,g){if(g!==undefined&&g!==null&&typeof g==="string"){return h+g;}else{throw new Error("key is a required parameter must be a string, cannot be undefined or null");}};f.prototype.getSessionData=function c(j,i,g){var h={};var k;if(g){k=localStorage;}else{k=sessionStorage;}if(j&&i){i.forEach(function(l){h[l]=k.getItem(this.getKeyName(j,l));}.bind(this));}else{throw new Error("getSessionData requires two non-null arguments (domain, keys).");}return h;};f.prototype.deleteSessionData=function e(i,h,g){var j;if(g){j=localStorage;}else{j=sessionStorage;}if(i&&h){h.forEach(function(k){j.removeItem(this.getKeyName(i,k));if(k==="MASTER_DEPLOYMENT_ID"){parent.postMessage({method:"session.updateMaster",data:{isMaster:false}},b.parentOrigin);}}.bind(this));parent.postMessage({method:"session.deletedSessionData",data:h},b.parentOrigin);}else{throw new Error("deleteSessionData requires two non-null arguments (domain, keys).");}};f.prototype.setSessionData=function a(i,h,g){var j;if(g){j=localStorage;}else{j=sessionStorage;}if(i&&h){Object.keys(h).forEach(function(k){j.setItem(this.getKeyName(i,k),h[k]);if(k==="MASTER_DEPLOYMENT_ID"){parent.postMessage({method:"session.updateMaster",data:{isMaster:true}},b.parentOrigin);}}.bind(this));}else{throw new Error("setSessionData requires two non-null arguments (domain, data).");}};b.sessionAPI=new f();});