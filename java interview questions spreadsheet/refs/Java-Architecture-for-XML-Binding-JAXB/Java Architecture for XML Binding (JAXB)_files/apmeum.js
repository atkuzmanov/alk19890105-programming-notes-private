window.apmeum=window.apmeum||{};"undefined"==typeof console&&(console={});"undefined"==typeof console.log&&(console.log=function(){});
"undefined"===typeof apmeum.KEY_RESPONSE_HEADER_OPERATION_ID&&(apmeum.KEY_RESPONSE_HEADER_OPERATION_ID="X-ORACLE-APMCS-REQUEST-ID",apmeum.KEY_RESPONSE_HEADER_ECID="X-ORACLE-DMS-ECID",apmeum.KEY_RESPONSE_HEADER_AGENT_TAG="X-ORACLE-APMCS-TAG",apmeum.XHR_OPEN_FAILED=-1,apmeum.util={},apmeum.util.checkIsFunction=function(c){return c&&"[object Function]"===apmeum.toString.apply(c)},apmeum.util.getBooleanValue=function(c){if("boolean"!==typeof c){if(""==""+c||"0"==""+c)return!1;if("1"==""+c||"TRUE"==(""+
c).toUpperCase())return!0;if("FALSE"==(""+c).toUpperCase())return!1}else return c},apmeum.util.getCookie=function(c){if(!document.location.protocol||"http:"!=document.location.protocol&&"https:"!=document.location.protocol&&"file:"!=document.location.protocol)return"";try{var d=document.cookie.indexOf(c+"\x3d");if(-1!=d){var d=d+c.length+1,b=document.cookie.indexOf(";",d);-1==b&&(b=document.cookie.length);return decodeURIComponent(document.cookie.substring(d,b))}}catch(a){apmeum.debug&&console.log("apmeum.js: Unable to get cookie due to exception: "+
a)}return""},apmeum.util.cleanUpStr=function(c){return!c?"":c.replace(/[ \r\n\t\f\v][ \r\n\t\f\v]*/g," ").replace(/^(.{80})(..*)/g,"$1...")},apmeum.util.getElementTreeXPath=function(c){var d=[];if(c&&9==c.nodeType)return"/";for(;c&&(2==c.nodeType||3==c.nodeType);)c=c.parentNode;for(;c&&1==c.nodeType;c=c.parentNode){for(var b=0,a=c.previousSibling;a;a=a.previousSibling)a.nodeType!=Node.DOCUMENT_TYPE_NODE&&a.nodeName==c.nodeName&&++b;a=c.nodeName.toLowerCase();d.splice(0,0,a+(b?"["+(b+1)+"]":""))}return d.length?
"/"+d.join("/"):""},apmeum.util.getElementXPath=function(c){return c&&c.id?'//*[@id\x3d"'+c.id+'"]':apmeum.util.getElementTreeXPath(c)},apmeum.util.getElmText=function(c){var d=window.apmeum;c=d.util.checkIsFunction(d.getElmLabel)?d.getElmLabel(c):d.getAllowTrackScreenText()?c.hasAttribute("aria-label")?c.getAttribute("aria-label"):c.title?c.title:d.util.checkIsFunction(c.text)?c.text():c.innerText?c.innerText:c.textContent?c.textContent:""+d.util.getElementXPath(c):"";return d.util.cleanUpStr(c)},
apmeum.util.getUrlInfo=function(c){var d=(""+window.location).split("#",1)[0],b=""+d.split("?",1).join("?").split("/",3).join("/"),d=d.substring(b.length),b={host:b,path:d};apmeum.rewriteURL(c,b);b.path=b.path.split("?",1).join("?");c={sba:b.host,rp:b.path};window.location.search&&(c.qp=window.location.search);window.location.hash&&(c.hp=window.location.hash);return c},apmeum.getBrowserType=function(){return window.chrome&&window.chrome.webstore?"chrome":"undefined"!==typeof InstallTrigger?"firefox":
document.documentMode?"ie":window.opr&&opr.addons||window.opera||0<=navigator.userAgent.indexOf(" OPR/")?"opera":0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")?"safari":window.StyleMedia?"edge":"unknown"},apmeum.getAllowTrackScreenText=function(){return apmeum.hasOwnProperty("trackScreenText")?apmeum.util.getBooleanValue(apmeum.trackScreenText):!0},apmeum.applyRewriteRules=function(c,d,b){var a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(!a||!c||
""==c)return c;a.rewriteRules instanceof Array||(a.rewriteRules=[{pattern:'(([^\x3c\x3e()\\[\\]\\\\.,;:\\s@"]+(\\.[^\x3c\x3e()\\[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))',replacement:"*"},{pattern:"([a-fA-F\\.,_\\:-]*[0-9]+){2,}[a-fA-F_\\:-]*([/\\.])?",replacement:"*$2"}]);for(var g=a.rewriteRules,f=0;f<g.length;f++)if(!g[f]instanceof Object)console.log("Invalid element in apmeum.rewriteRules at "+f+" position, ignoring rule.");
else if(g[f].element||(g[f].element="all"),"path"!=g[f].element&&"host"!=g[f].element&&"all"!=g[f].element)console.log("Invalid element for apmeum.rewriteRules at "+f+" position (element should be either path, host, or all).");else{if(g[f].type){if("page"!=g[f].type&&"ajax"!=g[f].type){console.log("Invalid type for apmeum.rewriteRules at "+f+" position (type should be either page or ajax).");continue}if(b&&b!=g[f].type)if(a.debug){console.log("Ignoring apmeum.rewriteRules at "+f+" position (because it's irrelevant for "+
b+").");continue}else a.debug&&5<a.debug&&console.log("Applying rule ("+f+") on "+b+" urls.")}else a.debug&&5<a.debug&&console.log("Applying rule ("+f+") on both page and ajax urls.");var l="g";"options"in g[f]&&(l=g[f].options,"string"!==typeof l&&(console.log("Ignoring non-string options for apmeum.rewrite rule #"+f),l="g"));if(!("regex"in g[f]&&g[f].regex instanceof RegExp)){if(!1 in g[f]){console.log("Invalid element in apmeum.rewriteRules at "+f+" position (no pattern).");continue}g[f].regex=
RegExp(g[f].pattern,l)}if(!1 in g[f])console.log("Invalid element in apmeum.rewriteRules at "+f+" position (no replacement).");else{var l=g[f].replacement,h=g[f].element;if("all"==h||d&&d==h)c=c.replace(g[f].regex,l)}}return c},apmeum.rewriteURL=function(c,d){var b=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;b&&(!d instanceof Object&&d?console.log("Invalid urlinfo parameter applying rewrite rules for "+c+"."):!d.host instanceof String?console.log("Invalid urlinfo['host'] parameter applying rewrite rules for "+
c+"."):!d.path instanceof String?console.log("Invalid urlinfo['path'] parameter applying rewrite rules for "+c+"."):(d.path=b.applyRewriteRules(d.path,"path",c),d.host=b.applyRewriteRules(d.host,"host",c),d.path instanceof String&&"/"!==d.path.charAt(0)&&(d.path="/"+d.path)))},apmeum.rewriteQueryParams=function(c){for(var d="",b=0;b<c.length;){var a=c.indexOf("\x3d",b);if(-1==a){d+=c.substring(b,c.length);break}a++;d+=c.substring(b,a);b=a;a=c.indexOf("\x26",b);-1==a&&(a=c.length);d+=encodeURIComponent(apmeum.applyRewriteRules(decodeURIComponent(c.substring(b,
a))));b=a}return d},apmeum.needMonitor=function(c){var d=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(d){var b=d.getBrowserType(),a=d.obs;b&&(d.hasOwnProperty("typeobs")&&d.typeobs.hasOwnProperty(b))&&(a=d.typeobs[b]);return"undefined"!=typeof a&&0==(a&c)?!1:!0}},apmeum.opt=function(){var c=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(c){var d=[],b=[],a=[],g=[],f,l=2048-(c.baseCollectorUrl?c.baseCollectorUrl.length:0),h=0,t="",v=function(){var c=window.apmeum?
window.apmeum:document.apmeum?document.apmeum:null;if(c&&0!=b.length){for(var h=p("call"),a=h.extraParams,y=n(b[0]),a=a+y,d,g=0,e=0;e<b.length&&10>e&&n(b[e])==y;e++){b[e].apmeum_endTime<b[e].apmeum_respTime&&(b[e].apmeum_endTime=b[e].apmeum_respTime);d="\x26ct"+e+"\x3d"+encodeURIComponent(b[e].apmeum_url)+"\x26csm"+e+"\x3d"+encodeURIComponent(b[e].apmeum_syncMode)+"\x26csl"+e+"\x3d"+encodeURIComponent(b[e].apmeum_sentLength)+"\x26crl"+e+"\x3d"+encodeURIComponent(b[e].apmeum_respLength)+"\x26cs"+e+
"\x3d"+encodeURIComponent(b[e].apmeum_startTime)+"\x26cr"+e+"\x3d"+encodeURIComponent(b[e].apmeum_respTime)+"\x26ce"+e+"\x3d"+encodeURIComponent(b[e].apmeum_endTime)+"\x26cm"+e+"\x3d"+encodeURIComponent(b[e].apmeum_method);if(b[e].apmeum_active_pgupd)d+="\x26cpu"+e+"\x3d"+encodeURIComponent(b[e].apmeum_active_pgupd.startTime);else if("complete"!=document.readyState){navstart=0;try{navstart=window.performance.timing.navigationStart}catch(f){navstart=0}0<navstart&&(d+="\x26cpu"+e+"\x3d"+navstart)}b[e].apmeum_user&&
(d+="\x26cu"+e+"\x3d"+encodeURIComponent(b[e].apmeum_user));b[e].apmeum_statuscode&&(100<b[e].apmeum_statuscode&&600>b[e].apmeum_statuscode)&&(d+="\x26crs"+e+"\x3d"+encodeURIComponent(b[e].apmeum_statuscode));b[e].apmeum_status&&(d+="\x26cst"+e+"\x3d"+encodeURIComponent(b[e].apmeum_status));b[e].apmeum_operationId&&(d+="\x26oi"+e+"\x3d"+encodeURIComponent(b[e].apmeum_operationId));b[e].apmeum_ecid&&(d+="\x26ecid"+e+"\x3d"+encodeURIComponent(b[e].apmeum_ecid));b[e].apmeum_webappTag&&(d+="\x26tg"+e+
"\x3d"+encodeURIComponent(b[e].apmeum_webappTag));if(l<d.length+q(h)+g.toString().length+22&&0!=e)break;a+=d;h.extraParams=a;g+=1}a+="\x26sz\x3d"+encodeURIComponent(g);b.splice(0,g);h.extraParams=a;c.invokeRequest(h);0<b.length&&v()}},r=function(){var b=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(b&&0!=a.length){for(var c=p("error"),h=c.extraParams,d=n(a[0]),h=h+d,g,f=0,e=0;e<a.length&&10>e&&n(a[e])==d;e++){g="\x26em"+e+"\x3d"+encodeURIComponent(a[e].message)+"\x26sf"+e+"\x3d"+
encodeURIComponent(a[e].file)+"\x26ln"+e+"\x3d"+encodeURIComponent(a[e].line)+"\x26lc"+e+"\x3d"+encodeURIComponent(a[e].col)+"\x26es"+e+"\x3d"+encodeURIComponent(JSON.stringify(a[e].err))+"\x26fs"+e+"\x3d"+encodeURIComponent(a[e].startTime)+"\x26ec"+e+"\x3d"+encodeURIComponent(a[e].count)+"\x26el"+e+"\x3d"+encodeURIComponent(a[e].lastime);if(l<g.length+q(c)+f.toString().length+22&&0!=e)break;h+=g;c.extraParams=h;f+=1}h+="\x26sz\x3d"+encodeURIComponent(f);a.splice(0,f);c.extraParams=h;b.invokeRequest(c);
0<a.length&&r()}},A=function(){var b=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(b&&0!=d.length){for(var c=p("event"),h=c.extraParams,a,g=0,f=0;f<d.length&&10>f;f++){a="\x26ec"+f+"\x3d"+encodeURIComponent(d[f].category)+"\x26ev"+f+"\x3d"+encodeURIComponent(d[f].value)+"\x26es"+f+"\x3d"+encodeURIComponent(d[f].start)+"\x26ee"+f+"\x3d"+encodeURIComponent(d[f].end);d[f].label&&(a+="\x26el"+f+"\x3d"+encodeURIComponent(d[f].label));if(l<a.length+q(c)+g.toString().length+22&&0!=
f)break;h+=a;c.extraParams=h;g+=1}h+="\x26sz\x3d"+encodeURIComponent(g);d.splice(0,g);c.extraParams=h;b.invokeRequest(c);0<d.length&&A()}},B=function(){var b=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(b&&0!=g.length){for(var c=p("pgupd"),h=c.extraParams,a=n(g[0]),h=h+a,d,f=0,e=0;e<g.length&&10>e&&n(g[e])==a;e++){d="\x26xp"+e+"\x3d"+encodeURIComponent(g[e].pgupd_id)+"\x26pn"+e+"\x3d"+encodeURIComponent(b.applyRewriteRules(g[e].pgupd_name))+"\x26vi"+e+"\x3d"+encodeURIComponent(g[e].vis_impact)+
"\x26st"+e+"\x3d"+encodeURIComponent(g[e].state)+"\x26as"+e+"\x3d"+encodeURIComponent(g[e].startTime)+"\x26fs"+e+"\x3d"+encodeURIComponent(g[e].fetchStart)+"\x26fb"+e+"\x3d"+encodeURIComponent(g[e].firstByte)+"\x26cc"+e+"\x3d"+encodeURIComponent(g[e].ajaxcnt)+"\x26je"+e+"\x3d"+encodeURIComponent(g[e].jserrcnt)+"\x26ae"+e+"\x3d"+encodeURIComponent(g[e].endTime);if(l<d.length+q(c)+f.toString().length+22&&0!=e)break;h+=d;c.extraParams=h;f+=1}h+="\x26sz\x3d"+encodeURIComponent(f);g.splice(0,f);c.extraParams=
h;b.invokeRequest(c);0<g.length&&B()}},w=0,p=function(b){var c=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(c){var h="",a="",h="v\x3d1\x26t\x3d"+b;c.customerId?a+="\x26X-USER-IDENTITY-DOMAIN-NAME\x3d"+encodeURIComponent(c.customerId):console.log("Oracle APM Browser agent cannot send data to cloud without valid apmeum.customerId. Please verify your configuration");b=c.util.getUrlInfo("page");a+="\x26sba\x3d"+encodeURIComponent(c.applyRewriteRules(b.sba));a+="\x26rp\x3d"+encodeURIComponent(c.applyRewriteRules(b.rp));
b.qp&&(a+="\x26qp\x3d"+encodeURIComponent(c.rewriteQueryParams(b.qp)));b.hp&&(a+="\x26hp\x3d"+encodeURIComponent(b.hp));c.operationId&&(a+="\x26oi\x3d"+encodeURIComponent(c.operationId));c.ecid&&(a+="\x26ecid\x3d"+encodeURIComponent(c.ecid));c.webapp_tag&&(a+="\x26tg\x3d"+encodeURIComponent(c.webapp_tag));c.agentId&&(a+="\x26sak\x3d"+encodeURIComponent(c.agentId));c.agentVersionKey&&(a+="\x26sav\x3d"+encodeURIComponent(c.agentVersionKey));c.sid&&(a+="\x26sid\x3d"+encodeURIComponent(c.sid));c.pos2&&
(a+="\x26pos2\x3d"+encodeURIComponent(c.pos2));c.pos&&(a+="\x26pos\x3d"+encodeURIComponent(c.pos));c.atk&&(a+="\x26atk\x3d"+encodeURIComponent(c.atk));c.username&&(a+="\x26un\x3d"+encodeURIComponent(c.username));b=c.util.getCookie("oracle_apm_syndye");c=c.util.getCookie("oracle_apm_testguid");b?a+="\x26sd\x3d"+encodeURIComponent(b):c&&(a+="\x26sd\x3d"+encodeURIComponent(c));return{typeParams:h,commonParams:a,extraParams:""}}},n=function(b){var h;h="\x26dt\x3d"+encodeURIComponent(c.applyRewriteRules(b.dt));
h+="\x26a1\x3d"+encodeURIComponent(c.applyRewriteRules(b.a1));h+="\x26a2\x3d"+encodeURIComponent(c.applyRewriteRules(b.a2));return h+="\x26a3\x3d"+encodeURIComponent(c.applyRewriteRules(b.a3))},q=function(c){var b=0;c&&(b=c.typeParams.length+c.commonParams.length+c.extraParams.length);return b},k=function(c){var b=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(b){v();r();A();B();var h=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(h)if(void 0===window.performance||
!h.util.checkIsFunction(window.performance.getEntriesByType))h.debug&&4<h.debug&&console.log("apmeum.js: performance.getEntriesByType() is not supported by this browser ignoring performance metrics.");else{var a=0,d=0,g=0,e=0,t=0,l=0,k=window.performance.getEntriesByType("resource");if(!(void 0===k||0==k.length)){for(var m=w;m<k.length;m++)if(-1==k[m].name.split("?",1).join("?").indexOf("/APMaaSCollector/")){var n=k[m].domainLookupEnd-k[m].domainLookupStart,q=k[m].redirectEnd-k[m].redirectStart,z=
k[m].connectEnd-k[m].connectStart;0<n&&(a+=n,t++);if(0<q||0<z)l++,0<q&&(d+=q),0<z&&(g+=z,0<k[m].secureConnectionStart&&(e=k[m].connectEnd>k[m].secureConnectionStart?e+(k[m].connectEnd-k[m].secureConnectionStart):e+(k[m].secureConnectionStart-k[m].connectEnd)))}"function"==typeof performance.clearResourceTimings?performance.clearResourceTimings():w=k.length;a=Math.round(a);d=Math.round(d);g=Math.round(g);e=Math.round(e);0==a&&0==d&&0==g&&0==e?h.debug&&4<h.debug&&console.log("apmeum.js: No relevant timings, not sending perf info"):
(k=p("perf"),k.extraParams+="\x26td\x3d"+encodeURIComponent(a)+"\x26tr\x3d"+encodeURIComponent(d)+"\x26tc\x3d"+encodeURIComponent(g)+"\x26ts\x3d"+encodeURIComponent(e)+"\x26tdn\x3d"+encodeURIComponent(t)+"\x26tcn\x3d"+encodeURIComponent(l),h.invokeRequest(k))}}h=!1;b.combinedPost&&(b.combinedPost.messageArray&&0<b.combinedPost.messageArray.length)&&(h=!b.combinedPost.send(c));f=null;!0==h&&s()}},s=function(){f||(f=setTimeout(k,2E3))};return{collectPage:function(){if(c.needMonitor(1)){var b=window.apmeum?
window.apmeum:document.apmeum?document.apmeum:null;if(b){var h;h=null;if(window.performance&&window.performance.timing){h={};var a=window.performance.timing;h.navigationStart=a.navigationStart;h.responseStart=a.responseStart;h.domInteractive=a.domInteractive;h.domReady=a.domContentLoadedEventEnd;h.pageReady=a.loadEventEnd}else if(h=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null){var a={},d;if(d=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null){var g=d.util.getCookie("apmeum-navigationStart"),
f=Number(d.util.getCookie("apmeum-pd")),e=Number(d.util.getCookie("apmeum-pr"));d=f&&f==document.referrer.hashCode()||3E4>d.time()-Number(g)&&(f==document.URL.hashCode()&&e==document.referrer.hashCode()||document.referrer&&document.URL.hashCode()==e)?g:0}else d=void 0;a.navigationStart=d?Number(d):0;a.responseStart=h.responseStart?h.responseStart:0;a.domInteractive=0;a.domReady=h.domReady?h.domReady:0;a.pageReady=h.time();0==a.navigationStart&&(a.pageReady-=a.responseStart,a.domReady-=a.responseStart,
a.responseStart=0);h=a}else h=void 0;if((a=b.util.getCookie("apmCorrPage"))&&0<a.length)corrCookieFld=a.split("|"),2<corrCookieFld.length&&(b.operationId||(b.operationId=corrCookieFld[0]),b.agentId||(b.agentId=corrCookieFld[1]),b.agentVersionKey||(b.agentVersionKey=corrCookieFld[2]));a=p("pageview");d=a.extraParams;d+="\x26ns\x3d"+encodeURIComponent(h.navigationStart)+"\x26rs\x3d"+encodeURIComponent(h.responseStart)+"\x26di\x3d"+encodeURIComponent(h.domInteractive)+"\x26dr\x3d"+encodeURIComponent(h.domReady)+
"\x26pr\x3d"+encodeURIComponent(h.pageReady);d+="\x26sw\x3d"+encodeURIComponent(screen.width)+"\x26sh\x3d"+encodeURIComponent(screen.height)+"\x26spd\x3d"+encodeURIComponent(screen.colorDepth);window.outerHeight&&(d+="\x26ww\x3d"+encodeURIComponent(outerWidth||document.documentElement.clientWidth||document.body.clientWidth)+"\x26wh\x3d"+encodeURIComponent(outerHeight||document.documentElement.clientHeight||document.body.clientHeight)+"\x26dw\x3d"+encodeURIComponent(innerWidth||document.documentElement.clientWidth||
document.body.clientWidth)+"\x26dh\x3d"+encodeURIComponent(innerHeight||document.documentElement.clientHeight||document.body.clientHeight));d+="\x26de\x3d"+encodeURIComponent(document.charset?document.charset:document.characterSet);d+="\x26dt\x3d"+encodeURIComponent(b.applyRewriteRules(b.eventAttributes.getPageName()));d+="\x26a1\x3d"+encodeURIComponent(b.applyRewriteRules(b.eventAttributes.getAttr1()));d+="\x26a2\x3d"+encodeURIComponent(b.applyRewriteRules(b.eventAttributes.getAttr2()));d+="\x26a3\x3d"+
encodeURIComponent(b.applyRewriteRules(b.eventAttributes.getAttr3()));b.statusCode&&(d+="\x26sc\x3d"+encodeURIComponent(b.statusCode));d+="\x26drf\x3d"+encodeURIComponent(b.applyRewriteRules(document.referrer));a.extraParams=d;a.needReGetPageName=!0;b.invokeRequest(a)}s()}},collectCalls:function(h){c.needMonitor(2)&&(b[b.length]=h,s())},collectErrors:function(b,c,d,g,f,k){var e=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(e&&e.needMonitor(4)){var v="",l="",w="",m="";e.eventAttributes&&
(e.util.checkIsFunction(e.eventAttributes.getPageName)&&(v=e.eventAttributes.getPageName()),e.util.checkIsFunction(e.eventAttributes.getAttr1)&&(l=e.eventAttributes.getAttr1()),e.util.checkIsFunction(e.eventAttributes.getAttr2)&&(w=e.eventAttributes.getAttr2()),e.util.checkIsFunction(e.eventAttributes.getAttr3)&&(m=e.eventAttributes.getAttr3()));var r="";e.spa.active_pgupd&&(r=e.spa.active_pgupd.pgupd_id,e.spa.active_pgupd.errcnt++);if(0<a.length&&2E3>k-h&&r==t){e=a.length-1;if(b===a[e].message&&
c===a[e].file&&g===a[e].col&&f===a[e].err&&v===a[e].dt&&l===a[e].a1&&w===a[e].a2&&m===a[e].a3){a[e].count++;a[e].lastime=k;return}h=k;t=r}a[a.length]={lastime:k,count:1,message:b,file:c,line:d,col:g,err:f,startTime:k,dt:v,a1:l,a2:w,a3:m};s()}},spa:{trackHistoryChange:function(b,c){var h=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(h&&h.needMonitor(16)){if(h.spa.active_pgupd){var a=h.util.getUrlInfo("page");h.option.spa.updatePgUpd(a)}else h.option.spa.startPgUpd(h.time(),b,
c);h.spa.active_pgupd.vis_impact=h.spa.util.FULL_UPDATE}},startPgUpd:function(b,h,c){var a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(a&&a.needMonitor(16)){a.spa.active_pgupd&&(a.spa.active_pgupd.noRunningAjaxs()||(a.spa.active_pgupd.state="aborted"),a.option.spa.endPgUpd(b));var d=a.util.getUrlInfo("page");a.spa.active_pgupd={startTime:b,endTime:0,pgupd_id:h,pgupd_name:c,vis_impact:a.spa.util.PARTIAL_UPDATE,state:"success",sba:d.sba,rp:d.rp,jserrcnt:0,ajaxcnt:0,ajax_amount_1second:0,
ajax_amount_test:0,ajax_timeout_amount:0,ajax_abort_amount:0,ajax_error_amount:0,fetchStart:0,firstByte:0,hasFetchStart:function(){return 0!=this.fetchStart?!0:!1},hasFirstByte:function(){return 0!=this.firstByte?!0:!1},isLastAjax:function(){return 0==this.ajax_amount_1second},noRunningAjaxs:function(){return 0==this.ajax_amount_1second},isStartedWithinOneSecond:function(b){return b-a.spa.active_pgupd.startTime<a.spa.util.ONE_SECOND},shouldWait:function(b){return b-a.spa.active_pgupd.endTime<a.spa.util.PGUPD_WAIT_TIME}};
d.qp&&(a.spa.active_pgupd.qp=d.qp);d.hp&&(a.spa.active_pgupd.hp=d.hp);a.spa.active_pgupd.timer=setInterval(function(){a?a.spa.active_pgupd?(0>a.spa.active_pgupd.ajax_amount_1second&&console.log("apmeum.js: apmeum.spa.active_pgupd.ajax_amount_1second should not be less than 0!!! ERROR"),a.debug&&4<a.debug&&console.log("apmeum.js: THE CURRENT PAGE UPDATE IS NOT SENT YET!!!!!!!   Amount of Running Ajax : "+a.spa.active_pgupd.ajax_amount_1second+" Amount of Ajax Fired : "+a.spa.active_pgupd.ajax_amount_test),
0==a.spa.active_pgupd.ajax_amount_1second&&!a.spa.active_pgupd.shouldWait(a.time())&&a.option.spa.endPgUpd(0)):a.debug&&4<a.debug&&console.log("apmeum.js: expecting apmeum.spa.active_pgupd to be populated inside timer function. This is very odd."):console.log("apmeum.js: expecting window.apmeum to be initialized in timer function. This is very odd.")},a.spa.util.PGUPD_POLL_INTERVAL)}},updatePgUpd:function(b){var a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(a){a.spa.active_pgupd||
a.debug&&4<a.debug&&console.log("apmeum.js: expecting apmeum.spa.active_pgupd to be populated when updatePgUpd is called. This is very odd.");for(var h in b)a.spa.active_pgupd[h]=b[h]}},endPgUpd:function(b){var a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(a){a.spa.active_pgupd||a.debug&&4<a.debug&&console.log("apmeum.js: expecting apmeum.spa.active_pgupd to be populated when endPgUpd is called. This is very odd.");a.spa.active_pgupd.timer&&(clearInterval(a.spa.active_pgupd.timer),
delete a.spa.active_pgupd.timer);a.spa.active_pgupd.hasFirstByte()||(a.spa.active_pgupd.vis_impact=a.spa.util.NONE_UPDATE);!b||0==b?a.spa.active_pgupd.endTime||(a.spa.active_pgupd.endTime=a.time()):a.spa.active_pgupd.endTime=b;if("aborted"!=a.spa.active_pgupd.state&&(0!=a.spa.active_pgupd.ajax_abort_amount||0!=a.spa.active_pgupd.ajax_timeout_amount||0!=a.spa.active_pgupd.ajax_error_amount))a.spa.active_pgupd.state="error";a.spa.recordEventAttributes();a.spa.active_pgupd.completeTime=a.spa.active_pgupd.endTime-
a.spa.active_pgupd.startTime;a.debug&&4<a.debug&&console.log("apmeum.js: Page update is ready for sending to collector: "+JSON.stringify(a.spa.active_pgupd));g[g.length]=a.spa.active_pgupd;delete a.spa.active_pgupd;s()}}},collectEvent:function(a,b,h,g,f,t){if(c.needMonitor(8)){if(!a||!b||!h||!g)return"Some required value is empty";d[d.length]={category:a,value:b,start:h,end:g};f&&(d[d.length-1].label=f);s()}},sendAll:k}}},apmeum.option=apmeum.opt(),apmeum.collreachable=0,apmeum.setCollReachable=function(c){this.collreachable=
c},apmeum.invokeRequest=function(c){"bridge"==apmeum.transType?apmeum.pushToBridge(c):("beacon"==apmeum.transType||"fetch"==apmeum.transType)&&!0==apmeum.cmp?apmeum.combinedPost.invoke(c):apmeum.invokeGet(c)},apmeum.pushToBridge=function(c){var d=""+c.typeParams+c.extraParams;c=c.commonParams.split("\x26");for(var b=0;b<c.length;b++){var a=c[b];if(a){var g=a.split("\x3d");if("sba"==g[0]||"rp"==g[0]||"oi"==g[0]||"ecid"==g[0])d+="\x26"+a}}APMBridge.collect(d)},apmeum.invokeGet=function(c){var d=window.apmeum?
window.apmeum:document.apmeum?document.apmeum:null;if(d)if(c=""+c.typeParams+c.commonParams+c.extraParams,"beacon"==d.transType&&"sendBeacon"in navigator)navigator.sendBeacon(d.baseCollectorUrl,c+"\x26cts\x3d"+encodeURIComponent(d.time()));else if(!(1<d.collreachable)&&!(0==c.indexOf("\x26t\x3dpageview\x26")&&0==d.collreachable))if("fetch"==d.transType&&window.fetch)d.debug&&5<d.debug&&console.log("Sending data via fetch to collector: "+c),fetch(d.baseCollectorUrl+c+"\x26cts\x3d"+encodeURIComponent(d.time()),
{method:"get",credentials:"include",mode:"cors"}).then(function(a){(a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null)&&a.setCollReachable(1)})["catch"](function(a){(a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null)&&a.setCollReachable(2)});else{var b=d.pool.getConnection();d.debug&&5<d.debug&&console.log("Sending data via image to collector: "+c);b?(b.onload=function(){var a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;a&&(0<b.naturalWidth?a.setCollReachable(1):
a.setCollReachable(2))},b.src=d.baseCollectorUrl+c+"\x26cts\x3d"+encodeURIComponent(d.time())):d.debug&&console.log("apmeum.js: Unable to get image from connection pool")}},apmeum.time=function(){return(new Date).getTime()},apmeum.combinedPost={},apmeum.combinedPost.messageArray=[],apmeum.combinedPost.invoke=function(c){this.messageArray.push(c)},apmeum.combinedPost.reGetPageName=function(){for(var c=function(b){var h=null;b=a.extraParams;var c=b.indexOf("\x26dt\x3d");0<=c&&(h=b.indexOf("\x26",c+
4),h=0>h?b.length:h,h=b.substring(c+4,h));return h},d=function(b,h){h||(h="");var c=a.extraParams,d=c.indexOf("\x26dt\x3d");if(0<=d){var g=c.indexOf("\x26",d+4),g=0>g?c.length:g,c=c.substring(0,d+4)+h+c.substring(g,c.length);a.extraParams=c}},b=0;b<this.messageArray.length;b++){var a=this.messageArray[b];if(!0==a.needReGetPageName){var g=c(a),f=apmeum.eventAttributes.reGetPageName(),f=encodeURIComponent(f);if(!f){a.retryCount=a.retryCount?a.retryCount+1:1;if(a.retryCount>apmeum.forceGetPageTitleMaxRetryCount){console.log("exceed max retry, terminate retry ");
break}apmeum.debug&&5<apmeum.debug&&console.log("Retry count on getting page title : "+a.retryCount);return!1}g!=f&&(d(a,f),apmeum.debug&&5<apmeum.debug&&console.log("Page tile will be replaced. Old title is : "+g+"; New title is : "+f))}}return!0},apmeum.combinedPost.send=function(c){if("beacon"!=apmeum.transType&&"fetch"!=apmeum.transType||0>=this.messageArray.length)return!0;if(!0==apmeum.forceGetPageTitle&&!1==this.reGetPageName()&&!0!=c)return!1;c=0;var d=this.messageArray[0].commonParams,b=
d.split("\x26");c+=d.length;for(var a={},g=0;g<b.length;g++){var f=b[g];f&&(f=f.split("\x3d"),a[f[0]]=f[1])}a.cma=[];for(b=0;b<this.messageArray.length;)if(g=this.messageArray[b],d==g.commonParams){g=g.typeParams+g.extraParams;c+=g.length;if(10240<c)break;a.cma.push(g);this.messageArray.splice(0,1)}else b++;a.cts=encodeURIComponent(apmeum.time());apmeum.debug&&5<apmeum.debug&&console.log("Sending combinded data to collector: "+JSON.stringify(a));if("beacon"==apmeum.transType&&"sendBeacon"in navigator)return navigator.sendBeacon(apmeum.baseCollectorUrl,
JSON.stringify(a)),!0;if(1<apmeum.collreachable)return!0;if("fetch"==apmeum.transType&&window.fetch)fetch(apmeum.baseCollectorUrl,{method:"POST",credentials:"include",mode:"cors",body:JSON.stringify(a)}).then(function(a){apmeum.setCollReachable(1)})["catch"](function(a){apmeum.setCollReachable(2)});0<this.messageArray.length&&this.send();return!0},apmeum.createConnectionPool=function(c,d){function b(a){return function(){a.src=""}}var a=0,g=[],f=[];return{getConnection:function(){var l=null;a==c&&
(a=0);var h=apmeum.time();g[a]||(g[a]=new Image,g[a].onload=function(){if(window.apmeum?window.apmeum:document.apmeum&&document.apmeum)0<img.naturalWidth?window.apmeum.setCollReachable(1):window.apmeum.setCollReachable(2)},f[a]=0);h-f[a]>=d&&(l=g[a],f[a]=h,a++,setTimeout(b(l),d));return l}}},apmeum.getDefaultTransportType=function(){return"object"===typeof APMBridge&&"function"===typeof APMBridge.collect?"bridge":"sendBeacon"in navigator?"beacon":window.fetch?"fetch":"image"},apmeum.eventAttributes=
function(){var c={getPageName:function(){var a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(a){if(a.pagename&&0<a.pagename.length)return a.pagename;var b=d("Dt");return b?b:a.getAllowTrackScreenText()?document.title:""}},reGetPageName:function(a){var d=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(d){var l=null,h=b();if(!0==a||!d.udfAttributeDt&&!h)l=c.getPageName();return l}},getAttr1:function(){var a=d("1");if(a)return a;a=window.location.pathname;if(!a)return"";
var b="/"==a.charAt(0)?a.indexOf("/",1):a.indexOf("/",0);return 0<b?a.substring("/"==a.charAt(0)?1:0,b):""},getAttr2:function(){return d("2")},getAttr3:function(){return d("3")}},d=function(a){var c=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(c){var d="",h="udfAttribute"+a;if("function"===typeof c[h]&&(d=c[h].apply(this)))return d;c=b();a="getAttr"+a;c&&c[a]&&(d=c[a].apply(this));return d?d:""}},b=function(){var b=window.apmeum?window.apmeum:document.apmeum?document.apmeum:
null;if(b){if(b.frameworkInitialized)return b.frameworkSupport;b.frameworkSupport=null;window.AdfPage?b.frameworkSupport=a():window.Siebel&&(b.frameworkSupport=null);b.frameworkInitialized=!0;return b.frameworkSupport}},a=function(){return{getAttrDt:function(){var a="";AdfPage&&(AdfPage.PAGE&&AdfPage.PAGE.getViewId)&&(a=AdfPage.PAGE.getViewId());return a},getAttr1:function(){var a="";AdfPage&&(AdfPage.PAGE&&AdfPage.PAGE.getBaseResourceUrl)&&(a=AdfPage.PAGE.getBaseResourceUrl());return a},getAttr2:function(){var a=
"";if(AdfPage&&AdfPage.PAGE&&AdfPage.PAGE.getActiveComponent){var b=AdfPage.PAGE.getActiveComponent();b&&(b.getComponentType&&(a+="["+b.getComponentType()+"]"),AdfPage.PAGE.getActiveComponentId&&(a+=AdfPage.PAGE.getActiveComponentId()))}return a}}};return c}(),apmeum.spa={util:{PGUPD_POLL_INTERVAL:2E3,ONE_SECOND:1E3,PGUPD_WAIT_TIME:1E3,FULL_UPDATE:"full",PARTIAL_UPDATE:"partial",NONE_UPDATE:"none"},collectLastPgUpdate:function(){apmeum.spa.active_pgupd&&apmeum.option.spa.endPgUpd(0)},recordEventAttributes:function(){if(apmeum.spa.active_pgupd){var c=
"",d="",b="",a="";apmeum.eventAttributes&&(apmeum.util.checkIsFunction(apmeum.eventAttributes.getPageName)&&(c=apmeum.eventAttributes.getPageName()),apmeum.util.checkIsFunction(apmeum.eventAttributes.getAttr1)&&(d=apmeum.eventAttributes.getAttr1()),apmeum.util.checkIsFunction(apmeum.eventAttributes.getAttr2)&&(b=apmeum.eventAttributes.getAttr2()),apmeum.util.checkIsFunction(apmeum.eventAttributes.getAttr3)&&(a=apmeum.eventAttributes.getAttr3()));apmeum.spa.active_pgupd.dt=c;apmeum.spa.active_pgupd.a1=
d;apmeum.spa.active_pgupd.a2=b;apmeum.spa.active_pgupd.a3=a}},capturePgUpdateRelatedAjax:function(c){var d=apmeum.time();if(apmeum.spa.active_pgupd&&(apmeum.spa.active_pgupd.isStartedWithinOneSecond(d)||!apmeum.spa.active_pgupd.noRunningAjaxs()||apmeum.spa.active_pgupd.noRunningAjaxs()&&apmeum.spa.active_pgupd.shouldWait(d)))c.apmeum_active_pgupd=apmeum.spa.active_pgupd,apmeum.spa.active_pgupd.ajax_amount_1second++,apmeum.spa.active_pgupd.ajax_amount_test++,apmeum.spa.active_pgupd.ajaxcnt++},recordFirstByteForPgUpdate:function(c,
d){apmeum.spa.active_pgupd&&(apmeum.spa.active_pgupd==c.apmeum_active_pgupd&&!apmeum.spa.active_pgupd.hasFirstByte())&&(apmeum.spa.active_pgupd.firstByte=c.async?c.apmeum_respTime:d)},dealWithAjaxForPgUpdate:function(c){apmeum.spa.active_pgupd&&apmeum.spa.active_pgupd==c.apmeum_active_pgupd?(apmeum.spa.active_pgupd.ajax_amount_1second--,apmeum.spa.active_pgupd.isLastAjax()&&(apmeum.spa.active_pgupd.endTime=c.apmeum_endTime)):apmeum.debug&&4<apmeum.debug&&console.log("apmeum.js: A ajax call is done but either does not related to any pageupdate(probably background job doing updates) OR belongs to previous pageUpdate")},
recordFetchStartForPgUpdate:function(c){apmeum.spa.active_pgupd&&!apmeum.spa.active_pgupd.hasFetchStart()&&(apmeum.spa.active_pgupd.fetchStart=c)},dealWithTimeout:function(c){apmeum.spa.hasOwnProperty("active_pgupd")&&c.apmeum_active_pgupd==apmeum.spa.active_pgupd&&(apmeum.spa.active_pgupd.ajax_amount_1second--,apmeum.spa.active_pgupd.ajax_timeout_amount++,apmeum.spa.active_pgupd.isLastAjax()&&(apmeum.spa.active_pgupd.endTime=c.apmeum_endTime))},dealWithError:function(c){apmeum.spa.hasOwnProperty("active_pgupd")&&
c.apmeum_active_pgupd==apmeum.spa.active_pgupd&&(apmeum.spa.active_pgupd.ajax_amount_1second--,apmeum.spa.active_pgupd.ajax_error_amount++,apmeum.spa.active_pgupd.isLastAjax()&&(apmeum.spa.active_pgupd.endTime=c.apmeum_endTime))},dealWithAbort:function(c){apmeum.spa.hasOwnProperty("active_pgupd")&&c.apmeum_active_pgupd==apmeum.spa.active_pgupd&&(apmeum.spa.active_pgupd.ajax_amount_1second--,apmeum.spa.active_pgupd.ajax_abort_amount++,apmeum.spa.active_pgupd.isLastAjax()&&(apmeum.spa.active_pgupd.endTime=
c.apmeum_endTime))},trackHistory:function(){apmeum.util.addEventCrossBrowser(window,"popstate",function(c){apmeum.option.spa.trackHistoryChange("history-navigation","click back or forward in browser history")});history.replaceState&&(apmeum.orig_history_replaceState=history.replaceState,history.replaceState=function(c,d,b){var a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(a)return a.option.spa.trackHistoryChange("replaceState-in-history","javascript triggered update of history"),
a.orig_history_replaceState.apply(this,arguments)});history.go&&(apmeum.orig_history_go=history.go,history.go=function(){var c=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(c)return c.option.spa.trackHistoryChange("go-in-history","javascript triggered update of history"),c.orig_history_go.apply(this,arguments)});history.setState&&(apmeum.orig_history_setState=history.setState,history.setState=function(){var c=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(c)return c.option.spa.trackHistoryChange("setState-in-history",
"javascript triggered update of history"),c.orig_history_setState.apply(this,arguments)});history.pushState&&(apmeum.orig_history_pushState=history.pushState,history.pushState=function(c,d,b){var a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(a)return a.option.spa.trackHistoryChange("push-to-history","javascript triggered update of history"),a.orig_history_pushState.apply(this,arguments)})},trackPgUpdate:function(){apmeum.util.addEventCrossBrowser(window,"mouseup",function(c){var d=
(new Date).getTime(),b=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(b){var a,g;c.srcElement?(a=b.util.getElementXPath(c.srcElement),g=b.util.getElmText(c.srcElement)):c.target&&(a=b.util.getElementXPath(c.target),g=b.util.getElmText(c.target));b.option.spa.startPgUpd(d,a,g)}});apmeum.util.addEventCrossBrowser(document.body,"keydown",function(c){var d=(new Date).getTime(),b=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(b&&void 0!=c.target){var a=b.util.getElementXPath(c.target),
g=b.util.getElmText(c.target);if(!(c.hasOwnProperty("isTrusted")&&!1==c.isTrusted)&&"iframe"!=document.activeElement.tagName.toLowerCase()){var f=c.target.tagName.toLowerCase();if("textarea"!=f){if("input"==f&&(f=c.type,"button"!=f&&"checkbox"!=f&&"image"!=f&&"radio"!=f&&"reset"!=f&&"submit"!=f))return;f="";c.hasOwnProperty("key")?f=c.key:c.hasOwnProperty("keyCode")?f=String.fromCharCode(c.keyCode):c.hasOwnProperty("which")&&(f=String.fromCharCode(c.which));void 0!=f&&""!=f&&(a+="_"+f,g+="_"+f,b.shortcut=
f);b.option.spa.startPgUpd(d,a,g)}}}})}},apmeum.init=function(){function c(a){var b=document.location.pathname,c=b.indexOf(";");if(-1==c)return null;c=b.indexOf(a+"\x3d",c);if(-1!=c)return c=c+a.length+1,a=b.indexOf(";",c),-1==a&&(a=b.indexOf("/",c)),-1==a&&(a=b.length),decodeURIComponent(b.substring(c,a))}function d(a){var b=document.location.search;if(null==b||2>b.length)return null;var c=b.indexOf(a+"\x3d");if(-1!=c)return c=c+a.length+1,a=b.indexOf("\x26",c),-1==a&&(a=b.length),decodeURIComponent(b.substring(c,
a))}var b=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(b){if(!b.connectionCount||0>=b.connectionCount)b.connectionCount=3;b.connectionTimeout||(b.connectionTimeout=2E3);b.pool=b.createConnectionPool(b.connectionCount,b.connectionTimeout);if((null==b.sid||""==b.sid)&&null!=b.tracking_cookie)b.sid=b.util.getCookie(b.tracking_cookie);if(null==b.sid&&null!=b.tracking_param&&(b.sid=c(b.tracking_param),null==b.sid||""==b.sid))b.sid=d(b.tracking_param);null==b.tracking_cookie&&(b.tracking_cookie=
"OMCtrack");if(null==b.sid||""==b.sid)b.sid=b.util.getCookie(b.tracking_cookie);if(null==b.sid||""==b.sid){var a="";b.tracking_cookie_domain&&(a+="; domain\x3d"+b.tracking_cookie_domain);a=b.tracking_cookie_path?a+("; path\x3d"+b.tracking_cookie_path):a+"; path\x3d/";b.tracking_cookie_expires&&(a+="; expires\x3d"+b.tracking_cookie_expires);b.sid="bgen"+parseInt(2147418112*Math.random())+(new Date).getTime();try{document.cookie=b.tracking_cookie+"\x3d"+b.sid+a}catch(g){b.debug&&console.log("apmeum.js: unable to set/preserve cookie due to exception: "+
g)}}var f=function(a,b,c){return!a?!1:a.addEventListener?(a.addEventListener(b,c,!1),!0):a.attachEvent?(a.attachEvent("on"+b,c),!0):!1};"image"!=b.transType&&f(window,"unload",function(a){if(a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null)a.spa.collectLastPgUpdate(),a.option.sendAll(!0)});b.gOldOnError=window.onerror;window.onerror=function(a,b,c,d,f){var g=(new Date).getTime(),l=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(l)return l.option.collectErrors(a,
b,c,d,f,g),l.gOldOnError&&"function"===typeof l.gOldOnError?l.gOldOnError(a,b,c,d,f):!1};f(window,"load",function(a){if(a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null)window.performance||(a.pageReady=Number(new Date)),setTimeout(a.option.collectPage,10)});b.util.addEventCrossBrowser=f;b.needMonitor(16)&&(!b.dontTrackHistory||!1==b.dontTrackHistory)&&b.spa.trackHistory();b.needMonitor(16)&&b.spa.trackPgUpdate();window.performance||(String.prototype.hashCode=function(){var a=0,b;
if(0==this.length)return a;for(var c=0;c<this.length;c++)b=this.charCodeAt(c),a=(a<<5)-a+b,a|=0;return a},f(window,"DOMContentLoaded",function(a){if(a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null)a.domReady=Number(new Date)}),f(window,"beforeunload",function(a){if(a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null)document.cookie="apmeum-navigationStart\x3d"+a.time()+"; path\x3d/",document.cookie="apmeum-pd\x3d"+document.URL.hashCode()+"; path\x3d/",document.cookie=
"apmeum-pr\x3d"+document.referrer.hashCode()+"; path\x3d/"}));b.getHttpHeader=function(a,b){var c="\n"+a.getAllResponseHeaders()+"\n",d=c.toLowerCase().indexOf("\n"+b.toString().toLowerCase()+":"),f=null,g=null;0<=d&&(g=c.indexOf("\n",d+1),f=c.substr(d+b.length+2,g-d-b.length-2).trim());return f};b.handleAjaxComplete=function(a){var b=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(b){var c=b.getHttpHeader(a,"Content-Length");a.apmeum_respLength=c&&0<c?c:!a.responseType||""==a.responseType||
"text"==a.responseType?a.responseText&&a.responseText.length?a.responseText.length:0:0;a.apmeum_status="complete";if(c=b.getHttpHeader(a,b.KEY_RESPONSE_HEADER_OPERATION_ID))a.apmeum_operationId=c;if(c=b.getHttpHeader(a,b.KEY_RESPONSE_HEADER_ECID))a.apmeum_ecid=c;if(b=b.getHttpHeader(a,b.KEY_RESPONSE_HEADER_AGENT_TAG))a.apmeum_webappTag=b}};b.XMLHttpRequestHandler=function(){var a,c={timing:{},initiator:"xhr"},d,g,l=document.createElement("a");a=new b.orig_xhr;d=a.open;g=a.send;a.open=function(b,g,
p,n,q){if(!g||0<g.split("?",1).join("?").indexOf("/APMaaSCollector/"))return d.apply(a,arguments);var k=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(k){b||(b="");g||(g="");n||(n="");var s=!1!==p?"async":"sync",r;if(a.hasOwnProperty("apmeum_opencalls"))a.apmeum_opencalls++;else{a.apmeum_method=b;a.apmeum_opencalls=1;k.spa.capturePgUpdateRelatedAjax(a);l.href=g;var x=""+l.href,u=""+x.split("?",1).join("?").split("/",3).join("/"),x=x.substring(u.length),u={host:u,path:x};k.rewriteURL("ajax",
u);a.apmeum_host=u.host;a.apmeum_path=u.path;a.apmeum_url=a.apmeum_host+a.apmeum_path;a.apmeum_syncMode=s;a.apmeum_user=n;a.dt=k.eventAttributes.getPageName();a.a1=k.eventAttributes.getAttr1();a.a2=k.eventAttributes.getAttr2();a.a3=k.eventAttributes.getAttr3();a.async=void 0==p||!0==p?!0:!1;f(a,"readystatechange",function(){a.readyState===k.XMLHttpRequestHandler.HEADERS_RECEIVED&&0!==a.status&&(a.apmeum_respTime=k.time(),k.spa.recordFirstByteForPgUpdate(a));a.readyState===k.XMLHttpRequestHandler.DONE&&
0!==a.status&&(k.handleAjaxComplete(a),a.apmeum_endTime=k.time(),a.apmeum_statuscode=a.status,k.spa.dealWithAjaxForPgUpdate(a),k.option.collectCalls(a))});f(a,"load",function(){a.apmeum_status="load";a.measurement.status=a.status});f(a,"timeout",function(){a.hasOwnProperty("apmeum_respTime")||(a.apmeum_respTime=k.time());a.hasOwnProperty("apmeum_endTime")||(a.apmeum_endTime=k.time());a.hasOwnProperty("apmeum_respLength")||(a.apmeum_respLength=0);a.apmeum_status="timeout";k.spa.dealWithTimeout(a);
a.measurement.status="detect a timeout ajax call";k.option.collectCalls(a)});f(a,"error",function(){a.hasOwnProperty("apmeum_respTime")||(a.apmeum_respTime=k.time());a.hasOwnProperty("apmeum_endTime")||(a.apmeum_endTime=k.time());a.hasOwnProperty("apmeum_respLength")||(a.apmeum_respLength=0);a.apmeum_status="error";k.spa.dealWithError(a);a.measurement.status="detect ajax error";k.option.collectCalls(a)});f(a,"abort",function(){a.hasOwnProperty("apmeum_respTime")||(a.apmeum_respTime=k.time());a.hasOwnProperty("apmeum_endTime")||
(a.apmeum_endTime=k.time());a.hasOwnProperty("apmeum_respLength")||(a.apmeum_respLength=0);a.apmeum_status="abort";k.spa.dealWithAbort(a);a.measurement.status="detect ajax aborted";k.option.collectCalls(a)})}try{r=d.apply(a,arguments)}catch(y){c.status=k.XHR_OPEN_FAILED}return r}};a.send=function(b){var d=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(d&&(this.apmeum_startTime=d.time(),this.apmeum_sentLength=b?b.length:0,"undefined"===typeof c.status||c.status!==d.XHR_OPEN_FAILED))return!1==
a.async&&(a.apmeum_respTime=this.apmeum_startTime),d.spa.recordFetchStartForPgUpdate(this.apmeum_startTime),!1==a.async&&d.spa.recordFirstByteForPgUpdate(a,this.apmeum_startTime),g.apply(a,arguments)};a.measurement=c;return a};if(b.needMonitor(2)&&!b.orig_xhr&&window.XMLHttpRequest){var a=new XMLHttpRequest,l=!1;a.addEventListener?l=!0:a.attachEvent&&(l=!0);l&&(b.orig_xhr=window.XMLHttpRequest,b.orig_xhr_proto=window.XMLHttpRequest.prototype,b.XMLHttpRequestHandler.UNSENT=0,b.XMLHttpRequestHandler.OPENED=
1,b.XMLHttpRequestHandler.HEADERS_RECEIVED=2,b.XMLHttpRequestHandler.LOADING=3,b.XMLHttpRequestHandler.DONE=4,b.XMLHttpRequestHandler.prototype=window.XMLHttpRequest.prototype,window.XMLHttpRequest=b.XMLHttpRequestHandler)}!0==b.cmp&&"image"==b.transType&&b.debug&&console.log("apmeum.js: If transport type is 'image', combined post will not be supported, as 'image' send GET request only");if("beacon"==b.transType&&!1 in navigator||"fetch"==b.transType&&!window.fetch)b.debug&&console.log("apmeum.js: Transport type "+
b.transType+" is not supported in this browser"),b.transType=b.getDefaultTransportType();if(!b.transType||"beacon"!=b.transType&&"fetch"!=b.transType&&"image"!=b.transType)b.transType=b.getDefaultTransportType();void 0==b.cmp&&(b.cmp=!0);window.getSDKVersionFile&&window.sdkFilePath&&(b.forceGetPageTitle=!0,b.forceGetPageTitleMaxRetryCount=10)}},apmeum.init());