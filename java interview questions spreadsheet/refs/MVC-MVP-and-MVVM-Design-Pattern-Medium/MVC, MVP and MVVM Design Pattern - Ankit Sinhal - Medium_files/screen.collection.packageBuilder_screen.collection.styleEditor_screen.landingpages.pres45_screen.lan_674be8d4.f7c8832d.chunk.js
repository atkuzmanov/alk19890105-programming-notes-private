(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"./src/WatchBounds.tsx":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u}));var r=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),a=n.n(r),o=n("./node_modules/react/index.js"),i={updateWatchedBounds:function(){},watchedBounds:new Map},s=o.createContext(i),c=function(e){var t=new Map,n=o.useState(t),r=a()(n,2),i=r[0],c=r[1],u={offset:{left:0,right:0,top:0,bottom:0}},l={watchedBounds:i,updateWatchedBounds:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;c((function(r){var a=new Map(r);return a.set(e,{ref:t,opts:n}),a}))}};return o.createElement(s.Provider,{value:l},e.children)},u=function(e){var t=e.children,n=e.className,r=e.name,a=e.type,i=e.offset,c=o.useContext(s).updateWatchedBounds,u=o.useRef(null);return o.useEffect((function(){c&&c(r,u,{type:a,offset:i})}),[]),o.createElement("div",{className:n,ref:u},t)}},"./src/components/post/PostBodyParagraph.tsx":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),a=n.n(r),o=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(o),s=n("./node_modules/@babel/runtime/helpers/createClass.js"),c=n.n(s),u=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),l=n.n(u),p=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=n.n(p),h=n("./node_modules/@babel/runtime/helpers/inherits.js"),m=n.n(h),g=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),f=n.n(g),b=n("./node_modules/graphql-tag/src/index.js"),y=n.n(b),v=n("./node_modules/react/index.js"),x=n("./src/WatchBounds.tsx"),E=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),S=n.n(E),w=n("./node_modules/react-redux/es/index.js"),_=n("./src/components/collection/theming/customStyleSheet.ts"),O=n("./src/components/post/markups/Markups.tsx"),P=n("./src/components/post/paragraph/IframeParagraph/iframePostMessageNormalizer.ts"),T=n("./src/components/session/useFlag.tsx"),j=n("./src/components/ui/AspectRatioPlaceholder.tsx"),k=n("./src/components/ui/FigCaption.tsx"),I=n("./src/components/ui/Figure.tsx"),N=n("./node_modules/@babel/runtime/helpers/extends.js"),R=n.n(N),C=n("./src/framework/style/index.ts"),L=n("./src/styles/position.ts"),B=function(e){return{backgroundColor:e.baseColor.background.normal}},W=function(e){return{width:"1px",minWidth:"100%","*width":"100%"}};var M=Object(w.c)((function(e){return{isAmp:e.config.isAmp}}))((function(e){var t=e.src,n=e.title,r=e.height,a=e.width,o=e.allowFullScreen,i=e.frameBorder,s=e.thumbnailUrl,c=e.rules,u=e.iframeRef,l=e.isAmp,p=Object(C.useCx)(),d={src:t,allowFullScreen:o,frameBorder:i,height:r,width:a},h=v.useState(!1),m=S()(h,2),g=m[0],f=m[1];if(u&&u.current&&u.current.parentElement.offsetWidth<u.current.offsetWidth&&!g&&f(!0),l){var b,y={allowFullScreen:o};for(var x in y)d[x]=d[x]?"":null;return b=s?v.createElement("amp-img",{placeholder:"",src:s,layout:"fill"}):v.createElement("div",{placeholder:"",className:p([L.a,B])}),v.createElement("amp-iframe",R()({},d,{class:p(c),placeholder:"",resizable:"",layout:"responsive",sandbox:"allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox"}),b,v.createElement("div",{overflow:"true",tabIndex:"0",role:"button","aria-label":"Read more"},"Read more"))}return v.createElement("iframe",R()({},d,{ref:u,title:n,className:p(g?[c,W]:c),scrolling:g?"no":"auto"}))})),A=n("./src/styles/breakpoints.ts"),F=n("./src/styles/post/spacing.ts"),H=n("./src/util/richText.ts"),U=n("./src/util/routes.ts");function G(){var e=a()(["\n  fragment IframeParagraph_customStyleSheet on CustomStyleSheet {\n    id\n    postBodyIframe {\n      ...SupportedContainerStyles_styleNode\n    }\n  }\n  ","\n"]);return G=function(){return e},e}function z(){var e=a()(["\n  fragment IframeParagraph_paragraph on Paragraph {\n    iframe {\n      mediaResource {\n        id\n        iframeSrc\n        iframeHeight\n        iframeWidth\n        title\n      }\n    }\n    layout\n    ...getEmbedlyCardUrlParams_paragraph\n    ...Markups_paragraph\n  }\n  ","\n  ","\n"]);return z=function(){return e},e}var D=v.memo((function(e){var t=e.host,n=e.isAmp,r=e.paragraph,a=e.paragraphStyle,o=e.richTextStyle,i=e.spaceTop,s=e.updateWatchedBounds,c=e.customStyleSheet,u=Object(C.useCx)(),l=Object(T.a)("enable_theme_editor"),p=v.useRef(null),d=(r.iframe||{}).mediaResource,h=d||{},m=h.id,g=h.iframeSrc,b=h.iframeHeight,y=h.iframeWidth,x=h.title,E=g;E||(E=m?Object(U.Y)(t,m):"");var w=function(e){var t=e.src,n=e.initialHeight,r=e.initialWidth,a=v.useRef(null),o=v.useState(n),i=S()(o,2),s=i[0],c=i[1],u=v.useState(r),l=S()(u,2),p=l[0],d=l[1];return v.useEffect((function(){if(""!==t){var e=Object(P.a)((function(e){"iframe.resize"===e.context&&e.src===t&&e.height>0&&(a.current&&d(a.current.offsetWidth),c(e.height))})).destructor;return function(){e()}}}),[t,n]),[s,p,a]}({src:E,initialHeight:b||0,initialWidth:y||0}),N=S()(w,3),R=N[0],B=N[1],W=N[2];if(v.useEffect((function(){if(s&&d&&d.id&&B&&R){var e="";p.current&&(e=p.current.offsetTop.toString()),s("".concat(d.id,"-").concat(e),p,{type:"image"})}}),[]),!E)return null;var G=r.text?v.createElement(k.a,null,v.createElement(O.a,{paragraph:r,paragraphStyle:a,richTextStyle:o})):null,z=[Object(F.m)(i)];z.push((function(e){return{clear:"both"}})),"OUTSET_LEFT"===(r.layout||void 0)&&"STREAM"!==o&&z.push((function(e){var t;return t={background:e.backgroundColor,borderWidth:e.borderWidthThick+"px",borderStyle:e.borderStyle,borderColor:e.backgroundColor,float:"left",marginLeft:"-150px",marginRight:"30px",width:"75%",padding:"0",paddingBottom:"10px"},f()(t,A.md(e),{float:"none",marginLeft:"0",marginRight:"0",width:"100%"}),f()(t,"marginBottom","16px"),t})),l&&z.push((function(){return function(e){return Object(_.c)(null==e?void 0:e.postBodyIframe)}(c)}));var D=n?Object(H.b)(r):null;return v.createElement(I.a,{className:u(z),figCaption:G,figureRef:p},D?v.createElement(v.Fragment,null,v.createElement("amp-embedly-card",{"data-url":D.url,layout:"responsive",width:B,height:R,"data-card-controls":"0"})):v.createElement(j.a,{height:R,width:B,backgroundColor:"NONE"},v.createElement(M,{iframeRef:W,src:E,title:x||"",height:R,width:B,allowFullScreen:!0,frameBorder:"0",rules:L.a})))})),Y=Object(w.c)((function(e){return{isAmp:e.config.isAmp,host:e.navigation.host}}))(D),V=y()(z(),H.c,O.c),q=y()(G(),_.a),Q=Y,X=n("./src/components/post/paragraph/ImageParagraph.tsx"),J=n("./src/components/ui/image/FocusableMiroImage.tsx"),K=n("./src/framework/design-system/components/index.ts"),Z=n("./src/framework/design-system/type/index.ts"),$=n("./src/framework/design-system/util/type/createClampRule.ts"),ee=n("./src/util/miroImage.ts");function te(){var e=a()(["\n      fragment MixtapeParagraph_paragraph on Paragraph {\n        text\n        type\n        mixtapeMetadata {\n          href\n          thumbnailImageId\n          mediaResourceId\n        }\n        markups {\n          start\n          end\n          type\n          href\n        }\n      }\n    "]);return te=function(){return e},e}var ne=function(e){return{boxShadow:"inset 0 0 0 1px ".concat(e.baseColor.border.lighter)}},re=function(e){return{boxShadow:"0 1px 4px ".concat(e.baseColor.border.lighter,", ").concat(ne(e).boxShadow)}},ae=function(e){return Object($.a)({clamp:2,lineHeight:20})(e)},oe=function(e){function t(){return i()(this,t),l()(this,d()(t).apply(this,arguments))}return m()(t,e),c()(t,[{key:"render",value:function(){var e=this.props,t=e.paragraph,n=e.spaceTop,r=t.mixtapeMetadata,a=t.type;if(!r||!r.href||!a)return null;var o=r.href,i=function(e){var t=e.text,n=e.markups;if(!t)return null;var r=n.find((function(e){return"STRONG"===e.type}));if(!r)return null;var a=n.find((function(e){return"EM"===e.type})),o=r.end,i=a?a.end:r.end;return{title:t.slice(r.start,o).trim(),description:a?t.slice(a.start,a.end).trim():null,domain:t.slice(i).trim()||null}}(t);if(!i)return null;var s=i.title,c=i.description,u=i.domain;return v.createElement(K.K,null,(function(e){return v.createElement("div",{className:e([Object(F.m)(n),re])},v.createElement(K.f,{href:o||"",disableSourceParam:!0},v.createElement(K.b,{display:"flex",flexShrink:"0",padding:"0px"},v.createElement(K.b,{padding:"16px 20px",flexShrink:"1",flexGrow:"1",display:"flex",justifyContent:"center",flexDirection:"column",sm:{padding:"10px 12px 10px"}},v.createElement(Z.b,{scale:"XS"},v.createElement("div",{className:e([ae])},s)),c&&v.createElement(K.b,{marginTop:"8px"},v.createElement(Z.f,{scale:"S"},v.createElement("div",{className:e([ae])},c))),u&&v.createElement(K.b,{marginTop:"12px"},v.createElement(Z.a,{scale:"S"},v.createElement("div",{className:e([ae])},u)))),r&&r.mediaResourceId&&v.createElement(K.b,{width:"160px"},v.createElement(J.a,{boxShadowRules:ne,miroId:r.mediaResourceId,width:160,height:167,strategy:ee.a.Resample,focusPercent:[50,50],imgHeight:167,imgWidth:160})))))}))}}]),t}(v.Component);f()(oe,"fragments",{paragraph:y()(te())});var ie=oe,se=n("./src/components/post/paragraph/TextParagraph.tsx");function ce(){var e=a()(["\n      fragment PostBodyParagraph_paragraph on Paragraph {\n        name\n        type\n        ...ImageParagraph_paragraph\n        ...TextParagraph_paragraph\n        ...IframeParagraph_paragraph\n        ...MixtapeParagraph_paragraph\n      }\n      ","\n      ","\n      ","\n      ","\n    "]);return ce=function(){return e},e}function ue(){var e=a()(["\n  fragment PostBodyParagraph_customStyleSheet on CustomStyleSheet {\n    ...IframeParagraph_customStyleSheet\n    ...ImageParagraph_customStyleSheet\n    ...TextParagraph_customStyleSheet\n  }\n  ","\n  ","\n  ","\n"]);return ue=function(){return e},e}function le(){var e=a()(["\n  fragment PostBodyParagraph_privateNote on Note {\n    ...TextParagraph_privateNote\n    ...ImageParagraph_privateNote\n  }\n  ","\n  ","\n"]);return le=function(){return e},e}function pe(){var e=a()(["\n  fragment PostBodyParagraph_highlight on Quote {\n    ...TextParagraph_highlight\n    ...ImageParagraph_highlight\n  }\n  ","\n  ","\n"]);return pe=function(){return e},e}n.d(t,"b",(function(){return he})),n.d(t,"c",(function(){return me})),n.d(t,"a",(function(){return ge}));var de=function(e){function t(){return i()(this,t),l()(this,d()(t).apply(this,arguments))}return m()(t,e),c()(t,[{key:"render",value:function(){var e,t=this.props,n=t.paragraph,r=t.paragraphStyle,a=t.richTextStyle,o=t.sequenceAspectRatio,i=t.spaceTop,s=t.insert,c=t.highlights,u=t.privateNotes,l=t.customStyleSheet;switch(n.type){case"IMG":e=v.createElement(x.b.Consumer,null,(function(e){var t=e.updateWatchedBounds;return v.createElement(X.e,{paragraph:n,paragraphStyle:r,richTextStyle:a,sequenceAspectRatio:o,spaceTop:i,updateWatchedBounds:t,highlights:c,privateNotes:u,customStyleSheet:l})}));break;case"P":case"BQ":case"PQ":case"H1":case"H2":case"H3":case"H4":case"ULI":case"OLI":case"PRE":e=v.createElement(se.e,{paragraph:n,paragraphStyle:r,richTextStyle:a,spaceTop:i,highlights:c,privateNotes:u,customStyleSheet:l});break;case"IFRAME":e=v.createElement(x.b.Consumer,null,(function(e){var t=e.updateWatchedBounds;return v.createElement(Q,{paragraph:n,paragraphStyle:r,richTextStyle:a,spaceTop:i,updateWatchedBounds:t,customStyleSheet:l})}));break;case"MIXTAPE_EMBED":e=v.createElement(ie,{paragraph:n,paragraphStyle:r,richTextStyle:a,spaceTop:i});break;default:e=null}return s?v.createElement(v.Fragment,null,"before"===s.order&&s.component,e,"after"===s.order&&s.component):e}}]),t}(v.Component);f()(de,"fragments",{paragraph:y()(ce(),V,X.c,se.e.fragments.paragraph,ie.fragments.paragraph)});t.d=de;var he=y()(pe(),se.b,X.b),me=y()(le(),se.c,X.d),ge=y()(ue(),q,X.a,se.a)},"./src/components/post/PostBodySection.tsx":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),a=n.n(r),o=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(o),s=n("./node_modules/@babel/runtime/helpers/createClass.js"),c=n.n(s),u=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),l=n.n(u),p=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=n.n(p),h=n("./node_modules/@babel/runtime/helpers/inherits.js"),m=n.n(h),g=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),f=n.n(g),b=n("./node_modules/graphql-tag/src/index.js"),y=n.n(b),v=n("./node_modules/react/index.js"),x=n("./src/WatchBounds.tsx"),E=n("./src/components/post/PostBodyParagraph.tsx"),S=n("./src/components/post/grouping/ParagraphLayoutGrouping.tsx"),w=n("./src/framework/design-system/components/index.ts"),_=n("./src/framework/style/index.ts"),O={":after":{display:"block",content:'""',clear:"both"}},P=n("./src/util/miroImage.ts"),T=n("./src/util/theme.ts");function j(){var e=a()(["\n      fragment PostBodySection_paragraphs on Paragraph {\n        name\n        ...PostBodyParagraph_paragraph\n      }\n      ","\n    "]);return j=function(){return e},e}function k(){var e=a()(["\n  fragment PostBodySection_customStyleSheet on CustomStyleSheet {\n    ...ParagraphLayoutGrouping_customStyleSheet\n  }\n  ","\n"]);return k=function(){return e},e}function I(){var e=a()(["\n  fragment PostBodySection_privateNote on Note {\n    ...ParagraphLayoutGrouping_privateNote\n  }\n  ","\n"]);return I=function(){return e},e}function N(){var e=a()(["\n  fragment PostBodySection_highlight on Quote {\n    ...ParagraphLayoutGrouping_highlight\n  }\n  ","\n"]);return N=function(){return e},e}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"b",(function(){return A})),n.d(t,"c",(function(){return F})),n.d(t,"a",(function(){return H}));var L=function(e){var t=e.id,n=e.originalWidth,r=e.originalHeight;return function(){var e=[400,600,800,1e3,1200,1400,1600,1800,2e3],a={miroId:t,strategy:"RESAMPLE",verticalGradient:{start:29,end:81,opacity:40}},o=e.reduce((function(t,o,i){var s=Object(P.d)(C({},a,{width:o,height:o/n*r}));return i===e.length-1?(t.backgroundImage="url(".concat(s,")"),t):(t["@media (min-width: ".concat(o,"px)")]={backgroundImage:"url(".concat(s,")")},t)}),{});return C({backgroundColor:"rgba(0, 0, 0, 0.9)",backgroundPosition:"50% 50%",backgroundSize:"cover",display:"table",minHeight:"100vh",width:"100%"},o)}},B=function(){return{display:"table-cell",paddingBottom:"32px",verticalAlign:"bottom"}};function W(e){var t=e.bgImage,n=e.children,r=e.isFullPage,a=e.paragraphName,o=Object(_.useCx)();return t&&t.id&&r?v.createElement(x.a,{name:a,type:"bgimage"},v.createElement("div",{className:o(L(t))},v.createElement("div",{className:o(B)},v.createElement(w.M,null,(function(e){return v.createElement(w.G,{theme:Object(T.g)(e)},n)}))))):n}var M=function(e){function t(){return i()(this,t),l()(this,d()(t).apply(this,arguments))}return m()(t,e),c()(t,[{key:"render",value:function(){var e=this.props,t=e.paragraphViewModels,n=e.postBodyInserts,r=e.section,a=e.customStyleSheet;if(0===t.length)return null;var o=function(e){switch(e){case"SERIES":return{paddingTop:"32px",paddingBottom:"32px",margin:"auto 0",width:"100%"};case"STREAM":case"CARD":case"FULL_PAGE":return{wordBreak:"break-word",wordWrap:"break-word"};default:return{}}}(t[0].richTextStyle),i=Object(S.e)(t);return v.createElement(w.K,null,(function(e){return v.createElement("section",{className:e([o,O])},v.createElement(W,{bgImage:r.backgroundImage,isFullPage:"FULL_PAGE"===t[0].richTextStyle,paragraphName:t[0].paragraph.name},i.map((function(e,t){return v.createElement(S.a,{key:t,layoutGroup:e,postBodyInserts:n,customStyleSheet:a})}))))}))}}]),t}(v.Component);f()(M,"fragments",{paragraphs:y()(j(),E.d.fragments.paragraph)});t.d=M;var A=y()(N(),S.c),F=y()(I(),S.d),H=y()(k(),S.b)},"./src/components/post/body/PostBody.tsx":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),a=n.n(r),o=n("./node_modules/@babel/runtime/helpers/extends.js"),i=n.n(o),s=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),c=n.n(s),u=n("./node_modules/graphql-tag/src/index.js"),l=n.n(u),p=n("./node_modules/react/index.js"),d=n("./src/WatchBounds.tsx"),h=n("./src/framework/style/index.ts"),m=n("./src/styles/font.ts"),g={border:"none",marginTop:"30px",textAlign:"center",":before":{content:'"..."',letterSpacing:"0.6em",textIndent:"0.6em",fontStyle:"italic",lineHeight:"1.4"}};function f(){var e=Object(h.useCx)();return p.createElement("hr",{className:e([Object(m.b)({fontSize:28}),g])})}var b=n("./src/components/post/PostBodySection.tsx"),y=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),v=n.n(y),x=n("./node_modules/@babel/runtime/helpers/typeof.js"),E=n.n(x),S=n("./node_modules/pluralize/pluralize.js"),w=n.n(S),_=n("./src/components/user/UserAvatar.tsx"),O=n("./src/framework/design-system/components/index.ts"),P=n("./src/framework/design-system/type/Overline.tsx"),T=n("./src/framework/track/index.ts");function j(){var e=a()(["\n  fragment PostNotesDetails_user on User {\n    id\n    imageId\n    name\n    username\n    ...UserAvatar_user\n  }\n  ","\n"]);return j=function(){return e},e}function k(e){var t=e.grid.xStep;return{padding:"".concat(3*t,"px ").concat(4*t,"px ").concat(3*t,"px"),width:"400px"}}var I=p.memo((function(e){var t=e.close,n=e.users,r=Object(h.useCx)(),a=p.useRef(null),o=Object(h.useTheme)(),i=o.grid.xStep;return p.useEffect((function(){function e(){var e=a.current;if(e&&e.getBoundingClientRect){var n=e.getBoundingClientRect(),r=n.bottom,i=n.top<0||r>window.innerHeight,s=window.innerWidth<o.breakpoints.xl;(i||s)&&t()}}return T.a.on("scroll_end",e),T.a.on("resize_throttled",e),function(){T.a.off("scroll_end",e),T.a.off("resize_throttled",e)}}),[]),p.createElement("section",{ref:a,className:r(k)},p.createElement(O.b,{borderBottom:"BASE_LIGHTER",marginBottom:"-".concat(i,"px"),paddingBottom:"".concat(2*i,"px")},p.createElement(P.a,null,"Highlights (".concat(n.length,")"))),p.createElement(O.b,{marginLeft:"3px"},n.length&&n.map((function(e){return p.createElement(O.b,{display:"inline-block",key:e.id,marginTop:"".concat(5*i,"px"),marginRight:"".concat(5*i,"px"),width:"".concat(8*i,"px")},p.createElement(_.d,{hasPopover:!0,link:!0,user:e,scale:"XS"}))}))))})),N=l()(j(),_.b),R=n("./src/components/post/markups/HighlightSegmentsContext.tsx"),C=n("./src/components/post/notes/PostAnnotationsPopover.tsx"),L=n("./src/components/post/paragraph/IframeParagraph/iframePostMessageNormalizer.ts"),B=n("./src/components/session/WithViewer.tsx"),W=n("./src/framework/design-system/type/Detail.tsx"),M=n("./src/framework/design-system/util/style/converters.ts"),A=n("./src/util/typeGuards.ts");function F(){var e=a()(["\n  fragment PostNotesMarkers_creator on User {\n    id\n    name\n    isFollowing\n  }\n"]);return F=function(){return e},e}function H(){var e=a()(["\n  fragment PostNotesMarkers_highlight on Quote {\n    id\n    endOffset\n    paragraphs {\n      id\n      name\n    }\n    startOffset\n    userId\n    user {\n      id\n      name\n      ...PostNotesDetails_user\n    }\n  }\n  ","\n"]);return H=function(){return e},e}function U(){return{border:"none",cursor:"pointer",display:"block",padding:"0px",textAlign:"left",width:"100%"}}function G(){return{left:"100%",position:"absolute",top:0}}function z(e,t){return{marginTop:"6px",maxWidth:"100%",position:"absolute",top:"".concat(e-(t||0),"px"),whiteSpace:"nowrap",width:"100%"}}function D(e){return{marginLeft:"auto",marginRight:"auto",maxWidth:"".concat(Object(M.a)(e,8,!0),"px"),position:"relative"}}function Y(){return{display:"inline-block",maxWidth:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}function V(e,t){return"number"==typeof e.startOffset&&"number"==typeof t.startOffset?e.startOffset<t.startOffset?-1:1:-1}function q(e,t){var n=t.startOffset,r=t.endOffset,a=t.paragraphs[0].name;if(!a||"number"!=typeof n||"number"!=typeof r)return e;var o=!1,i=e[a]||[];return i.length&&(i=i.map((function(e){var a=n<=e.endOffset+1,i=e.startOffset,s=e.endOffset;return a&&(o=!0,e.highlights.push(t),s=Math.max(r,e.endOffset),i=Math.min(n,e.startOffset)),{highlights:e.highlights,endOffset:s,startOffset:i}}))),o||i.push({highlights:[t],endOffset:r,startOffset:n}),e[a]=i,e}function Q(e,t,n){var r=new Map;if(e.size&&t.length){var a=function(e){var t=c()(e).sort(V).reduce(q,{});return Object.values(t).reduce((function(e,t){return t&&"object"===E()(t)&&t.length?(e.push.apply(e,c()(t)),e):e}),[])}(t),o=[];a.forEach((function(t){var a=t.highlights[0],i=a.paragraphs[0].name;if(a&&"number"==typeof a.startOffset&&i){var s=e.get("".concat(i,"_").concat(a.startOffset));if(s&&s.ref&&s.ref.current){var c,u=s.ref.current.getBoundingClientRect().top+window.pageYOffset;o.length&&(c=o.find((function(e){return u<e+n.newFonts.body.lineHeight.M&&u>e||u>e-n.newFonts.body.lineHeight.M&&u<e})));var l=c||u,p=r.get(l)||[];p.length||o.push(l);var d=p.concat(t.highlights);d.length&&r.set(l,d)}}}))}return r}function X(e){var t=e.children,n=e.highlightString,r=e.toggle,a=Object(h.useCx)();return"Top highlight"===n?p.createElement(p.Fragment,null,t):p.createElement("button",{className:a(U),onClick:function(){return r()},onMouseDown:function(e){return e.preventDefault()}},t)}function J(e){var t=e.creator,n=e.positionMap,r=e.yPosOffset,a=Object(h.useCx)();if("number"!=typeof r)return null;var o=Array.from(n.entries());return p.createElement(B.b,{nonBlocking:!0},(function(e){return p.createElement(p.Fragment,null,o.map((function(n,o){var i=v()(n,2),s=i[0],c=i[1],u=function(e,t,n){if(1===e.length){if("anon"===e[0].userId)return"Top highlight";if(!t)return null;if(n&&n.id===e[0].userId&&t.id!==n.id&&!n.isFollowing)return null;if(t&&t.id===e[0].userId)return"You highlighted";if(e[0].user&&e[0].user.name)return e[0].user.name}var r=[];if(e.forEach((function(e){if(e.user){var a=t&&t.id===e.userId,o=e.user.name,i=n&&n.id===e.userId&&(!t||t.id!==n.id&&!n.isFollowing);a?r.length&&"You"===r[0]||r.unshift("You"):i||!o||r.includes(o)||r.push(o)}})),!r.length)return"Top highlight";if(1===r.length)return"You"===r[0]?"You highlighted":r[0];if(2===r.length)return"".concat(r[0]," and ").concat(r[1]);var a=r.slice(0,2),o=r.length-a.length;return"".concat(a[0],", ").concat(a[1],", and ").concat(o," ").concat(w()("other",o))}(c,e,t);return u?p.createElement("div",{className:a(z(s,r)),key:o},p.createElement(O.J,null,(function(e){var t=e.isVisible,n=e.hide,r=e.toggle;return p.createElement(p.Fragment,null,p.createElement(X,{toggle:r,highlightString:u},p.createElement(W.a,{scale:"S"},p.createElement("span",{className:a(Y)},u))),t&&p.createElement(C.a,{boundariesElement:"window",isVisible:!0,hide:n,placement:"right",popoverRenderFn:function(){var e=new Set,t=c.map((function(t){var n=t.user;return n&&n.id&&!e.has(n.id)?(e.add(n.id),n):null})).filter(A.a);return p.createElement(I,{close:n,users:t})}},p.createElement(p.Fragment,null)))}))):null})))}))}var K=p.forwardRef((function(e,t){var n=e.creator,r=e.highlights,a=p.useContext(R.c).highlightSegments,o=p.useRef(null),i=p.useState(null),s=v()(i,2),c=s[0],u=s[1],l=Object(h.useCx)(),d=Object(h.useTheme)(),m=p.useState(null),g=v()(m,2),f=g[0],b=g[1],y=p.useState(null),x=v()(y,2),E=x[0],S=x[1];return p.useEffect((function(){var e=function(){var e=Q(a,r,d);if(u(e),"function"!=typeof t&&(null==t?void 0:t.current)&&S(t.current.offsetTop),null==o?void 0:o.current){var n=o.current.getBoundingClientRect().left,i=window.innerWidth-n-8*d.grid.xStep;b(i)}};T.a.on("resize_throttled",e);var n=Object(L.a)((function(t){"iframe.resize"!==t.context&&"player.js"!==t.context||e()})).destructor;return e(),function(){T.a.off("resize_throttled",e),n()}}),[r,a]),p.createElement("div",{className:l(D)},p.createElement(O.b,{display:"block",xs:{display:"none"},sm:{display:"none"},md:{display:"none"},lg:{display:"none"}},p.createElement("aside",{className:l(G),ref:o,style:{width:f?"".concat(f,"px"):void 0}},c&&p.createElement(J,{creator:n,highlights:r,positionMap:c,yPosOffset:E,width:f}))))})),Z=p.memo(K),$=l()(H(),N),ee=l()(F()),te=n("./src/components/post/body/ActivePrivateNoteContext.tsx"),ne=n("./src/util/richText.ts");function re(){var e=a()(["\n  fragment PostBody_customStyleSheet on CustomStyleSheet {\n    ...PostBodySection_customStyleSheet\n  }\n  ","\n"]);return re=function(){return e},e}function ae(){var e=a()(["\n  fragment PostBody_privateNote on Note {\n    ...normalizedBodyModel_privateNote\n    ...PostBodySection_privateNote\n  }\n  ","\n  ","\n"]);return ae=function(){return e},e}function oe(){var e=a()(["\n  fragment PostBody_creator on User {\n    ...PostNotesMarkers_creator\n  }\n  ","\n"]);return oe=function(){return e},e}function ie(){var e=a()(["\n  fragment PostBody_highlight on Quote {\n    paragraphs {\n      id\n    }\n    ...normalizedBodyModel_highlight\n    ...PostBodySection_highlight\n    ...PostNotesMarkers_highlight\n  }\n  ","\n  ","\n  ","\n"]);return ie=function(){return e},e}function se(){var e=a()(["\n  fragment PostBody_bodyModel on RichText {\n    sections {\n      name\n      startIndex\n      textLayout\n      imageLayout\n      backgroundImage {\n        id\n        originalHeight\n        originalWidth\n      }\n      videoLayout\n      backgroundVideo {\n        videoId\n        originalHeight\n        originalWidth\n        previewImageId\n      }\n    }\n    paragraphs {\n      id\n      ...PostBodySection_paragraphs\n    }\n    ...normalizedBodyModel_richText\n  }\n  ","\n  ","\n"]);return se=function(){return e},e}n.d(t,"a",(function(){return le})),n.d(t,"d",(function(){return pe})),n.d(t,"b",(function(){return de})),n.d(t,"e",(function(){return he})),n.d(t,"c",(function(){return me}));var ce=function(){return{position:"absolute",left:0,top:"calc(100vh + ".concat(100,"px)"),bottom:"calc(100vh + ".concat(100,"px)"),width:"10px",pointerEvents:"none"}},ue=p.forwardRef((function(e,t){var n=e.bodyModel,r=e.creator,a=e.highlights,o=e.privateNotes,s=e.postBodyInserts,u=e.richTextStyle,l=void 0===u?"FULL_PAGE":u,m=e.customStyleSheet,g=Object(h.useCx)(),y=Object(te.b)().privateNoteSelection,v=p.useMemo((function(){return a&&y?[].concat(c()(a),[y]):a}),[a,y]),x=p.useMemo((function(){return Object(ne.f)(n,{highlights:v,privateNotes:o,richTextStyle:l})}),[n,v,o,l]),E=s&&s.first;return p.createElement("div",{ref:t},p.createElement(p.Fragment,null,p.createElement(d.a,{name:"ghost-track",type:"ghost",className:g(ce)}),"FULL_PAGE"===l&&a&&a.length>0&&p.createElement(Z,{creator:r,highlights:c()(a),ref:t}),!!E&&p.createElement("section",{className:g({marginBottom:"20px"})},E.component)),x.map((function(e,t){if("HR"===e){var n,r,a=x[t-1],o=x[t+1],c="HR"!==a&&(null==a?void 0:null===(n=a.section)||void 0===n?void 0:n.backgroundImage),u="HR"!==o&&(null==o?void 0:null===(r=o.section)||void 0===r?void 0:r.backgroundImage);return c||u?null:p.createElement(f,{key:t})}return p.createElement(b.d,i()({key:e.section.name||t,postBodyInserts:s,customStyleSheet:m},e))})))})),le=(t.f=ue,l()(se(),ne.i,b.d.fragments.paragraphs)),pe=l()(ie(),ne.g,b.b,$),de=l()(oe(),ee),he=l()(ae(),ne.h,b.c),me=l()(re(),b.a)},"./src/components/post/grouping/ParagraphLayoutGrouping.tsx":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),a=n.n(r),o=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),i=n.n(o),s=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),c=n.n(s),u=n("./node_modules/graphql-tag/src/index.js"),l=n.n(u),p=n("./node_modules/react/index.js"),d=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),h=n.n(d),m=n("./node_modules/@babel/runtime/helpers/extends.js"),g=n.n(m),f=n("./src/WatchBounds.tsx"),b=n("./src/components/collection/theming/customStyleSheet.ts"),y=n("./src/components/post/PostBodyParagraph.tsx"),v=n("./src/components/session/WithFlag.tsx"),x=n("./src/framework/design-system/util/style/responsiveStyles.ts"),E=n("./src/framework/style/index.ts"),S=n("./src/util/richText.ts");function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(){var e=i()(["\n  fragment ParagraphStyleGrouping_customStyleSheet on CustomStyleSheet {\n    id\n    postBodyOLI {\n      ...SupportedContainerStyles_styleNode\n    }\n    postBodyULI {\n      ...SupportedContainerStyles_styleNode\n    }\n    ...PostBodyParagraph_customStyleSheet\n  }\n  ","\n  ","\n"]);return O=function(){return e},e}function P(){var e=i()(["\n  fragment ParagraphStyleGrouping_privateNote on Note {\n    ...PostBodyParagraph_privateNote\n  }\n  ","\n"]);return P=function(){return e},e}function T(){var e=i()(["\n  fragment ParagraphStyleGrouping_highlight on Quote {\n    ...PostBodyParagraph_highlight\n  }\n  ","\n"]);return T=function(){return e},e}var j=p.memo((function(e){var t=e.styleGroup,n=e.postBodyInserts,r=e.customStyleSheet,o=Object(E.useCx)(),i=W(t),s=t.paragraphViewModels.map((function(e){var t=e.paragraph.name,a=n&&n[t],o=p.createElement(y.d,g()({key:e.paragraph.name,insert:a,customStyleSheet:r},e));return"Title"===e.paragraphStyle?p.createElement(f.a,{name:"title",type:"byline",offset:{left:-600},key:"".concat(e.paragraph.name,"-wb")},o):o}));return i?p.createElement(v.a,{name:"enable_theme_editor"},(function(e){return p.createElement(i,{className:o([L({paragraphStyle:t.paragraphStyle,topSpacing:t.topSpacing,paragraphLayout:t.paragraphLayout,paragraphCount:t.paragraphViewModels.length,richTextStyle:t.paragraphViewModels[0].richTextStyle})].concat(a()(e?[function(){return B(r,t.paragraphStyle)}]:[])))},s)})):s})),k=l()(T(),y.b),I=l()(P(),y.c),N=l()(O(),b.a,y.a),R=function(e){var t=[];return e.forEach((function(e){var n=e.paragraphStyle,r=e.paragraph.layout,a=t[t.length-1];a&&C(a,e)?a.paragraphViewModels.push(e):t.push({paragraphStyle:n,paragraphLayout:r,topSpacing:e.sequenceSpaceTop||0,paragraphViewModels:[e]})})),t},C=function(e,t){if(e.paragraphStyle!==t.paragraphStyle)return!1;var n=t.paragraph.layout;return"OUTSET_ROW"===e.paragraphLayout?"OUTSET_ROW_CONTINUE"===n:e.paragraphLayout===n},L=function(e){var t=e.paragraphStyle,n=e.topSpacing,r=e.paragraphLayout,a=(e.paragraphCount,e.richTextStyle);return function(e){var o={};switch(n&&(o.marginTop=Object(x.b)((function(e){var t=h()(e,1)[0];return"".concat(t,"px")}),n)),t){case"BQ":var i=e.baseColor.border.darker||"";return Object(x.a)(e,_({},o,{boxShadow:"inset ".concat(3,"px 0 0 0 ").concat(i),paddingLeft:"".concat(23,"px"),marginLeft:Object(S.j)(a)?"0px":"-20px"}));case"PRE":return Object(x.a)(e,_({},o,{padding:"20px",background:e.baseColor.background.normal,overflowX:"auto"}));case"PQ":return Object(x.a)(e,_({},o,{paddingLeft:"SERIES"===a?"0px":"30px"}))}switch(r){case"OUTSET_ROW":return Object(x.a)(e,_({},o,{display:"flex",flexDirection:"row"}))}return Object(x.a)(e,o)}},B=function(e,t){switch(t){case S.a.OLI:return Object(b.c)(null==e?void 0:e.postBodyOLI);case S.a.ULI:return Object(b.c)(null==e?void 0:e.postBodyULI);default:return{}}},W=function(e){var t=e.paragraphStyle,n=e.paragraphLayout;switch(t){case"OLI":return"ol";case"ULI":return"ul";case"BQ":case"PQ":return"blockquote";case"PRE":return"pre"}switch(n){case"OUTSET_ROW":return"div"}return null},M=n("./src/framework/design-system/index.ts"),A=n("./src/schema-types/globalTypes.ts");function F(){var e=i()(["\n  fragment ParagraphLayoutGrouping_customStyleSheet on CustomStyleSheet {\n    ...ParagraphStyleGrouping_customStyleSheet\n  }\n  ","\n"]);return F=function(){return e},e}function H(){var e=i()(["\n  fragment ParagraphLayoutGrouping_privateNote on Note {\n    ...ParagraphStyleGrouping_privateNote\n  }\n  ","\n"]);return H=function(){return e},e}function U(){var e=i()(["\n  fragment ParagraphLayoutGrouping_highlight on Quote {\n    ...ParagraphStyleGrouping_highlight\n  }\n  ","\n"]);return U=function(){return e},e}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.d(t,"a",(function(){return V})),n.d(t,"c",(function(){return q})),n.d(t,"d",(function(){return Q})),n.d(t,"b",(function(){return X})),n.d(t,"e",(function(){return J}));var z={clear:"both"},D={clear:"both",width:"100%"},Y=function(e){var t={boxSizing:"border-box",margin:"0 auto",width:"100%"};return"INSET_CENTER"===e?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{maxWidth:"700px",padding:"0 1.25em"}):t},V=p.memo((function(e){var t=e.layoutGroup,n=e.postBodyInserts,r=e.customStyleSheet,a=Object(E.useCx)(),o=t.styleGroups[0].paragraphViewModels[0].richTextStyle,i=t.styleGroups.map((function(e,t){return p.createElement(j,{key:t,styleGroup:e,postBodyInserts:n,customStyleSheet:r})}));if(Object(S.j)(o))return p.createElement(p.Fragment,null,i);switch(t.effectiveLayout){case"OUTSET_CENTER":case"OUTSET_ROW":return p.createElement("div",{className:a(z)},p.createElement(M.a,{size:{xs:"full",sm:"full",md:"full",lg:"outset",xl:"outset"}},i));case"FULL_WIDTH":return p.createElement("div",{className:a(D)},i);default:return"FULL_PAGE"===o?p.createElement(M.a,{size:"inset"},i):p.createElement("div",{className:a(Y(t.effectiveLayout))},i)}})),q=l()(U(),k),Q=l()(H(),I),X=l()(F(),N),J=function(e){var t=[],n=[];e.forEach((function(e){var r=K(e.paragraphStyle,e.paragraph.layout),o=t[t.length-1];if(o&&o.effectiveLayout===r)n.push(e);else{if(o){var i,s=R(n);(i=o.styleGroups).push.apply(i,a()(s))}n.length=0,n.push(e),t.push({styleGroups:[],effectiveLayout:r})}}));var r=t[t.length-1];if(r){var o,i=R(n);(o=r.styleGroups).push.apply(o,a()(i))}return t},K=function(e,t){switch(t){case A.a.INSET_LEFT:case A.a.OUTSET_LEFT:return"IMG"===e||"IFRAME"===e?A.a.INSET_CENTER:t;case A.a.OUTSET_ROW_CONTINUE:return A.a.OUTSET_ROW;default:return t||A.a.INSET_CENTER}}},"./src/components/post/paragraph/IframeParagraph/iframePostMessageNormalizer.ts":function(e,t,n){"use strict";function r(e){e&&e.iframe&&e.height&&(e.iframe.getAttribute&&"number"==typeof e.height&&i({context:"iframe.resize",height:e.height,src:e.iframe.getAttribute("src")||""}))}function a(e){if(e.data&&"string"==typeof e.data){var t;try{t=JSON.parse(e.data)}catch(e){return}i(t)}}n.d(t,"a",(function(){return s}));var o=[];function i(e){o.forEach((function(t){return t(e)}))}function s(e){return window._resizeIframe||(window._resizeIframe=r,window.addEventListener("message",a)),o.push(e),{destructor:function(){0===(o=o.filter((function(t){return e!==t}))).length&&"undefined"!=typeof window&&(window._resizeIframe=null,window.removeEventListener("message",a))}}}},"./src/components/post/paragraph/ImageParagraph.tsx":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),a=n.n(r),o=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(o),s=n("./node_modules/@babel/runtime/helpers/extends.js"),c=n.n(s),u=n("./node_modules/lodash/round.js"),l=n.n(u),p=n("./node_modules/graphql-tag/src/index.js"),d=n.n(p),h=n("./node_modules/react/index.js"),m=n("./src/components/collection/theming/customStyleSheet.ts"),g=n("./src/components/post/body/ParagraphRefsMapContext.tsx"),f=n("./src/components/post/markups/InteractiveMarkups.tsx"),b=n("./src/components/post/markups/Markups.tsx"),y=n("./src/components/post/notes/PostAnnotationsMarker.tsx"),v=n("./src/components/ui/image/FocusableMiroImage.tsx"),x=n("./src/framework/design-system/components/index.ts"),E=n("./src/framework/style/index.ts"),S=n("./src/util/miroImage.ts"),w=function(e){return{backgroundColor:e.brandColor.sage.light}},_=function(e,t){var n=Object(S.d)({freezeGifs:!1,miroId:e,strategy:S.a.Resample,width:t.breakpoints.sm}),r=Object(S.d)({freezeGifs:!1,miroId:e,strategy:S.a.Resample,width:t.breakpoints.md}),a=Object(S.d)({freezeGifs:!1,miroId:e,strategy:S.a.Resample,width:t.breakpoints.lg}),o=Object(S.d)({freezeGifs:!1,miroId:e,strategy:S.a.Resample,width:t.breakpoints.xl});return{xl:"url('".concat(o,"')"),lg:"url('".concat(o,"')"),md:"url('".concat(a,"')"),sm:"url('".concat(r,"')"),xs:"url('".concat(n,"')")}};function O(e){var t=e.metadata,n=Object(E.useCx)();return h.createElement(x.M,null,(function(e){return h.createElement("div",{className:n(w)},h.createElement(v.a,{backgroundImage:_(t.id,e),miroId:t.id,height:"60vh",width:"100%",minHeight:{xl:500,lg:400,md:400,sm:300,xs:300},imgHeight:500,imgWidth:2e3,focusPercent:null===t.focusPercentX||void 0===t.focusPercentX||null===t.focusPercentY||void 0===t.focusPercentY?void 0:[t.focusPercentX,t.focusPercentY]}))}))}var P=n("./src/components/session/WithFlag.tsx"),T=n("./src/components/session/WithViewer.tsx"),j=n("./src/components/session/useFlag.tsx"),k=n("./src/components/ui/FigCaption.tsx"),I=n("./src/components/ui/Figure.tsx"),N=n("./src/components/ui/image/index.ts"),R=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),C=n.n(R),L=n("./src/framework/reporter/index.ts"),B=n("./src/framework/track/index.ts"),W=n("./src/styles/zIndex.ts"),M=function(e,t,n,r,a,o,i){if(!i)return{};var s=Math.min(Math.min(t,r||1/0)/o,Math.min(e,n||1/0)/a),c=o*s,u=a*s,l=(e-u)/2,p=((t-c)/2-(i.left+(o-c)/2))/s,d=(l-(i.top+(a-u)/2))/s;return{transition:"transform 300ms cubic-bezier(0.2, 0, 0.2, 1)",zIndex:W.a.floating,transform:"scale(".concat(s,") translate(").concat(p,"px, ").concat(d,"px)"),position:"absolute",height:"".concat(a,"px"),width:"".concat(o,"px"),cursor:"zoom-out"}},A=function(e){var t=e.children,n=e.height,r=e.width,a=e.originalHeight,o=e.originalWidth,i=e.paragraphRef;return e.isLinked||!a||!o||!n||n===a&&r===o?t:h.createElement(F,{originalHeight:a,originalWidth:o,height:n,width:r,paragraphRef:i},t)},F=function(e){var t=e.children,n=e.originalHeight,r=e.originalWidth,a=e.height,o=e.width,i=e.paragraphRef,s=h.useState(null),c=C()(s,2),u=c[0],l=c[1],p=h.useState(0),d=C()(p,2),m=d[0],g=d[1],f=h.useState(0),b=C()(f,2),y=b[0],v=b[1],S=h.useState(0),w=C()(S,2),_=w[0],O=w[1],P=Object(E.useCx)(),T=Object(L.c)(),j=i&&i.current&&i.current.getBoundingClientRect(),k=h.useCallback((function(){T.event("client.action",{action:"zoom",eventType:"click"})}),[]);h.useEffect((function(){g(window.innerHeight),v(window.innerWidth),O(window.scrollY);var e=function(){u&&Math.abs(_-window.scrollY)>40&&l(!1)},t=function(){g(window.innerHeight),v(window.innerWidth)};return B.a.on("scroll",e),B.a.on("resize",t),function(){B.a.off("scroll",e),B.a.off("resize",t)}}));var I;return h.createElement(h.Fragment,null,h.createElement("div",{onClick:function(){u||k(),l(!u)},className:P(u?M(m,y,n,r,a,o,j):(I=u,{transition:"transform 300ms cubic-bezier(0.2, 0, 0.2, 1)",cursor:"zoom-in",position:"relative",zIndex:null===I?"auto":W.a.floating,width:"100%"})),onTransitionEnd:function(){u||l(null)}},t),h.createElement(x.j,{padding:0,withPageScroll:!0,isVisible:!!u,hide:function(){return l(!1)},withCloseButton:!1},h.createElement(h.Fragment,null)))},H=n("./src/styles/breakpoints.ts"),U=n("./src/styles/position.ts"),G=n("./src/styles/post/spacing.ts"),z=n("./src/util/richText.ts");function D(){var e=a()(["\n  fragment ImageParagraph_customStyleSheet on CustomStyleSheet {\n    id\n    postBodyImage {\n      ...SupportedContainerStyles_styleNode\n    }\n  }\n  ","\n"]);return D=function(){return e},e}function Y(){var e=a()(["\n  fragment ImageParagraph_privateNote on Note {\n    ...PostAnnotationsMarker_privateNote\n  }\n  ","\n"]);return Y=function(){return e},e}function V(){var e=a()(["\n  fragment ImageParagraph_highlight on Quote {\n    id\n    ...InteractiveMarkups_highlight\n    ...Markups_highlight\n  }\n  ","\n  ","\n"]);return V=function(){return e},e}function q(){var e=a()(["\n  fragment ImageParagraph_paragraph on Paragraph {\n    href\n    layout\n    metadata {\n      id\n      originalHeight\n      originalWidth\n      focusPercentX\n      focusPercentY\n      alt\n    }\n    ...InteractiveMarkups_paragraph\n    ...Markups_paragraph\n    ...PostAnnotationsMarker_paragraph\n  }\n  ","\n  ","\n  ","\n"]);return q=function(){return e},e}n.d(t,"c",(function(){return Q})),n.d(t,"b",(function(){return X})),n.d(t,"d",(function(){return J})),n.d(t,"a",(function(){return K}));t.e=h.memo((function(e){var t=e.isSequenceCover,n=void 0!==t&&t,r=e.highlights,a=e.paragraph,o=e.paragraphStyle,s=e.privateNotes,u=e.richTextStyle,p=e.sequenceAspectRatio,d=e.spaceTop,v=e.updateWatchedBounds,w=e.customStyleSheet,_=Object(E.useCx)(),R=Object(j.a)("enable_theme_editor"),C=h.useRef(null),L=Object(g.c)(a,o);h.useEffect((function(){if(v){var e=a.name,t=a.metadata&&a.metadata.id;if(e&&t){var n="";C.current&&(n=C.current.offsetTop.toString()),v("".concat(e,"-").concat(t,"-").concat(n),C,{type:"image"})}}}),[]);var B=a.metadata,W=a.layout;if(!B)return null;var M,F=B.id,D=B.originalHeight,Y=B.originalWidth,V=B.alt,q=Object(S.c)(F),Q=function(e){var t=e.layout,n=e.originalWidth,r=e.originalHeight,a=e.sequenceAspectRatio,o=S.a.Resample,i=r&&n?r/n:null,s=n;switch(t){case"CROPPED_HEIGHT_PREVIEW":s=700,i=.3,o=S.a.Crop;break;case"CONSTRAINED_HEIGHT_PREVIEW":s=700,i&&240/i<s&&(s=240/i);break;case"INSET_LEFT":case"INSET_CENTER_SMALL":case"INSET_RIGHT":s=350;break;case"OUTSET_LEFT":s=500;break;case"OUTSET_ROW":case"OUTSET_ROW_CONTINUE":if(s=1e3,a&&i)s*=1/i/a;break;case"OUTSET_CENTER":s=1e3;break;case"FULL_WIDTH":case"FULL_WIDTH_CROPPED_COVER":s=2400;break;default:s=700}return n&&(s=Math.min(s,n)),{width:s,height:i?i*s:void 0,strategy:o}}({layout:W,originalWidth:Y||0,originalHeight:D||0,sequenceAspectRatio:p}),X=Q.width,J=Q.height,K=Q.strategy;if("OUTSET_ROW_CONTINUE"===W&&Y&&D&&p){var Z=Y/D;M=l()(p/Z,2)}var $,ee=a.text?h.createElement(k.a,{ref:L,textAlign:n?"left":"center",extendLeftRatio:M},s&&h.createElement(y.a,{paragraph:a,privateNotes:s}),h.createElement(P.a,{name:"enable_lite_post_highlights",nonBlocking:!0},(function(e){var t={highlights:r,paragraph:a,paragraphStyle:o};return e&&"FULL_PAGE"===u?h.createElement(T.b,{nonBlocking:!0},(function(e){return h.createElement(f.a,c()({},t,{viewer:e}))})):h.createElement(b.a,c()({},t,{richTextStyle:u}))}))):null;if(n)$=h.createElement(O,{metadata:{id:F,focusPercentX:B.focusPercentX,focusPercentY:B.focusPercentY}});else{var te={isAmp:!1,alt:V||void 0,miroId:F,height:J,width:X,rules:J?[U.a]:[{maxWidth:"100%"}],maxWidth:J?void 0:"100%",strategy:K,freezeGifs:"STREAM"===u||"RESAMPLE"!==K,focusPercentX:B.focusPercentX,focusPercentY:B.focusPercentY};if(Object(z.j)(u)){var ne=function(){return h.createElement("div",{className:_(X>0?{maxWidth:"".concat(X,"px")}:{})},h.createElement(N.c,te))};if(!X||!J)return h.createElement("div",{className:_(Object(G.m)(d))},h.createElement(ne,null));$=h.createElement(ne,null)}else if("OUTSET_LEFT"===W||"INSET_LEFT"===W||"INSET_CENTER"===W&&Y||"OUTSET_CENTER"===W&&Y){var re=Y&&(q?Y/2:Y);$=h.createElement(A,{isLinked:!!a.href,width:te.width,height:te.height,originalHeight:B.originalHeight,originalWidth:B.originalWidth,paragraphRef:C},h.createElement("div",{className:_((function(e){return{marginLeft:"auto",marginRight:"auto",maxWidth:"OUTSET_CENTER"===W&&re&&re<e.maxWidths.outset?"".concat(e.maxWidths.outset,"px"):"".concat(re,"px")}}))},h.createElement(N.c,c()({},te,{height:B.originalHeight||te.height,width:B.originalWidth||te.width}))))}else $=Y&&"INSET_CENTER"!==W?h.createElement(A,{isLinked:!!a.href,width:te.width,height:te.height,originalHeight:B.originalHeight,originalWidth:B.originalWidth,paragraphRef:C},h.createElement(N.c,c()({},te,{height:B.originalHeight||te.height,width:B.originalWidth||te.width}))):h.createElement(x.b,{display:"flex",justifyContent:"center",sm:{display:"block"}},h.createElement(A,{isLinked:!!a.href,width:te.width,height:te.height,originalHeight:B.originalHeight,originalWidth:B.originalWidth,paragraphRef:C},h.createElement(N.c,c()({},te,{width:null,maxWidth:"100%",strategy:null}))));a.href&&($=h.createElement("a",{href:a.href},$))}var ae=[Object(G.m)(d)];if(ae.push({clear:"both"}),n)ae.push((function(e){return i()({},H.lg(e),{paddingLeft:"0px",paddingRight:"0px"})}));else if(("OUTSET_ROW"===W||"OUTSET_ROW_CONTINUE"===W)&&Y&&D&&p){var oe=Y/D,ie=l()(oe/p*100,2);ae.push({width:"".concat(ie,"%"),marginRight:"10px",paddingTop:"5px",paddingBottom:"5px",":last-of-type":{marginRight:0}})}else"OUTSET_CENTER"===W?ae.push({paddingBottom:"5px",paddingTop:"5px"}):"OUTSET_LEFT"===W?ae.push((function(e){var t;return t={background:e.backgroundColor,borderWidth:e.borderWidthThick+"px",borderStyle:e.borderStyle,borderColor:e.backgroundColor,float:"left",marginLeft:"-150px",marginRight:"30px",width:"75%",padding:"0",paddingBottom:"10px"},i()(t,H.lg(e),{float:"none",marginLeft:"0",marginRight:"0",width:"100%"}),i()(t,"marginBottom","16px"),t})):"INSET_LEFT"===W?ae.push({float:"left",width:"50%",paddingBottom:"10px",paddingRight:"30px",marginBottom:"16px"}):"FULL_WIDTH"===W?ae.push({width:"100%"}):"INSET_CENTER"===W&&ae.push({marginLeft:"auto",marginRight:"auto"});return R&&ae.push((function(){return function(e){return Object(m.c)(null==e?void 0:e.postBodyImage)}(w)})),h.createElement(I.a,{className:"".concat(_(ae)," paragraph-image"),figCaption:ee,figureRef:C},$)}));var Q=d()(q(),f.c,b.c,y.b),X=d()(V(),f.b,b.b),J=d()(Y(),y.c),K=d()(D(),m.a)},"./src/components/ui/FigCaption.tsx":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),a=n.n(r),o=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(o),s=n("./node_modules/react/index.js"),c=n("./src/framework/design-system/util/style/converters.ts"),u=n("./src/framework/style/index.ts"),l=n("./src/styles/breakpoints.ts"),p=n("./src/styles/font.ts"),d=function(e){return function(t){return i()({color:t.baseColor.text.lighter,fontSize:"16px",lineHeight:1.4,marginTop:"10px",textAlign:e,maxWidth:"".concat(Object(c.a)(t,8,!0),"px"),marginLeft:"left"===e?"0":"auto",marginRight:"auto"},l.lg(t),{marginLeft:"auto",textAlign:"center"})}},h=function(e){return function(t){var n=e&&100*e;return{width:"".concat(n,"%"),position:"relative",left:"calc(".concat(100-n/2,"% - 8px)"),transform:"translateX(-50%)"}}},m=s.forwardRef((function(e,t){var n=e.children,r=e.textAlign,o=void 0===r?"center":r,i=e.extendLeftRatio,c=Object(u.useCx)();return s.createElement("figcaption",{className:c([d(o),Object(p.g)()].concat(a()(i?[h(i)]:[]))),ref:t},n)}));t.a=m},"./src/components/ui/Figure.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("./node_modules/react/index.js");function a(e){var t=e.children,n=e.figCaption,a=e.className,o=e.figureRef;return r.createElement("figure",{className:a,ref:o},t,n)}},"./src/components/ui/image/FocusableMiroImage.tsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),a=n.n(r),o=n("./node_modules/react/index.js"),i=n("./src/framework/design-system/util/style/responsiveStyles.ts"),s=n("./src/framework/style/index.ts"),c=n("./src/util/miroImage.ts"),u=function(e){var t=a()(e,1)[0];return"number"==typeof t?"".concat(t,"px"):t},l=function(e){var t=a()(e,1)[0];return"".concat(t[0],"% ").concat(t[1],"%")},p=function(e){return a()(e,1)[0]};function d(e){var t=e.backgroundImage,n=e.boxShadowRules,r=e.miroId,a=e.height,d=e.width,h=e.minHeight,m=e.minWidth,g=e.imgHeight,f=e.imgWidth,b=e.focusPercent,y=e.strategy,v=void 0===y?c.a.Resample:y,x=e.darken,E=e.freezeGifs,S=Object(s.useCx)(),w=t;if(!w){var _=Object(c.d)({miroId:r,height:g,width:f,strategy:v,darken:x,freezeGifs:E});w="url(".concat(_,")")}var O=Object(i.b)(u,a),P=Object(i.b)(u,d),T=h&&Object(i.b)(u,h),j=m&&Object(i.b)(u,m),k=Object(i.b)(l,b),I=Object(i.b)(p,w);return o.createElement("div",{className:S([function(e){return Object(i.a)(e,{backgroundImage:I,display:"block",backgroundOrigin:"border-box",backgroundSize:"cover",height:O,width:P,minHeight:T,minWidth:j,backgroundPosition:k,maxWidth:"100%"})},n])})}d.defaultProps={focusPercent:[50,50]}},"./src/framework/design-system/index.ts":function(e,t,n){"use strict";var r=n("./src/framework/design-system/components/grid-system/index.ts");n.d(t,"a",(function(){return r.c}))},"./src/svg/arrow-down-21px.svg":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),a=n.n(r);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var i=a.a.createElement("path",{d:"M4 7.33L10.03 14l.5.55.5-.55 5.96-6.6-.98-.9-5.98 6.6h1L4.98 6.45z",fillRule:"evenodd"});t.a=function(e){return a.a.createElement("svg",o({width:21,height:21,viewBox:"0 0 21 21"},e),i)}},"./src/util/typeGuards.ts":function(e,t,n){"use strict";function r(e){return null!=e}n.d(t,"a",(function(){return r}))}}]);
//# sourceMappingURL=screen.collection.packageBuilder~screen.collection.styleEditor~screen.landingpages.pres45~screen.lan~674be8d4.f7c8832d.chunk.js.map