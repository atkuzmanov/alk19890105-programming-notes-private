//!Portions of this code are licensed under the following license:
//!  For license information please see fs.js.LICENSE 
!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/s",n(n.s=4)}([function(e,t){},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};t.__esModule=!0;var i=n(6);t.Object=i.ExtendedObject,t.isNonEmpty=function(e){return e.length>0},t.assertExhaustive=function(e,t){throw void 0===t&&(t="Reached unexpected case in exhaustive switch"),new Error(t)},t.pick=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r={};return t.forEach(function(t){r[t]=e[t]}),r},t.omit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=r({},e);return Object.keys(i).forEach(function(e){var n=e;-1!==t.indexOf(n)&&delete i[n]}),i}},function(e){e.exports={Any:{iframe:{src:"scrubUrl",srcdoc:"erase"},frame:{src:"scrubUrl",srcdoc:"erase"}},Exclude:{"*":{alt:"erase",checked:"erase",data:"erase",placeholder:"erase",src:"erase",srcset:"erase",href:"erase",title:"erase",value:"erase"}},Mask:{"*":{checked:"erase",data:"erase",alt:"maskText",placeholder:"maskText",title:"maskText",value:"maskText"}}}},function(e){e.exports=[{Selector:"object:not([type^=\"image/\"])",Consent:!1,Type:1},{Selector:"embed:not([type^=\"image/\"])",Consent:!1,Type:1},{Selector:"canvas",Consent:!1,Type:1},{Selector:"noscript",Consent:!1,Type:1},{Selector:".fs-hide",Consent:!1,Type:1},{Selector:".fs-exclude",Consent:!1,Type:1},{Selector:".fs-exclude-without-consent",Consent:!0,Type:1},{Selector:".fs-mask",Consent:!1,Type:2},{Selector:".fs-mask-without-consent",Consent:!0,Type:2},{Selector:".fs-unmask",Consent:!1,Type:3},{Selector:".fs-unmask-with-consent",Consent:!0,Type:3},{Selector:".fs-block",Consent:!1,Type:1},{Selector:".fs-record-with-consent",Consent:!0,Type:1}]},function(e,t,n){e.exports=n(7)},function(e,t){},function(e,t,n){"use strict";t.__esModule=!0,t.ExtendedObject=Object},function(e,t,n){"use strict";n.r(t);n(5);var r=!1;function i(){return r}function o(e){i()&&window.console&&console.log(e)}function s(){var e=Date.now();return"number"!=typeof e?new Date().getTime():e}var a=["","0","1","-1","true","false","n/a","nan","undefined","null","nil","the_id_that_you_use_in_your_app_for_this_user"],u=["811c9dc5","350ca8af","340ca71c","14cd0a2b","4db211e5","0b069958","3613e041","2f8f13ba","9b61ad43","77074ba4","0da3f8ec","1c750511"],c=function(){return Math.floor(s()/1e3)},h=function(){return c()+31536e3};function d(e){if(!e)return null;var t=e.split("/"),n=t[0],r=t[1],i=parseInt(r),s=c(),d=h();if(isNaN(i)&&(i=d),i<=s)return null;i>d&&(i=d);var l=n.split(/[#,]/);if(l.length<3&&(l=n.split("`")).length<3)return null;var p=l[0],f=l[1],_=l[2],v=l[3],g="";void 0!==v&&(g=decodeURIComponent(v),(a.indexOf(g)>=0||u.indexOf(g)>=0)&&(o("Ignoring invalid app key \""+g+"\" from cookie."),g=""));var y=_.split(":");return{expirationAbsTimeSeconds:i,host:p,orgId:f,userId:y[0],sessionId:y[1]||"",appKeyHash:g}}function l(e){for(var t={},n=e.cookie.split(";"),r=0;r<n.length;r++){var i=n[r].replace(/^\s+|\s+$/g,"").split("=");t[i[0]]||(t[i[0]]=i[1])}return t}var p="_fs_loaded",f="_fs_namespace";function _(e){return e}var v,g,y,m,w,b,S,E,T,k,I,C,x,R="FS";function O(e){if(v)return v;var t=A(e);return t?(v=t,t):(t=_(e)[f])?(v=t,t):v=R}function A(e){return e[p]}function L(e){return e[O(e)]}function F(e){var t=e,n=t.indexOf(":");return n>=0&&(t=t.slice(0,n)),t}function P(e){return"localhost"==e||"127.0.0.1"==e}function M(e){return!!e._fs_ext_debug||!!e._fs_debug}function U(e){return e._fs_rec_host||function(e){if(!e)return e;if(P(F(e)))return e;if(0==e.indexOf("www."))return"rs."+e.slice(4);if(0==e.indexOf("app."))return"rs."+e.slice(4);return"rs."+e}(H(e))}function q(e){return e._fs_ext_org||e._fs_org}function N(e){return!!e._fs_is_outer_script}function W(e){return e._fs_replay_flags}function B(e){return e._fs_transport}function D(e,t){var n=L(e);if(n){var r=n.q;r||(r=n.q=[]),r.push(t)}}function H(e){return e._fs_ext_host||e._fs_host}function j(e){return e?P(F(e))?e:0==e.indexOf("www.")?"app."+e.slice(4):"app."+e:e}function K(e){return e?e+"/s/fs.js":void 0}function V(e){switch(e){case g.MOUSEDOWN:case g.MOUSEMOVE:case g.MOUSEMOVE_CURVE:case g.MOUSEUP:case g.KEYDOWN:case g.KEYUP:case g.TOUCHSTART:case g.TOUCHEND:case g.TOUCHMOVE:case g.TOUCHMOVE_CURVE:case g.TOUCHCANCEL:case g.CLICK:case g.SCROLL_LAYOUT:case g.SCROLL_LAYOUT_CURVE:case g.SCROLL_VISUAL_OFFSET:case g.SCROLL_VISUAL_OFFSET_CURVE:case g.NAVIGATE:return!0;}return!1}!function(e){e.MUT_INSERT=2,e.MUT_REMOVE=3,e.MUT_ATTR=4,e.MUT_TEXT=6,e.MOUSEMOVE=8,e.MOUSEMOVE_CURVE=9,e.SCROLL_LAYOUT=10,e.SCROLL_LAYOUT_CURVE=11,e.MOUSEDOWN=12,e.MOUSEUP=13,e.KEYDOWN=14,e.KEYUP=15,e.CLICK=16,e.FOCUS=17,e.VALUECHANGE=18,e.RESIZE_LAYOUT=19,e.DOMLOADED=20,e.LOAD=21,e.PLACEHOLDER_SIZE=22,e.UNLOAD=23,e.BLUR=24,e.SET_FRAME_BASE=25,e.TOUCHSTART=32,e.TOUCHEND=33,e.TOUCHCANCEL=34,e.TOUCHMOVE=35,e.TOUCHMOVE_CURVE=36,e.NAVIGATE=37,e.PLAY=38,e.PAUSE=39,e.RESIZE_VISUAL=40,e.RESIZE_VISUAL_CURVE=41,e.LOG=48,e.ERROR=49,e.DBL_CLICK=50,e.FORM_SUBMIT=51,e.WINDOW_FOCUS=52,e.WINDOW_BLUR=53,e.HEARTBEAT=54,e.WATCHED_ELEM=56,e.PERF_ENTRY=57,e.REC_FEAT_SUPPORTED=58,e.SELECT=59,e.CSSRULE_INSERT=60,e.CSSRULE_DELETE=61,e.FAIL_THROTTLED=62,e.AJAX_REQUEST=63,e.SCROLL_VISUAL_OFFSET=64,e.SCROLL_VISUAL_OFFSET_CURVE=65,e.MEDIA_QUERY_CHANGE=66,e.RESOURCE_TIMING_BUFFER_FULL=67,e.MUT_SHADOW=68,e.DISABLE_STYLESHEET=69,e.FULLSCREEN=70,e.FULLSCREEN_ERROR=71,e.ADOPTED_STYLESHEETS=72,e.CUSTOM_ELEMENT_DEFINED=73,e.KEEP_ELEMENT=2e3,e.KEEP_URL=2001,e.KEEP_BOUNCE=2002,e.SYS_SETVAR=8193,e.SYS_RESOURCEHASH=8195,e.SYS_SETCONSENT=8196,e.SYS_CUSTOM=8197,e.SYS_REPORTCONSENT=8198}(g||(g={})),function(e){e.Unknown=0,e.Api=1,e.FsShutdownFrame=2,e.Hibernation=3,e.Reidentify=4,e.SettingsBlocked=5,e.Size=6,e.Unload=7}(y||(y={})),function(e){e.Timing=0,e.Navigation=1,e.Resource=2,e.Paint=3,e.Mark=4,e.Measure=5,e.Memory=6}(m||(m={})),function(e){e.Performance=0,e.PerformanceEntries=1,e.PerformanceMemory=2,e.Console=3,e.Ajax=4,e.PerformanceObserver=5,e.AjaxFetch=6}(w||(w={})),function(e){e.Node=1,e.Sheet=2}(b||(b={})),function(e){e.StyleSheetHooks=0,e.SetPropertyHooks=1}(S||(S={})),function(e){e.User="user",e.Account="acct",e.Event="evt"}(E||(E={})),function(e){e.Elide=0,e.Record=1,e.Whitelist=2}(T||(T={})),function(e){e.ReasonNoSuchOrg=1,e.ReasonOrgDisabled=2,e.ReasonOrgOverQuota=3,e.ReasonBlockedDomain=4,e.ReasonBlockedIp=5,e.ReasonBlockedUserAgent=6,e.ReasonBlockedGeo=7,e.ReasonBlockedTrafficRamping=8,e.ReasonInvalidURL=9,e.ReasonUserOptOut=10,e.ReasonInvalidRecScript=11,e.ReasonDeletingUser=12,e.ReasonNativeHookFailure=13}(k||(k={})),function(e){e.Unset=0,e.Exclude=1,e.Mask=2,e.Unmask=3,e.Watch=4,e.Keep=5}(I||(I={})),function(e){e.Unset=0,e.Click=1}(C||(C={})),function(e){e.MaxLogsPerPage=1024,e.MutationProcessingInterval=250,e.CurveSamplingInterval=142,e.DefaultBundleUploadInterval=5e3,e.HeartbeatInitial=4e3,e.HeartbeatMax=256200,e.PageInactivityTimeout=18e5,e.BackoffMax=3e5,e.ScrollSampleInterval=e.MutationProcessingInterval/5,e.InactivityThreshold=4e3,e.MaxPayloadLength=16384}(x||(x={}));function z(e,t){return function(){try{return e.apply(this,arguments)}catch(e){try{t&&t(e)}catch(e){}}}}var Y=function(){},Q=10,G="[anonymous]",J=/function\s*([\w\-$]+)?\s*\(/i;function X(e){return e.stack||e.backtrace||e.stacktrace}function $(){var e,t;try{throw new Error("")}catch(n){e="<generated>\n",t=X(n)}if(!t){e="<generated-ie>\n";var n=[];try{for(var r=arguments.callee.caller.caller;r&&n.length<Q;){var i=J.test(r.toString())&&RegExp.$1||G;n.push(i),r=r.caller}}catch(e){o(e)}t=n.join("\n")}return e+t}function Z(){try{return window.self!==window.top}catch(e){return!0}}var ee=function(){function e(){}return e.wrap=function(t,n){return void 0===n&&(n="error"),z(t,function(t){return e.sendToBugsnag(t,n)})},e.errorLimit=15,e.sendToBugsnag=function(t,n,r){if(!(e.errorLimit<=0)){e.errorLimit--,"string"==typeof t&&(t=new Error(t));var i=l(document).fs_uid,o=i?d(i):void 0;o&&o.orgId!=q(window)&&(o=void 0);var a=new Date(1582214498e3).toISOString(),u={projectRoot:window.location.origin,deviceTime:s(),inIframe:Z(),CompiledTimestamp:1582214498,CompiledTime:a,orgId:q(window),"userId:sessionId":o?o.userId+":"+o.sessionId:"NA",context:document.location&&document.location.pathname,message:t.message,name:"Recording Error",releaseStage:"production "+a,severity:n,language:navigator.language||navigator.userLanguage||"en-GB",stacktrace:X(t)||$()};if(r)for(var c in r)u["aux_"+c]=r[c];var h=[];for(var c in u)h.push(encodeURIComponent(c)+"="+encodeURIComponent(u[c]));new Image().src="https://"+U(window)+"/rec/except?"+h.join("&")}},e}(),te={};function ne(e,t,n){if(void 0===n&&(n=1),e)return!0;if(te[t]=te[t]||0,te[t]++,te[t]>n)return!1;var r=new Error("Assertion failed: "+t);return ee.sendToBugsnag(r,"error"),e}var re=n(3),ie=navigator.userAgent,oe=ie.indexOf("MSIE ")>-1||ie.indexOf("Trident/")>-1,se=oe&&ie.indexOf("rv:11")>-1,ae=ie.indexOf("Edge/")>-1;ie.indexOf("CriOS");/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent);function ue(e,t){for(var n=0===t.indexOf("on")?function(e){return"on"+e+t.slice(2)}:function(e){return""+e+t.charAt(0).toUpperCase()+t.slice(1)},r=0,i=[function(){return t},function(){return n("webkit")},function(){return n("moz")},function(){return n("ms")}];r<i.length;r++){var o=(0,i[r])();if(o in e)return o}return t}function ce(e){return"function"==typeof e}var he=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},de=0,le=function(e,t){be[de]=e,be[de+1]=t,2===(de+=2)&&_e()};var pe=window.MutationObserver||window.WebKitMutationObserver,fe="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof self&&void 0!==self.importScripts&&"undefined"!=typeof MessageChannel;var _e,ve,ge,ye,me,we,be=new Array(1e3);function Se(){for(var e=0;e<de;e+=2){(0,be[e])(be[e+1]),be[e]=void 0,be[e+1]=void 0}de=0}function Ee(e,t){var n=arguments,r=this,i=new this.constructor(Ie);void 0===i[ke]&&je(i);var o,s=r._state;return s?(o=n[s-1],le(function(){return De(s,i,o,r._result)})):qe(r,i,e,t),i}function Te(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(Ie);return Fe(t,e),t}pe?(ye=0,me=new pe(Se),we=document.createTextNode(""),me.observe(we,{characterData:!0}),_e=function(){var e=ye=++ye%2;we.data=e+""}):fe?((ge=new MessageChannel).port1.onmessage=Se,_e=function(){return ge.port2.postMessage(0)}):(ve=setTimeout,_e=function(){return ve(Se,1)});var ke=Math.random().toString(36).substring(16);function Ie(){}var Ce=void 0,xe=1,Re=2,Oe=new We;function Ae(e){try{return e.then}catch(e){return Oe.error=e,Oe}}function Le(e,t,n){t.constructor===e.constructor&&n===Ee&&t.constructor.resolve===Te?function(e,t){t._state===xe?Me(e,t._result):t._state===Re?Ue(e,t._result):qe(t,void 0,function(t){return Fe(e,t)},function(t){return Ue(e,t)})}(e,t):n===Oe?(Ue(e,Oe.error),Oe.error=null):void 0===n?Me(e,t):ce(n)?function(e,t,n){le(function(e){var r=!1,i=function(e,t,n,r,i){try{e.call(t,n,r)}catch(e){return e}}(n,t,function(n){r||(r=!0,t!==n?Fe(e,n):Me(e,n))},function(t){r||(r=!0,Ue(e,t))},e._label);!r&&i&&(r=!0,Ue(e,i))},e)}(e,t,n):Me(e,t)}function Fe(e,t){var n;e===t?Ue(e,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(n=t)||"object"==typeof n&&null!==n?Le(e,t,Ae(t)):Me(e,t)}function Pe(e){e._onerror&&e._onerror(e._result),Ne(e)}function Me(e,t){e._state===Ce&&(e._result=t,e._state=xe,0!==e._subscribers.length&&le(Ne,e))}function Ue(e,t){e._state===Ce&&(e._state=Re,e._result=t,le(Pe,e))}function qe(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+xe]=n,i[o+Re]=r,0===o&&e._state&&le(Ne,e)}function Ne(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,i,o=e._result,s=0;s<t.length;s+=3)r=t[s],i=t[s+n],r?De(n,r,i,o):i(o);e._subscribers.length=0}}function We(){this.error=null}var Be=new We;function De(e,t,n,r){var i,o,s,a,u=ce(n);if(u){if((i=function(e,t){try{return e(t)}catch(e){return Be.error=e,Be}}(n,r))===Be?(a=!0,o=i.error,i.error=null):s=!0,t===i)return void Ue(t,new TypeError("A promises callback cannot return that same promise."))}else i=r,s=!0;t._state!==Ce||(u&&s?Fe(t,i):a?Ue(t,o):e===xe?Me(t,i):e===Re&&Ue(t,i))}var He=0;function je(e){e[ke]=He++,e._state=void 0,e._result=void 0,e._subscribers=[]}function Ke(e,t){this._instanceConstructor=e,this.promise=new e(Ie),this.promise[ke]||je(this.promise),he(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?Me(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&Me(this.promise,this._result))):Ue(this.promise,new Error("Array Methods must be provided an Array"))}Ke.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===Ce&&n<e;n++)this._eachEntry(t[n],n)},Ke.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===Te){var i=Ae(e);if(i===Ee&&e._state!==Ce)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===Ve){var o=new n(Ie);Le(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},Ke.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===Ce&&(this._remaining--,e===Re?Ue(r,n):this._result[t]=n),0===this._remaining&&Me(r,this._result)},Ke.prototype._willSettleAt=function(e,t){var n=this;qe(e,void 0,function(e){return n._settledAt(xe,t,e)},function(e){return n._settledAt(Re,t,e)})};var Ve=function(e){this[ke]=He++,this._result=this._state=void 0,this._subscribers=[],Ie!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof Ve?function(e,t){try{t(function(t){Fe(e,t)},function(t){Ue(e,t)})}catch(t){Ue(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())};Ve.all=function(e){return new Ke(this,e).promise},Ve.race=function(e){var t=this;return he(e)?new t(function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})},Ve.resolve=Te,Ve.reject=function(e){var t=new this(Ie);return Ue(t,e),t},Ve._setAsap=function(e){le=e},Ve._asap=le,Ve.prototype={constructor:Ve,then:Ee,"catch":function(e){return this.then(null,e)}};var ze="function"==typeof window.Promise?window.Promise:Ve,Ye=(n(0),new(function(){function e(e){this.rebuildFromSnapshot(e)}return e.prototype.rebuildFromSnapshot=function(e){var t=this.snapshot;if(this.snapshot=e,!t||t.functions!==e.functions){var n=e.functions;this.jsonParse=n.jsonParse,this.jsonStringify=n.jsonStringify,this.arrayIsArray=n.arrayIsArray,this.objectKeys=n.objectKeys,this.objectValues=n.objectValues||null,this.objectHasOwnProp=Ge(n.objectHasOwnProp),this.matchMedia=Je(n.matchMedia),this.setWindowTimeout=Ge(n.setWindowTimeout),this.setWindowInterval=Ge(n.setWindowInterval),this.clearWindowTimeout=Ge(n.clearWindowTimeout),this.clearWindowInterval=Ge(n.clearWindowInterval),this.requestWindowAnimationFrame=Je(n.requestWindowAnimationFrame),this.requestWindowIdleCallback=Je(n.requestWindowIdleCallback)}},e}())(Qe(window)));function Qe(e,t){void 0===t&&(t=0);var n=t,r=function(e){try{return e()}catch(e){return n=2,function(){throw new Error("Invoked failed snapshot")}}},i={jsonParse:r(function(){return e.JSON.parse}),jsonStringify:r(function(){return e.JSON.stringify}),arrayIsArray:r(function(){return e.Array.isArray}),objectKeys:r(function(){return e.Object.keys}),objectValues:r(function(){return e.Object.values}),objectHasOwnProp:r(function(){return e.Object.prototype.hasOwnProperty}),matchMedia:r(function(){return e.matchMedia}),setWindowTimeout:r(function(){return e.setTimeout}),setWindowInterval:r(function(){return e.setInterval}),clearWindowTimeout:r(function(){return e.clearTimeout}),clearWindowInterval:r(function(){return e.clearInterval}),requestWindowAnimationFrame:r(function(){return e.requestAnimationFrame}),requestWindowIdleCallback:r(function(){return e.requestIdleCallback})},o={functionToString:r(function(){return e.Function.prototype.toString}),objectToString:r(function(){return e.Object.prototype.toString})};return{status:n,functions:i,helpers:o}}function Ge(e){return function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return e.apply(t,n)}}function Je(e){return e?Ge(e):null}var Xe,$e,Ze=function(){return(Ze=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},et=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r["throw"](e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},tt=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),"throw":a(1),"return":a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue;}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},nt=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r};Function.prototype.bind;$e=Array.prototype.map?function(e,t,n){return e.map(t,n)}:function(e,t,n){for(var r=Array(e.length),i=0;i<e.length;i++)r[i]=t.call(n,e[i],i,e);return r};var rt,it=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function ot(e){return Ye.arrayIsArray(e)}Array.prototype.filter;var st,at,ut,ct,ht,dt;function lt(e,t){return 0==e.lastIndexOf(t,0)}function pt(e,t){for(var n in e)Ye.objectHasOwnProp(e,n)&&t(e[n],n,e)}function ft(e,t){return et(this,void 0,ze,function(){var n,r,i,o;return tt(this,function(s){switch(s.label){case 0:for(r in n=[],e)n.push(r);i=0,s.label=1;case 1:return i<n.length?(o=n[i],Ye.objectHasOwnProp(e,o)?[4,t(e[o],o,e)]:[3,3]):[3,4];case 2:s.sent(),s.label=3;case 3:return i++,[3,1];case 4:return[2];}})})}function _t(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function vt(e,t){var n=0;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&++n>t)return!1;return n==t}function gt(e,t){var n=0;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&++n>t)return!0;return!1}rt="function"==typeof Ye.objectKeys?function(e){return Ye.objectKeys(e)}:function(e){var t=[];for(var n in e)Ye.objectHasOwnProp(e,n)&&t.push(n);return t},ct=(ut=function(e){return e.matches||e.msMatchesSelector||e.webkitMatchesSelector})(window.Element.prototype),!(ht=window.document?window.document.documentElement:void 0)||ct&&ht instanceof window.Element||(ct=ut(ht)),at=(Xe=[ct,function(e,t){return ct.call(e,t)}])[0],st=Xe[1];var yt;dt=oe?function(e){var t=e.nextSibling;return t&&e.parentNode&&t===e.parentNode.firstChild?null:t}:function(e){return e.nextSibling};var mt;yt=oe?function(e,t){if(e){var n=e.parentNode?e.parentNode.firstChild:null;do{t(e),e=e.nextSibling}while(e&&e!=n)}}:function(e,t){for(;e;e=e.nextSibling)t(e)};mt=oe?function(e){var t=e.previousSibling;return t&&e.parentNode&&t===e.parentNode.lastChild?null:t}:function(e){return e.previousSibling};function wt(e,t){if(!e)return Y;var n=function(e){try{var t=window;return t.Zone&&t.Zone.root&&"function"==typeof t.Zone.root.wrap?t.Zone.root.wrap(e):e}catch(t){return e}}(e);return t&&(n=n.bind(t)),z(n,function(e){o("Unexpected error: "+e)})}function bt(e){var t,n=Array.prototype.toJSON,r=String.prototype.toJSON;n&&(Array.prototype.toJSON=void 0),r&&(String.prototype.toJSON=void 0);try{t=Ye.jsonStringify(e)}catch(e){t=St(e)}finally{n&&(Array.prototype.toJSON=n),r&&(String.prototype.toJSON=r)}return t}function St(e){var t="Internal error: unable to determine what JSON error was";try{t=(t=""+e).replace(/[^a-zA-Z0-9\.\:\!\, ]/g,"_")}catch(e){}return"\""+t+"\""}function Et(e){var t=e.doctype;if(!t)return"";var n="<!DOCTYPE ";return n+=t.name,t.publicId&&(n+=" PUBLIC \""+t.publicId+"\""),t.systemId&&(n+=" \""+t.systemId+"\""),n+">"}function Tt(e){return Ye.jsonParse(e)}function kt(e){var t=0,n=0;return null==e.screen?[t,n]:(t=parseInt(String(e.screen.width)),n=parseInt(String(e.screen.height)),[t=isNaN(t)?0:t,n=isNaN(n)?0:n])}var It=function(){function e(e,t){this.target=e,this.propertyName=t,this._before=Y,this._afterSync=Y,this._afterAsync=Y,this.on=!1}return e.prototype.before=function(e){return this._before=wt(e),this},e.prototype.afterSync=function(e){return this._afterSync=wt(e),this},e.prototype.afterAsync=function(e){var t=this;return this._afterAsync=wt(function(e){Ye.setWindowTimeout(window,z(function(){t._afterAsync(e)}),0)}),this},e.prototype.disable=function(){if(this.on=!1,this.shim){var e=this.shim,t=e.override,n=e["native"];this.target[this.propertyName]===t&&(this.target[this.propertyName]=n,this.shim=void 0)}},e.prototype.enable=function(){if(this.on=!0,this.shim)return!0;this.shim=this.makeShim();try{this.target[this.propertyName]=this.shim.override}catch(e){return!1}return!0},e.prototype.makeShim=function(){var e=this,t=this.target[this.propertyName];return{"native":t,override:function(){var n={that:this,args:arguments,result:null};e.on&&e._before(n);var r=t.apply(this,arguments);return e.on&&(n.result=r,e._afterSync(n),e._afterAsync(n)),r}}},e}(),Ct={};function xt(e,t){if(!e||"function"!=typeof e[t])return null;var n;Ct[t]=Ct[t]||[];for(var r=0;r<Ct[t].length;r++)Ct[t][r].obj==e&&(n=Ct[t][r].hook);return n||(n=new It(e,t),Ct[t].push({obj:e,hook:n})),n.enable()?n:null}function Rt(e,t,n){if(!e)return function(){};var r=Object.getOwnPropertyDescriptor(e.prototype,t);if(!r||!r.set)return function(){};var i=r.set,o=wt(n),s=!0;function a(e){i.call(this,e),s&&o(this,e)}return Object.defineProperty(e.prototype,t,Ze(Ze({},r),{set:a})),function(){s=!1;var n=Object.getOwnPropertyDescriptor(e.prototype,t);n&&a===n.set&&Object.defineProperty(e.prototype,t,Ze(Ze({},n),{set:i}))}}function Ot(e,t,n,r){void 0!==n&&("function"==typeof e.addEventListener?e.addEventListener(t,n,r):"function"==typeof e.addListener?e.addListener(n):o("Target of "+t+" doesn't seem to support listeners"))}function At(e,t,n,r){void 0!==n&&("function"==typeof e.removeEventListener?e.removeEventListener(t,n,r):"function"==typeof e.removeListener?e.removeListener(n):o("Target of "+t+" doesn't seem to support listeners"))}var Lt=function(){function e(){var e=this;this._listeners=[],this._children=[],this._yesCapture=!0,this._noCapture=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e._yesCapture={capture:!0,passive:!0},e._noCapture={capture:!1,passive:!0}}});window.addEventListener("test",Y,t)}catch(e){}}return e.prototype.add=function(e,t,n,r,i){return void 0===i&&(i=!1),this.addCustom(e,t,n,r,i)},e.prototype.addCustom=function(e,t,n,r,i){void 0===i&&(i=!1);var o={target:e,type:t,fn:ee.wrap(function(e){(i||!1!==e.isTrusted||"message"==t||e._fs_trust_event)&&r(e)}),options:n?this._yesCapture:this._noCapture,index:this._listeners.length};return this._listeners.push(o),Ot(e,t,o.fn,o.options),o},e.prototype.remove=function(e){e.target&&(At(e.target,e.type,e.fn,e.options),e.target=null,e.fn=void 0)},e.prototype.clear=function(){for(var e=0;e<this._listeners.length;e++)this._listeners[e].target&&this.remove(this._listeners[e]);this._listeners=[]},e.prototype.createChild=function(){var t=new e;return this._children.push(t),t},e.prototype.refresh=function(){for(var e=0,t=this._listeners;e<t.length;e++){var n=t[e];n.target&&(At(n.target,n.type,n.fn,n.options),Ot(n.target,n.type,n.fn,n.options))}for(var r=0,i=this._children;r<i.length;r++){i[r].refresh()}},e}();function Ft(e,t){return t&&e.pageLeft==t.pageLeft&&e.pageTop==t.pageTop}function Pt(e){return{pageLeft:e.pageLeft,pageTop:e.pageTop,width:e.width,height:e.height}}var Mt=[["@import\\s+\"","\""],["@import\\s+'","'"]].concat([["url\\(\\s*\"","\"\\s*\\)"],["url\\(\\s*'","'\\s*\\)"],["url\\(\\s*","\\s*\\)"]]),Ut=".*?"+/(?:[^\\](?:\\\\)*)/.source;new RegExp(Mt.map(function(e){var t=e[0],n=e[1];return"("+t+")("+Ut+")("+n+")"}).join("|"),"g");var qt=/url\(["']?(.+?)["']?\)/g,Nt=/^\s*\/\//;function Wt(e){return e&&e.body&&e.documentElement?"BackCompat"==e.compatMode?[e.body.clientWidth,e.body.clientHeight]:[e.documentElement.clientWidth,e.documentElement.clientHeight]:[0,0]}var Bt=function(){function e(e,t){var n,r;this.hasKnownPosition=!1,this.pageLeft=0,this.pageTop=0,this.width=0,this.height=0,this.clientWidth=0,this.clientHeight=0;var i=e.document;if(i&&i.documentElement&&i.body){if("visualViewport"in e){var o=i.documentElement.getBoundingClientRect();this.hasKnownPosition=!0,this.pageLeft=0==o.left?0:-o.left,this.pageTop=0==o.top?0:-o.top}if(n=Wt(i),this.clientWidth=n[0],this.clientHeight=n[1],void 0!==t&&this.clientWidth==t.clientWidth&&this.clientHeight==t.clientHeight&&t.width>0&&t.height>0)return this.width=t.width,void(this.height=t.height);r=this.computeLayoutViewportSizeFromMediaQueries(e),this.width=r[0],this.height=r[1]}}return e.prototype.computeLayoutViewportSizeFromMediaQueries=function(e){var t=this.findMediaValue(e,"width",this.clientWidth,this.clientWidth+128);void 0===t&&(t=this.tryToGet(e,"innerWidth")),void 0===t&&(t=this.clientWidth);var n=this.findMediaValue(e,"height",this.clientHeight,this.clientHeight+128);return void 0===n&&(n=this.tryToGet(e,"innerHeight")),void 0===n&&(n=this.clientHeight),[t,n]},e.prototype.findMediaValue=function(e,t,n,r){if(Ye.matchMedia){var i=Ye.matchMedia(e,"(min-"+t+": "+n+"px)");if(null!=i){if(i.matches&&Ye.matchMedia(e,"(max-"+t+": "+n+"px)").matches)return n;for(;n<=r;){var o=Math.floor((n+r)/2);if(Ye.matchMedia(e,"(min-"+t+": "+o+"px)").matches){if(Ye.matchMedia(e,"(max-"+t+": "+o+"px)").matches)return o;n=o+1}else r=o-1}}}},e.prototype.tryToGet=function(e,t){try{return e[t]}catch(e){return}},e}();function Dt(e,t){return new Bt(e,t)}var Ht=function(e,t){this.offsetLeft=0,this.offsetTop=0,this.pageLeft=0,this.pageTop=0,this.width=0,this.height=0,this.scale=0;var n=e.document;if(n.body){var r="BackCompat"==n.compatMode;"pageXOffset"in e?(this.pageLeft=e.pageXOffset,this.pageTop=e.pageYOffset):n.scrollingElement?(this.pageLeft=n.scrollingElement.scrollLeft,this.pageTop=n.scrollingElement.scrollTop):r?(this.pageLeft=n.body.scrollLeft,this.pageTop=n.body.scrollTop):n.documentElement&&(n.documentElement.scrollLeft>0||n.documentElement.scrollTop>0)?(this.pageLeft=n.documentElement.scrollLeft,this.pageTop=n.documentElement.scrollTop):(this.pageLeft=n.body.scrollLeft||0,this.pageTop=n.body.scrollTop||0),this.offsetLeft=this.pageLeft-t.pageLeft,this.offsetTop=this.pageTop-t.pageTop;try{var i=e.innerWidth,o=e.innerHeight}catch(e){return}if(0!=i&&0!=o){this.scale=t.width/i,this.scale<1&&(this.scale=1);var s=t.width-t.clientWidth,a=t.height-t.clientHeight;this.width=i-s/this.scale,this.height=o-a/this.scale}}};var jt,Kt=(jt=function(e,t){return(jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}jt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Vt=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r["throw"](e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},zt=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),"throw":a(1),"return":a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue;}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Yt=function(){function e(){var t=this;this._wrappedTick=ee.wrap(function(){t.unregister(),t._tick()}),this._due=0,this._id=e.nextId++}return e._rearm=function(){e.checkedAlready=!1,e.lastCheck=0},e.checkForBrokenSchedulers=function(){return Vt(this,void 0,ze,function(){var t,n;return zt(this,function(r){switch(r.label){case 0:return!Ye.requestWindowAnimationFrame||e.checkedAlready?[2,void 0]:(t=s())-e.lastCheck<100?[2,void 0]:(e.lastCheck=t,e.checkedAlready=!0,[4,new ze(function(e){return Ye.requestWindowAnimationFrame(window,e)})]);case 1:return r.sent(),n=[],pt(e.registry,function(e){var r=e.maybeForceTick(t);r&&n.push(r)}),[2,ze.all(n).then(function(){Ye.requestWindowAnimationFrame(window,ee.wrap(function(){e.checkedAlready=!1}))})];}})})},e.stopAll=function(){pt(this.registry,function(e){return e.stop()})},e.prototype.setTick=function(e){this._tick=e},e.prototype.stop=function(){this.cancel(),delete e.registry[this._id]},e.prototype.register=function(t){this._due=s()+100+1.5*t,e.registry[this._id]=this},e.prototype.unregister=function(){delete e.registry[this._id]},e.prototype.maybeForceTick=function(e){if(e>this._due)return ze.resolve().then(this._wrappedTick)["catch"](function(){})},e.registry={},e.nextId=0,e.checkedAlready=!1,e.lastCheck=0,e}(),Qt=function(e){function t(t){var n=e.call(this)||this;return n._interval=t,n._handle=-1,n}return Kt(t,e),t.prototype.start=function(e){var t=this;-1==this._handle&&(this.setTick(function(){e(),t.register(t._interval)}),this._handle=Ye.setWindowInterval(window,this._wrappedTick,this._interval),this.register(this._interval))},t.prototype.cancel=function(){-1!=this._handle&&(Ye.clearWindowInterval(window,this._handle),this._handle=-1,this.setTick(function(){}))},t}(Yt),Gt=function(e){function t(t,n,r){void 0===n&&(n=0);for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=e.call(this)||this;return s.delay=n,s.timer=-1,s.setTick(function(){t.apply(void 0===r?window:r,i),s.stop()}),s}return Kt(t,e),t.prototype.start=function(e){return void 0===e&&(e=this.delay),this.delay=e,Ye.clearWindowTimeout(window,this.timer),this.timer=Ye.setWindowTimeout(window,this._wrappedTick,this.delay),this.register(e),this},t.prototype.cancel=function(){-1!=this.timer&&(Ye.clearWindowTimeout(window,this.timer),this.timer=-1)},t}(Yt);!function(){function e(e){this.deadlineTime=e,this.didTimeout=this.deadlineTime<=s()}e.prototype.timeRemaining=function(){return this.deadlineTime-s()}}();var Jt,Xt=function(){function e(e,t,n){this.limit=e,this.breaker=n,this.remaining=0,this.ticker=new Qt(t),this.open()}return e.prototype.guard=function(e){var t=this;return function(){return 0==t.remaining?(t.breaker(),void t.remaining--):t.remaining<0?void 0:(t.remaining--,e.apply(this,arguments))}},e.prototype.close=function(){return this.ticker.stop(),this},e.prototype.open=function(){var e=this;return this.remaining=this.limit,this.ticker.start(function(){e.remaining=e.limit}),this},e}(),$t=function(){function e(){this._reported=0,this._skew=0,this._startTime=this.wallTime()}return e.prototype.wallTime=function(){return s()},e.prototype.now=function(){var e=this.wallTime()-this._startTime;return e<0&&this._reportTimeSkew("timekeeper now() is negative"),e},e.prototype.startTime=function(){return this._startTime},e.prototype.setStartTime=function(e){var t=this.wallTime();this._startTime=e,e>t&&(this._skew=e-t,this._reportTimeSkew("timekeeper set with future ts"))},e.prototype._reportTimeSkew=function(e){this._reported++<=2&&ee.sendToBugsnag(e,"error",{skew:this._skew,startTime:this._startTime,wallTime:this.wallTime()})},e}();function Zt(e){var t=e;return t.tagName?"object"==typeof t.tagName?"form":t.tagName.toLowerCase():null}!function(e){e[e.Exclude=1]="Exclude",e[e.Mask=2]="Mask",e[e.Unmask=3]="Unmask",e[e.Watch=4]="Watch",e[e.Keep=5]="Keep"}(Jt||(Jt={}));var en={1:"exclude",2:"mask",3:"unmask",4:"watch",5:"keep"},tn=function(){function e(){this._hasWatched=!1,this._rules=Object.create?Object.create(null):{},this._rules[Jt.Exclude]=[],this._rules[Jt.Mask]=[],this._rules[Jt.Unmask]=[],this._rules[Jt.Watch]=[],this._rules[Jt.Keep]=[],this._consentRules=Object.create?Object.create(null):{},this._consentRules[Jt.Exclude]=[],this._consentRules[Jt.Mask]=[],this._consentRules[Jt.Unmask]=[],this._consentRules[Jt.Watch]=[],this._consentRules[Jt.Keep]=[]}return e.prototype.isWatched=function(e){var t=[Jt.Exclude,Jt.Mask,Jt.Unmask,Jt.Watch,Jt.Keep];return this._firstMatch(t,e)},e.prototype.isKeep=function(e){var t=[Jt.Keep];return null!==this._firstMatch(t,e)},e.prototype._firstMatch=function(e,t){this._hasWatched=!0;for(var n=0,r=e;n<r.length;n++)for(var i=r[n],o=0,s=this._rules[i];o<s.length;o++){var a=s[o];if(st(t,a))return i}if(!this._consent)for(var u=0,c=e;u<c.length;u++){i=c[u];for(var h=0,d=this._consentRules[i];h<d.length;h++){a=d[h];if(st(t,a))return i}}return null},e.prototype.addElementBlock=function(e){var t=Jt.Exclude;switch(e.Type){case I.Unset:case I.Exclude:t=Jt.Exclude;break;case I.Mask:t=Jt.Mask;break;case I.Unmask:t=Jt.Unmask;break;case I.Watch:t=Jt.Watch;break;case I.Keep:t=Jt.Keep;}return this.addRule(t,e.Consent,e.Selector)},e.prototype.addElementKeep=function(e){var t=Jt.Keep;switch(e.Type){case C.Click:break;default:return!1;}return this.addRule(t,e.Consent,e.Selector)},e.prototype.addRule=function(e,t,n){if(this.tryToAddRule(e,t,n))return!0;switch(e){case Jt.Watch:case Jt.Unmask:case Jt.Keep:break;case Jt.Mask:case Jt.Exclude:default:this._rules[e]=["*"];}return!1},e.prototype.tryToAddRule=function(e,t,n){try{return!(!n.match(Nt)&&""!=it(n))||this.mergeRule(e,t,n)}catch(e){return ee.sendToBugsnag("Error adding block rule","error",{selector:n,error:e.toString()}),!1}},e.prototype.getConsent=function(){return this._consent},e.prototype.initializeConsent=function(e){void 0===this._consent&&this.setConsent(e)},e.prototype.setConsent=function(e){this._consent!==e&&(this._consent=e,this._hasWatched&&this.onConsentChange&&this.onConsentChange())},e.prototype.mergeRule=function(e,t,n){var r=t?this._consentRules:this._rules,i=document.documentElement||document.createElement("div");try{st(i,n)}catch(t){return ee.sendToBugsnag("Browser rejected rule","error",{kind:en[e],selector:n,error:t.toString()}),!1}switch(e){case Jt.Exclude:case Jt.Mask:case Jt.Unmask:case Jt.Watch:case Jt.Keep:break;default:e=Jt.Exclude;}if(0==r[e].length)return r[e].push(n),!0;var o=r[e].length-1,s=r[e][o].concat(", ",n);try{st(i,s)}catch(t){return r[e].push(n),ee.sendToBugsnag("Browser rejected merged rule","warning",{kind:en[e],selector:n,error:t.toString()}),!0}return r[e][o]=s,!0},e.prototype.allConsentSensitiveElements=function(e){var t=this,n=[];return[Jt.Exclude,Jt.Mask,Jt.Unmask,Jt.Keep].forEach(function(r){for(var i=0,o=t._consentRules[r];i<o.length;i++)for(var s=o[i],a=e.querySelectorAll(s),u=0;u<a.length;u++)n.push(a[u])}),n},e}(),nn={},rn=1;function on(e){var t=an(e);return!!t&&void 0!==t.watchKind}function sn(e){var t=an(e);return!!t&&t.watchKind==Jt.Exclude}function an(e){return e?nn[e._fs]:null}function un(e){try{return e&&e._fs||0}catch(e){return 0}}function cn(e){return sn(e)?0:un(e)}function hn(e,t){e.parent&&(t.unobserveSubtree(e.node),e.parent.child==e&&(e.parent.child=e.next),e.parent.lastChild==e&&(e.parent.lastChild=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent=e.prev=e.next=null,delete nn[e.id],e.node._fs==e.id&&(e.node._fs=0),e.id=0,e.child&&dn(e.child))}function dn(e){for(var t=[e];t.length>0&&t.length<1e4;){var n=t.pop();delete nn[n.id],n.node._fs==n.id&&(n.node._fs=0),n.id=0,n.next&&t.push(n.next),n.child&&t.push(n.child)}ne(t.length<1e4,"clearIds is fast")}var ln,pn=function(){function e(e,t){this._onchange=e,this._checkElem=t,this._fallback=!1,this._elems={},this.values={},this.radios={},ln=this}return e.prototype.hookEvents=function(){(function(){var e=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value");if(!e||!e.set)return!1;fn||(Rt(HTMLInputElement,"value",mn),Rt(HTMLInputElement,"checked",mn),Rt(HTMLSelectElement,"value",mn),Rt(HTMLTextAreaElement,"value",mn),Rt(HTMLSelectElement,"selectedIndex",mn),Rt(HTMLOptionElement,"selected",mn),fn=!0);return!0})()||(this._fallback=!0)},e.prototype.addInput=function(e){var t=un(e);if(this._elems[t]=e,bn(e)){var n=yn(e);e.checked&&(this.radios[n]=t)}else this.values[t]=wn(e);(function(e){switch(e.type){case"checkbox":case"radio":return e.checked!=e.hasAttribute("checked");default:return(e.value||"")!=function(e){if("select"!=Zt(e))return e.getAttribute("value")||"";var t=e,n=t.querySelector("option[selected]")||t.querySelector("option");if(!n)return"";return n.value||""}(e);}})(e)&&this._onchange(e)},e.prototype.diffValue=function(e,t){var n=un(e);if(bn(e)){var r=yn(e);return this.radios[r]==n!=("true"==t)}return this.values[n]!=t},e.prototype.onChange=function(e,t){void 0===t&&(t=wn(e));var n=un(e);if((e=this._elems[n])&&this.diffValue(e,t))if(this._onchange(e),bn(e)){var r=yn(e);"false"==t&&this.radios[r]==n?delete this.radios[r]:this.radios[r]=n}else this.values[n]=t},e.prototype.tick=function(){for(var e in this._elems){var t=this._elems[e];if(this._checkElem(t)){if(this._fallback){var n=wn(t);if(t&&this.diffValue(t,n))if(this._onchange(t),bn(t)){var r=yn(t);this.radios[r]=+e}else this.values[e]=n}}else delete this._elems[e],delete this.values[e],bn(t)&&delete this.radios[yn(t)]}},e.prototype.shutdown=function(){ln=null},e.prototype._usingFallback=function(){return this._fallback},e.prototype._trackingElem=function(e){return!!this._elems[e]},e}(),fn=!1;var _n,vn={};function gn(){try{if(ln)for(var e in vn){var t=vn[e],n=t[0],r=t[1];ln.onChange(n,r)}}finally{_n=null,vn={}}}function yn(e){if(!e)return"";for(var t=e;t&&"form"!=Zt(t);)t=t.parentElement;return(t&&"form"==Zt(t)?un(t):0)+":"+e.name}function mn(e,t){var n=function e(t,n){if(void 0===n&&(n=2),n<=0)return t;var r=Zt(t);return"option"!=r&&"optgroup"!=r||!t.parentElement?t:e(t.parentElement,n-1)}(e),r=un(n);r&&ln&&ln.diffValue(n,""+t)&&(vn[r]=[n,""+t],_n||(_n=new Gt(gn)).start())}function wn(e){switch(e.type){case"checkbox":case"radio":return""+e.checked;default:var t=e.value;return t||(t=""),""+t;}}function bn(e){return e&&"radio"==e.type}var Sn=1,En=4,Tn=n(1),kn={};var In="__default";function Cn(e){void 0===e&&(e=In);var t=kn[e];return t||(t=function(){var e=document.implementation.createHTMLDocument("");return e.head||e.documentElement.appendChild(e.createElement("head")),e.body||e.documentElement.appendChild(e.createElement("body")),e}(),e!==In&&(t.open(),t.write(e),t.close()),kn[e]=t),t}var xn=new(function(){function e(){var e=Cn(),t=e.getElementById("urlresolver-base");t||((t=e.createElement("base")).id="urlresolver-base",e.head.appendChild(t));var n=e.getElementById("urlresolver-parser");n||((n=e.createElement("a")).id="urlresolver-parser",e.head.appendChild(n)),this.base=t,this.parser=n}return e.prototype.parseUrl=function(e,t){this.base.setAttribute("href",e),this.parser.setAttribute("href",t);var n=document.createElement("a");return n.href=this.parser.href,n},e.prototype.resolveUrl=function(e,t){return this.parseUrl(e,t).href},e.prototype.resolveToDocument=function(e,t){var n=On(e);return null==n?t:this.resolveUrl(n,t)},e}());function Rn(e,t){return xn.parseUrl(e,t)}function On(e){var t=e.document,n=e.location.href;if("string"==typeof t.baseURI)n=t.baseURI;else{var r=t.getElementsByTagName("base")[0];r&&r.href&&(n=r.href)}return"about:blank"==n&&e.parent!=e?On(e.parent):n}var An=new RegExp("[^\\s]"),Ln=new RegExp("[\\s]*$");String.prototype;function Fn(e){var t=An.exec(e);if(!t)return e;for(var n=t.index,r=(t=Ln.exec(e))?e.length-t.index:0,i="\uFFFF",o=e.slice(n,e.length-r).split(/\r\n?|\n/g),s=0;s<o.length;s++)i+=""+o[s].length,s!=o.length-1&&(i+=":");return(n||r)&&(i+=" "+n+" "+r),i}var Pn=["allowReorder","attributeName","attributeType","autoReverse","baseFrequency","baseProfile","calcMode","clipPathUnits","contentScriptType","contentStyleType","diffuseConstant","edgeMode","externalResourcesRequired","filterRes","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","referrerPolicy","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].reduce(function(e,t){return e[t]=t,e[t.toUpperCase()]=t,e},{}),Mn=n(2),Un="(redacted)",qn=16e6;function Nn(e,t){var n=e.textContent;if(!n)return"";if(!t&&!(t=an(e)))return"";var r=n.length;return r>qn?(ee.sendToBugsnag("Ignoring huge text node","warning",{length:r}),""):e.parentNode&&"style"==Zt(e.parentNode)?n:t.mask?Fn(n):n}function Wn(e){return Pn[e]||e.toLowerCase()}function Bn(e,t,n,r){var i,o=Zt(t);if(null===o)return null;var s=function(e){var t,r,s;r=null===(t=Mn[e][o])||void 0===t?void 0:t[n],i=null!=r?r:null===(s=Mn[e]["*"])||void 0===s?void 0:s[n]};if(s("Any"),void 0===i){var a=an(t);if(!a)return null;a.watchKind==Jt.Exclude?s("Exclude"):a.mask&&s("Mask")}if(void 0===i)return r;switch(i){case"erase":return null;case"scrubUrl":return Dn(r,e,{source:"dom",type:o});case"maskText":return Fn(r);default:return Object(Tn.assertExhaustive)(i);}}function Dn(e,t,n){switch(n.source){case"dom":switch(r=n.type){case"frame":case"iframe":return jn(e,t);default:return Hn(e,t);}case"event":switch(r=n.type){case g.AJAX_REQUEST:case g.NAVIGATE:return Hn(e,t);case g.SET_FRAME_BASE:return jn(e,t);default:return Object(Tn.assertExhaustive)(r);}case"log":return jn(e,t);case"page":var r;switch(r=n.type){case"base":return jn(e,t);case"referrer":case"url":return Hn(e,t);default:return Object(Tn.assertExhaustive)(r);}case"perfEntry":switch(n.type){case"frame":case"iframe":case"navigation":return jn(e,t);default:return Hn(e,t);}default:return Object(Tn.assertExhaustive)(n);}}function Hn(e,t){return Vn(e,t,function(e){if(!(e in zn)){var t=["password","token","^jwt$"];switch("4K3FQ"!==e&&"NQ829"!==e&&"KCF98"!==e&&t.push("^code$"),e){case"2FVM4":t.push("^e$","^eref$","^fn$");break;case"35500":t.push("share_token","password-reset-key");break;case"1HWDJ":t.push("email_id","invite","join");break;case"J82WF":t=[".*"];break;case"8MM83":t=["^creditCard"];break;case"PAN8Z":t.push("code","hash","ol","aeh");break;case"BKP05":t.push("api_key","session_id","encryption_key");break;case"GDWG7":t=["^(?!productType|utmSource).*$"];}zn[e]=new RegExp(t.join("|"),"i")}return zn[e]}(t))}function jn(e,t){return Vn(e,t,Yn)}function Kn(e,t,n,r){var i=new RegExp("(\\/"+t+"\\/).*$","i");n==r&&e.pathname.indexOf(t)>=0&&(e.pathname=e.pathname.replace(i,"$1"+Un))}function Vn(e,t,n){var r=Rn("",e);return r.hash.indexOf("access_token")>=0&&(r.hash="#"+Un),Kn(r,"reset_password",t,"AGQFM"),Kn(r,"reset-password",t,"95NJ7"),r.search.length>0&&(r.search=function(e,t){return e.split("?").map(function(e){return function(e,t){return e.replace("?","").split("&").map(function(e){return e.split("=")}).map(function(e){var n=e[0],r=e[1],i=e.slice(2);return t.test(n)&&void 0!==r?[n,Un].concat(i):[n,r].concat(i)}).map(function(e){var t=e[0],n=e[1],r=e.slice(2);return void 0===n?t:[t,n].concat(r).join("=")}).join("&")}(e,t)}).join("?")}(r.search,n)),r.href.substring(0,2048)}var zn={};var Yn=new RegExp(".*","i");function Qn(e){return"function"==typeof(t=e.constructor)&&Function.prototype.toString.call(t).indexOf("[native code]")>-1;var t}var Gn=function(){function e(e,t,n){this._watcher=e,this._resizer=t,this._orgId=n,nn={},rn=1}return e.prototype.tokenizeNode=function(e,t,n,r,i){var o=this,s=an(e),a=an(t),u=[];return function(e){var t=rn;try{return e(),!0}catch(e){return rn=t,!1}}(function(){o.tokeNode(s,a,n,u,r,i)})||(u=[]),u},e.prototype.tokeNode=function(e,t,n,r,i,o){var s=this;if("script"==Zt(n)||8==n.nodeType)return null;var a,u,c,h,d=function(e){return e.constructor===window.ShadowRoot}(n),l=function(e){var t={id:rn++,node:e};return nn[t.id]=t,e._fs=t.id,t}(n);if(e&&(d?e.shadow=l:(a=e,u=l,c=t,h=this._resizer,hn(u,h),u.parent=a,u.next=c,c&&(u.prev=c.prev,c.prev=u),null==u.next?(u.prev=a.lastChild,a.lastChild=u):u.next.prev=u,null==u.prev?a.child=u:u.prev.next=u)),10==n.nodeType){var p=n;return r.push("<!DOCTYPE",":name",p.name,":publicId",p.publicId||"",":systemId",p.systemId||""),l}try{var f=function(e,t){(e||t)&&(r.push("["),e&&s.tokeNode(l,null,e,r,i,o),yt(n.firstChild,function(e){s.tokeNode(l,null,e,r,i,o)}),r.push("]"))};switch(n.nodeType){default:r.push("<"+n.nodeName),Jn(n,i);break;case 11:case 9:var _;_=d?Qn(n)?"#shadow":"#polyfillshadow":n.nodeName,r.push("<"+_),f(null,n.firstChild),Jn(n,i);break;case 3:void 0===l.mask&&(l.mask=!l.parent||l.parent.mask),l.mask&&this._resizer.observe(n.parentElement),Jn(n,i),r.push("<"+n.nodeName,Nn(n,l));break;case Sn:var v=n,g=v.nodeName;"http://www.w3.org/2000/svg"==v.namespaceURI&&(g="svg:"+g),r.push("<"+g);var y=this._watcher.isWatched(v);if(l.isKeep=this._watcher.isKeep(v),null!==y)switch(l.watchKind=y,y){case Jt.Watch:this._resizer.observe(v);break;case Jt.Exclude:this._resizer.observe(v),r.push(":_fs_excluded","true");break;case Jt.Unmask:l.mask=!1;break;case Jt.Mask:l.mask=!0;}else l.parent&&(l.mask=l.parent.mask);l.mask&&r.push(":_fs_masked","true"),l.watchKind!=Jt.Exclude&&Jn(n,i),function(e,t,n){var r=Zt(t);if(ae&&"output"===r)return;var i=t;if(i.attributes&&i.attributes.length>0)for(var o=0;o<i.attributes.length;o++){var s=i.attributes[o];if(null!=s){var a=Wn(s.name),u=Bn(e,t,a,s.value);null!==u&&n(a,u)}}}(this._orgId,v,function(e,t){if(r.push(":"+e),r.push(t),o)try{o(v,e,t)}catch(e){ee.sendToBugsnag(e,"error")}}),l.watchKind!=Jt.Exclude&&f(v.shadowRoot,v.firstChild);}}catch(e){ee.sendToBugsnag(e,"error")}return l},e}();function Jn(e,t){if(t)try{t(e)}catch(e){ee.sendToBugsnag(e,"error")}}var Xn=function(){function e(){this.dict={idx:-1,map:{}},this.nodeCount=1,this.startIdx=0}return e.prototype.encode=function(t){if(0==t.length)return[];var n,r,i=t[0],o=Object.prototype.hasOwnProperty.call(this.dict.map,i)?this.dict.map[i]:null,s=[],a=1;function u(){o?a>1?s.push([o.idx,a]):s.push(o.idx):s.push(i)}for(n=1;n<t.length;n++)if(r=t[n],o&&Object.prototype.hasOwnProperty.call(o.map,r))a++,i=r,o=o.map[r];else{u();var c=this.startIdx+n-a;null==o&&this.nodeCount<e.MAX_NODES&&(o={idx:c,map:{}},this.dict.map[i]=o,this.nodeCount++),o&&this.nodeCount<e.MAX_NODES&&(o.map[r]={idx:c,map:{}},this.nodeCount++),a=1,i=r,o=Object.prototype.hasOwnProperty.call(this.dict.map,r)?this.dict.map[r]:null}return u(),this.startIdx+=t.length,s},e.MAX_NODES=1e4,e}(),$n=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zn=function(){return(Zn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},er=function(){function e(e){this._ctx=e,this._recordedDims={},this._observedDims={}}return e.create=function(e){return tr.isSupported(e.window)?new tr(e):new nr(e)},e.prototype.collect=function(e){var t=[];for(var n in this._observedDims)this.addPlaceholderResize(e,t,Number(n));return this._observedDims={},t},e.prototype.addEntry=function(e){try{var t=un(e);if(!t)return;if(e.nodeType!=Sn)return;var n=e;if(this._observedDims[t]=n.getBoundingClientRect(),!this._recordedDims[t]){var r=this.flushSizeEvent(t);if(!r)return;this._ctx.queue().enqueue(r)}}catch(e){}},e.prototype.addPlaceholderResize=function(e,t,n){var r=this.flushSizeEvent(n);r&&t.push(Zn(Zn({},r),{When:e}))},e.prototype.flushSizeEvent=function(e){var t=this._observedDims[e];if(!t)return null;var n=function(e){return nn[e]}(e);if(!n)return null;var r=n.watchKind,i=t.width,o=t.height,s=this._recordedDims[e];if(s&&s.w==i&&s.h==o)return null;if(this._recordedDims[e]={w:i,h:o},r==Jt.Watch){var a=0!=i&&0!=o;if((!!s&&0!=s.w&&0!=s.h)!=a)return{Kind:g.WATCHED_ELEM,Args:[e,a]}}return{Kind:g.PLACEHOLDER_SIZE,Args:[e,i,o]}},e}(),tr=function(e){function t(t){var n=e.call(this,t)||this;return n._obs=new t.window.ResizeObserver(function(e){for(var t=0,r=e;t<r.length;t++){var i=r[t].target;n.addEntry(i)}}),n}return $n(t,e),t.isSupported=function(e){return"ResizeObserver"in e},t.prototype.observe=function(e){var t=e;this._obs.unobserve(t),this._obs.observe(t)},t.prototype.unobserveSubtree=function(e){},t.prototype.nodeChanged=function(e){},t}(er),nr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $n(t,e),t.prototype.observe=function(e){var t=this;if(e&&e.nodeType==Sn){var n=e;this.growWatchedIndex(an(e)),this._ctx.measurer.requestMeasureTask(function(){t.addEntry(n)})}},t.prototype.unobserveSubtree=function(e){var t=an(e);t&&this.clearWatchedIndex(t)},t.prototype.nodeChanged=function(e){var t=this,n=this.relatedWatched(e);this._ctx.measurer.requestMeasureTask(function(){for(var e=0,r=n;e<r.length;e++){var i=r[e];t.addEntry(i)}})},t.prototype.watchedChildren=function(e){return e.watchedChildren},t.prototype.growWatchedIndex=function(e){if(e&&on(e.node))for(var t=e,n=e.parent;n;n=n.parent){if(this.watchedChildren(n)||(n.watchedChildren={}),this.watchedChildren(t))for(var r in this.watchedChildren(t))delete this.watchedChildren(n)[r];if(this.watchedChildren(n)[t.id]=t,vt(this.watchedChildren(n),2))t=n;else if(gt(this.watchedChildren(n),2))break}},t.prototype.relatedWatched=function(e){var t=[],n=an(e);if(n)for(var r=[n],i=0;r.length&&++i<1e3;){var o=r.pop();on(o.node)&&t.push(o.node),this.watchedChildren(o)&&pt(this.watchedChildren(o),function(e){r.push(e)})}else{for(var s=e;s&&!un(s);)s=s.parentNode;s&&on(s)&&t.push(s)}return t},t.prototype.clearWatchedIndex=function(e){if(gt(this.watchedChildren(e),0)||on(e.node))for(var t=this.watchedChildren(e)&&gt(this.watchedChildren(e),1)||on(e.node)?e.id:function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return t}(this.watchedChildren(e)),n=t?e.parent:null;n&&this.watchedChildren(n)&&this.watchedChildren(n)[t];){if(delete this.watchedChildren(n)[t],vt(this.watchedChildren(n),1)){var r=n.id,i=_t(this.watchedChildren(n));for(n=n.parent;n&&this.watchedChildren(n)&&this.watchedChildren(n)[r];)delete this.watchedChildren(n)[r],this.watchedChildren(n)[i.id]=i,n=n.parent;break}n=n.parent}},t}(er),rr=function(){return(rr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ir={attributeName:null,attributeNamespace:null,addedNodes:[],removedNodes:[],nextSibling:null,previousSibling:null,oldValue:null};function or(e){return rr(rr(rr({},ir),e),{type:"childList"})}function sr(e,t){return 0===t.length?or({target:e}):or({addedNodes:t,nextSibling:dt(t[t.length-1]),previousSibling:mt(t[0]),target:e})}var ar,ur=oe&&!se?wr:window.MutationObserver||window.WebKitMutationObserver||wr,cr=Object.defineProperty,hr=s()%1e9,dr=new(window.WeakMap||((ar=function(){this.name="__st"+(1e9*Math.random()>>>0)+hr++ +"__"}).prototype={set:function(e,t){var n=e[this.name];n&&n[0]===e?n[1]=t:cr(e,this.name,{value:[e,t],writable:!0})},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0}},ar)),lr=window.setImmediate||window.msSetImmediate;if(!lr){var pr=[],fr=String(Math.random());window.addEventListener("message",function(e){if(e.data===fr){var t=pr;pr=[],t.forEach(function(e){e()})}}),lr=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return pr.push(e),window.postMessage(fr,"*"),0}}var _r=!1,vr=[];function gr(){_r=!1;var e=vr;vr=[],e.sort(function(e,t){return e.uid_-t.uid_});var t=!1;e.forEach(function(e){var n=e.takeRecords();!function(e){e.nodes_.forEach(function(t){var n=dr.get(t);n&&n.forEach(function(t){t.observer===e&&t.removeTransientObservers()})})}(e),n.length&&(e.callback_(n,e),t=!0)}),t&&gr()}function yr(e,t){for(var n=e;n;n=n.parentNode){var r=dr.get(n);if(r)for(var i=0;i<r.length;i++){var o=r[i],s=o.options;if(n===e||s.subtree){var a=t(s);a&&o.enqueue(a)}}}}var mr=0;function wr(e){this.callback_=e,this.nodes_=[],this.records_=[],this.uid_=++mr}wr.prototype={observe:function(e,t){if(e=function(e){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(e)||e}(e),!t.childList&&!t.attributes&&!t.characterData||t.attributeOldValue&&!t.attributes||t.attributeFilter&&t.attributeFilter.length&&!t.attributes||t.characterDataOldValue&&!t.characterData)throw new SyntaxError;var n,r=dr.get(e);r||dr.set(e,r=[]);for(var i=0;i<r.length;i++)if(r[i].observer===this){(n=r[i]).removeListeners(),n.options=t;break}n||(n=new Cr(this,e,t),r.push(n),this.nodes_.push(e)),n.addListeners()},disconnect:function(){this.nodes_.forEach(function(e){for(var t=dr.get(e),n=0;n<t.length;n++){var r=t[n];if(r.observer===this){r.removeListeners(),t.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var e=this.records_;return this.records_=[],e}};var br,Sr,Er=function(e,t){this.type=e,this.target=t,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null};function Tr(e,t){return br=new Er(e,t)}function kr(e){return Sr||((n=new Er((t=br).type,t.target)).addedNodes=t.addedNodes.slice(),n.removedNodes=t.removedNodes.slice(),n.previousSibling=t.previousSibling,n.nextSibling=t.nextSibling,n.attributeName=t.attributeName,n.attributeNamespace=t.attributeNamespace,n.oldValue=t.oldValue,(Sr=n).oldValue=e,Sr);var t,n}function Ir(e,t){return e===t?e:Sr&&((n=e)===Sr||n===br)?Sr:null;var n}function Cr(e,t,n){var r=this;this.observer=e,this.target=t,this.options=n,this.transientObservedNodes=[],this.handleEventBound=function(e){return r.handleEvent_(e)}}Cr.prototype={enqueue:function(e){var t=this.observer.records_,n=t.length;if(t.length>0){var r=Ir(t[n-1],e);if(r)return void(t[n-1]=r)}else!function(e){vr.push(e),_r||(_r=!0,lr(gr))}(this.observer);t[n]=e},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(e){var t=this.options;t.attributes&&e.addEventListener("DOMAttrModified",this.handleEventBound,!0),t.characterData&&e.addEventListener("DOMCharacterDataModified",this.handleEventBound,!0),t.childList&&e.addEventListener("DOMNodeInserted",this.handleEventBound,!0),(t.childList||t.subtree)&&e.addEventListener("DOMNodeRemoved",this.handleEventBound,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(e){var t=this.options;t.attributes&&e.removeEventListener("DOMAttrModified",this.handleEventBound,!0),t.characterData&&e.removeEventListener("DOMCharacterDataModified",this.handleEventBound,!0),t.childList&&e.removeEventListener("DOMNodeInserted",this.handleEventBound,!0),(t.childList||t.subtree)&&e.removeEventListener("DOMNodeRemoved",this.handleEventBound,!0)},addTransientObserver:function(e){if(e!==this.target){this.addListeners_(e),this.transientObservedNodes.push(e);var t=dr.get(e);t||dr.set(e,t=[]),t.push(this)}},removeTransientObservers:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach(function(e){this.removeListeners_(e);for(var t=dr.get(e),n=0;n<t.length;n++)if(t[n]===this){t.splice(n,1);break}},this)},handleEvent_:function(e){switch(e.type){case"DOMAttrModified":var t=e.attrName,n=e.relatedNode.namespaceURI,r=e.target;(o=Tr("attributes",r)).attributeName=t,o.attributeNamespace=n;var i=e.attrChange===MutationEvent.ADDITION?null:e.prevValue;yr(r,function(e){if(e.attributes&&(!e.attributeFilter||!e.attributeFilter.length||-1!==e.attributeFilter.indexOf(t)||-1!==e.attributeFilter.indexOf(n)))return e.attributeOldValue?kr(i):o});break;case"DOMCharacterDataModified":var o=Tr("characterData",r=e.target);i=e.prevValue;yr(r,function(e){if(e.characterData)return e.characterDataOldValue?kr(i):o});break;case"DOMNodeRemoved":case"DOMNodeInserted":"DOMNodeRemoved"==e.type&&this.addTransientObserver(e.target);r=e.relatedNode;var s,a,u=e.target;"DOMNodeInserted"===e.type?(s=[u],a=[]):(s=[],a=[u]);var c=mt(u),h=dt(u);(o=Tr("childList",r)).addedNodes=s,o.removedNodes=a,o.previousSibling=c,o.nextSibling=h,yr(r,function(e){if(e.childList)return o});}br=Sr=void 0}};var xr=function(){return(xr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Rr=function(){function e(e,t,n,r,i,o){var s=this;void 0===n&&(n=!0),void 0===r&&(r=function(){}),void 0===i&&(i=function(){}),void 0===o&&(o=function(){}),this._ctx=e,this._watcher=t,this._compress=n,this._nodeVisitor=r,this._beforeRemove=i,this._attrVisitor=o,this._sentDomSnapshot=!1,this._newShadowContainers=[],this._toRefresh=[],this._records=[],this._setPropertyWasThrottled=!1,this._wnd=e.window,this._resizer=er.create(e),this._encoder=new Gn(t,this._resizer,e.options.orgId),ne(!this._watcher.onConsentChange,"This is the only consent change listener."),this._watcher.onConsentChange=function(){return s.updateConsent()}}return e.prototype.hookMutations=function(e){void 0===e&&(e=this._wnd.document),this._root=e,this._sentDomSnapshot=!1,this._compress&&(this._lz=new Xn);var t=!0;if(oe)try{this.setUpIEWorkarounds()}catch(e){o("Error setting up IE workarounds for mutation watcher: "+e),t=!1}t&&(this._observer=new ur(this._addMutations.bind(this)))},e.prototype._observerOff=function(){this._observer&&this._observer.disconnect()},e.prototype._addMutations=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];this._records.push(r)}},e.prototype.resizer=function(){return this._resizer},e.prototype.shutdown=function(){this._observer&&this._observer.disconnect();var e=an(this._root);e&&dn(e),this._records=[],oe&&this.tearDownIEWorkarounds(),this._watcher.onConsentChange=null,this._attachShadowHook&&(this._attachShadowHook.disable(),this._attachShadowHook=null)},e.prototype.processMutations=function(){if(!this._root)return[];var e=this._ctx.time.now(),t=[];if(this.maybeGetInitialSnapshot(e,t),this._setPropertyWasThrottled&&(t.push({Kind:g.FAIL_THROTTLED,When:e,Args:[S.SetPropertyHooks]}),this._setPropertyWasThrottled=!1),this._records.length>0||this._toRefresh.length>0){var n={},r={};for(var i in this.processRecords(e,t,r,n),r){var o=i.split("\t");t.push({Kind:g.MUT_ATTR,When:e,Args:[parseInt(o[0]),o[1],r[i]]})}for(var i in n)t.push({Kind:g.MUT_TEXT,When:e,Args:[parseInt(i),n[i]]})}var s=this._newShadowContainers;this._newShadowContainers=[];for(var a=0;a<s.length;a++){var u=s[a].shadowRoot;u&&0!=un(s[a])&&0==un(u)&&(this.observe(u),this.genShadow(e,t,s[a],u))}return t.push.apply(t,this._resizer.collect(e)),this._records=[],t},e.prototype.recordingIsDetached=function(){return this._root&&this._root!=this._wnd.document},e.prototype.maybeGetInitialSnapshot=function(e,t){this._sentDomSnapshot||(this.genInsert(e,t,null,this._root,null),this._resizer.nodeChanged(this._root),this._observer&&this.observe(this._root),this._sentDomSnapshot=!0,this.hookAttachShadow())},e.prototype.hookAttachShadow=function(){var e=this;this._attachShadowHook=xt(Element.prototype,"attachShadow"),this._attachShadowHook&&this._attachShadowHook.before(function(t){t.that.shadowRoot||e._newShadowContainers.push(t.that)})},e.prototype.observe=function(e){try{this._observer.observe(e,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0})}catch(e){}},e.prototype.processRecords=function(e,t,n,r){for(var i=this,o={},s={},a=function(n){if(an(n)){i.genRemove(e,t,an(n));var r=an(n.parentNode);r&&(s[r.id]=r.node)}},u=0;u<this._records.length;++u)try{var c=this._records[u],h=un(c.target);if(!h)continue;switch(o[h]=c.target,c.type){case"childList":if(c.removedNodes.length>0)for(var d=0;d<c.removedNodes.length;++d){var l=an(c.removedNodes[d]);l&&l.id&&this.genRemove(e,t,l)}if(c.addedNodes.length>0){s[h]=c.target;var p=Ar(c.target);p&&(s[p.id]=p.node)}break;case"characterData":sn(c.target)||c.oldValue!=c.target.textContent&&(r[h]=Nn(c.target));break;case"attributes":var f=c.target,_=this._watcher.isWatched(f);if(_&&_!=Jt.Watch&&!sn(f)){a(f);break}var v=Or(c.attributeNamespace)+(c.attributeName||""),g=Wn(v);if(f.hasAttribute(v)){var y=c.target.getAttribute(v);c.oldValue!=y&&(y=Bn(this._ctx.options.orgId,c.target,g,y||""),this._attrVisitor(c.target,g,y||""),null!==y&&(n[h+"\t"+g]=y))}else n[h+"\t"+g]=null;}}catch(e){}for(var m=0,w=this._toRefresh;m<w.length;m++){var b=w[m];try{a(b)}catch(e){ee.sendToBugsnag(e,"error")}}for(var S in this._toRefresh=[],s){var E=an(T=s[S]);E&&E.id&&this.diff(e,t,T,E.child,T.firstChild)}for(var S in o){var T=o[S];this._resizer.nodeChanged(T)}},e.prototype._checkForMissingInsertions=function(e){if(!this._sentDomSnapshot||!e)return[];return this.walkAddRecords(this._root),[]},e.prototype.walkAddRecords=function(e){var t=this;un(e)||null===e.parentNode?yt(e.firstChild,function(e){t.walkAddRecords(e)}):this._records.push(sr(e.parentNode,[e]))},e.prototype.diff=function(e,t,n,r,i){for(var o=[],s=r,a=i;s&&a;){var u=an(a);un(a)?u&&s.id==u.id?(s=s.next,a=dt(a)):(o.push({remove:s}),s=s.next):(o.push({insert:[n,a,s.node]}),a=dt(a))}for(;s;s=s.next)o.push({remove:s});yt(a,function(e){o.push({insert:[n,e,null]})});for(var c=!1,h=0;h<o.length;h++){var d=o[h];d.insert?this.genInsert(e,t,d.insert[0],d.insert[1],d.insert[2]):d.remove&&(c=!0,this.genRemove(e,t,d.remove))}ne(!c,"All remove events should have been generated earlier, in MutationWatcher.processMutations")},e.prototype.genShadow=function(e,t,n,r){var i=un(n),o=this.genDocStream(e,n,r,null);o.length>0&&t.push({When:e,Kind:g.MUT_SHADOW,Args:[i,this._compress?this._lz.encode(o):o]})},e.prototype.genInsert=function(e,t,n,r,i){var o=un(n)||-1,s=un(i)||-1,a=this.genDocStream(e,n,r,i);a.length>0&&t.push({When:e,Kind:g.MUT_INSERT,Args:[o,s,this._compress?this._lz.encode(a):a]})},e.prototype.genDocStream=function(e,t,n,r){var i=this;if(t&&sn(t))return[];for(var o=[],s=this._encoder.tokenizeNode(t,r,n,function(t){if(t.nodeType==Sn){var n=t;n.shadowRoot&&i.observe(n.shadowRoot)}i._nodeVisitor(e,t,o)},function(e,t,n){i._attrVisitor(e,t,n)}),a=0,u=o;a<u.length;a++){(0,u[a])()}return s},e.prototype.genRemove=function(e,t,n){var r=n.id;if(this._beforeRemove(n),hn(n,this._resizer),t.length>0){var i=t[t.length-1];if(i.Kind==g.MUT_REMOVE)return void i.Args.push(r)}t.push({When:e,Kind:g.MUT_REMOVE,Args:[r]})},e.prototype.setUpIEWorkarounds=function(){var t=this;if(se){var n=Object.getOwnPropertyDescriptor(Node.prototype,"textContent"),r=n&&n.set;if(!n||!r)throw new Error("Missing textContent setter -- not safe to record mutations.");Object.defineProperty(Element.prototype,"textContent",xr(xr({},n),{set:function(e){try{for(var t=void 0;t=this.firstChild;)this.removeChild(t);if(null===e||""==e)return;var n=(this.ownerDocument||document).createTextNode(e);this.appendChild(n)}catch(t){r&&r.call(this,e)}}}))}this._setPropertyThrottle=new Xt(e.ThrottleMax,e.ThrottleInterval,function(){return new Gt(function(){t._setPropertyWasThrottled=!0,t.tearDownIEWorkarounds()}).start()});var i=this._setPropertyThrottle.guard(function(e){e.cssText=e.cssText});this._setPropertyThrottle.open(),this._setPropertyHook=xt(CSSStyleDeclaration.prototype,"setProperty"),this._setPropertyHook&&this._setPropertyHook.afterSync(function(e){i(e.that)}),this._removePropertyHook=xt(CSSStyleDeclaration.prototype,"removeProperty"),this._removePropertyHook&&this._removePropertyHook.afterSync(function(e){i(e.that)})},e.prototype.tearDownIEWorkarounds=function(){this._setPropertyThrottle&&this._setPropertyThrottle.close(),this._setPropertyHook&&this._setPropertyHook.disable(),this._removePropertyHook&&this._removePropertyHook.disable()},e.prototype.updateConsent=function(){var e=this;this._watcher.allConsentSensitiveElements(this._root).forEach(function(t){un(t)&&e._toRefresh.push(t)})},e.ThrottleMax=1024,e.ThrottleInterval=1e4,e}();function Or(e){return void 0===e&&(e=""),null===e?"":{"http://www.w3.org/1999/xlink":"xlink:","http://www.w3.org/XML/1998/namespace":"xml:","http://www.w3.org/2000/xmlns/":"xmlns:"}[e]||""}function Ar(e){var t;return!(null===(t=e)||void 0===t?void 0:t.shadowRoot)||Qn(e.shadowRoot)?null:an(e.shadowRoot)}var Lr=["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],Fr=["name","startTime","duration","initiatorType","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","unloadEventStart","unloadEventEnd","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd","type","redirectCount","decodedBodySize","encodedBodySize","transferSize"],Pr=["name","startTime","duration","initiatorType","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","decodedBodySize","encodedBodySize","transferSize"],Mr=["name","startTime","duration"],Ur=["jsHeapSizeLimit","totalJSHeapSize","usedJSHeapSize"],qr=function(){function e(e,t,n){this._ctx=e,this._queue=t,this._perfSupported=!1,this._timingSupported=!1,this._getEntriesSupported=!1,this._memorySupported=!1,this._lastUsedJSHeapSize=0,this._gotLoad=!1,this._observer=null,this._observedBatches=[];var r=window.performance;r&&(this._perfSupported=!0,r.timing&&(this._timingSupported=!0),r.memory&&(this._memorySupported=!0),"function"==typeof r.getEntries&&(this._getEntriesSupported=!0),this._listeners=n.createChild())}return e.prototype.start=function(e){var t=this;this._resourceUploader=e;var n=window.performance;n&&(this._ctx.recording.inFrame||this._queue.enqueue({Kind:g.REC_FEAT_SUPPORTED,Args:[w.Performance,this._timingSupported,w.PerformanceEntries,this._getEntriesSupported,w.PerformanceMemory,this._memorySupported,w.PerformanceObserver,!!window.PerformanceObserver]}),this.observe(),!this._observer&&n.addEventListener&&n.removeEventListener&&this._listeners.add(n,"resourcetimingbufferfull",!0,function(){t._queue.enqueue({Kind:g.RESOURCE_TIMING_BUFFER_FULL,Args:[]})}),this.checkMemory())},e.prototype.onLoad=function(){this._gotLoad||(this._gotLoad=!0,this._timingSupported&&(this.recordTiming(performance.timing),this.checkForNewEntries()))},e.prototype.tick=function(e){this.checkMemory(),e&&this.checkForNewEntries()},e.prototype.shutdown=function(){this._listeners&&this._listeners.clear(),this._resourceUploader=void 0;var e=[];this._observer?(this._observer.takeRecords&&(e=this._observer.takeRecords()),this._observer.disconnect()):window.performance&&window.performance.getEntries&&(e=window.performance.getEntries()),e.length>300&&(e=e.slice(0,300),this._queue.enqueue({Kind:g.RESOURCE_TIMING_BUFFER_FULL,Args:[]})),this._observedBatches.push(e),this.tick(!0)},e.prototype.observe=function(){var e=this;if(!this._observer&&this._getEntriesSupported&&window.PerformanceObserver){this._observedBatches.push(performance.getEntries()),this._observer=new window.PerformanceObserver(function(t){var n=t.getEntries();e._observedBatches.push(n)});var t=["navigation","resource","measure","mark"];window.PerformancePaintTiming&&t.push("paint"),this._observer.observe({entryTypes:t})}},e.prototype.checkMemory=function(){if(this._memorySupported&&!this._ctx.recording.inFrame){var e=performance.memory;if(e){var t=e.usedJSHeapSize-this._lastUsedJSHeapSize;(0==this._lastUsedJSHeapSize||Math.abs(t/this._lastUsedJSHeapSize)>.2)&&(this.addPerfEvent(m.Memory,e,Ur),this._lastUsedJSHeapSize=e.usedJSHeapSize)}}},e.prototype.recordEntry=function(e){switch(e.entryType){case"navigation":this.recordNavigation(e);break;case"resource":this.recordResource(e);break;case"paint":this.recordPaint(e);break;case"measure":this.recordMeasure(e);break;case"mark":this.recordMark(e);}},e.prototype.checkForNewEntries=function(){if(this._perfSupported&&this._getEntriesSupported){var e=this._observedBatches;this._observedBatches=[];for(var t=0,n=e;t<n.length;t++)for(var r=0,i=n[t];r<i.length;r++){var o=i[r];this.recordEntry(o)}}},e.prototype.recordTiming=function(e){this.addPerfEvent(m.Timing,e,Lr)},e.prototype.recordNavigation=function(e){this.addPerfEvent(m.Navigation,e,Fr,{name:"navigation"})},e.prototype.recordResource=function(e){var t=this._ctx.options.orgId;"3E938"!=t&&"GDWG7"!=t&&this.addPerfEvent(m.Resource,e,Pr,{name:e.initiatorType})},e.prototype.recordPaint=function(e){this.addPerfEvent(m.Paint,e,Mr)},e.prototype.recordMark=function(e){this.addPerfEvent(m.Mark,e,Mr)},e.prototype.recordMeasure=function(e){this.addPerfEvent(m.Measure,e,Mr)},e.prototype.addPerfEvent=function(e,t,n,r){void 0===r&&(r={});for(var i=[e],o=0,s=n;o<s.length;o++){var a=s[o],u=t[a];if(void 0===u&&(u=-1),a in r){var c=Dn(u,this._ctx.options.orgId,{source:"perfEntry",type:r[a]});u===c&&this.maybeUploadResource(e,t,c),u=c}i.push(u)}this._queue.enqueue({Kind:g.PERF_ENTRY,Args:i})},e.prototype.maybeUploadResource=function(e,t,n){this._resourceUploader&&e===m.Resource&&"css"===t.initiatorType&&this._resourceUploader.uploadIfNeeded(this._ctx.window,n)},e}();function Nr(e){var t=0,n={id:t++,edges:{}};return e.split("\n").forEach(function(e){if(""!=(e=e.trim())){if(0==e.indexOf("/")||e.lastIndexOf("/")==e.length-1)throw new Error("Leading and trailing slashes are not supported");var r=n,i=e.split("/");i.forEach(function(e,n){if(""===(e=e.trim()))throw new Error("Empty elements are not allowed");if("**"!=e&&"*"!=e&&-1!=e.indexOf("*"))throw new Error("Embedded wildcards are not supported");var o=null;"**"==e?(r.loop=!0,o=r):e in r.edges&&(o=r.edges[e]),o||(o={id:t++,edges:{}},r.edges[e]=o),n==i.length-1&&(o.term=!0),r=o})}}),n}var Wr=Nr("**"),Br="__fs__redacted";function Dr(e,t,n){var r;if(n){r=1==n?Wr:n;try{var i=0,o=[1],s=[],a={};return a[r.id]=r,s.push(a),Ye.jsonStringify(e,function(e,n){var r=n&&"object"==typeof n;if(""==e&&1==o.length)return o[0]--,r&&o.push(Ye.objectKeys(n).length),n;var a={},u=s[s.length-1],c=!0,h=!1,d=function(e){a[e.id]=e,c=!1,e.term&&(h=!0)};for(var l in u){var p=u[l];e in p.edges&&d(p.edges[e]),"*"in p.edges&&d(p.edges["*"]),p.loop&&d(p)}for((c||!r&&!h)&&(n=Br),i+=e.length+2,(i+=r?2:null===n?4:n.toString().length)>=t&&(n=void 0),o[o.length-1]--,n&&n!==Br&&r&&(o.push(Ye.objectKeys(n).length),s.push(a));o[o.length-1]<=0;)o.pop(),s.pop();return n})}catch(e){}return"[error serializing "+e.constructor.name+"]"}}var Hr=function(){function e(e){this._requestTracker=e}return e.prototype.disable=function(){this._hook&&(this._hook.disable(),this._hook=null)},e.prototype.enable=function(e){var t,n,r=this,i=L(e),o=null===(n=null===(t=i)||void 0===t?void 0:t._w)||void 0===n?void 0:n.fetch;(o||e.fetch)&&(this._hook=xt(o?i._w:e,"fetch"),this._hook&&this._hook.afterSync(function(e){return r.recordFetch(e.that,e.result,e.args[0],e.args[1])}))},e.prototype.recordFetch=function(e,t,n,r){var i,o="GET",s="",a={};if("string"==typeof n?s=n:"url"in n?(s=n.url,o=n.method,i=n.body,n.headers&&n.headers.forEach(function(e,t){a[e]=t})):s=""+n,r){o=r.method||o;var u=r.headers;if(u)if(ot(u))for(var c=0,h=u;c<h.length;c++){var d=h[c],l=d[0],p=d[1];a[l]=p}else if("function"==typeof u.forEach)u.forEach(function(e,t,n){a[t]=e});else for(var l in u)a[l]=u[l];i=r.body||i}if(s){for(var l in s=this._requestTracker.addPendingReq(t,o,s),a)this._requestTracker.addHeader(t,l,a[l]);i&&this._requestTracker.addRequestBody(t,i)}this.instrumentResponse(t,s,!!this._requestTracker.getRspWhitelist(s))},e.prototype.instrumentResponse=function(e,t,n){var r=this;e.then(ee.wrap(function(t){var i=(t.headers.get("content-type")||"default").split(";")[0],o=["default","text/plain","text/json","application/json"].indexOf(i)>-1;n&&o?t.clone().text().then(ee.wrap(function(i){var o=$r(i,n),s=o[0],a=o[1];r.onComplete(e,t,s,a)}))["catch"](ee.wrap(function(n){r.onComplete(e,t,-1,void 0)})):r.onComplete(e,t,-1,void 0)}))["catch"](ee.wrap(function(t){r.onComplete(e,t,-1,void 0)}))},e.prototype.onComplete=function(e,t,n,r){var i=this,o=-1,s="";if("headers"in t){o=t.status;s=this.serializeFetchHeaders(t.headers,function(e){return i._requestTracker.isHeaderInResponseHeaderWhitelist(e[0])})}return this._requestTracker.onComplete(e,s,o,n,r)},e.prototype.serializeFetchHeaders=function(e,t){var n="";return e.forEach(function(e,r){r=r.toLowerCase();var i=t([r,e]);n+=r+(i?": "+e:"")+Vr}),n},e}(),jr=function(){function e(e){this._requestTracker=e}return e.prototype.disable=function(){this._xhrOpenHook&&(this._xhrOpenHook.disable(),this._xhrOpenHook=null),this._xhrSetHeaderHook&&(this._xhrSetHeaderHook.disable(),this._xhrSetHeaderHook=null)},e.prototype.enable=function(e){var t,n,r=this,i=(null===(n=null===(t=L(e))||void 0===t?void 0:t._w)||void 0===n?void 0:n.XMLHttpRequest)||e.XMLHttpRequest;if(i){var o=i.prototype;this._xhrOpenHook=xt(o,"open"),this._xhrOpenHook&&this._xhrOpenHook.before(function(e){var t=e.args[0],n=e.args[1];r._requestTracker.addPendingReq(e.that,t,n),e.that.addEventListener("load",ee.wrap(function(t){r.onComplete(e.that)})),e.that.addEventListener("error",ee.wrap(function(t){r.onComplete(e.that)}))}),this._xhrSendHook=xt(o,"send"),this._xhrSendHook&&this._xhrSendHook.before(function(e){var t=e.args[0];r._requestTracker.addRequestBody(e.that,t)}),this._xhrSetHeaderHook=xt(o,"setRequestHeader"),this._xhrSetHeaderHook&&this._xhrSetHeaderHook.before(function(e){var t=e.args[0],n=e.args[1];r._requestTracker.addHeader(e.that,t,n)})}},e.prototype.onComplete=function(e){var t=this,n=this.responseBody(e),r=n[0],i=n[1],o=ri(function(e){var t=[];return e.split(Vr).forEach(function(e){var n=e.indexOf(":");-1!=n?t.push([e.slice(0,n).trim(),e.slice(n+1,e.length).trim()]):t.push([e.trim(),null])}),t}(e.getAllResponseHeaders()),function(e){return t._requestTracker.isHeaderInResponseHeaderWhitelist(e[0])});return this._requestTracker.onComplete(e,o,e.status,r,i)},e.prototype.responseBody=function(e){var t=this._requestTracker.pendingReq(e);if(!t)return[-1,void 0];var n=this._requestTracker.getRspWhitelist(t.url);if(e.responseType){var r=e.response;switch(r||o("Maybe response type was different that expected."),e.responseType){case"text":return $r(e.responseText,n);case"json":return function(e,t){if(!e)return[-1,void 0];return[Zr(e),Dr(e,x.MaxPayloadLength,t)]}(r,n);case"arraybuffer":return function(e,t){return[e?e.byteLength:-1,t?"[ArrayBuffer]":void 0]}(r,n);case"blob":return function(e,t){return[e?e.size:-1,t?"[Blob]":void 0]}(r,n);case"document":return function(e,t){return[-1,t?"[Document]":void 0]}(0,n);}}return $r(e.responseText,n)},e}();var Kr,Vr="\r\n",zr=["a-im","accept","accept-charset","accept-encoding","accept-language","accept-datetime","access-control-request-method,","access-control-request-headers","cache-control","connection","content-length","content-md5","content-type","date","expect","forwarded","from","host","if-match","if-modified-since","if-none-match","if-range","if-unmodified-since","max-forwards","origin","pragma","range","referer","te","user-agent","upgrade","via","warning"],Yr=["access-control-allow-origin","access-control-allow-credentials","access-control-expose-headers","access-control-max-age","access-control-allow-methods","access-control-allow-headers","accept-patch","accept-ranges","age","allow","alt-svc","cache-control","connection","content-disposition","content-encoding","content-language","content-length","content-location","content-md5","content-range","content-type","date","delta-base","etag","expires","im","last-modified","link","location","permanent","p3p","pragma","proxy-authenticate","public-key-pins","retry-after","permanent","server","status","strict-transport-security","trailer","transfer-encoding","tk","upgrade","vary","via","warning","www-authenticate","x-frame-options"],Qr={BM7A6:["x-b3-traceid"],KD87S:["transactionid"],NHYJM:["x-att-conversationid"],GBNRN:["x-trace-id"],R16RC:["x-request-id"]},Gr={"thefullstory.com":["x-cloud-trace-context"],TN1:["x-cloud-trace-context"],KD87S:["transactionid"],PPE96:["x-b3-traceid"],HWT6H:["x-b3-traceid"],PPEY7:["x-b3-traceid"],PPK3W:["x-b3-traceid"],NHYJM:["x-att-conversationid"],GBNRN:["x-trace-id"],NK5T9:["traceid","requestid"]},Jr=function(){function e(e,t){this._ctx=e,this._queue=t,this._enabled=!1,this._tracker=new Xr(e,t),this._xhr=new jr(this._tracker),this._fetch=new Hr(this._tracker)}return e.prototype.isEnabled=function(){return this._enabled},e.prototype.enable=function(e){this._enabled||(this._enabled=!0,this._queue.enqueue({Kind:g.REC_FEAT_SUPPORTED,Args:[w.Ajax,!0,w.AjaxFetch,!!e]}),this._xhr.enable(this._ctx.window),e&&this._fetch.enable(this._ctx.window))},e.prototype.disable=function(){this._enabled&&(this._enabled=!1,this._xhr.disable(),this._fetch.disable())},e.prototype.tick=function(e){this._tracker.tick(e)},e.prototype.setWatches=function(e){this._tracker.setWatches(e)},e}(),Xr=function(){function e(e,t){this._ctx=e,this._queue=t,this._reqHeaderWhitelist={},this._rspHeaderWhitelist={},this._pendingReqs={},this._events=[],this._curId=1,this.addHeaderWhitelist(zr,Yr),this.addHeaderWhitelist(Qr[e.options.orgId],Gr[e.options.orgId])}return e.prototype.getReqWhitelist=function(e){var t=this.findWhitelistIndexFor(e);return t>=0&&this._reqWhitelist[t]},e.prototype.getRspWhitelist=function(e){var t=this.findWhitelistIndexFor(e);return t>=0&&this._rspWhitelist[t]},e.prototype.isHeaderInRequestHeaderWhitelist=function(e){return e in this._reqHeaderWhitelist},e.prototype.isHeaderInResponseHeaderWhitelist=function(e){return e in this._rspHeaderWhitelist},e.prototype.pushEvent=function(e){this._events.push(e)},e.prototype.setWatches=function(e){var t=this,n=[];this._reqWhitelist=[],this._rspWhitelist=[],e.forEach(function(e){n.push(e.URLRegex),t._reqWhitelist.push(ni(e.RecordReq,e.ReqWhitelist)),t._rspWhitelist.push(ni(e.RecordRsp,e.RspWhitelist))}),this._reqBodyRegex=new RegExp("("+n.join(")|(")+")")},e.prototype.addHeaderWhitelist=function(e,t){var n=this;e&&e.forEach(function(e){return n._reqHeaderWhitelist[e]=!0}),t&&t.forEach(function(e){return n._rspHeaderWhitelist[e]=!0})},e.prototype.tick=function(e){if(e){for(var t=0;t<this._events.length;t++)this._queue.enqueue({Kind:g.AJAX_REQUEST,Args:this._events[t]});this._events=[]}},e.prototype.pendingReq=function(e){var t=ei(e);return t?this._pendingReqs[t]:(o("missing xhr req id"),null)},e.prototype.deletePending=function(e){var t=ei(e);t&&delete this._pendingReqs[t]},e.prototype.addPendingReq=function(e,t,n){this.deletePending(e);var r=this._curId++;return n=function(e,t){return xn.resolveToDocument(e,t)}(this._ctx.window,n),this._pendingReqs[r]={id:r,xhr:e,method:t,url:n,startTime:s(),headers:[],reqSize:0,reqBody:void 0},function(e,t){e._fs=t}(e,r),n},e.prototype.addHeader=function(e,t,n){var r=this.pendingReq(e);r&&r.headers.push([t,n])},e.prototype.addRequestBody=function(e,t){var n,r=this.pendingReq(e);r&&(n=this.requestBody(r.url,t),r.reqSize=n[0],r.reqBody=n[1])},e.prototype.onComplete=function(e,t,n,r,i){var o=this,a=this.pendingReq(e);if(a){this.deletePending(e);var u=s()-a.startTime,c=ri(a.headers,function(e){return o.isHeaderInRequestHeaderWhitelist(e[0])}),h=a.reqBody||null,d=[a.method,Dn(a.url,this._ctx.options.orgId,{source:"event",type:g.AJAX_REQUEST}),u,n,c,t,a.startTime,a.reqSize,r,h,i||null];this.pushEvent(d)}},e.prototype.findWhitelistIndexFor=function(e){if(this._reqBodyRegex){var t=this._reqBodyRegex.exec(e);if(t)for(var n=1;n<t.length;n++)if(void 0!==t[n])return n-1}return-1},e.prototype.requestBody=function(e,t){if(null==t)return[0,void 0];var n=this.getReqWhitelist(e),r=typeof t;if("string"==r)return function(e,t){return[e.length,ti(e,t)]}(t,n);if("object"==r){var i=r.constructor;switch(i){case String:case Object:default:return function(e,t){var n=void 0;!1!==t&&(n=Dr(e,x.MaxPayloadLength,t));return[Zr(e),n]}(t,n);case Blob:return function(e,t){var n=e.size,r=void 0;t&&(r="[Blob]");return[n,r]}(t,n);case ArrayBuffer:return function(e,t){var n=e.byteLength,r=void 0;t&&(r="[ArrayBuffer]");return[n,r]}(t,n);case Document:case FormData:case URLSearchParams:case ReadableStream:return[-1,n?""+i.name:void 0];}}return[-1,n?"[unknown]":void 0]},e}();function $r(e,t){return e?[e.length,ti(e,t)]:[-1,void 0]}function Zr(e){try{return Ye.jsonStringify(e).length}catch(e){}return 0}function ei(e){return e._fs}function ti(e,t){if(0!=t)try{return Dr(Ye.jsonParse(e),x.MaxPayloadLength,t)}catch(n){return 1==t?e.slice(0,x.MaxPayloadLength):void 0}}function ni(e,t){switch(e){default:case T.Elide:return!1;case T.Record:return!0;case T.Whitelist:try{return Nr(t)}catch(e){return o("error parsing field whitelist ("+t+": "+e),!1}}}function ri(e,t){var n="";return e.forEach(function(e){e[0]=e[0].toLowerCase();var r=t(e);n+=e[0]+(r?": "+e[1]:"")+Vr}),n}function ii(e){return e?e.sheet:void 0}function oi(e){try{return e?e.cssRules||e.rules:void 0}catch(e){return}}function si(e,t){var n=function(e,t){var n=e;if("function"==typeof n.getPropertyCSSValue){var r=n.getPropertyCSSValue(t);if(null!=r){var i;switch(r.cssValueType){case 1:i=r;break;case 2:if(1!==r.length)return;var o=r.item(0);if(null==o)return;if(1!==o.cssValueType)return;i=o;break;default:return;}if(19===i.primitiveType){var s=Cn();Kr||(Kr=s.createElement("div"));var a=i.cssText;try{Kr.style.cssText=t+": \""+a+"\";";var u=Kr.style.getPropertyCSSValue(t);if(null==u)return;if(a!==u.cssText)return}catch(e){return}finally{Kr.style.cssText=""}return"\""+a+"\""}}}}(e,t);return void 0!==n?n:e.getPropertyValue(t)}var ai,ui="EventQueue not defined for 'withEventQueueFor', likely caused by holding ref to callback",ci=function(e){var t=e.ownerDocument;return t&&t.defaultView},hi=function(){function e(t,n){var r=this;this.ctx=t,this.queue=n,this.hooks=[],this.removeShims=[],this.nextSheetId=1;var i=e;this.throttle=new Xt(i.ThrottleMax,i.ThrottleInterval,function(){return setTimeout(function(){r.queue.enqueue({Kind:g.FAIL_THROTTLED,Args:[S.StyleSheetHooks]}),r.stop()})}),this.addInsert=this.throttle.guard(this.addInsert),this.addDelete=this.throttle.guard(this.addDelete)}return e.prototype.start=function(){var e=this;this.throttle.open();var t=this.ctx.window;if(t.CSSStyleSheet&&t.StyleSheet){var n,r=t.CSSStyleSheet.prototype;(n=xt(r,"insertRule"))&&(n.afterSync(function(t){e.addInsert(t.that,t.args[0],t.args[1])}),this.hooks.push(n)),(n=xt(r,"deleteRule"))&&(n.afterSync(function(t){e.addDelete(t.that,t.args[0])}),this.hooks.push(n)),this.removeShims.push(Rt(t.StyleSheet,"disabled",function(t,n){return e.onDisableSheet(t,n)}),Rt(t.Document,"adoptedStyleSheets",function(t,n){return e.onSetAdoptedStyleSheets(t)}),Rt(t.ShadowRoot,"adoptedStyleSheets",function(t,n){return e.onSetAdoptedStyleSheets(t)}))}},e.prototype.onSetAdoptedStyleSheets=function(e){if(un(e)){var t=e.adoptedStyleSheets;if(t){for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r],s=this.snapshotConstructedStylesheet(o);n.push(s),!0===o.disabled&&this.onDisableSheet(o,!0)}this.queue.enqueue({Kind:g.ADOPTED_STYLESHEETS,Args:[un(e),n]})}}},e.prototype.snapshotEl=function(e,t){void 0===t&&(t=0);var n=un(e);if(n){var r=ii(e);r&&this.snapshot([b.Node,n],r,t)}},e.prototype.snapshotConstructedStylesheet=function(e){var t=_i(e);if(void 0!==t)return t;var n=this.nextSheetId++;return function(e,t){e._fs=t}(e,n),this.snapshot([b.Sheet,n],e),n},e.prototype.snapshot=function(e,t,n){void 0===n&&(n=0);var r=oi(t);if(r){for(var i=[],o=n;o<r.length;o++)try{i.push(ai(r[o]))}catch(e){i.push("html {}")}this.queue.enqueue({Kind:g.CSSRULE_INSERT,Args:[e,i,n]})}},e.prototype.addInsert=function(t,n,r){var i=fi(t,b.Node);i&&"string"==typeof n&&(n.length>e.MaxRuleBytes&&(o("CSSRule too large, inserting dummy instead: "+n.length),n="dummy {}"),this.withEventQueueForSheet(t,function(e){return e.enqueue({Kind:g.CSSRULE_INSERT,Args:"number"==typeof r?[i,[n],r]:[i,[n]]})}))},e.prototype.addDelete=function(e,t){var n=fi(e,b.Node);n&&this.withEventQueueForSheet(e,function(e){return e.enqueue({Kind:g.CSSRULE_DELETE,Args:[n,t]})})},e.prototype.onDisableSheet=function(e,t){var n=fi(e,b.Node);n&&this.withEventQueueForSheet(e,function(e){return e.enqueue({Kind:g.DISABLE_STYLESHEET,Args:[n,!!t]})})},e.prototype.withEventQueueForSheet=function(e,t){if(e.ownerNode)return n=this.ctx,r=e.ownerNode,i=t,void((o=L(ci(r)||n.window))&&"function"==typeof o._withEventQueue&&o._withEventQueue(n.recording.pageSignature(),function(e){i({enqueue:function(t){ne(null!=e,ui)&&e.enqueue(t)},enqueueFirst:function(t){ne(null!=e,ui)&&e.enqueueFirst(t)}}),e=null}));var n,r,i,o;t(this.queue)},e.prototype.stop=function(){this.throttle.close();for(var e=0,t=this.hooks;e<t.length;e++){t[e].disable()}this.hooks=[];for(var n=0,r=this.removeShims;n<r.length;n++){(0,r[n])()}this.removeShims=[]},e.ThrottleMax=1e4,e.ThrottleInterval=1e4,e.MaxRuleBytes=16384,e}(),di=document.createElement("div");function li(e,t){if(void 0===t&&(t=0),!ne(t<=20,"No deep recursion for CSS rules"))return"html { /* Depth limit exceeded! */ }";var n=function(e){switch(e.type){case CSSRule.PAGE_RULE:var t=e.selectorText||"";return t&&lt(t,"@page")?t:"@page "+t;case CSSRule.KEYFRAME_RULE:return e.keyText;case CSSRule.STYLE_RULE:return e.selectorText;case CSSRule.MEDIA_RULE:return"@media "+e.media.mediaText;case CSSRule.KEYFRAMES_RULE:return"@keyframes "+e.name;case CSSRule.SUPPORTS_RULE:return"@supports "+e.conditionText;default:return null;}}(e);if(null==n)return e.cssText;var r=function(e,t){var n=e,r=n.style;if(r){for(var i="",o=0;o<r.length;o++){var s=r[o],a=si(r,s);"initial"!==a&&("\""!==(u=a)[0]&&"'"!==u[0]||u[u.length-1]!==u[0])||(i+=s+": "+a,"important"===r.getPropertyPriority(s)&&(i+=" !important"),i+="; ")}return[r.cssText,i].filter(Boolean).join("\n")}var u;var c=n.cssRules;if(!c)return null;var h="";for(o=0;o<c.length;o++)h+=li(c[o],t+1);return h}(e,t);return null==r?e.cssText:n+" { "+r+"} "}di.style.width="initial",ai=""!=di.style.cssText?function(e){return e.cssText}:li;var pi=/^\s*$/;function fi(e,t){var n=function(e){var t=_i(e);if(t)return[b.Sheet,t];var n=un(e.ownerNode);if(n)return[b.Node,n];return}(e);if(n){var r=n[0],i=n[1];return r===t?i:n}}function _i(e){return e._fs}var vi=function(){function e(e,t,n){this._ctx=e,this._q=t,this._listeners=n.createChild()}return e.prototype.start=function(){var e=this,t=this._ctx.window.document;this._listeners.addCustom(t,this.getFullscreenChangeEvent(),!0,function(t){e.onFullscreenChange(t)}),this._listeners.addCustom(t,this.getFullscreenErrorEvent(),!0,function(t){e.onFullscreenError(t)})},e.prototype.stop=function(){this._listeners&&this._listeners.clear()},e.prototype.onFullscreenChange=function(e){var t=this.getFullscreenElement();if(t){var n=un(t);ne(null==this._previousFullscreenFSID,"Error: Received fullscreen signal but we think we are already in fullscreen?"),this._q.enqueue({Kind:g.FULLSCREEN,Args:[n,!0]}),this._previousFullscreenFSID=n}else ne(null!=this._previousFullscreenFSID,"Error: Received fullscreen exit signal but have no previous fullscreen event?"),this._q.enqueue({Kind:g.FULLSCREEN,Args:[this._previousFullscreenFSID,!1]}),this._previousFullscreenFSID=void 0},e.prototype.onFullscreenError=function(e){this._q.enqueue({Kind:g.FULLSCREEN_ERROR,Args:[]})},e.prototype.getFullscreenElement=function(){var e=this._ctx.window.document;return e[ue(e,"fullscreenElement")]},e.prototype.getFullscreenChangeEvent=function(){return ue(this._ctx.window.document,"onfullscreenchange").slice(2)},e.prototype.getFullscreenErrorEvent=function(){return ue(this._ctx.window.document,"onfullscreenerror").slice(2)},e}(),gi=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r["throw"](e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},yi=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),"throw":a(1),"return":a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue;}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},mi=function(){function e(e,t){this._queue=t,this._registry=null,this._checkedNodeTags={};var n=e.window;this._registry=n.customElements&&n.customElements.get&&n.customElements.whenDefined&&n.customElements}return e.prototype.onCustomNodeVisited=function(e){return gi(this,void 0,ze,function(){var t,n;return yi(this,function(r){switch(r.label){case 0:if(!this._registry)return[2];if(t=e.nodeName.toLowerCase(),this._checkedNodeTags.hasOwnProperty(t))return[2];r.label=1;case 1:return r.trys.push([1,3,,4]),n=!!this._registry.get(t),this._checkedNodeTags[t]=n,[4,this._registry.whenDefined(t)];case 2:return r.sent(),this._enqueue(t),[3,4];case 3:return r.sent(),[3,4];case 4:return[2];}})})},e.prototype._enqueue=function(e){this._queue.enqueue({Kind:g.CUSTOM_ELEMENT_DEFINED,Args:[e]})},e}(),wi=function(){function e(e,t,n,r,i,o,s,a){var u=this;this._ctx=e,this._queue=t,this._keep=n,this._onFrameCreated=o,this._beforeFrameRemoved=s,this._resourceUploader=a,this._curSelection=[],this._scrollTimeouts={},this._uploadResources=!1,this._initialized=!1,this._wnd=e.window,this._doc=this._wnd.document,this._loc=this._wnd.location,this._hst=this._wnd.history,this._listeners=i.createChild(),this._currentUrl=this._loc.href,this._inputWatcher=new pn(function(e){u.addChangeElem(e)},function(e){return!!un(e)}),this._ajaxWatcher=new Jr(e,t),this._perfWatcher=new qr(e,t,this._listeners),this._styleSheetWatcher=new hi(e,t),this._fullscreenWatcher=new vi(e,t,this._listeners),this._customElementWatcher=new mi(e,t),this._mutWatcher=new Rr(e,r,!0,function(e,t,n){u.visitNode(e,t,n)},function(e){var t=e.node;if("iframe"==Zt(e.node))u._beforeFrameRemoved(e.node);else if("function"==typeof t.getElementsByTagName)for(var n=t.getElementsByTagName("iframe"),r=0;r<n.length;r++){var i=n[r];u._beforeFrameRemoved(i)}},function(e,t,n){if(!sn(e)&&u._uploadResources)for(var r=0,i=function(e,t,n){var r,i=Zt(e);if(Si[t]&&Si[t][i])return[n];if("link"==i&&"href"==t&&(r=e.getAttribute("rel"))&&r.indexOf("stylesheet")>-1)return[n];if("srcset"==t&&("img"==i||"source"==i)){return null!=n.match(/^\s*$/)?[]:$e(n.split(","),function(e){return it(e).split(/\s+/)[0]})}var o=e;if("style"==t&&o.style){var s=o.style.backgroundImage;if(!s)return[];if(s.length>300)return[];var a=[],u=void 0;for(qt.lastIndex=0;u=qt.exec(s);){var c=u[1];c&&a.push(c.trim())}return a}return[]}(e,t,n);r<i.length;r++){var o=i[r];u._resourceUploader.uploadIfNeeded(u._wnd,o)}})}return e.prototype.watchEvents=function(){var e=this;this._mutWatcher.hookMutations(),this._inputWatcher.hookEvents(),this._styleSheetWatcher.start(),this._perfWatcher.start(this._resourceUploader),this._fullscreenWatcher.start(),this._listeners.add(this._wnd,"mousemove",!0,function(t){e.isPrivacyClear(t)&&e.addMouseMove(t)}),this._listeners.add(this._wnd,"mousedown",!0,function(t){e.isPrivacyClear(t)&&e.addMouseDown(t)}),this._listeners.add(this._wnd,"mouseup",!0,function(t){e.isPrivacyClear(t)&&e.addMouseUp(t)}),this._listeners.add(this._wnd,"keydown",!0,function(t){e.addKeyDown(t)}),this._listeners.add(this._wnd,"keyup",!0,function(t){e.addKeyUp(t)}),this._listeners.add(this._wnd,"click",!0,function(t){e.isPrivacyClear(t)&&e.addClick(t)}),this._listeners.add(this._wnd,"dblclick",!0,function(t){e.addDblClick(t)}),this._listeners.add(this._wnd,"focus",!0,function(t){e.addFocus(t)}),this._listeners.add(this._wnd,"blur",!0,function(t){e.addBlur(t)}),this._listeners.add(this._wnd,"change",!0,function(t){e.addChange(t)},!0),this._listeners.add(this._wnd,"touchstart",!0,function(t){e.isPrivacyClear(t)&&(e.addTouchEvent(t,g.TOUCHSTART),e.addWindowScrollOrResize())}),this._listeners.add(this._wnd,"touchend",!0,function(t){e.isPrivacyClear(t)&&(e.addTouchEvent(t,g.TOUCHEND),e.addWindowScrollOrResize())}),this._listeners.add(this._wnd,"touchmove",!0,function(t){e.isPrivacyClear(t)&&(e.addTouchEvent(t,g.TOUCHMOVE),e.addWindowScrollOrResize())}),this._listeners.add(this._wnd,"touchcancel",!0,function(t){e.isPrivacyClear(t)&&e.addTouchEvent(t,g.TOUCHCANCEL)}),this._listeners.add(this._wnd,"play",!0,function(t){e.addPlayEvent(t)}),this._listeners.add(this._wnd,"pause",!0,function(t){e.addPauseEvent(t)}),this._listeners.add(this._wnd,"scroll",!1,function(t){e.addWindowScrollOrResize()}),this._listeners.add(this._wnd,"resize",!1,function(t){e.addWindowScrollOrResize()}),this._listeners.add(this._wnd,"submit",!1,function(t){e.addFormSubmit(t)}),this._listeners.add(this._wnd,"focus",!1,function(t){e.addWindowFocus(t)}),this._listeners.add(this._wnd,"blur",!1,function(t){e.addWindowBlur(t)}),this._listeners.add(this._wnd,"popstate",!1,function(){e.addNavigate()}),this._listeners.add(this._wnd,"selectstart",!0,function(t){e.addSelection()}),this._listeners.add(this._doc,"selectionchange",!0,function(t){e.addSelection()});var t=this._wnd.visualViewport;if(t?(this._listeners.add(t,"scroll",!0,function(){return e.addWindowScrollOrResize()}),this._listeners.add(t,"resize",!0,function(){return e.addWindowScrollOrResize()})):this._listeners.add(this._wnd,"mousewheel",!0,function(){e.addWindowScrollOrResize()}),this._pushHook=xt(this._hst,"pushState"),this._pushHook&&this._pushHook.afterSync(function(){return e.addNavigate()}),this._replaceHook=xt(this._hst,"replaceState"),this._replaceHook&&this._replaceHook.afterSync(function(){return e.addNavigate()}),"function"==typeof this._wnd.document.hasFocus&&this._queue.enqueue({Kind:this._wnd.document.hasFocus()?g.WINDOW_FOCUS:g.WINDOW_BLUR,Args:[]}),Ye.matchMedia)for(var n=function(t,n,i){var o=Ye.matchMedia(r._wnd,i);if(!o)return"continue";var s=function(){o.matches&&e._queue.enqueue({Kind:g.MEDIA_QUERY_CHANGE,Args:[t,n]})};r._listeners.add(o,"change",!0,s),s()},r=this,i=0,o=[["any-pointer","coarse","not screen and (any-pointer: fine)"],["any-pointer","fine","only screen and (any-pointer: fine)"],["any-hover","none","not screen and (any-hover: hover)"],["any-hover","hover","only screen and (any-hover: hover)"]];i<o.length;i++){var s=o[i];n(s[0],s[1],s[2])}this._initialized=!0},e.prototype.initResourceUploading=function(){this._resourceUploader.init(),this._uploadResources=!0},e.prototype.onDomLoad=function(){this.addDomLoaded(),this.addViewportChange(),this._mutWatcher._checkForMissingInsertions(oe)},e.prototype.onLoad=function(){var e=this,t=!1,n=ee.wrap(function(){t||(t=!0,e._perfWatcher.onLoad(),e.addLoad(),e.addViewportChange())},"error");new Gt(n,0).start(),Ye.requestWindowAnimationFrame&&Ye.requestWindowAnimationFrame(this._wnd,n)},e.prototype.ajaxWatcher=function(){return this._ajaxWatcher},e.prototype.bundleEvents=function(e){return this._inputWatcher.tick(),this._perfWatcher.tick(e),this._ajaxWatcher.tick(e),this.addViewportChange(),this._mutWatcher.processMutations()},e.prototype.shutdown=function(e){this._initialized&&(this._initialized=!1,this._listeners&&this._listeners.clear(),this._pushHook&&this._pushHook.disable(),this._replaceHook&&this._replaceHook.disable(),this._perfWatcher.onLoad(),this._inputWatcher.shutdown(),this._mutWatcher.shutdown(),this._ajaxWatcher.disable(),this._perfWatcher.shutdown(),this._styleSheetWatcher.stop(),this._fullscreenWatcher.stop(),this._queue.shutdown(e))},e.prototype.recordingIsDetached=function(){return this._mutWatcher.recordingIsDetached()},e.prototype.visitNode=function(e,t,n){var r=this;switch(t.nodeName){case"#document":case"#document-fragment":"#document-fragment"===t.nodeName&&this._listeners.add(t,"scroll",!0,function(e){return r.addScroll(Ti(e))});var i=t;try{if(!i.adoptedStyleSheets||0===i.adoptedStyleSheets.length)break}catch(e){break}n.push(function(){r._styleSheetWatcher.onSetAdoptedStyleSheets(t)});break;case"HTML":this._docElScrollListener&&this._listeners.remove(this._docElScrollListener),this._docElScrollListener=this._listeners.add(t,"scroll",!0,function(e){r.addScroll(Ti(e))});break;case"BODY":this.addViewportChange(),n.push(function(){r.addSelection()});break;case"INPUT":case"TEXTAREA":case"SELECT":this._inputWatcher.addInput(t);break;case"FRAME":case"IFRAME":this._onFrameCreated(t);break;case"VIDEO":case"AUDIO":t.paused||this._queue.enqueue({Kind:g.PLAY,Args:[un(t)]});break;case"LINK":if(!(o=t.sheet))break;!0===o.disabled&&this._styleSheetWatcher.onDisableSheet(o,!0);break;case"STYLE":var o,s=t;if(!(o=s.sheet))break;!0===o.disabled&&this._styleSheetWatcher.onDisableSheet(o,!0);var a=function(e){var t=e.textContent||"";if(!(t.length>5e5)){var n=oi(ii(e));if(n){if(n.length>0&&pi.test(t))return 0;var r,i=Cn();oe?(r=i.createElement("style")).textContent=e.textContent:r=i.importNode(e,!0),i.head.appendChild(r);var o=oi(ii(r));if(i.head.removeChild(r),o)return n.length>o.length?o.length:void 0}}}(s);void 0!==a&&n.push(function(){r._styleSheetWatcher.snapshotEl(s,a)});break;default:"#"!==t.nodeName[0]&&t.nodeName.indexOf("-")>-1&&this._customElementWatcher.onCustomNodeVisited(t);}if("scrollLeft"in t&&"scrollTop"in t){var u=t;this._ctx.measurer.requestMeasureTask(function(){0==u.scrollLeft&&0==u.scrollTop||r.addScroll(u)})}},e.prototype.isPrivacyClear=function(e){var t=Ti(e);return!!un(t)&&!sn(t)},e.prototype.addMouseMove=function(e){var t=un(Ti(e));this._queue.enqueue({Kind:g.MOUSEMOVE,Args:t?[e.clientX,e.clientY,t]:[e.clientX,e.clientY]})},e.prototype.addMouseDown=function(e){this._queue.enqueue({Kind:g.MOUSEDOWN,Args:[e.clientX,e.clientY]})},e.prototype.addMouseUp=function(e){this._queue.enqueue({Kind:g.MOUSEUP,Args:[e.clientX,e.clientY]})},e.prototype.addTouchEvent=function(e,t){if(void 0!==e.changedTouches)for(var n=0;n<e.changedTouches.length;++n){var r=e.changedTouches[n];isNaN(parseInt(r.identifier))&&(r.identifier=0);var i=[r.identifier,r.clientX,r.clientY];this._queue.enqueue({Kind:t,Args:i})}},e.prototype.addPlayEvent=function(e){var t=un(Ti(e));t&&this._queue.enqueue({Kind:g.PLAY,Args:[t]})},e.prototype.addPauseEvent=function(e){var t=un(Ti(e));t&&this._queue.enqueue({Kind:g.PAUSE,Args:[t]})},e.prototype.addWindowFocus=function(e){this._queue.enqueue({Kind:g.WINDOW_FOCUS,Args:[]})},e.prototype.addWindowBlur=function(e){this._queue.enqueue({Kind:g.WINDOW_BLUR,Args:[]})},e.prototype.maybeAddValueChange=function(){var e=Ei(this._doc);e&&this._inputWatcher.onChange(e)},e.prototype.addKeyDown=function(e){var t=Ei(this._doc);t&&!cn(t)||(this.maybeAddValueChange(),this._queue.enqueue({Kind:g.KEYDOWN,Args:[]}))},e.prototype.addKeyUp=function(e){var t=Ei(this._doc);t&&!cn(t)||(this.maybeAddValueChange(),this._queue.enqueue({Kind:g.KEYUP,Args:[]}))},e.prototype.addViewportChange=function(){var e=this;this._ctx.measurer.requestMeasureTask(function(){return e._addViewportChangeImpl()})},e.prototype._addViewportChangeImpl=function(){var e=un(this.getWindowScrollingElement());if(e){var t,n,r,i,o=Dt(this._wnd,this._curLayoutViewport),s=function(e,t){return"visualViewport"in e?e.visualViewport:(void 0===t&&(t=Dt(e)),new Ht(e,t))}(this._wnd,o);o.hasKnownPosition?(Ft(o,this._curLayoutViewport)||this._queue.enqueue({Kind:g.SCROLL_LAYOUT,Args:[e,o.pageLeft,o.pageTop]}),t=s,(n=this._curVisualViewport)&&t.offsetLeft==n.offsetLeft&&t.offsetTop==n.offsetTop||this._queue.enqueue({Kind:g.SCROLL_VISUAL_OFFSET,Args:[e,s.offsetLeft,s.offsetTop]})):Ft(s,this._curVisualViewport)||this._queue.enqueue({Kind:g.SCROLL_LAYOUT,Args:[e,s.pageLeft,s.pageTop]}),function(e,t){return t&&e.width==t.width&&e.height==t.height&&e.clientWidth==t.clientWidth&&e.clientHeight==t.clientHeight}(o,this._curLayoutViewport)||(o.width==o.clientWidth&&o.height==o.clientHeight?this._queue.enqueue({Kind:g.RESIZE_LAYOUT,Args:[o.clientWidth,o.clientHeight]}):this._queue.enqueue({Kind:g.RESIZE_LAYOUT,Args:[o.clientWidth,o.clientHeight,o.width,o.height]})),function(e,t){return t&&e.width==t.width&&e.height==t.height}(s,this._curVisualViewport)||this._queue.enqueue({Kind:g.RESIZE_VISUAL,Args:[s.width,s.height]}),this._curLayoutViewport=((i=Pt(r=o)).clientWidth=r.clientWidth,i.clientHeight=r.clientHeight,i),this._curVisualViewport=function(e){var t=Pt(e);return t.offsetLeft=e.offsetLeft,t.offsetTop=e.offsetTop,t}(s)}},e.prototype.doWorkInScrollTimeout=function(e,t){var n=this;e in this._scrollTimeouts||(this._scrollTimeouts[e]=t,new Gt(function(){n._ctx.measurer.requestMeasureTask(function(){if(e in n._scrollTimeouts){var t=n._scrollTimeouts[e];delete n._scrollTimeouts[e],t()}})},x.ScrollSampleInterval).start())},e.prototype._fireScrollTimeouts=function(){for(var e in this._scrollTimeouts)this._scrollTimeouts[e](),delete this._scrollTimeouts[e];this._scrollTimeouts=[]},e.prototype.getWindowScrollingElement=function(){return this._doc.scrollingElement||this._doc.body||this._doc.documentElement},e.prototype.addWindowScrollOrResize=function(){var e=this;this.doWorkInScrollTimeout(1,function(){return e.addViewportChange()})},e.prototype.addScroll=function(e){var t=this,n=un(e);n&&this.doWorkInScrollTimeout(n,function(){if(un(e)===n){var r=e;n&&"number"==typeof r.scrollLeft&&t._queue.enqueue({Kind:g.SCROLL_LAYOUT,Args:[n,r.scrollLeft,r.scrollTop]})}})},e.prototype.addDomLoaded=function(){this._queue.enqueue({Kind:g.DOMLOADED,Args:[]})},e.prototype.addLoad=function(){this._queue.enqueue({Kind:g.LOAD,Args:[]})},e.prototype.addNavigate=function(){var e=this._loc.href;this._currentUrl!=e&&(this._currentUrl=e,this._keep.onNavigate(e),this._queue.enqueue({Kind:g.NAVIGATE,Args:[Dn(this._loc.href,this._ctx.options.orgId,{source:"event",type:g.NAVIGATE}),this._doc.title]}))},e.prototype.addClick=function(e){var t=Ti(e),n=un(t);if(n){var r=0,i=0,o=0,s=0;if(t&&t.getBoundingClientRect){var a=t.getBoundingClientRect();r=a.left,i=a.top,o=a.width,s=a.height}var u=an(t);this._keep.onClick(u),this._queue.enqueue({Kind:g.CLICK,Args:[n,e.clientX,e.clientY,r,i,o,s]})}},e.prototype.addDblClick=function(e){var t=un(Ti(e));t&&this._queue.enqueue({Kind:g.DBL_CLICK,Args:[t]})},e.prototype.addFormSubmit=function(e){var t=un(Ti(e));t&&this._queue.enqueue({Kind:g.FORM_SUBMIT,Args:[t]})},e.prototype.addFocus=function(e){var t=un(Ti(e));t&&this._queue.enqueue({Kind:g.FOCUS,Args:[t]})},e.prototype.addBlur=function(e){var t=un(Ti(e));t&&this._queue.enqueue({Kind:g.BLUR,Args:[t]})},e.prototype.addChange=function(e){this._inputWatcher.onChange(Ti(e))},e.prototype.addChangeElem=function(e){var t=cn(e);if(t){var n=wn(e);(function(e){var t=an(e);return!!t&&!!t.mask})(e)&&(n=Fn(n)),this._queue.enqueue({Kind:g.VALUECHANGE,Args:[t,n]})}},e.prototype.addSelection=function(){var e;try{e=this.selectionArgs()}catch(e){return}for(var t=!1,n=0;n<4;n++)if(this._curSelection[n]!==e[n]){t=!0;break}t&&(this._curSelection=e,this._queue.enqueue({Kind:g.SELECT,Args:e}))},e.prototype.selectionArgs=function(){if(!this._wnd.getSelection)return[];var e=this._wnd.getSelection();if(!e)return[];if("None"==e.type)return[];if("Caret"==e.type){var t=un(e.anchorNode);return t?[t,e.anchorOffset]:[]}if(!e.anchorNode||!e.focusNode)return[];var n=bi(e.anchorNode,e.anchorOffset),r=n[0],i=n[1],o=bi(e.focusNode,e.focusOffset),s=o[0],a=o[1],u=Boolean(r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_FOLLOWING),c=u?[r,s]:[s,r],h=c[0],d=c[1],l=u?[i,a]:[a,i],p=l[0],f=l[1];for(un(h)||(p=0);h&&!un(h)&&h!=d;)h=dt(h)||h.parentNode;for(un(d)||(f=0);d&&!un(d)&&d!=h;)d=mt(d)||d.parentNode;if(h==d&&p==f)return[];var _=un(h),v=un(d);return h&&d&&_&&v?[_,p,v,f,u]:[]},e}();function bi(e,t){if(!e.firstChild)return[e,t];e=e.firstChild;for(var n=0;n<t-1;n++){var r=dt(e);if(!r)return[e,0];e=r}return[e,0]}var Si={src:{img:!0,embed:!0},href:{use:!0,image:!0},data:{object:!0}};function Ei(e){for(var t=e.activeElement;t&&t.shadowRoot;){var n=t.shadowRoot.activeElement;if(!n)return t;t=n}return t}function Ti(e){if(e.composed&&e.target){var t=e.target;if(t.nodeType==Sn&&t.shadowRoot){var n=e.composedPath();if(n.length>0)return n[0]}}return e.target}var ki=/^\s*at .*(\S+\:\d+|native|(<anonymous>))/m,Ii=/^(eval@)?(\[native code\])?$/;function Ci(e){if(!e||"string"!=typeof e.stack)return[];var t=e;return t.stack.match(ki)?t.stack.split("\n").filter(function(e){return!!e.match(ki)}).map(function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var t=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/\(native code\)/,"").split(/\s+/).slice(1),n=Ri(t.pop());return xi(t.join(" "),["eval","<anonymous>"].indexOf(n[0])>-1?"":n[0],n[1],n[2])}):function(e){return e.split("\n").filter(function(e){return!e.match(Ii)}).map(function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return[e,"",-1,-1];var t=e.split("@"),n=Ri(t.pop());return xi(t.join("@"),n[0],n[1],n[2])})}(t.stack)}function xi(e,t,n,r){return[e||"",t||"",parseInt(n||"-1"),parseInt(r||"-1")]}function Ri(e){if(!e||-1===e.indexOf(":"))return["","",""];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(e.replace(/[\(\)]/g,""));return t?[t[1]||"",t[2]||"",t[3]||""]:["","",""]}var Oi=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},Ai=function(){function e(e,t,n){this._queue=t,this._enabled=!1,this._overflow=!1,this._total=0,this._hooks=[],this._wnd=e.window,this._listeners=n.createChild();var r=e.options.orgId;this.maxLogsPerPage="P2C"==r||"ESHFX"==r||"6HFXR"==r||"GF6RM"==r||"A0W9W"==r?3e3:x.MaxLogsPerPage}return e.prototype._overflowMsg=function(){return"\"[received more than "+this.maxLogsPerPage+" messages]\""},e.prototype.enable=function(){var e=this;if(this._listeners.add(this._wnd,"error",!0,function(t){return e.addError(t)}),this._listeners.add(this._wnd,"unhandledrejection",!0,function(t){e.addLog("error",["Uncaught (in promise)",t.reason])},!0),!this._enabled)if(this._enabled=!0,this._queue.enqueue({Kind:g.REC_FEAT_SUPPORTED,Args:[w.Console,!0]}),this._wnd.console)for(var t=function(t){var r=xt(n._wnd.console,t);if(!r)return"continue";r.before(function(n){var r=n.args;return e.addLog(t,r)}),n._hooks.push(r)},n=this,r=0,i=["log","info","warn","error"];r<i.length;r++){t(i[r])}else this.addLog("log",["NOTE: Log messages cannot be captured on IE9"])},e.prototype.isEnabled=function(){return this._enabled},e.prototype.disable=function(){var e;if(this._listeners&&this._listeners.clear(),this._enabled)for(this._enabled=!1;e=this._hooks.pop();)e.disable()},e.prototype.logEvent=function(e,t){if(!this.checkOverflow())return null;var n;n=-1==["log","info","warn","error","debug","_fs_debug"].indexOf(e)?["log",Li(e,1e3)]:[e];for(var r=0;r<t.length;++r)n.push(Li(t[r],1e3));return{Kind:g.LOG,Args:n}},e.prototype.addLog=function(e,t){var n=this.logEvent(e,t);n&&this._queue.enqueue(n)},e.prototype.addError=function(e){if(this.checkOverflow()){var t=e.message,n=e.filename,r=e.lineno;(t||n||r)&&("object"==typeof t&&(t=Li(t,1e3)),"object"==typeof n&&(n=Li(n,100)),"object"==typeof r&&(r=-1),this._queue.enqueue({Kind:g.ERROR,Args:Oi([t,n,r],Ci(e.error))}))}},e.prototype.checkOverflow=function(){return!this._overflow&&(this._total==this.maxLogsPerPage?(this._queue.enqueue({Kind:g.LOG,Args:["warn",this._overflowMsg()]}),this._overflow=!0,!1):(this._total++,!0))},e}();function Li(e,t){try{var n={tokens:[],opath:[],cyclic:Fi(e,t/4)};return function e(t,n,r,i){if(n<1)return 0;var o=t&&t.constructor==Date?Pi(t):function(e){return"object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&e.nodeType>0&&"string"==typeof e.nodeName}(t)?function(e){if(!cn(e))return e.toString();if(e.tagName){var t=Zt(e),n=ae&&"output"==t?{}:e.attributes;return"<"+t+(n&&n.type?" type=\""+n.type.value+"\"":"")+(e.id?" id=\""+e.id+"\"":"")+(e.className?" class=\""+e.className+"\"":"")+">"+(e.firstChild?"...":"")+"</"+t+">"}var r="";return e.data&&e.data.substring&&(r=" "+e.data.substring(0,50)+(e.data.length>50?"...":"")),e.nodeName+r}(t):void 0===t?"undefined":"object"!=typeof t||null==t?t:t instanceof Error?t.stack||t.name+": "+t.message:void 0;if(void 0!==o)return void 0===(o=Ye.jsonStringify(o))?0:("\""==o[0]&&(o=Mi(o,n,"...\"")),o.length<=n?(i.tokens.push(o),o.length):0);if(i.cyclic){i.opath.splice(r);var s=i.opath.lastIndexOf(t);if(s>-1){var a="<Cycle to ancestor #"+(r-s-1)+">";return a="\""+Mi(a,n-2)+"\"",i.tokens.push(a),a.length}i.opath.push(t)}var u=n,c=function(e){return u>=e.length&&(u-=e.length,i.tokens.push(e),!0)},h=function(e){","==i.tokens[i.tokens.length-1]?i.tokens[i.tokens.length-1]=e:c(e)};if(u<2)return 0;if(ot(t)){c("[");for(var d=0;d<t.length&&u>0;d++){var l=e(t[d],u-1,r+1,i);if(u-=l,0==l&&!c("null"))break;c(",")}h("]")}else{c("{");var p=rt(t);for(d=0;d<p.length&&u>0;d++){var f=p[d],_=t[f];if(!c("\""+f+"\":"))break;if(0==(l=e(_,u-1,r+1,i))){i.tokens.pop();break}u-=l,c(",")}h("}")}return n==1/0?1:n-u}(e,t,0,n),n.tokens.join("")}catch(e){return St(e)}}function Fi(e,t){var n=0;try{Ye.jsonStringify(e,function(e,r){if(n++>t)throw"break";if("object"==typeof r)return r})}catch(e){return"break"!=e}return!1}var Pi=function(e){return isNaN(e)?"Invalid Date":e.toUTCString()},Mi=function(e,t,n){return void 0===n&&(n="..."),e.length<=t?e:e.length<=n.length||t<=n.length?e.substring(0,t):e.substring(0,t-n.length)+n};var Ui=function(){function e(e,t){this._q=e,this._valueIndices=t,this._evts=[]}return e.prototype.add=function(e){0==this._evts.length&&this._q.push(e),this._evts.push(e)},e.prototype.finish=function(e,t){var n=this._evts.length;if(n<=1)return!1;for(var r=this._evts[0].When,i=this._evts[n-1].When,o=0;o<this._valueIndices.length;++o){var s=this._valueIndices[o],a=this._evts[0].Args[s],u=(this._evts[1].When-r)/(i-r),c=(this._evts[1].Args[s]-a)/u,h=this._evts[n-2].Args[s],d=(i-this._evts[n-2].When)/(i-r),l=this._evts[n-1].Args[s],p=(l-h)/d;t.push(a,l,c,p)}return this._evts[0].Kind=e,this._evts[0].Args=t,!0},e.prototype.evts=function(){return this._evts},e}(),qi=function(){function e(e){this._ctx=e}return e.prototype.processQueue=function(e){if(0==e.length)return e;for(var t,n=this._ctx.time.now(),r=[],i=new Ui(r,[0,1]),o={},s={},a={},u=0;u<e.length;++u){var c=e[u];switch(c.Kind){case g.MOUSEMOVE:i.add(c);break;case g.TOUCHMOVE:(l=c.Args[0])in o||(o[l]=new Ui(r,[1,2])),o[l].add(c);break;case g.SCROLL_LAYOUT:(l=c.Args[0])in s||(s[l]=new Ui(r,[1,2])),s[l].add(c);break;case g.SCROLL_VISUAL_OFFSET:(l=c.Args[0])in a||(a[l]=new Ui(r,[1,2])),a[l].add(c);break;case g.RESIZE_VISUAL:t||(t=new Ui(r,[0,1])),t.add(c);break;default:r.push(c);}}if(i.finish(g.MOUSEMOVE_CURVE,[n])){var h=i.evts();if(h.length>0){var d=h[h.length-1].Args[2];if(d)h[0].Args[9]=d}}for(var l in s){s[p=parseInt(l)].finish(g.SCROLL_LAYOUT_CURVE,[n,p])}for(var l in a){a[p=parseInt(l)].finish(g.SCROLL_VISUAL_OFFSET_CURVE,[n,p])}for(var l in o){var p;o[p=parseInt(l)].finish(g.TOUCHMOVE_CURVE,[n,p])}return t&&t.finish(g.RESIZE_VISUAL_CURVE,[n]),r},e}(),Ni=function(){function e(e,t,n,r){void 0===n&&(n=function(){return[]}),void 0===r&&(r=Qt),this._ctx=e,this._transport=t,this._gatherExternalEvents=n,this._tickerFactory=r,this._recordingDisabled=!1,this._lastWhen=-1,this._gotUnload=!1,this._eventQueue=[],this._sampleCurvesTicker=new this._tickerFactory(x.CurveSamplingInterval),this._processMutationsTicker=new this._tickerFactory(x.MutationProcessingInterval),this._processor=new qi(e)}return e.prototype.startPipeline=function(e){var t,n,r=this;this._recordingDisabled||this._pipelineStarted||(this._pipelineStarted=!0,this._frameId=null!=(t=e.frameId)?t:0,this._parentIds=null!=(n=e.parentIds)?n:[],this.processEvents(),this._processMutationsTicker.start(function(){r.processEvents()}),this._sampleCurvesTicker.start(function(){r.processEvents(!0)}),this._transport.startPipeline(e))},e.prototype.enqueue=function(e){this.enqueueAt(this._ctx.time.now(),e),Yt.checkForBrokenSchedulers()},e.prototype.enqueueAt=function(e,t){if(!this._recordingDisabled){e<=this._lastWhen&&(e=this._lastWhen+1),this._lastWhen=e;var n=t;n.When=e,this._eventQueue.push(n)}},e.prototype.enqueueFirst=function(e){if(this._eventQueue.length>0){var t=e;t.When=this._eventQueue[0].When,this._eventQueue.unshift(t)}else this.enqueue(e)},e.prototype.addUnload=function(e){this._gotUnload||(this._gotUnload=!0,this.enqueue({Kind:g.UNLOAD,Args:[e]}),this.singSwanSong())},e.prototype.shutdown=function(e){this._flush(),this.addUnload(e),this._flush(),this._recordingDisabled=!0,this.stopPipeline()},e.prototype._flush=function(){this.processEvents(),this._transport.flush()},e.prototype.singSwanSong=function(){this._recordingDisabled||(this.processEvents(),this._transport.singSwanSong())},e.prototype.rebaseIframe=function(e){for(var t=0,n=this._eventQueue.length;t<n;t++){var r=this._eventQueue[t],i=r.When+this._ctx.time.startTime()-e;i<0&&(i=0),r.When=i}},e.prototype.processEvents=function(e){if(this._pipelineStarted){var t=this._eventQueue;this._eventQueue=[];var n=this._processor.processQueue(t);e||(n=n.concat(this._gatherExternalEvents(0!=n.length))),this.ensureFrameIds(n),0!=n.length&&this._transport.enqueueEvents(this._ctx.recording.pageSignature(),n)}},e.prototype.ensureFrameIds=function(e){if(this._frameId)for(var t=this._parentIds,n=t&&t.length>0,r=0;r<e.length;++r){var i=e[r];i.FId||(i.FId=this._frameId),n&&!i.PIds&&(i.PIds=t)}},e.prototype.stopPipeline=function(){this._pipelineStarted&&(this._sampleCurvesTicker.stop(),this._processMutationsTicker.stop(),this._eventQueue=[],this._transport.stopPipeline())},e}();function Wi(){var e,t;return{promise:new ze(function(n,r){e=n,t=r}),resolve:e,reject:t}}function Bi(e){return new ze(function(t){Ye.setWindowTimeout(window,z(t),e)})}var Di=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hi=function(){function e(e){void 0===e&&(e=4),this.hashCount=e,this.idx=0,this.hashMask=e-1,this.reset()}return e.prototype.reset=function(){this.idx=0,this.hash=[];for(var e=0;e<this.hashCount;++e)this.hash.push(2166136261)},e.prototype.write=function(e){for(var t=this.hashMask,n=this.idx,r=0;r<e.length;r++)this.hash[n]=this.hash[n]^e[r],this.hash[n]+=(this.hash[n]<<1)+(this.hash[n]<<4)+(this.hash[n]<<7)+(this.hash[n]<<8)+(this.hash[n]<<24),n=n+1&t;this.idx=n},e.prototype.writeAscii=function(e){for(var t=this.hashMask,n=this.idx,r=0;r<e.length;r++)this.hash[n]=this.hash[n]^e.charCodeAt(r),this.hash[n]+=(this.hash[n]<<1)+(this.hash[n]<<4)+(this.hash[n]<<7)+(this.hash[n]<<8)+(this.hash[n]<<24),n=n+1&t;this.idx=n},e.prototype.sum=function(){return function(e){var t=e.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ").map(Number),n=String.fromCharCode.apply(window,t);if(window.btoa)return window.btoa(n);return function(e){for(var t=String(e),n=[],r=0,i=0,o=0,s=Ki;t.charAt(0|o)||(s="=",o%1);n.push(s.charAt(63&r>>8-o%1*8))){if((i=t.charCodeAt(o+=.75))>255)throw new Vi("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");r=r<<8|i}return n.join("")}(n)}(this.sumAsHex()).replace(/\+/g,"-").replace(/\//g,"_")},e.prototype.sumAsHex=function(){for(var e="",t=0;t<this.hashCount;++t)e+=("00000000"+(this.hash[t]>>>0).toString(16)).slice(-8);return e},e}();function ji(e){var t=new Hi(1);return t.writeAscii(e),t.sumAsHex()}var Ki="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Vi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Di(t,e),t}(Error);var zi=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r["throw"](e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},Yi=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),"throw":a(1),"return":a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue;}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Qi=1e4,Gi=25,Ji=100;function Xi(e,t,n,r){return void 0===r&&(r=new Hi),zi(this,void 0,ze,function(){var i,o,s,a;return Yi(this,function(u){switch(u.label){case 0:i=e.now(),o=n.byteLength,s=0,u.label=1;case 1:return s<o?e.now()-i>Gi?[4,t(Ji)]:[3,3]:[3,5];case 2:u.sent(),i=e.now(),u.label=3;case 3:a=new Uint8Array(n,s,Math.min(o-s,Qi)),r.write(a),u.label=4;case 4:return s+=Qi,[3,1];case 5:return[2,{hash:r.sum(),hasher:r}];}})})}var $i=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r["throw"](e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},Zi=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),"throw":a(1),"return":a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue;}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},eo=6e6,to=function(){function e(e,t,n,r,i){void 0===r&&(r=window.FormData),void 0===i&&(i=Gt),this.ctx=e,this.queue=t,this.protocol=n,this.FormDataCtr=r,this.Timeout=i,this.started={},this.byUrl={},this.batchReady=!1,this.existsBatch=[]}return e.prototype.init=function(){this.FormDataCtr&&this.main()["catch"](function(e){ee.sendToBugsnag(e,"error")})},e.prototype.main=function(){return $i(this,void 0,ze,function(){var e,t,n,r,i,s,a,u,c,h=this;return Zi(this,function(d){switch(d.label){case 0:return[4,this.getBatch()];case 1:for(e=d.sent(),t={fsnv:$e(e,function(e){return e.hash})},n={},r=0,i=e;r<i.length;r++)s=i[r],n[s.hash]=s;a=this.ctx.options.orgId,d.label=2;case 2:return d.trys.push([2,4,,5]),[4,this.protocol.newResources(a,t)];case 3:return u=d.sent(),[3,5];case 4:return o("/rec/newResources failed with status "+d.sent()),[3,0];case 5:try{c=JSON.parse(u)}catch(e){return ee.sendToBugsnag("Error parsing /rec/newResources response","error"),[3,0]}return[4,ft(c,function(e,t){return $i(h,void 0,ze,function(){var r,i,s,u,c,h,d,l,p;return Zi(this,function(f){switch(f.label){case 0:if("fsnv"!=t)return[2];r=0,i=e,f.label=1;case 1:if(!(r<i.length))return[3,6];if(s=i[r],null==(u=n[s]))return ee.sendToBugsnag("Server told us to upload a hash we don't have","error"),[3,5];if(c=u.url,h=u.contentType,!(d=u.blob||u.stringData))return ee.sendToBugsnag("Missing resource contents","error"),[3,5];if(l=u.blob||new Blob([d],{type:h}),null==d)return ee.sendToBugsnag("Tried to re-upload a resource","error"),[3,5];(p=new this.FormDataCtr).append("orgId",a),p.append("baseUrl",c),p.append("fsnvHash",s),p.append("contents",l,"blob"),u.blob=u.stringData=null,f.label=2;case 2:return f.trys.push([2,4,,5]),[4,this.protocol.uploadResource(p)];case 3:return f.sent(),[3,5];case 4:return f.sent(),o("Server error uploading resource"),[3,5];case 5:return r++,[3,1];case 6:return[2];}})})})];case 6:return d.sent(),[3,0];case 7:return[2];}})})},e.prototype.getBatch=function(){var e=this,t=Wi(),n=t.resolve,r=t.promise,i=function(){e.popBatch=null,e.batchReady=!1;var t=e.existsBatch;e.existsBatch=[],n(t)};return this.batchReady?i():this.popBatch=i,r},e.prototype.uploadIfNeeded=function(e,t){return $i(this,void 0,ze,function(){var n,r,i=this;return Zi(this,function(o){switch(o.label){case 0:return this.FormDataCtr?this.started[t]?[2]:function(e,t){var n=Rn(On(e),t);switch(n.protocol){case"blob:":return!0;case"http:":case"https:":switch(n.hostname){case"localhost":case"127.0.0.1":case"[::1]":return e.location.protocol===n.protocol&&e.location.host===n.host;case"::1":var r=n.port?"[::1]:"+n.port:"[::1]";return e.location.protocol===n.protocol&&e.location.host===r;default:return!1;}default:return!1;}}(e,t)?(this.started[t]=!0,[4,this.processResource(t)]):[2]:[2];case 1:return(n=o.sent())?(r=0==this.existsBatch.length,this.existsBatch.push(n),r&&new this.Timeout(function(){i.batchReady=!0,i.popBatch&&i.popBatch()},50).start(),[2]):[2];}})})},e.prototype.processResource=function(e){return $i(this,void 0,ze,function(){var t,n,r;return Zi(this,function(i){switch(i.label){case 0:return this.byUrl[e]?[2,this.byUrl[e]]:[4,no(e,this.ctx.options.orgId)];case 1:return(t=i.sent())?[4,Xi(this.ctx.time,Bi,t.buffer)]:[2,null];case 2:return n=i.sent().hash,r={hash:n,url:e,blob:t.blob,contentType:t.contentType},this.byUrl[r.url]=r,this.queue.enqueue({Kind:g.SYS_RESOURCEHASH,Args:["url",e,r.hash]}),[2,r];}})})},e}();function no(e,t){var n=Wi(),r=n.resolve,i=n.promise,s=new XMLHttpRequest;return"string"!=typeof s.responseType?(r(null),i):(s.open("GET",e),s.responseType="blob",s.onerror=function(){r(null)},s.onload=function(){if(200!=s.status)return o("Error loading blob resource "+Dn(e,t,{source:"log",type:"debug"})),void r(null);var n=s.response;if((n.size||n.length)>eo){var i=Dn(e,t,{source:"log",type:"bugsnag"});return ee.sendToBugsnag("Size of blob resource exceeds limit","warning",{url:i,MaxResourceSizeBytes:eo}),void r(null)}(function(e){var t=Wi(),n=t.resolve,r=t.promise,i=new FileReader;return i.readAsArrayBuffer(e),i.onload=function(){n(i.result)},i.onerror=function(e){ee.sendToBugsnag(e,"error"),n(null)},r})(n).then(function(e){r(e?{buffer:e,blob:n,contentType:n.type}:null)})},s.send(),i)}var ro=function(){function e(e){this._byteCount=0,this._scheme=e.options.scheme,this._recHost=e.options.recHost}return e.prototype.page=function(e,t,n){this.post("/rec/page",bt(e),function(e){try{t(Tt(e))}catch(e){n(0)}},function(e,t){if(t)try{return n(0,Tt(t))}catch(e){}n(0)})},e.prototype.bundle=function(e){var t=bt(e.bundle);this._byteCount+=t.length,o("total bytes written: "+this._byteCount);var n=oo(e.bundle.Seq,e);return this.post(n,t,function(t){try{e.win(Tt(t))}catch(n){ee.sendToBugsnag("Failed to JSON parse /rec/bundle response","error",{rsp:t,error:n.toString()}),e.lose(0)}},e.lose),this._byteCount},e.prototype.bundleBeacon=function(e){return ao(this._scheme,this._recHost,e)},e.prototype.exponentialBackoffMs=function(e,t){var n=Math.min(x.BackoffMax,5e3*Math.pow(2,e));return t?n+.25*Math.random()*n:n},e.prototype.post=function(e,t,n,r){so(this._scheme,this._recHost,e,t,n,r)},e}(),io=function(){function e(e){this._scheme=e.options.scheme,this._recHost=e.options.recHost}return e.prototype.newResources=function(e,t){var n=this;return new ze(function(r,i){so(n._scheme,n._recHost,"/rec/newResources?OrgId="+e,bt(t),r,i)})},e.prototype.uploadResource=function(e){var t=this;return new ze(function(n,r){so(t._scheme,t._recHost,"/rec/uploadResource",e,n,r)})},e}();function oo(e,t){var n="/rec/bundle?OrgId="+t.orgId+"&UserId="+t.userId+"&SessionId="+t.sessionId+"&PageId="+t.pageId+"&Seq="+e;return null!=t.serverPageStart&&(n+="&PageStart="+t.serverPageStart),null!=t.serverBundleTime&&(n+="&PrevBundleTime="+t.serverBundleTime),null!=t.lastUserActivity&&(n+="&LastActivity="+t.lastUserActivity),t.isNewSession&&(n+="&IsNewSession=true"),null!=t.deltaT&&(n+="&DeltaT="+t.deltaT),n}function so(e,t,n,r,i,o){var s="//"+t+n,a=!1,u=new XMLHttpRequest;if("withCredentials"in u)u.onreadystatechange=function(){if(u.readyState==En){if(a)return;a=!0;try{200==u.status?i(u.responseText):o&&o(u.status,u.responseText)}catch(e){ee.sendToBugsnag(e,"error")}}},u.open("POST",e+s,!0),u.withCredentials=!0,"function"!=typeof r.append&&u.setRequestHeader("Content-Type","text/plain"),u.send(r);else{var c=new XDomainRequest;c.onload=function(){i(c.responseText)},c.onerror=function(){o&&o("Not Found"==c.responseText?404:500,c.responseText)},c.onprogress=function(){},c.open("POST",s),c.send(r)}}function ao(e,t,n){if("function"==typeof navigator.sendBeacon){var r=e+"//"+t+oo(n.bundle.Seq,n)+"&SkipResponseBody=true",i=bt(n.bundle);try{return navigator.sendBeacon(r,i)}catch(e){ee.sendToBugsnag(e,"error",{url:r,data:i})}}return!1}var uo=function(){function e(e,t,n){void 0===n&&(n=new co),this._ctx=e,this._q=t,this._matcher=n}return e.prototype.initialize=function(e){var t;if(e){this._setUrlKeeps(e);var n=null===(t=this._ctx.window.location)||void 0===t?void 0:t.href;this.onNavigate(n)}},e.prototype.onNavigate=function(e){return!!this._matcher.matches(e)&&(this._q.enqueue({Kind:g.KEEP_URL,Args:[this._scrubUrl(e)]}),!0)},e.prototype.onClick=function(e){return!(!e||!function(e){var t=an(e);return!!t&&!0===t.isKeep}(e.node))&&(this._q.enqueue({Kind:g.KEEP_ELEMENT,Args:[e.id]}),!0)},e.prototype.urlMatches=function(e){return this._matcher.matches(e)},e.prototype._setUrlKeeps=function(e){this._matcher.setRules(e)},e.prototype._scrubUrl=function(e){return Dn(e,this._ctx.options.orgId,{source:"page",type:"base"})},e}(),co=function(){function e(){this._regexes=null}return e.prototype.setRules=function(e){var t=e.map(function(e){return e.Regex}).filter(this._isValidRegex);t.length>0&&(this._regexes=this._joinRegexes(t))},e.prototype.matches=function(e){return!!this._regexes&&this._regexes.test(e)},e.prototype._isValidRegex=function(e){try{return new RegExp(e),!0}catch(t){return ee.sendToBugsnag("Browser rejected UrlKeep.Regex","error",{expr:e,error:t.toString()}),!1}},e.prototype._joinRegexes=function(e){try{return new RegExp("("+e.join(")|(")+")","i")}catch(t){return ee.sendToBugsnag("Browser rejected joining UrlKeep.Regexs","error",{exprs:e,error:t.toString()}),null}},e}();function ho(e,t){var n=un(e)+" ";return e.id&&(n+="#"+e.id),n+="[src="+Dn(e.src,t,{source:"log",type:"debug"})+"]"}var lo,po=function(e){var t=e.transport,n=e.frame,r=e.orgId,s=e.scheme,a=e.script,u=e.recHost,c=e.appHost,h=ho(n,r);o("Injecting into Frame "+h);try{if(function(e){return e.id==e.name&&fo.test(e.id)}(n))return void o("Blacklisted iframe: "+h);if(function(e){if(!e.contentDocument||!e.contentWindow||!e.contentWindow.location)return!0;return function(e){return!!e.src&&"about:blank"!=e.src&&e.src.indexOf("javascript:")<0}(e)&&e.src!=e.contentWindow.location.href&&"loading"==e.contentDocument.readyState}(n))return void o("Frame not yet loaded: "+h);var d=n.contentWindow,l=n.contentDocument;if(!d||!l)return void o("Missing contentWindow or contentDocument: "+h);if(!l.head)return void o("Missing contentDocument.head: "+h);if(L(d))return void o("FS already defined in Frame contentWindow: "+h+". Ignoring.");d._fs_org=r,d._fs_script=a,d._fs_rec_host=u,d._fs_app_host=c,d._fs_debug=i(),d._fs_run_in_iframe=!0,t&&(d._fs_transport=t);var p=l.createElement("script");p.async=!0,p.crossOrigin="anonymous",p.src=s+"//"+a,"testdrive"==r&&(p.src+="?allowMoo=true"),l.head.appendChild(p)}catch(e){o("iFrame no injecty. Probably not same origin.")}},fo=/^fb\d{18}$/;!function(e){e[e.NoInfoYet=1]="NoInfoYet",e[e.Enabled=2]="Enabled",e[e.Disabled=3]="Disabled"}(lo||(lo={}));var _o=function(){function e(e,t,n,r){var i=this;this._ctx=e,this._transport=n,this._injector=r,this._bundleUploadInterval=x.DefaultBundleUploadInterval,this._iFrames=[],this._pendingChildFrameIdInits=[],this._listeners=new Lt,this._getCurrentSessionEnabled=lo.NoInfoYet,this._resourceUploadingEnabled=!1,this._tickerTasks=[],this._watcher=new tn,this._queue=new Ni(e,this._transport,function(e){for(var t=i._eventWatcher.bundleEvents(e),n=void 0;n=i._tickerTasks.pop();)n();return t},t),this._keep=new uo(e,this._queue),this._eventWatcher=new wi(e,this._queue,this._keep,this._watcher,this._listeners,function(e){i.onFrameCreated(e)},function(e){i.beforeFrameRemoved(e)},new to(e,this._queue,new io(e))),this._consoleWatcher=new Ai(e,this._queue,this._listeners),this._scheme=e.options.scheme,this._script=e.options.script,this._recHost=e.options.recHost,this._appHost=e.options.appHost,this._orgId=e.options.orgId,this._wnd=e.window}return e.prototype.bundleUploadInterval=function(){return this._bundleUploadInterval},e.prototype.start=function(e,t){var n=this;this._onFullyStarted=t,"onpagehide"in this._wnd?this._listeners.add(this._wnd,"pagehide",!1,function(e){n.onUnload()}):this._listeners.add(this._wnd,"unload",!1,function(e){n.onUnload()}),this._listeners.add(this._wnd,"message",!1,function(e){if("string"==typeof e.data){var t=e.source;n.postMessageReceived(t,go(e.data))}});var r=this._wnd.Document?this._wnd.Document.prototype:this._wnd.document;this._docCloseHook=xt(r,"close"),this._docCloseHook&&this._docCloseHook.afterAsync(function(){n._listeners.refresh()})},e.prototype.queue=function(){return this._queue},e.prototype.eventWatcher=function(){return this._eventWatcher},e.prototype.console=function(){return this._consoleWatcher},e.prototype.onDomLoad=function(){this._eventWatcher.onDomLoad()},e.prototype.onLoad=function(){this._eventWatcher.onLoad()},e.prototype.shutdown=function(e){this._eventWatcher.shutdown(e),this._consoleWatcher.disable(),this._listeners&&this._listeners.clear(),this._docCloseHook&&this._docCloseHook.disable(),this.tellAllFramesTo(["ShutdownFrame"])},e.prototype.tellAllFramesTo=function(e){for(var t=0;t<this._iFrames.length;t++){var n=this._iFrames[t];n.contentWindow&&vo(n.contentWindow,e)}},e.prototype.getCurrentSessionURL=function(e){var t=this._getCurrentSessionEnabled;if(t==lo.NoInfoYet)return null;if(t==lo.Disabled)return this._scheme+"//"+this._appHost+"/opt/upgrade";var n=this.getCurrentSession();return n?(e&&(n+=":"+this._ctx.time.wallTime()),this._scheme+"//"+this._appHost+"/ui/"+this._ctx.options.orgId+"/session/"+encodeURIComponent(n)):null},e.prototype.getCurrentSession=function(){var e=this._getCurrentSessionEnabled;return e==lo.NoInfoYet||e==lo.Disabled?null:this._userId?this._userId+":"+this._sessionId:null},e.prototype.setConsent=function(e){this._watcher.setConsent(e),this.tellAllFramesTo(["SetConsent",e])},e.prototype.pageSignature=function(){return this._userId+":"+this._sessionId+":"+this._pageId},e.prototype.fireFsReady=function(e){void 0===e&&(e=!1);var t=this._wnd._fs_ready;if(t)try{e?t(!0):t()}catch(e){o("exception in _fs_ready(): "+e)}},e.prototype.onUnload=function(){this._queue.addUnload(y.Unload),Yt.stopAll()},e.prototype.handleResponse=function(e){this._pageRsp=e,this._userId=e.UserIntId,this._sessionId=e.SessionIntId,this._pageId=e.PageIntId,this._serverPageStart=e.PageStart,this._getCurrentSessionEnabled=e.GetCurrentSessionEnabled?lo.Enabled:lo.Disabled,"number"==typeof e.BundleUploadInterval&&(this._bundleUploadInterval=e.BundleUploadInterval),e.ResourceUploadingEnabled&&this.enableResourceUploading(),e.AjaxWatcherEnabled&&this.enableAjaxWatcher(!!e.AjaxFetchEnabled),e.ConsoleWatcherEnabled&&this.enableConsoleWatcher(),e.AjaxWatcherEnabled&&e.AjaxWatches&&this._eventWatcher.ajaxWatcher().setWatches(e.AjaxWatches),this.addAllWatchRules(e.WhitelistElementsEnabled,{blocks:e.ElementBlocks,keeps:e.ElementKeeps,watches:e.ElementWatches}),this._keep.initialize(e.UrlKeeps),this._watcher.initializeConsent(!!e.Consented)},e.prototype.addAllWatchRules=function(e,t){for(var n=t.blocks,r=t.keeps,i=t.watches,o=0,s=re;o<s.length;o++){var a=s[o];this._watcher.addElementBlock(a)}if(e&&this._watcher.addElementBlock({Type:I.Mask,Consent:!1,Selector:"body"}),n)for(var u=0;u<n.length;++u)this._watcher.addElementBlock(n[u]);if(r)for(u=0;u<r.length;++u)this._watcher.addElementKeep(r[u]);if(i)for(u=0;u<i.length;++u)this._watcher.addRule(Jt.Watch,!1,i[u].Selector)},e.prototype.fullyStarted=function(){this._onFullyStarted()},e.prototype.enableResourceUploading=function(){this._resourceUploadingEnabled=!0,this._eventWatcher.initResourceUploading()},e.prototype.enableAjaxWatcher=function(e){this.eventWatcher().ajaxWatcher().enable(e)},e.prototype.enableConsoleWatcher=function(){this.console().enable()},e.prototype.flushPendingChildFrameInits=function(){if(this._pendingChildFrameIdInits.length>0){for(var e=0;e<this._pendingChildFrameIdInits.length;e++)this._pendingChildFrameIdInits[e]();this._pendingChildFrameIdInits=[]}},e.prototype.inject=function(e){var t=this,n={send:function(n,r,i){ze.resolve().then(ee.wrap(function(){t.postMessageReceived(e.contentWindow,[n,Ye.jsonParse(r),i])}))}};this._injector({frame:e,transport:n,orgId:this._orgId,scheme:this._scheme,script:this._script,recHost:this._recHost,appHost:this._appHost})},e.prototype.onFrameCreated=function(e){var t=this;if(un(e)){this._iFrames.push(e);var n=function(e){var t=e.src,n=location.protocol+"//"+location.host;return!t||"about:blank"==t||lt(t,"javascript:")||lt(t,n)}(e),r=!1;if(e.contentWindow)try{r=!!L(e.contentWindow)}catch(e){r=!0}(!n||r)&&e.contentWindow&&e.contentWindow.postMessage?(o("Cross-origin iframe "+ho(e,this._orgId)),vo(e.contentWindow,["GreetFrame"])):n?(o("Attempting to setup Frame "+ho(e,this._orgId)),this.inject(e),e.addEventListener("load",ee.wrap(function(n){try{t._tickerTasks.push(function(){o("onload for frame "+ho(e,t._orgId)),t.inject(e)})}catch(n){ee.sendToBugsnag(n,"error")}}))):o("Frame Doesn't need injecting. Probably cross domain "+ho(e,this._orgId))}else o("fsid missing or invalid for iFrame "+ho(e,this._orgId))},e.prototype.beforeFrameRemoved=function(e){for(var t=0;t<this._iFrames.length;t++){if(e==this._iFrames[t])return void this._iFrames.splice(t,1)}},e.prototype.postMessageReceived=function(e,t){if(!e||e.parent==this._wnd)switch(t[0]){case"EvtBundle":var n=t[1],r=this.pageSignature(),i=t[2];if(r!=i)return ee.sendToBugsnag("Page signature mismatch","warning",{pageSignature:r,messageSignature:i}),void(e&&vo(e,["ShutdownFrame"]));n.length>0&&this._transport.enqueueEvents(r,n);break;case"RequestFrameId":if(!e)return void o("No MessageEvent.source, iframe may have unloaded.");var s=this.iFrameWndToFsId(e);s?(o("Responding to FID request for frame "+s),this.sendFrameIdToInnerFrame(e,s)):o("No FrameId found. Hoping to send one later.");}},e.prototype.sendFrameIdToInnerFrame=function(e,t){var n=this,r=function(){var r=[];0!=n._frameId&&(r=n._parentIds?n._parentIds.concat(n._frameId):[n._frameId]);var i=n._ctx.time.startTime();vo(e,["SetFrameId",t,r,i,n._scheme,n._script,n._appHost,n._orgId,n._pageRsp])};null==this._frameId?this._pendingChildFrameIdInits.push(r):r()},e.prototype.iFrameWndToFsId=function(e){for(var t=0;t<this._iFrames.length;t++)if(this._iFrames[t].contentWindow==e)return un(this._iFrames[t]);return o("Unable to locate frame for window"),NaN},e}();function vo(e,t){e&&e.postMessage&&e.postMessage(bt({__fs:t}),"*")}function go(e){try{var t=Tt(e);if("__fs"in t)return t.__fs}catch(e){}return[]}function yo(e){return e>=400||202==e||206==e}var mo=function(){return(mo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},wo=function(){function e(e,t,n,r){void 0===r&&(r=Gt),this._ctx=e,this._protocol=t,this._identity=n,this._timeoutFactory=r,this._recover()}return e.prototype.sing=function(e){o("Saving "+e.bundles.length+" bundles in swan-song.");var t=bt({OrgId:this._identity.orgId(),UserId:this._identity.userId(),SessionId:this._identity.sessionId(),PageId:e.pageId,Bundles:e.bundles,PageStartTime:this._ctx.time.startTime(),LastBundleTime:e.lastBundleTime,ServerPageStart:e.serverPageStart,ServerBundleTime:e.serverBundleTime,IsNewSession:e.isNewSession});if(!(t.length>2e6))try{localStorage._fs_swan_song=t}catch(e){}},e.prototype._recover=function(){try{if("_fs_swan_song"in localStorage){var e=localStorage._fs_swan_song||localStorage.singSwanSong;delete localStorage._fs_swan_song,delete localStorage.singSwanSong;var t=Tt(e);if(!(t.Bundles&&t.UserId&&t.SessionId&&t.PageId))return void o("Malformed swan song found. Ignoring it.");t.OrgId||(t.OrgId=this._identity.orgId()),t.Bundles.length>0&&(o("Sending "+t.Bundles.length+" bundles as prior page swan song"),this.sendSwanSongBundles(t))}}catch(e){o("Error recovering swan-song: "+e)}},e.prototype.sendSwanSongBundles=function(e,t){var n=this;void 0===t&&(t=0);var r=null;if(ot(e.Bundles)&&0!==e.Bundles.length&&void 0!==e.Bundles[0]){1==e.Bundles.length&&(r=this._ctx.time.wallTime()-(e.LastBundleTime||0));this._protocol.bundle({bundle:e.Bundles[0],deltaT:r,orgId:e.OrgId,pageId:e.PageId,serverBundleTime:e.ServerBundleTime,serverPageStart:e.ServerPageStart,sessionId:e.SessionId,userId:e.UserId,isNewSession:e.IsNewSession,win:function(t){o("Sent "+e.Bundles[0].Evts.length+" trailing events from last session as Seq "+e.Bundles[0].Seq),e.Bundles.shift(),e.Bundles.length>0?n.sendSwanSongBundles(mo(mo({},e),{ServerBundleTime:t.BundleTime})):o("Done with prior page swan song")},lose:function(r){yo(r)?o("Fatal error while sending events, giving up"):(o("Failed to send events from last session, will retry while on this page"),n._lastSwanSongRetryTimeout=new n._timeoutFactory(n.sendSwanSongBundles,n._protocol.exponentialBackoffMs(t,!0),n,e,t+1).start())}})}},e}(),bo=function(){function e(e,t,n,r){var i=this;void 0===t&&(t=new ro(e)),void 0===n&&(n=Qt),void 0===r&&(r=Gt),this._ctx=e,this._protocol=t,this._tickerFactory=n,this._backoffRetries=0,this._backoffTime=0,this._bundleSeq=1,this._lastPostTime=0,this._serverBundleTime=0,this._isNewSession=!1,this._largePageSize=16e6,this._outgoingEventQueue=[],this._bundleQueue=[],this._hibernating=!1,this._heartbeatInterval=0,this._lastUserActivity=this._ctx.time.wallTime(),this._finished=!1,this._scheme=e.options.scheme,this._identity=e.recording.identity,this._lastBundleTime=e.time.wallTime(),this._swanSong=new wo(e,this._protocol,this._identity,r),this._heartbeatTimeout=new r(function(){var e=Math.floor(i._ctx.time.wallTime()-i._lastUserActivity);i._outgoingEventQueue.push({When:i._ctx.time.now(),Kind:g.HEARTBEAT,Args:[e]}),i._heartbeatInterval*=2,i._heartbeatInterval>x.HeartbeatMax&&(i._heartbeatInterval=x.HeartbeatMax),i._heartbeatTimeout.start(i._heartbeatInterval)}),this._hibernationTimeout=new r(function(){Math.floor(i._ctx.time.wallTime()-i._lastUserActivity)<=2*x.PageInactivityTimeout&&(i._outgoingEventQueue.push({When:i._ctx.time.now(),Kind:g.UNLOAD,Args:[y.Hibernation]}),i.singSwanSong()),i.stopPipeline(),i._hibernating=!0},x.PageInactivityTimeout)}return e.prototype.onShutdown=function(e){this._onShutdown=e},e.prototype.scheme=function(){return this._scheme},e.prototype.enqueueEvents=function(e,t){if(this._hibernating){if(this._finished)return;for(var n=0,r=t;n<r.length;n++){if(V((u=r[n]).Kind)){this._ctx.recording.splitPage(y.Hibernation),this._finished=!0;break}}}else{for(var i=0,o=t;i<o.length;i++){if(V((u=o[i]).Kind)){this._hibernationTimeout.start(),this._heartbeatInterval=x.HeartbeatInitial,this._heartbeatTimeout.start(this._heartbeatInterval),this._lastUserActivity=this._ctx.time.wallTime();break}}for(var s=0,a=t;s<a.length;s++){var u=a[s];this._outgoingEventQueue.push(u)}}},e.prototype.initUploadTicker=function(){this._uploadTicker=new this._tickerFactory(this._ctx.recording.bundleUploadInterval())},e.prototype.startPipeline=function(e){var t=this;this._pageId=e.pageId,this._serverPageStart=e.serverPageStart,this._isNewSession=e.isNewSession,this.enqueueAndSendBundle(),this._uploadTicker||this.initUploadTicker(),this._uploadTicker.start(function(){t.enqueueAndSendBundle()}),this._heartbeatInterval=x.HeartbeatInitial,this._heartbeatTimeout.start(this._heartbeatInterval),this._hibernationTimeout.start()},e.prototype.stopPipeline=function(){this._uploadTicker&&this._uploadTicker.stop(),this._outgoingEventQueue=[],this._bundleQueue=[],this._hibernationTimeout.stop(),this._heartbeatTimeout.stop()},e.prototype.flush=function(){this.maybeSendNextBundle()},e.prototype.singSwanSong=function(){if(!this._hibernating&&(this._outgoingEventQueue.length>0&&this.enqueueNextBundle(!0),this._bundleQueue.length>0||this._pendingBundle)){var e=this._bundleQueue.concat();this._pendingBundle&&e.unshift(this._pendingBundle),this._swanSong.sing({pageId:this._pageId,bundles:e,lastBundleTime:this._lastBundleTime,serverPageStart:this._serverPageStart,serverBundleTime:this._serverBundleTime,isNewSession:this._isNewSession})}},e.prototype.enqueueAndSendBundle=function(){this._pendingBundle?this._pendingBundleFailed&&this._sendPendingBundle():0!=this._outgoingEventQueue.length?this.enqueueNextBundle():this.maybeSendNextBundle()},e.prototype.enqueueNextBundle=function(e){void 0===e&&(e=!1);var t={When:this._outgoingEventQueue[0].When,Seq:this._bundleSeq++,Evts:this._outgoingEventQueue};this._outgoingEventQueue=[],this._bundleQueue.push(t),e?this._protocol.bundleBeacon({bundle:t,deltaT:null,orgId:this._identity.orgId(),pageId:this._pageId,serverBundleTime:this._serverBundleTime,serverPageStart:this._serverPageStart,isNewSession:this._isNewSession,sessionId:this._identity.sessionId(),userId:this._identity.userId(),win:function(){},lose:function(){}}):this.maybeSendNextBundle()},e.prototype.maybeSendNextBundle=function(){this._pageId&&this._serverPageStart&&!this._pendingBundle&&0!=this._bundleQueue.length&&(this._pendingBundle=this._bundleQueue.shift(),this._sendPendingBundle())},e.prototype._sendPendingBundle=function(){var e=this,t=this._ctx.time.wallTime();if(!(t<this._backoffTime)){var n=this._pendingBundle;n&&(this._pendingBundleFailed=!1,this._lastPostTime=this._lastBundleTime=t,this.sendBundle(n,function(t){o("Sent bundle "+n.Seq+" with "+n.Evts.length+" events"),e._serverBundleTime=t.BundleTime,e._pendingBundle=null,e._backoffTime=0,e._backoffRetries=0,e._ctx.time.wallTime()-e._lastPostTime>e._ctx.recording.bundleUploadInterval()&&e.maybeSendNextBundle()},function(t){if(o("Failed to send events."),yo(t))return 206==t&&ee.sendToBugsnag("Failed to send bundle, probably because of its large size","error"),void(e._onShutdown&&e._onShutdown());e._pendingBundleFailed=!0,e._backoffTime=e._lastPostTime+e._protocol.exponentialBackoffMs(e._backoffRetries++,!1)}))}},e.prototype.sendBundle=function(e,t,n){var r=Math.floor(this._ctx.time.wallTime()-this._lastUserActivity),i=this._protocol.bundle({bundle:e,deltaT:null,lastUserActivity:r,orgId:this._identity.orgId(),pageId:this._pageId,serverBundleTime:this._serverBundleTime,serverPageStart:this._serverPageStart,isNewSession:this._isNewSession,sessionId:this._identity.sessionId(),userId:this._identity.userId(),win:t,lose:n});i>this._largePageSize&&this._bundleSeq>16&&(o("splitting large page: "+i),this._ctx.recording.splitPage(y.Size))},e}(),So=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Eo=function(e){function t(t,n,r,i,o){void 0===r&&(r=new bo(t,n)),void 0===i&&(i=Qt),void 0===o&&(o=po);var s,a,u=e.call(this,t,i,r,o)||this;return u._protocol=n,u._domLoaded=!1,u._recordingDisabled=!1,u._integrationScriptFetched=!1,r.onShutdown(function(){return u.shutdown(y.SettingsBlocked)}),u._doc=u._wnd.document,u._frameId=0,u._identity=t.recording.identity,u._getCurrentSessionEnabled=lo.NoInfoYet,s=u._wnd,a=function(e){if(u._eventWatcher.shutdown(y.Api),e){var t=u._doc.getElementById(e);t&&t.setAttribute("_fs_embed_token",u._embedToken)}},s._fs_shutdown=a,u}return So(t,e),t.prototype.onDomLoad=function(){var t=this;e.prototype.onDomLoad.call(this),this._domLoaded=!0,this.injectIntegrationScript(function(){t.fireFsReady(t._recordingDisabled)})},t.prototype.start=function(t,n){var r=this;e.prototype.start.call(this,t,n);var i=W(this._wnd),o=Wt(this._doc),s=o[0],a=o[1],u=kt(this._wnd),c=u[0],h=u[1],d="";t||(d=this._identity.userId());var l=Dn(On(this._wnd),this._orgId,{source:"page",type:"base"}),p=Dn(this._doc.referrer,this._orgId,{source:"page",type:"referrer"}),f=Dn(this._wnd.location.href,this._orgId,{source:"page",type:"url"}),_={OrgId:this._orgId,UserId:d,Url:f,Base:l,Width:s,Height:a,ScreenWidth:c,ScreenHeight:h,Referrer:p,Doctype:Et(this._doc),CompiledTimestamp:1582214498,AppId:this._identity.appId()};i&&(_.ReplayFlags=i),this._protocol.page(_,function(e){r.handleResponse(e),r.handleIdentity(e.CookieDomain,e.UserIntId,e.SessionIntId,e.PageIntId,e.EmbedToken),r.handleIntegrationScript(e.IntegrationScript);var t=!!e.Consented;r._queue.enqueueFirst({Kind:g.SYS_REPORTCONSENT,Args:[t]}),r._queue.enqueueFirst({Kind:g.SET_FRAME_BASE,Args:[Dn(On(r._wnd),r._orgId,{source:"event",type:g.SET_FRAME_BASE}),Et(r._doc)]}),r._queue.startPipeline({pageId:e.PageIntId,serverPageStart:e.PageStart,isNewSession:!!e.IsNewSession}),r.fullyStarted()},function(e,t){t&&t.user_id&&t.cookie_domain&&t.reason_code==k.ReasonBlockedTrafficRamping&&d!=t.user_id&&r.handleIdentity(t.cookie_domain,t.user_id,"","",""),r.disableBecauseRecPageSaidSo()})},t.prototype.handleIntegrationScript=function(e){var t=this;this._integrationScriptFetched=!0,this._integrationScript=e,this.injectIntegrationScript(function(){t.fireFsReady(t._recordingDisabled)})},t.prototype.handleIdentity=function(e,t,n,r,i){var s=this._identity;s.setIds(this._wnd,e,t,n),this._embedToken=i,o("/User,"+s.userId()+"/Session,"+s.sessionId()+"/Page,"+r)},t.prototype.injectIntegrationScript=function(e){if(this._domLoaded&&this._integrationScriptFetched)if(this._integrationScript){var t=this._doc.createElement("script");this._wnd._fs_csp?(t.addEventListener("load",e),t.addEventListener("error",e),t.async=!0,t.src=this._scheme+"//"+this._recHost+"/rec/integrations?OrgId="+this._orgId,this._doc.head.appendChild(t)):(t.text=this._integrationScript,this._doc.head.appendChild(t),e())}else e()},t.prototype.disableBecauseRecPageSaidSo=function(){this.shutdown(y.SettingsBlocked),o("Disabling FS."),this._recordingDisabled=!0,this.fireFsReady(this._recordingDisabled)},t}(_o),To=function(){function e(e,t){void 0===t&&(t=new ko(e)),this._wnd=e,this._messagePoster=t}return e.prototype.enqueueEvents=function(e,t){this._messagePoster.postMessage(this._wnd.parent,"EvtBundle",t,e)},e.prototype.startPipeline=function(){},e.prototype.stopPipeline=function(){},e.prototype.flush=function(){},e.prototype.singSwanSong=function(){},e.prototype.onShutdown=function(e){},e}(),ko=function(){function e(e){this.wnd=e}return e.prototype.postMessage=function(e,t,n,r){var i=B(this.wnd);if(i)try{i.send(t,bt(n),r)}catch(e){i.send(t,bt(n))}else e.postMessage(function(e,t,n){var r=[e,t];n&&r.push(n);return bt({__fs:r})}(t,n,r),"*")},e}();var Io,Co=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xo=function(e){function t(t,n,r,i,o){void 0===n&&(n=new ko(t.window)),void 0===r&&(r=new To(t.window)),void 0===i&&(i=Qt),void 0===o&&(o=po);var s=e.call(this,t,i,r,o)||this;return s._messagePoster=n,s}return Co(t,e),t.prototype.start=function(t,n){var r=this;e.prototype.start.call(this,t,n),this.sendRequestForFrameId(),this._listeners.add(this._wnd,"load",!1,function(){r._eventWatcher.recordingIsDetached()&&(o("Recording wrong document. Restarting recording in iframe."),r._ctx.recording.splitPage(y.FsShutdownFrame))})},t.prototype.postMessageReceived=function(t,n){if(e.prototype.postMessageReceived.call(this,t,n),t==this._wnd.parent||t==this._wnd)switch(n[0]){case"GreetFrame":this.sendRequestForFrameId();break;case"SetFrameId":try{var r=n[1],i=n[2],s=n[3],a=n[4],u=n[5],c=n[6],h=n[7],d=n[8];this.setFrameIdFromOutside(r,i,s,a,u,c,h,d)}catch(e){o("Failed to parse frameId from message: "+bt(n))}break;case"SetConsent":var l=n[1];this.setConsent(l);break;case"InitFrameMobile":try{var p=JSON.parse(n[1]),f=p.StartTime;if(n.length>2){var _=n[2];if(_.hasOwnProperty("ProtocolVersion"))_.ProtocolVersion>=20180723&&_.hasOwnProperty("OuterStartTime")&&(f=_.OuterStartTime)}var v=p.Host;this.setFrameIdFromOutside(-1,[],f,"https:",K(v),j(v),p.OrgId,p.PageResponse)}catch(e){o("Failed to initialize mobile web recording from message: "+bt(n))}}},t.prototype.sendRequestForFrameId=function(){this._frameId||(0!=this._frameId?this._wnd.parent?(o("Asking for a frame ID."),this._messagePoster.postMessage(this._wnd.parent,"RequestFrameId",[])):o("Orphaned window."):o("For some reason the outer window attempted to request a frameId"))},t.prototype.setFrameIdFromOutside=function(e,t,n,r,i,s,a,u){e?this._frameId?this._frameId!=e?(o("Updating frame id from "+this._frameId+" to "+e),this._ctx.recording.splitPage(y.FsShutdownFrame)):o("frame Id is already set to "+this._frameId):(o("FrameId received within frame "+Dn(location.href,a,{source:"log",type:"debug"})+": "+e),this._scheme=r,this._script=i,this._appHost=s,this._orgId=a,this._frameId=e,this._parentIds=t,this.handleResponse(u),this.fireFsReady(),this._queue.enqueueFirst({Kind:g.SET_FRAME_BASE,Args:[Dn(On(this._wnd),a,{source:"event",type:g.SET_FRAME_BASE}),Et(this._wnd.document)]}),this._queue.rebaseIframe(n),this._ctx.time.setStartTime(n),this._queue.startPipeline({pageId:this._pageId,serverPageStart:u.PageStart,isNewSession:!!u.IsNewSession,frameId:e,parentIds:t}),this.flushPendingChildFrameInits(),this.fullyStarted()):o("Outer page gave us a bogus frame Id! Iframe: "+Dn(location.href,a,{source:"log",type:"debug"}))},t}(_o),Ro="fsidentity",Oo="newuid",Ao=function(){function e(e){void 0===e&&(e=document),this._doc=e,this._cookies={},this._appId=void 0}return e.prototype.initFromCookies=function(e,t){this._cookies=l(this._doc);var n=this._cookies.fs_uid;if(!n)try{n=localStorage._fs_uid}catch(e){}var r=d(n);r&&r.host.replace(/^www\./,"")==e.replace(/^www\./,"")&&r.orgId==t?this._cookie=r:this._cookie={expirationAbsTimeSeconds:h(),host:e,orgId:t,userId:"",sessionId:"",appKeyHash:""}},e.prototype.initFromParsedCookie=function(e){this._cookie=e},e.prototype.clear=function(){this._cookie.userId=this._cookie.sessionId=this._cookie.appKeyHash=this._appId="",this._cookie.expirationAbsTimeSeconds=h(),this._write()},e.prototype.host=function(){return this._cookie.host},e.prototype.orgId=function(){return this._cookie.orgId},e.prototype.userId=function(){return this._cookie.userId},e.prototype.sessionId=function(){return this._cookie.sessionId},e.prototype.appKeyHash=function(){return this._cookie.appKeyHash},e.prototype.cookieData=function(){return this._cookie},e.prototype.cookies=function(){return this._cookies},e.prototype.setCookie=function(e,t,n){void 0===n&&(n=new Date(s()+6048e5).toUTCString());var r=e+"="+t;this._domain?r+="; domain=."+encodeURIComponent(this._domain):r+="; domain=",r+="; Expires="+n+"; path=/; SameSite=Strict","https:"===location.protocol&&(r+="; Secure"),this._doc.cookie=r},e.prototype.setIds=function(e,t,n,r){(P(t)||t.match(/^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$/g))&&(t="");var i=function(e){return e._fs_cookie_domain}(e);"string"==typeof i&&(t=i),this._domain=t,this._cookie.userId=n,this._cookie.sessionId=r,this._write()},e.prototype.clearAppId=function(){return!!this._cookie.appKeyHash&&(this._appId="",this._cookie.appKeyHash="",this._write(),!0)},e.prototype.setAppId=function(e){this._appId=e,this._cookie.appKeyHash=ji(e),this._write()},e.prototype.appId=function(){return this._appId},e.prototype.encode=function(){var e=this._cookie.host+"#"+this._cookie.orgId+"#"+this._cookie.userId+":"+this._cookie.sessionId;return this._cookie.appKeyHash&&(e+="#"+encodeURIComponent(this._cookie.appKeyHash)+"#"),e+="/"+this._cookie.expirationAbsTimeSeconds},e.prototype._write=function(){if(null!=this._domain){var e=this.encode(),t=new Date(1e3*this._cookie.expirationAbsTimeSeconds).toUTCString();this.setCookie("fs_uid",e,t);try{localStorage._fs_uid=e}catch(e){}}},e}();!function(e){e.rec="rec",e.user="user",e.account="account",e.consent="consent",e.customEvent="event",e.log="log"}(Io||(Io={}));var Lo={acctId:"str",displayName:"str",website:"str"},Fo={uid:"str",displayName:"str",email:"str"},Po={str:Mo,bool:Uo,real:qo,"int":No,date:Wo,strs:Bo(Mo),bools:Bo(Uo),reals:Bo(qo),ints:Bo(No),dates:Bo(Wo),objs:Bo(Do),obj:Do};function Mo(e){return"string"==typeof e}function Uo(e){return"boolean"==typeof e}function qo(e){return"number"==typeof e}function No(e){return"number"==typeof e&&e-Math.floor(e)==0}function Wo(e){return!!e&&(e.constructor===Date?!isNaN(e):("number"==typeof e||"string"==typeof e)&&!isNaN(new Date(e)))}function Bo(e){return function(t){if(!(t instanceof Array))return!1;for(var n=0;n<t.length;n++)if(!e(t[n]))return!1;return!0}}function Do(e){return!!e&&"object"==typeof e}var Ho=/^[a-zA-Z][a-zA-Z0-9_]*$/,jo=function(){function e(e){this._identity=e}return e.prototype.identity=function(){return this._identity},e.prototype.api=function(e,t,n){var r=!1,i=[];try{switch(e){case Io.account:i.push.apply(i,this.rawEventsFromApi(E.Account,Lo,t,n));break;case Io.user:if("object"!=typeof t)o("Expected argument of type 'object' instead got type: '"+typeof t+"', value: "+bt(t));else if("uid"in t){var s=t.uid;if(!1===s)this._identity.clearAppId()&&(r=!0),delete t.uid;else{var u=function(e,t){"number"==typeof e&&Math.floor(e)==e&&(o("Expected appId of type 'string' instead got value: "+e+" of type: "+typeof e),e=""+e);if("string"!=typeof e)return o("blocking FS.identify API call; uid value ("+e+") must be a string"),[void 0,Ro];var n=e.trim();if(a.indexOf(n.toLowerCase())>=0)return o("blocking FS.identify API call; uid value ("+n+") is illegal"),[void 0,Ro];var r=ji(n),i=void 0;t&&t._cookie.appKeyHash&&t._cookie.appKeyHash!==r&&t._cookie.appKeyHash!==n&&(o("user re-identified; existing uid hash ("+t._cookie.appKeyHash+") does not match provided uid ("+n+")"),i=Oo);return[n,i]}(s,this._identity),c=u[0],h=u[1];if(!c){switch(h){case Ro:case void 0:break;default:o("unexpected failReason returned from setAppId: "+h);}return{events:i}}t.uid=c,this._identity.setAppId(t.uid),h==Oo&&(r=!0)}}i.push.apply(i,this.rawEventsFromApi(E.User,Fo,t,n));break;case Io.customEvent:var d=t.n,l=t.p;i.push.apply(i,this.rawEventsFromApi(E.Event,{},l,n,d));break;default:o("invalid operation \""+e+"\"; only \"rec\", \"account\", and \"user\" are supported at present");}}catch(t){o("unexpected exception handling "+e+" API call: "+t.message)}return{events:i,reidentify:r}},e.prototype.rawEventsFromApi=function(e,t,n,r,i){var s=function e(t,n,r){var i={PayloadToSend:{},ValidationErrors:[]},s=function(r){var o=e(t,n,r);return i.ValidationErrors=i.ValidationErrors.concat(o.ValidationErrors),o.PayloadToSend};return pt(r,function(e,r){var a=function(e,t,n,r){var i=t,s=typeof n;if("undefined"===s)return o("Cannot infer type of "+s+" "+n),r.push({Type:"vartype",FieldName:t,ValueType:s+" (unsupported)"}),null;if(Ye.objectHasOwnProp(e,t))return{name:t,type:e[t]};var a=t.lastIndexOf("_");if(-1==a||!Vo(t.substring(a+1))){var u=function(e){for(var t in Po)if(Po[t](e))return t;return null}(n);if(null==u)return o("Cannot infer type of "+s+" "+n),n?r.push({Type:"vartype",FieldName:t}):r.push({Type:"vartype",FieldName:t,ValueType:"null (unsupported)"}),null;a=t.length,o("Warning: Inferring user variable \""+t+"\" to be of type \""+u+"\""),t=t+"_"+u}var c=[t.substring(0,a),t.substring(a+1)],h=c[0],d=c[1];if("object"===s&&!n)return o("null is not a valid object type"),r.push({Type:"vartype",FieldName:i,ValueType:"null (unsupported)"}),null;if(!Ho.test(h)){h=h.replace(/[^a-zA-Z0-9_]/g,"").replace(/^[0-9]+/,""),/[0-9]/.test(h[0])&&(h=h.substring(1)),r.push({Type:"varname",FieldName:i});var l=h+"_"+d;if(o("Warning: variable \""+i+"\" has invalid characters. It should match /"+Ho.source+"/. Converted name to \""+l+"\"."),""==h)return null;t=l}if(!Vo(d))return o("Variable \""+i+"\" has invalid type \""+d+"\""),r.push({Type:"varname",FieldName:i}),null;if(!function(e,t){return Po[e](t)}(d,n))return o("illegal value "+bt(n)+" for type "+d),"number"===s?s=n%1==0?"integer":"real":"object"==s&&null!=n&&n.constructor==Date&&(s=isNaN(n)?"invalid date":"date"),r.push({Type:"vartype",FieldName:i,ValueType:s}),null;return{name:t,type:d}}(n,r,e,i.ValidationErrors);if(a){var u=a.name,c=a.type;if("obj"!=c){if("objs"!=c){var h,d;i.PayloadToSend[u]=Ko(c,e)}else{t!=E.Event&&i.ValidationErrors.push({Type:"vartype",FieldName:u,ValueType:"Array<Object> (unsupported)"});for(var l=e,p=[],f=0;f<l.length;f++){(_=s(l[f]))&&p.push(_)}p.length>0&&(i.PayloadToSend[u]=p)}}else{var _=s(e),v=(d="_obj").length>(h=r).length||h.substring(h.length-d.length)!=d?u.substring(0,u.length-"_obj".length):u;i.PayloadToSend[v]=_}}else i.PayloadToSend[r]=Ko("",e)}),i}(e,t,n),a=[],u=e==E.Event,c=bt(s.PayloadToSend),h=!!r&&"fs"!==r;return u?a.push({When:0,Kind:g.SYS_CUSTOM,Args:h?[i,c,r]:[i,c]}):a.push({When:0,Kind:g.SYS_SETVAR,Args:h?[e,c,r]:[e,c]}),a},e}();function Ko(e,t){return"str"==e&&null!=t&&(t=t.trim()),null==t||"date"!=e&&t.constructor!=Date||(t=function(e){var t,n=e.constructor===Date?e:new Date(e);try{t=n.toISOString()}catch(e){t=null}return t}(t)),t}function Vo(e){return!!Po[e]}var zo=function(){return(zo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Yo=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r["throw"](e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},Qo=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),"throw":a(1),"return":a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue;}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function Go(e,t){return Yo(this,void 0,ze,function(){var n,r,i,s,a;return Qo(this,function(u){switch(u.label){case 0:if(u.trys.push([0,2,,3]),oe||ae)return[2,zo(zo({},t),{status:1})];if(!e.document||0!==t.status)return[2,t];if(1===(n=function(e,t){var n=t.functions,r={},i=zo({},t.helpers);if(i.functionToString=function(e,t){var n,r,i=null===(n=e["__core-js_shared__"])||void 0===n?void 0:n.inspectSource;if(Xo(i,1))return function(){return i(this)};var o=null===(r=e["__core-js_shared__"])||void 0===r?void 0:r["native-function-to-string"];if(Xo(o))return o;var s=t.__zone_symbol__OriginalDelegate;if(Xo(s))return s;if(Xo(t))return t;return}(e,i.functionToString),!i.functionToString)return t;var o=!1;for(var s in n)if(n[s]){if(r[s]=es(i.functionToString,n[s]),r[s]||(r[s]=ts(i.functionToString,i,s)),!r[s])return t;r[s]!==n[s]&&(o=!0)}else r[s]=void 0;return{status:1,functions:o?r:n,helpers:i}}(e,t)).status)return[2,n];o("The window is dirty; rebuilding Windex from a fresh global."),(r=e.document.createElement("iframe")).id="FullStory-iframe",r.className="fs-hide",r.style.display="none",i=e.document.body||e.document.head||e.document.documentElement||e.document;try{i.appendChild(r)}catch(e){return[2,zo(zo({},t),{status:1})]}return r.contentWindow?(s=Qe(r.contentWindow,1),r.parentNode&&r.parentNode.removeChild(r),2===s.status?[2,zo(zo({},t),{status:1})]:[4,Jo(s,t)]):[2,zo(zo({},t),{status:1})];case 1:return[2,u.sent()];case 2:return a=u.sent(),ee.sendToBugsnag(a,"error"),[2,zo(zo({},t),{status:1})];case 3:return[2];}})})}function Jo(e,t){var n,r=new ze(function(e){return n=e});return setTimeout(function(){try{e.functions.jsonParse("[]").push(0)}catch(e){n(zo(zo({},t),{status:1}))}n(e)}),r}function Xo(e,t){var n;if(void 0===t&&(t=0),!e)return!1;var r=function(e){try{return void e.call(null)}catch(e){return(e.stack||"").replace(/__fs_nomangle_check_stack(.|\n)*$/,"")}},i=void 0;0!==t&&"number"==typeof Error.stackTraceLimit&&(i=Error.stackTraceLimit,Error.stackTraceLimit=Number.POSITIVE_INFINITY);var o=[function(){throw new Error("")},e],s=function __fs_nomangle_check_stack(){return o.map(r)}(),a=s[0],u=s[1];if(void 0!==i&&(Error.stackTraceLimit=i),!a||!u)return!1;for(var c="\n".charCodeAt(0),h=Math.min(a.length,u.length),d=1,l=d;l<h;l++){var p=a.charCodeAt(a.length-l),f=u.charCodeAt(u.length-l);if(p!=f)break;f!=c&&l!=h-1||(d=l)}return(null!=(n=u.slice(0,u.length-d+1).match(/\.js:\d+([:)]|$)/gm))?n:[]).length<=t}function $o(e,t){return e.call(t).indexOf("[native code]")>=0}var Zo=["__zone_symbol__OriginalDelegate","nr@original"];function es(e,t){if(t){for(var n=0,r=Zo;n<r.length;n++){var i=t[r[n]];if("function"==typeof i&&$o(e,i))return i}return $o(e,t)?t:void 0}}function ts(e,t,n){switch(n){case"arrayIsArray":var r=es(e,t.objectToString);if(!r)return;return t.objectToString=r,function(e){return"[object Array]"==r.call(e)};default:return;}}var ns=function(){function e(e,t){void 0===t&&(t=function(e){return new WebSocket(e)}),this._newSock=t,this._connecting=!1,this._connected=!1,this._queue={},this._seq=1,this._wnd=e.window,this._scheme=e.options.scheme,this._host=e.options.recHost}return e.isSupported=function(){return"WebSocket"in window},e.prototype.page=function(e,t,n){this.request({Cmd:1,Page:e},function(e){return t(e.Page)},n)},e.prototype.bundle=function(e){var t=e.deltaT,n=e.serverPageStart,r=e.serverBundleTime;return this.request({Cmd:2,Bundle:{OrgId:e.orgId,UserId:e.userId,SessionId:e.sessionId,PageId:e.pageId,Seq:e.bundle.Seq,DeltaT:null===t?void 0:t,PageStart:null==n?void 0:n,PrevBundleTime:null==r?void 0:r,Bundle:e.bundle}},function(t){return e.win(t.Bundle)},e.lose)},e.prototype.bundleBeacon=function(e){return ao(this._scheme,this._host,e)},e.prototype.exponentialBackoffMs=function(e,t){var n=Math.min(x.BackoffMax,5e3*Math.pow(2,e));return t?n+.25*Math.random()*n:n},e.prototype.request=function(e,t,n){e.Seq=this._seq++;var r=bt(e);return this._queue[e.Seq]={payload:r,win:t,lose:n},this.maybeConnect(),r.length},e.prototype.handleMessage=function(e){var t;try{t=Tt(e)}catch(e){return void o("socket: error parsing frame: "+e.toString())}var n=this._queue[t.Seq];delete this._queue[t.Seq],n?3==t.Cmd?(o(t.Fail.Error),n.lose(t.Fail.Status)):n.win(t):o("socket: mismatched request seq "+t.Seq+"; ignoring")},e.prototype.drainQueue=function(){if(this._connected)for(var e in this._queue){var t=this._queue[e];t.sent||(this._sock.send(t.payload),t.sent=!0)}else o("socket: attempt to drain queue when disconnected.")},e.prototype.reconnect=function(){var e=this;if(!this._connected){for(var t in this._queue)this._queue[t].sent=!1;var n=0;Ye.setWindowTimeout(this._wnd,ee.wrap(function(){return e.maybeConnect()}),this.exponentialBackoffMs(n++,!0))}},e.prototype.maybeConnect=function(){var e=this;if(this._connected)this.drainQueue();else if(!this._connecting){this._connecting=!0;var t=("https:"==this._scheme?"wss:":"ws:")+"//"+this._host+"/rec/sock";this._sock=this._newSock(t),this._sock.onopen=function(t){e._connecting=!1,e._connected=!0,e.drainQueue()},this._sock.onmessage=function(t){e.handleMessage(t.data),e.drainQueue()},this._sock.onclose=function(t){o("socket: closed; reconnecting"),e._connecting=e._connected=!1,e.reconnect()},this._sock.onerror=function(t){o("socket: error; reconnecting"),e._connecting=e._connected=!1,e.reconnect()}}},e}(),rs=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),is=function(){function e(){var e=this;this.measurementTasks=null,this.performingMeasurements=!1,this.recursionDepth=0,this.performMeasurements=ee.wrap(function(){if(e.performingMeasurements)ee.sendToBugsnag("performMeasurements() already in progress","error");else{e.performingMeasurements=!0;try{if(!e.measurementTasks)return;for(var t=0;t<e.measurementTasks.length;t++)e.measurementTasks[t]();e.measurementTasks=null}finally{e.performingMeasurements=!1}}})}return e.create=function(e){return e.ResizeObserver?new os(e,e.ResizeObserver):Ye.requestWindowAnimationFrame&&e.MessageChannel?new ss(e,Ye.requestWindowAnimationFrame,e.MessageChannel):new as(e)},e.prototype.requestMeasureTask=function(e){var t=this;if(this.recursionDepth>16)ee.sendToBugsnag("Too much synchronous recursion in requestMeasureTask","error");else{var n=this.performingMeasurements?this.recursionDepth:0,r=ee.wrap(function(){var r=t.recursionDepth;t.recursionDepth=n+1;try{e()}finally{t.recursionDepth=r}});this.measurementTasks?this.measurementTasks.push(r):(this.measurementTasks=[r],this.schedule())}},e}(),os=function(e){function t(t,n){var r=e.call(this)||this;return r.wnd=t,r.ResizeObserver=n,r}return rs(t,e),t.prototype.schedule=function(){var e=this,t=this.ResizeObserver,n=this.wnd.document,r=n.body||n.documentElement||n.head,i=new t(function(){i.unobserve(r),e.performMeasurements()});i.observe(r)},t}(is),ss=function(e){function t(t,n,r){var i=e.call(this)||this;return i.wnd=t,i.requestWindowAnimationFrame=n,i.onRAF=ee.wrap(function(){i.ch.port2.postMessage(void 0)}),i.ch=new r,i}return rs(t,e),t.prototype.schedule=function(){this.ch.port1.onmessage=this.performMeasurements,this.requestWindowAnimationFrame(this.wnd,this.onRAF)},t}(is),as=function(e){function t(t){var n=e.call(this)||this;return n.wnd=t,n}return rs(t,e),t.prototype.schedule=function(){Ye.setWindowTimeout(this.wnd,this.performMeasurements,0)},t}(is),us=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r["throw"](e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})},cs=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),"throw":a(1),"return":a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue;}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},hs=function(){function e(){}return e.prototype.createTopRecorder=function(e){var t=e.window._fs_use_socket&&ns.isSupported()?new ns(e):new ro(e);return new Eo(e,t)},e.prototype.createInnerRecorder=function(e){return new xo(e)},e}(),ds=function(){function e(e,t){void 0===e&&(e=window),void 0===t&&(t=new hs),this.wnd=e,this.recMaker=t,this.scheme="https:",this.domDoneLoaded=!1,this.waitingOnStart=!1,this.reidentifyCount=0}return e.prototype.init=function(){var e,t;A(this.wnd)||(e=this.wnd,t=O(this.wnd),e[p]=t,t in e||(e[t]={}),function(e){Yo(this,void 0,ze,function(){var t;return Qo(this,function(n){switch(n.label){case 0:return[4,Go(e,Ye.snapshot)];case 1:return t=n.sent(),Ye.rebuildFromSnapshot(t),[2];}})})}(this.wnd),this.initApi(),this.start())},e.prototype.getCurrentSessionURL=function(e){return this.recorder?this.recorder.getCurrentSessionURL(e):null},e.prototype.getCurrentSession=function(){return this.recorder?this.recorder.getCurrentSession():null},e.prototype.enableConsole=function(){this.recorder&&this.recorder.console().enable()},e.prototype.disableConsole=function(){this.recorder&&this.recorder.console().disable()},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._api(Io.log,e)},e.prototype.shutdownApi=function(){this.shutdown(y.Api)},e.prototype.shutdown=function(e){this.recorder&&!this.deferredStart?(this.recorder.shutdown(e),this.recorder=null):o("Recording already shut down.")},e.prototype.restart=function(){if(this.deferredStart)return this.deferredStart(),void(this.deferredStart=null);this.recorder?o("Recording already started."):this.recorder=this.createRecorder(!0)},e.prototype.splitPage=function(e,t){return us(this,void 0,ze,function(){return cs(this,function(n){switch(n.label){case 0:return t&&null==this.identity?(o("Can't re-identify from an iframe"),[2]):this.waitingOnStart?(this.splitPending=[e,t],[2]):(this.shutdown(e),[4,Bi(0)]);case 1:return n.sent(),[4,Bi(0)];case 2:return n.sent(),t&&this.identity&&this.identity.clear(),this.restart(),[2];}})})},e.prototype.executeApiSequence=function(e,t,n){if(this.inFrame())return o("API calls may only be made from the top-most frame"),null;for(var r,i,s=[],a=!1,u=0;u<t.length;u++)try{var c=t[u],h=c[0],d=c[1];switch(h){case Io.rec:r=!!d;break;case Io.log:var l=d,p=l[0],f=l.slice(1);(b=e.console().logEvent(p,f))&&s.push(b);break;case Io.consent:i=!!d;break;case Io.account:case Io.user:case Io.customEvent:var _=this.vars.api(h,d,n),v=_.events;_.reidentify&&(s=[],i=void 0,a=!0),s.push.apply(s,v);break;default:o("Unrecognized api: "+h);}}catch(e){ee.sendToBugsnag(e,"error")}void 0!==i&&(s.push({Kind:g.SYS_SETCONSENT,Args:[i]}),e.setConsent(i));for(var y=e.queue(),m=0,w=s;m<w.length;m++){var b=w[m];y.enqueue(b)}return{reidentified:a,recordingShouldBeEnabled:r}},e.prototype._api=function(e,t,n){var r;if(this.recorder){var i=null!=(r=this.executeApiSequence(this.recorder,[[e,t]],n))?r:{reidentified:!1},s=i.reidentified,a=i.recordingShouldBeEnabled;if(s){if(this.reidentifyCount>=8)return void o("reidentified too many times; giving up");this.reidentifyCount++,D(this.wnd,[e,t]),this.splitPage(y.Reidentify,!0)}void 0!==a&&(a?this.restart():this.shutdown(y.Api))}else D(this.wnd,[e,t])},e.prototype._cookies=function(){return this.identity?this.identity.cookies():(o("Error in FS integration: Can't get cookies from inside an iframe"),null)},e.prototype._setCookie=function(e,t){this.identity?this.identity.setCookie(e,t):o("Error in FS integration: Can't set cookies from inside an iframe")},e.prototype._withEventQueue=function(e,t){if(this.recorder){var n=this.recorder.queue(),r=this.recorder.pageSignature();null!=n&&null!=r?e===r?t(n):ee.sendToBugsnag("Error in _withEventQueue: Page Signature mismatch","error",{pageSignature:r,callerSignature:e}):o("Error getting event queue or page signature: Recorder not initialized")}else o("Error in FS integration: Recorder not initialized")},e.prototype.initApi=function(){var e=L(this.wnd);e?(e.getCurrentSessionURL=wt(this.getCurrentSessionURL,this),e.getCurrentSession=wt(this.getCurrentSession,this),e.enableConsole=wt(this.enableConsole,this),e.disableConsole=wt(this.disableConsole,this),e.log=wt(this.log,this),e.shutdown=wt(this.shutdownApi,this),e.restart=wt(this.restart,this),e._api=wt(this._api,this),e._cookies=wt(this._cookies,this),e._setCookie=wt(this._setCookie,this),e._withEventQueue=wt(this._withEventQueue,this)):o("Missing browser API namespace; couldn't initialize API.")},e.prototype.start=function(){var e,t=this;e=M(this.wnd),r=e,o("script version UNSET (compiled at 1582214498)");var n=q(this.wnd);if(n){this.orgId=n;var i,s=(i=this.wnd)._fs_script||K(H(i));if(s){this.script=s;var a=U(this.wnd);if(a){this.recHost=a;var u=function(e){return e._fs_app_host||j(H(e))}(this.wnd);u?(this.appHost=u,o("script: "+this.script),o("recording host: "+this.recHost),o("orgid: "+this.orgId),"localhost:8080"==this.recHost&&(this.scheme="http:"),this.inFrame()||(this.identity=new Ao(this.wnd.document),this.vars=new jo(this.identity),this.identity.initFromCookies(this.recHost,this.orgId)),this.canRecord(this.orgId)?(this.recorder=this.createRecorder(),this.recorder.eventWatcher().watchEvents(),this.hookLoadEvents(),this.wnd.addEventListener("message",ee.wrap(function(e){if("string"==typeof e.data&&(e.source==t.wnd.parent||e.source==t.wnd))switch(go(e.data)[0]){case"ShutdownFrame":t.shutdown(y.FsShutdownFrame);break;case"RestartFrame":t.restart();}}))):this.hailMary()):o("Missing global _fs_host or _fs_app_host. Recording disabled.")}else o("Missing global _fs_host or _fs_rec_host. Recording disabled.")}else o("Missing global _fs_host or _fs_rec_host. Recording disabled.")}else o("Missing global _fs_org. Recording disabled.")},e.prototype._context=function(e){var t=this;return{window:this.wnd,time:new $t,measurer:is.create(this.wnd),options:{orgId:this.orgId,scheme:this.scheme,script:this.script,recHost:this.recHost,appHost:this.appHost},recording:{bundleUploadInterval:function(){return e().bundleUploadInterval()},inFrame:this.inFrame(),vars:this.vars,identity:this.identity,splitPage:function(e,n){return t.splitPage(e,n)},pageSignature:function(){return e().pageSignature()}},queue:function(){return e().queue()}}},e.prototype.createRecorder=function(e){var t,n,r=this,i=this._context(function(){return n}),o=!1,s=!1;if(this.inFrame())n=this.recMaker.createInnerRecorder(i);else{n=this.recMaker.createTopRecorder(i);var a=null!=(t=this.executeApiSequence(n,function(e){var t=L(e);if(!t)return[];var n=t.q;return n?(delete t.q,n):[]}(this.wnd)))?t:{},u=a.reidentified,c=a.recordingShouldBeEnabled;void 0!==c&&(s=!c),o=!!u}this.waitingOnStart=!0;var h=function(){n.start(o,function(){r.waitingOnStart=!1,e&&n.tellAllFramesTo(["RestartFrame"]),r.splitPending&&(r.splitPage(r.splitPending[0],r.splitPending[1]),r.splitPending=null)}),e&&n.eventWatcher().watchEvents()};return s?this.deferredStart=h:h(),n},e.prototype.inFrame=function(){if("boolean"==typeof this._inFrame)return this._inFrame;var e=B(this.wnd);return N(this.wnd)?this._inFrame=!1:this.wnd!=top?this._inFrame=!0:e?e.init&&e.init(this.orgId)&&(this._inFrame=!0):this._inFrame=!1,this._inFrame},e.prototype.canRecord=function(e){return(this.wnd.MutationObserver||this.wnd.MutationEvent)&&this.wnd.postMessage&&at&&2!==Ye.snapshot.status?!!function e(t){if(t==top||N(t)||function(e){return!!e._fs_run_in_iframe}(t)||B(t))return!0;try{return t.parent.document,e(t.parent)}catch(e){return!1}}(this.wnd)||(o("FullStory recording for this page is NOT allowed within an iFrame."),!1):(o("missing required browser features"),!1)},e.prototype.hailMary=function(){var e=this;if(this.identity){var t=W(this.wnd);o("Unable to record playback stream.");var n=document.createElement("script");this.wnd.__fs_startResponse=function(t){t&&e.identity.setIds(e.wnd,t.CookieDomain,t.UserIntId,t.SessionIntId),document.head&&document.head.removeChild(n)};var r=Wt(this.wnd.document),i=r[0],s=r[1],a=kt(this.wnd),u=a[0],c=a[1],h=Dn(On(this.wnd),this.orgId,{source:"page",type:"base"}),d=Dn(document.referrer,this.orgId,{source:"page",type:"referrer"}),l=Dn(this.wnd.location.href,this.orgId,{source:"page",type:"url"});n.src="//"+this.recHost+"/rec/page?OrgId="+this.orgId+"&UserId="+this.identity.userId()+"&Url="+encodeURIComponent(l)+"&Base="+encodeURIComponent(h)+"&Width="+i+"&Height="+s+"&ScreenWidth="+u+"&ScreenHeight="+c+"&Referrer="+encodeURIComponent(d)+"&Doctype="+encodeURIComponent(Et(document))+"&CompiledTimestamp=1582214498&Fallback=true"+(t?"&ReplayFlags="+t:""),document.head&&document.head.appendChild(n)}},e.prototype.hookLoadEvents=function(){var e=this,t=function(){e.domDoneLoaded||(e.domDoneLoaded=!0,e.recorder&&e.recorder.onDomLoad())},n=!1,r=function(){n||(n=!0,e.recorder&&e.recorder.onLoad())};switch(document.readyState){case"interactive":document.attachEvent||t();break;case"complete":t(),r();}this.domDoneLoaded||document.addEventListener("DOMContentLoaded",ee.wrap(t)),n||this.wnd.addEventListener("load",ee.wrap(function(e){t(),r()}))},e}();!function(){try{new ds().init()}catch(e){ee.sendToBugsnag(e,"error"),M(window)&&window.console&&console.log&&console.log("Failed to initialize FullStory.")}}()}]);